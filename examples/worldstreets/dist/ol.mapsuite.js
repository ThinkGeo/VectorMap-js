/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/filter/geoFilter.ts":
/*!*********************************!*\
  !*** ./src/filter/geoFilter.ts ***!
  \*********************************/
/*! exports provided: GeoFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoFilter", function() { return GeoFilter; });
var GeoFilter = /** @class */ (function () {
    function GeoFilter(filterItems) {
        this.filterItems = filterItems || [];
        this.replacedValueToIndex = false;
    }
    GeoFilter.prototype.addFilterItem = function (filterItem) {
        this.filterItems.push(filterItem);
    };
    GeoFilter.prototype.initialize = function () {
        this.initializeCore();
        this.initialized = true;
    };
    GeoFilter.prototype.initializeCore = function () { };
    GeoFilter.prototype.matchOLFeature = function (feature, zoom) {
        if (!this.initialized) {
            this.initialize();
        }
        return this.matchFeatureCore(feature, zoom);
    };
    GeoFilter.prototype.replaceVaulesToPbfIndex = function (pbfLayer) {
        this.replaceVaulesToPbfIndexCore(pbfLayer);
    };
    return GeoFilter;
}());



/***/ }),

/***/ "./src/filter/geoFilterItem.ts":
/*!*************************************!*\
  !*** ./src/filter/geoFilterItem.ts ***!
  \*************************************/
/*! exports provided: GeoFilterItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoFilterItem", function() { return GeoFilterItem; });
var GeoFilterItem = /** @class */ (function () {
    function GeoFilterItem(key, operator, value) {
        this.key = key;
        this.operator = operator;
        this.value = value;
    }
    GeoFilterItem.createFilterItem = function (filterItemString) {
        var operator = filterItemString.match(this.operatorRegex)[0];
        var parts = filterItemString.split(operator);
        var item = new GeoFilterItem(parts[0], operator, parts[1]);
        return item;
    };
    GeoFilterItem.operatorRegex = new RegExp("[<>!=]+", "g");
    return GeoFilterItem;
}());



/***/ }),

/***/ "./src/filter/geoNumberAttributeFilter.ts":
/*!************************************************!*\
  !*** ./src/filter/geoNumberAttributeFilter.ts ***!
  \************************************************/
/*! exports provided: GeoNumberAttributeFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoNumberAttributeFilter", function() { return GeoNumberAttributeFilter; });
/* harmony import */ var _geoRangeFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoRangeFilter */ "./src/filter/geoRangeFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoNumberAttributeFilter = /** @class */ (function (_super) {
    __extends(GeoNumberAttributeFilter, _super);
    function GeoNumberAttributeFilter(filterItems) {
        return _super.call(this, filterItems) || this;
    }
    return GeoNumberAttributeFilter;
}(_geoRangeFilter__WEBPACK_IMPORTED_MODULE_0__["GeoRangeFilter"]));



/***/ }),

/***/ "./src/filter/geoRangeFilter.ts":
/*!**************************************!*\
  !*** ./src/filter/geoRangeFilter.ts ***!
  \**************************************/
/*! exports provided: GeoRangeFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoRangeFilter", function() { return GeoRangeFilter; });
/* harmony import */ var _geoFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoFilter */ "./src/filter/geoFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoRangeFilter = /** @class */ (function (_super) {
    __extends(GeoRangeFilter, _super);
    function GeoRangeFilter(filterItems) {
        var _this = _super.call(this, filterItems) || this;
        _this.ranges = [];
        _this.allowedValues = [];
        _this.disallowedValues = [];
        return _this;
    }
    GeoRangeFilter.prototype.initializeCore = function () {
        this.filterItems.sort(function (a, b) { return +a.value - +b.value; });
        for (var i = 0; i < this.filterItems.length; i++) {
            var filterItem = this.filterItems[i];
            this.key = filterItem.key;
            var value = +filterItem.value;
            switch (filterItem.operator) {
                case ">":
                    this.ranges.push([value + 0.00001, Number.POSITIVE_INFINITY]);
                    break;
                case ">=":
                    this.ranges.push([value, Number.POSITIVE_INFINITY]);
                    break;
                case "!=":
                    this.disallowedValues.push(value);
                    break;
                case "=":
                    this.allowedValues.push(value);
                    break;
            }
        }
        for (var i = 0; i < this.filterItems.length; i++) {
            var filterItem = this.filterItems[i];
            var value = +filterItem.value;
            var range = GeoRangeFilter.getRange(this.ranges, value);
            switch (filterItem.operator) {
                case "<":
                    if (range) {
                        range[1] = value + 0.00001;
                    }
                    else {
                        range = [Number.NEGATIVE_INFINITY, value + 0.00001];
                        this.ranges.push(range);
                    }
                    break;
                case "<=":
                    if (range) {
                        range[1] = value;
                    }
                    else {
                        range = [Number.NEGATIVE_INFINITY, value];
                        this.ranges.push(range);
                    }
                    break;
            }
        }
    };
    GeoRangeFilter.prototype.matchFeatureCore = function (feature, zoom) {
        var currentValue;
        if (this.replacedValueToIndex) {
            currentValue = feature.properties[this.key];
        }
        else {
            currentValue = feature.properties[this.key];
        }
        return this.isInRange(+currentValue);
    };
    GeoRangeFilter.prototype.replaceVaulesToPbfIndexCore = function (pbfLayer) {
        this.replacedValueToIndex = true;
    };
    GeoRangeFilter.prototype.isInRange = function (currentValue) {
        if (this.disallowedValues.includes(currentValue)) {
            return false;
        }
        if (this.allowedValues.includes(currentValue)) {
            return true;
        }
        for (var i = 0; i < this.ranges.length; i++) {
            var range = this.ranges[i];
            if (range.length === 1) {
                if (currentValue >= range[0]) {
                    return true;
                }
            }
            else {
                if (currentValue >= range[0] && currentValue <= range[1]) {
                    return true;
                }
            }
        }
    };
    GeoRangeFilter.getRange = function (ranges, value) {
        for (var i = 0; i < ranges.length; i++) {
            var range = ranges[i];
            if (value >= range[0] && value <= range[1]) {
                return range;
            }
        }
        return null;
    };
    return GeoRangeFilter;
}(_geoFilter__WEBPACK_IMPORTED_MODULE_0__["GeoFilter"]));



/***/ }),

/***/ "./src/filter/geoRegexFilter.ts":
/*!**************************************!*\
  !*** ./src/filter/geoRegexFilter.ts ***!
  \**************************************/
/*! exports provided: GeoRegexFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoRegexFilter", function() { return GeoRegexFilter; });
/* harmony import */ var _geoFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoFilter */ "./src/filter/geoFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoRegexFilter = /** @class */ (function (_super) {
    __extends(GeoRegexFilter, _super);
    function GeoRegexFilter(filterItems) {
        return _super.call(this, filterItems) || this;
    }
    GeoRegexFilter.prototype.initializeCore = function () {
        var value = this.filterItems[0].value;
        value = value.slice(2, value.length - 1);
        this.regex = new RegExp(value, "g");
        this.key = this.filterItems[0].key;
    };
    GeoRegexFilter.prototype.matchFeatureCore = function (feature, zoom) {
        var currentValue;
        if (this.replacedValueToIndex) {
            currentValue = feature.properties[this.key];
        }
        else {
            currentValue = feature.properties[this.key];
        }
        if (!currentValue) {
            return false;
        }
        return currentValue.toString().match(this.regex) !== null;
    };
    GeoRegexFilter.prototype.replaceVaulesToPbfIndexCore = function (pbfLayer) {
        this.replacedValueToIndex = true;
    };
    return GeoRegexFilter;
}(_geoFilter__WEBPACK_IMPORTED_MODULE_0__["GeoFilter"]));



/***/ }),

/***/ "./src/filter/geoStringAttributeFilter.ts":
/*!************************************************!*\
  !*** ./src/filter/geoStringAttributeFilter.ts ***!
  \************************************************/
/*! exports provided: GeoStringAttributeFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoStringAttributeFilter", function() { return GeoStringAttributeFilter; });
/* harmony import */ var _geoFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoFilter */ "./src/filter/geoFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoStringAttributeFilter = /** @class */ (function (_super) {
    __extends(GeoStringAttributeFilter, _super);
    function GeoStringAttributeFilter(filterItems) {
        return _super.call(this, filterItems) || this;
    }
    GeoStringAttributeFilter.prototype.initializeCore = function () {
        var expectedValue = this.filterItems[0].value;
        expectedValue = expectedValue.slice(1, expectedValue.length - 1);
        this.expectedValues = expectedValue.split(",");
        this.key = this.filterItems[0].key;
    };
    GeoStringAttributeFilter.prototype.matchFeatureCore = function (feature, zoom) {
        var currentValue;
        var currentExpectedValues;
        if (this.replacedValueToIndex) {
            currentValue = feature.propertiesIndex[this.keyIndex];
            currentExpectedValues = this.expectedValueIndexs;
        }
        else {
            currentValue = feature.properties[this.key];
            currentExpectedValues = this.expectedValues;
        }
        switch (this.filterItems[0].operator) {
            case "=":
                return currentExpectedValues.includes(currentValue);
            case "!=":
            default:
                return !currentExpectedValues.includes(currentValue);
        }
    };
    GeoStringAttributeFilter.prototype.replaceVaulesToPbfIndexCore = function (pbfLayer) {
        if (!this.initialized) {
            this.initialize();
        }
        this.keyIndex = pbfLayer.keys.indexOf(this.key);
        var replacedExpectedVaules = [];
        for (var j = 0, jj = this.expectedValues.length; j < jj; j++) {
            var numberValue = +this.expectedValues[j];
            if (isNaN(numberValue)) {
                replacedExpectedVaules.push(pbfLayer.values.indexOf(this.expectedValues[j]));
            }
            else {
                replacedExpectedVaules.push(pbfLayer.values.indexOf(numberValue));
            }
        }
        this.expectedValueIndexs = replacedExpectedVaules;
        this.replacedValueToIndex = true;
    };
    return GeoStringAttributeFilter;
}(_geoFilter__WEBPACK_IMPORTED_MODULE_0__["GeoFilter"]));



/***/ }),

/***/ "./src/filter/geoZoomFilter.ts":
/*!*************************************!*\
  !*** ./src/filter/geoZoomFilter.ts ***!
  \*************************************/
/*! exports provided: GeoZoomFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoZoomFilter", function() { return GeoZoomFilter; });
/* harmony import */ var _geoRangeFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoRangeFilter */ "./src/filter/geoRangeFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoZoomFilter = /** @class */ (function (_super) {
    __extends(GeoZoomFilter, _super);
    function GeoZoomFilter(filterItems) {
        return _super.call(this, filterItems) || this;
    }
    GeoZoomFilter.prototype.matchFeatureCore = function (feature, zoom) {
        return this.isInRange(zoom);
    };
    GeoZoomFilter.prototype.replaceVaulesToPbfIndexCore = function (pbfLayer) {
        this.replacedValueToIndex = true;
    };
    return GeoZoomFilter;
}(_geoRangeFilter__WEBPACK_IMPORTED_MODULE_0__["GeoRangeFilter"]));



/***/ }),

/***/ "./src/format/geoMvt.ts":
/*!******************************!*\
  !*** ./src/format/geoMvt.ts ***!
  \******************************/
/*! exports provided: GeoMVTFormat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoMVTFormat", function() { return GeoMVTFormat; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var GeoMVTFormat = /** @class */ (function (_super) {
    __extends(GeoMVTFormat, _super);
    function GeoMVTFormat(styleJSonCache, options) {
        var _this = this;
        options.layerName = options.layerName ? options.layerName : "layerName";
        _this = _super.call(this, options) || this;
        _this.isMultithread = options.multithread;
        _this.minimalist = options.minimalist;
        _this.maxDataZoom = options.maxDataZoom ? options.maxDataZoom : 14;
        _this.layerName = options.layerName;
        _this.styleJsonCache = styleJSonCache;
        _this.maxDataZoomCache = {};
        _this.registeredLoadEvents = {};
        _this.lruCache = new ol.structs.LRUCache(15);
        _this.sourceCache = {};
        return _this;
    }
    GeoMVTFormat.prototype.getLayerName = function () {
        return this.layerName;
    };
    GeoMVTFormat.prototype.registerTileLoadEvent = function (tile, success, failure, callback) {
        var hasRequested = true;
        var requestKey = tile.requestTileCoord.join(",") + "," + tile.tileCoord[0];
        var loadEventInfo = {
            tile: tile,
            successFunction: success,
            failureFunction: failure,
            callback: callback
        };
        if (this.registeredLoadEvents[requestKey] === undefined) {
            this.registeredLoadEvents[requestKey] = [];
            hasRequested = false;
        }
        this.registeredLoadEvents[requestKey].push(loadEventInfo);
        return hasRequested;
    };
    GeoMVTFormat.prototype.readFeaturesAndCreateInstructsNew = function (source, requestTileCoord, tileCoord) {
        var pbf = new ol.ext.PBF((source));
        var pbfLayers = pbf.readFields(ol.format.MVT.pbfReaders_.layers, {});
        var pbfLayer;
        var features = [];
        var featureIndex = -1;
        var zoomMatchedGeoStylesGroupByLayerId = this.styleJsonCache.geoStyleGroupByZoom[tileCoord[0]];
        if (!zoomMatchedGeoStylesGroupByLayerId) {
            return features;
        }
        var pbfLayerNamesWithGeoStyle = [];
        for (var pbfLayerName in zoomMatchedGeoStylesGroupByLayerId) {
            pbfLayerNamesWithGeoStyle.push(pbfLayerName);
        }
        var instructsCache = [];
        for (var name_1 in pbfLayers) {
            if (this.layers_ && this.layers_.indexOf(name_1) === -1) {
                continue;
            }
            if (pbfLayerNamesWithGeoStyle.indexOf(name_1) === -1) {
                continue;
            }
            pbfLayer = pbfLayers[name_1];
            var cacheTrees = zoomMatchedGeoStylesGroupByLayerId[name_1];
            if (cacheTrees && cacheTrees.length > 0) {
                this.replaceFiltersToIndexOfPbfLayer(cacheTrees, pbfLayer);
                var _loop_1 = function (i) {
                    var rawFeature = ol.format.MVT.readRawFeature_(pbf, pbfLayer, i);
                    var feature_1 = void 0;
                    var _loop_2 = function (j) {
                        var cacheTree = cacheTrees[j];
                        var treeIndex = cacheTree.treeIndex;
                        if (instructsCache[treeIndex] === undefined) {
                            instructsCache[treeIndex] = {
                                min: 10,
                                max: -10
                            };
                        }
                        var matchedNode;
                        var checkNodeMatched = function (node) {
                            var styleJsonCacheItem = node.data;
                            var matched = false;
                            if (styleJsonCacheItem.filterGroup.length > 0) {
                                for (var i_1 = 0; i_1 < styleJsonCacheItem.filterGroup.length; i_1++) {
                                    var filters = styleJsonCacheItem.filterGroup[i_1];
                                    var groupMatched = true;
                                    for (var j_1 = 0; j_1 < filters.length; j_1++) {
                                        var filter = filters[j_1];
                                        if (!filter.matchOLFeature(rawFeature, tileCoord[0])) {
                                            groupMatched = false;
                                            break;
                                        }
                                    }
                                    if (groupMatched) {
                                        matched = true;
                                        break;
                                    }
                                }
                            }
                            else {
                                matched = true;
                            }
                            return matched;
                        };
                        var selectNode = function (node) {
                            matchedNode = node.data;
                        };
                        cacheTree.traverseNode(checkNodeMatched, selectNode);
                        if (matchedNode) {
                            if (feature_1 === undefined) {
                                feature_1 = this_1.createFeature_(pbf, rawFeature);
                                features.push(feature_1);
                                featureIndex += 1;
                            }
                            var zindex = void 0;
                            if (cacheTree.root.data.zIndex) {
                                zindex = rawFeature.properties[cacheTree.root.data.zIndex];
                                feature_1.properties_[cacheTree.root.data.zIndex] = zindex;
                            }
                            if (isNaN(zindex)) {
                                zindex = 0;
                            }
                            if (instructsCache[treeIndex][zindex] === undefined) {
                                instructsCache[treeIndex][zindex] = [];
                                if (zindex < instructsCache[treeIndex]["min"]) {
                                    instructsCache[treeIndex]["min"] = zindex;
                                }
                                if (zindex > instructsCache[treeIndex]["max"]) {
                                    instructsCache[treeIndex]["max"] = zindex;
                                }
                            }
                            instructsCache[treeIndex][zindex].push([featureIndex, matchedNode]);
                            feature_1.extent_ = undefined;
                        }
                    };
                    for (var j = 0; j < cacheTrees.length; j++) {
                        _loop_2(j);
                    }
                };
                var this_1 = this;
                for (var i = 0; i < pbfLayer.length; i++) {
                    _loop_1(i);
                }
            }
            this.extent_ = pbfLayer ? [0, 0, pbfLayer.extent, pbfLayer.extent] : null;
        }
        var instructs = [];
        for (var i = 0; i < instructsCache.length; i++) {
            var instructsInOneTree = instructsCache[i];
            if (instructsInOneTree) {
                for (var j = instructsInOneTree.min, jj = instructsInOneTree.max; j <= jj; j++) {
                    var instructsInOneZIndex = instructsInOneTree[j];
                    if (instructsInOneZIndex) {
                        var childrenInstructs = [];
                        for (var h = 0; h < instructsInOneZIndex.length; h++) {
                            var instruct = instructsInOneZIndex[h];
                            var feature = features[instruct[0]];
                            feature.styleId = feature.styleId ? feature.styleId : {};
                            if (instruct[1].geoStyle) {
                                feature.styleId[instruct[1].geoStyle.id] = 0;
                                instructs.push([instruct[0], instruct[1].geoStyle, i]);
                            }
                            if (instruct[1].childrenGeoStyles) {
                                for (var k = 0; k < instruct[1].childrenGeoStyles.length; k++) {
                                    feature.styleId[instruct[1].childrenGeoStyles[k].id] = 1;
                                    childrenInstructs.push([instruct[0], instruct[1].childrenGeoStyles[k], i]);
                                }
                            }
                        }
                        Array.prototype.push.apply(instructs, childrenInstructs);
                    }
                }
            }
        }
        var subTileCachedInstruct = {};
        var offsetZ = tileCoord[0] - requestTileCoord[0];
        // TODO Get Extent 
        var tileSize = 4096 / Math.pow(2, offsetZ);
        var tileRange = this.getTileRange(requestTileCoord, tileCoord[0]);
        var tiles = {};
        for (var x = tileRange[0]; x <= tileRange[2]; x++) {
            var minX = (x - tileRange[0]) * tileSize;
            var maxX = (x - tileRange[0] + 1) * tileSize;
            for (var y = tileRange[3]; y >= tileRange[1]; y--) {
                var minY = (tileRange[3] - y) * tileSize;
                var maxY = (tileRange[3] - y + 1) * tileSize;
                tiles["" + [x, y]] = [minX, minY, maxX, maxY];
            }
        }
        for (var i = 0; i < instructs.length; i++) {
            var instruct = instructs[i];
            var feature_2 = features[instruct[0]];
            var featureExtent = feature_2.getExtent();
            var featureTileRange = this.getFeatureTileRange(featureExtent, 4096, tileSize, requestTileCoord, offsetZ);
            for (var x = tileRange[0] > featureTileRange[0] ? tileRange[0] : featureTileRange[0], xx = featureTileRange[2] > tileRange[2] ? tileRange[2] : featureTileRange[2]; x <= xx; x++) {
                for (var y = tileRange[1] > featureTileRange[1] ? tileRange[1] : featureTileRange[1], yy = featureTileRange[3] > tileRange[3] ? tileRange[3] : featureTileRange[3]; y <= yy; y++) {
                    var tileKey = "" + [x, y];
                    var tileExtent = tiles[tileKey];
                    if (subTileCachedInstruct[tileKey] === undefined) {
                        subTileCachedInstruct[tileKey] = [];
                    }
                    subTileCachedInstruct[tileKey].push(instruct);
                }
            }
        }
        return [features, subTileCachedInstruct];
    };
    GeoMVTFormat.prototype.getCachedSource = function (tileCoord) {
        return this.sourceCache[tileCoord];
    };
    GeoMVTFormat.prototype.tryLoadTileFromCacheOrRegosterLoadEvent = function (tileCoord, originalZoom, cacheTileInfo) {
        var hasRequested = true;
        var tileCoordKey = tileCoord.join(",") + "," + originalZoom;
        if (this.lruCache.containsKey(tileCoordKey)) {
            var oTile = this.lruCache.get(tileCoordKey);
            this.cachedTileCallback(oTile, [cacheTileInfo]);
        }
        else {
            if (this.registeredLoadEvents[tileCoordKey] === undefined) {
                this.registeredLoadEvents[tileCoordKey] = [];
                hasRequested = false;
            }
            this.registeredLoadEvents[tileCoordKey].push(cacheTileInfo);
        }
        return hasRequested;
    };
    GeoMVTFormat.prototype.addSourceToCache = function (source, zoom, options) {
        if (this.sourceCache[options.tileCoord] === undefined) {
            this.sourceCache[options.tileCoord] = source;
        }
        var instructsTree = this.readFeaturesAndCreateInstructTrees(source, zoom, options);
        var instructs = this.getInstructs(instructsTree);
        var subTileInstructCaches = this.createSubTileInstructCaches(instructs, options);
        var sourceProject = this.readProjection(source);
        var tileCoordKey = options.tileCoord.join(",") + "," + zoom;
        var lastExtent = this.getLastExtent();
        var oTile = { subTileInstructCaches: subTileInstructCaches, sourceProject: sourceProject, lastExtent: lastExtent };
        this.lruCache.set(tileCoordKey, oTile);
        var cachedTileInfo = this.registeredLoadEvents[tileCoordKey];
        delete this.registeredLoadEvents[tileCoordKey];
        this.cachedTileCallback(oTile, cachedTileInfo);
    };
    GeoMVTFormat.prototype.readFeaturesAndCreateInstructTrees = function (source, zoom, options) {
        var pbf = new ol.ext.PBF((source));
        var pbfLayers = pbf.readFields(ol.format.MVT.pbfReaders_.layers, {});
        var features = [];
        var pbfLayer;
        var zoomMatchedGeoStylesGroupByLayerId = this.styleJsonCache.geoStyleGroupByZoom[zoom];
        if (!zoomMatchedGeoStylesGroupByLayerId) {
            return features;
        }
        var pbfLayerNamesWithGeoStyle = [];
        for (var pbfLayerName in zoomMatchedGeoStylesGroupByLayerId) {
            pbfLayerNamesWithGeoStyle.push(pbfLayerName);
        }
        var instructsCache = [];
        for (var name_2 in pbfLayers) {
            if (this.layers_ && this.layers_.indexOf(name_2) === -1) {
                continue;
            }
            if (pbfLayerNamesWithGeoStyle.indexOf(name_2) === -1) {
                continue;
            }
            pbfLayer = pbfLayers[name_2];
            options["extent"] = pbfLayer.extent;
            var cacheTrees = zoomMatchedGeoStylesGroupByLayerId[name_2];
            if (cacheTrees && cacheTrees.length > 0) {
                this.replaceFiltersToIndexOfPbfLayer(cacheTrees, pbfLayer);
                var _loop_3 = function (i) {
                    var rawFeature = ol.format.MVT.readRawFeature_(pbf, pbfLayer, i);
                    var feature = void 0;
                    var _loop_4 = function (j) {
                        var cacheTree = cacheTrees[j];
                        var treeIndex = cacheTree.treeIndex;
                        if (instructsCache[treeIndex] === undefined) {
                            instructsCache[treeIndex] = {
                                min: 10,
                                max: -10
                            };
                        }
                        var matchedNode;
                        var checkNodeMatched = function (node) {
                            var styleJsonCacheItem = node.data;
                            var matched = false;
                            if (styleJsonCacheItem.filterGroup.length > 0) {
                                for (var i_2 = 0; i_2 < styleJsonCacheItem.filterGroup.length; i_2++) {
                                    var filters = styleJsonCacheItem.filterGroup[i_2];
                                    var groupMatched = true;
                                    for (var j_2 = 0; j_2 < filters.length; j_2++) {
                                        var filter = filters[j_2];
                                        if (!filter.matchOLFeature(rawFeature, zoom)) {
                                            groupMatched = false;
                                            break;
                                        }
                                    }
                                    if (groupMatched) {
                                        matched = true;
                                        break;
                                    }
                                }
                            }
                            else {
                                matched = true;
                            }
                            return matched;
                        };
                        var selectNode = function (node) {
                            matchedNode = node.data;
                        };
                        cacheTree.traverseNode(checkNodeMatched, selectNode);
                        if (matchedNode) {
                            if (feature === undefined) {
                                feature = this_2.createFeature_(pbf, rawFeature);
                                if (this_2.minimalist) {
                                    feature.properties_ = {};
                                }
                            }
                            var zindex = void 0;
                            if (cacheTree.root.data.zIndex) {
                                zindex = rawFeature.properties[cacheTree.root.data.zIndex];
                                feature.properties_[cacheTree.root.data.zIndex] = zindex;
                            }
                            if (isNaN(zindex)) {
                                zindex = 0;
                            }
                            if (instructsCache[treeIndex][zindex] === undefined) {
                                instructsCache[treeIndex][zindex] = [];
                                if (zindex < instructsCache[treeIndex]["min"]) {
                                    instructsCache[treeIndex]["min"] = zindex;
                                }
                                if (zindex > instructsCache[treeIndex]["max"]) {
                                    instructsCache[treeIndex]["max"] = zindex;
                                }
                            }
                            instructsCache[treeIndex][zindex].push([feature, matchedNode]);
                            if (this_2.minimalist) {
                                if (matchedNode.geoStyle && (matchedNode.geoStyle.constructor.name === "GeoTextStyle" || matchedNode.geoStyle.constructor.name === "GeoShieldStyle")) {
                                    feature.properties_[matchedNode.geoStyle.name] = rawFeature.properties[matchedNode.geoStyle.name];
                                }
                                if (matchedNode.childrenGeoStyles && matchedNode.childrenGeoStyles.length > 0) {
                                    for (var i_3 = 0; i_3 < matchedNode.childrenGeoStyles.length; i_3++) {
                                        feature.properties_[matchedNode.childrenGeoStyles[i_3].name] = rawFeature.properties[matchedNode.childrenGeoStyles[i_3].name];
                                    }
                                }
                            }
                            feature.extent_ = undefined;
                        }
                    };
                    for (var j = 0; j < cacheTrees.length; j++) {
                        _loop_4(j);
                    }
                };
                var this_2 = this;
                for (var i = 0; i < pbfLayer.length; i++) {
                    _loop_3(i);
                }
            }
            this.extent_ = pbfLayer ? [0, 0, pbfLayer.extent, pbfLayer.extent] : null;
        }
        return instructsCache;
    };
    GeoMVTFormat.prototype.getInstructs = function (instructsTree) {
        var instructs = [];
        // the tress index means the index of SyleId.
        for (var i = 0; i < instructsTree.length; i++) {
            var instructsInOneTree = instructsTree[i];
            if (instructsInOneTree) {
                for (var j = instructsInOneTree.min, jj = instructsInOneTree.max; j <= jj; j++) {
                    var instructsInOneZIndex = instructsInOneTree[j];
                    if (instructsInOneZIndex) {
                        var childrenInstructs = [];
                        for (var h = 0; h < instructsInOneZIndex.length; h++) {
                            var instruct = instructsInOneZIndex[h];
                            instruct[0].styleId = instruct[0].styleId ? instruct[0].styleId : {};
                            if (instruct[1].geoStyle) {
                                instruct[0].styleId[instruct[1].geoStyle.id] = 0;
                                instructs.push([instruct[0], instruct[1].geoStyle, i]);
                            }
                            if (instruct[1].childrenGeoStyles) {
                                for (var k = 0; k < instruct[1].childrenGeoStyles.length; k++) {
                                    instruct[0].styleId[instruct[1].childrenGeoStyles[k].id] = 1;
                                    childrenInstructs.push([instruct[0], instruct[1].childrenGeoStyles[k], i]);
                                }
                            }
                        }
                        Array.prototype.push.apply(instructs, childrenInstructs);
                    }
                }
            }
        }
        return instructs;
    };
    GeoMVTFormat.prototype.createSubTileInstructCaches = function (instructs, options) {
        var subTileCachedInstruct = {};
        var offsetZ = options.originalCoord[0] - options.tileCoord[0];
        var tileSize = options.extent / Math.pow(2, offsetZ);
        var tileRange = this.getTileRange(options.tileCoord, options.originalCoord[0]);
        var tiles = {};
        for (var x = tileRange[0]; x <= tileRange[2]; x++) {
            var minX = (x - tileRange[0]) * tileSize;
            var maxX = (x - tileRange[0] + 1) * tileSize;
            for (var y = tileRange[3]; y >= tileRange[1]; y--) {
                var minY = (tileRange[3] - y) * tileSize;
                var maxY = (tileRange[3] - y + 1) * tileSize;
                tiles["" + [x, y]] = [minX, minY, maxX, maxY];
            }
        }
        for (var i = 0; i < instructs.length; i++) {
            var instruct = instructs[i];
            var featureExtent = instruct[0].getGeometry().getExtent();
            var featureTileRange = this.getFeatureTileRange(featureExtent, options.extent, tileSize, options.tileCoord, offsetZ);
            for (var x = tileRange[0] > featureTileRange[0] ? tileRange[0] : featureTileRange[0], xx = featureTileRange[2] > tileRange[2] ? tileRange[2] : featureTileRange[2]; x <= xx; x++) {
                for (var y = tileRange[1] > featureTileRange[1] ? tileRange[1] : featureTileRange[1], yy = featureTileRange[3] > tileRange[3] ? tileRange[3] : featureTileRange[3]; y <= yy; y++) {
                    var tileKey = "" + [x, y];
                    var tileExtent = tiles[tileKey];
                    if (subTileCachedInstruct[tileKey] === undefined) {
                        subTileCachedInstruct[tileKey] = [];
                    }
                    subTileCachedInstruct[tileKey].push(instruct);
                }
            }
        }
        return subTileCachedInstruct;
    };
    GeoMVTFormat.prototype.cachedTileCallback = function (oTile, cacheTileInfos) {
        for (var i = 0; i < cacheTileInfos.length; i++) {
            var cacheTileInfo = cacheTileInfos[i];
            var tileKey = "" + cacheTileInfo.tile.tileCoord[1] + "," + cacheTileInfo.tile.tileCoord[2];
            cacheTileInfo.callback(cacheTileInfo.tile, cacheTileInfo.successFunction, [], oTile.subTileInstructCaches[tileKey], oTile.sourceProject, oTile.lastExtent);
        }
    };
    GeoMVTFormat.prototype.getTileRange = function (tileCoord, zoom) {
        var x = tileCoord[1];
        var y = tileCoord[2];
        var minX = x;
        var maxX = x;
        var minY = y;
        var maxY = y;
        for (var i = tileCoord[0]; i < zoom; i++) {
            minX = minX * 2;
            maxX = maxX * 2 + 1;
            minY = minY * 2;
            maxY = maxY * 2 + 1;
        }
        return [minX, minY, maxX, maxY];
    };
    GeoMVTFormat.prototype.getFeatureTileRange = function (featureExtent, extent, tileSize, requestTileCoord, offsetZ) {
        var minX = requestTileCoord[1] * Math.pow(2, offsetZ) + Math.floor(featureExtent[0] / tileSize);
        var maxX = requestTileCoord[1] * Math.pow(2, offsetZ) + Math.floor(featureExtent[2] / tileSize);
        var minY = requestTileCoord[2] * Math.pow(2, offsetZ) + Math.floor((extent - featureExtent[3]) / tileSize);
        var maxY = requestTileCoord[2] * Math.pow(2, offsetZ) + Math.floor((extent - featureExtent[1]) / tileSize);
        return [minX, minY, maxX, maxY];
    };
    GeoMVTFormat.prototype.getExtent = function (originalCoord, tilecoord, extent) {
        var ox = originalCoord[1];
        var x = tilecoord[1];
        var xPath = [];
        while (ox !== x) {
            var remainder = ox % 2;
            xPath.push(remainder);
            ox = Math.floor(ox / 2);
        }
        var newExtent = extent;
        var offsetX = 0;
        for (var i = xPath.length - 1; i >= 0; i--) {
            newExtent = newExtent / 2;
            if (xPath[i] === 1) {
                offsetX += newExtent;
            }
        }
        var oy = originalCoord[2];
        var y = tilecoord[2];
        var yPath = [];
        while (oy !== y) {
            var remainder = oy % 2;
            yPath.push(remainder);
            oy = Math.floor(oy / 2);
        }
        newExtent = extent;
        var offsetY = 0;
        for (var i = yPath.length - 1; i >= 0; i--) {
            newExtent = newExtent / 2;
            if (yPath[i] === 0) {
                offsetY += newExtent;
            }
        }
        // TODO: add the buffer
        return [offsetX, offsetY, offsetX + newExtent, offsetY + newExtent];
    };
    GeoMVTFormat.prototype.replaceFiltersToIndexOfPbfLayer = function (cacheTrees, pbfLayer) {
        for (var i = 0, ii = cacheTrees.length; i < ii; i++) {
            var cacheTree = cacheTrees[i];
            this.replaceCacheItemFiltersToIndexOfPbfLayer(cacheTree.root, pbfLayer);
        }
    };
    GeoMVTFormat.prototype.replaceCacheItemFiltersToIndexOfPbfLayer = function (node, pbfLayer) {
        var data = node.data;
        for (var i = 0; i < data.filterGroup.length; i++) {
            var filters = data.filterGroup[i];
            var geoFilter = void 0;
            for (var j = 0; j < filters.length; j++) {
                geoFilter = filters[j];
                geoFilter.replaceVaulesToPbfIndex(pbfLayer);
            }
        }
        if (node.children) {
            for (var i = 0, ii = node.children.length; i < ii; i++) {
                this.replaceCacheItemFiltersToIndexOfPbfLayer(node.children[i], pbfLayer);
            }
        }
    };
    GeoMVTFormat.prototype.readFeaturesAndCreateInstructs = function (source, zoom, options) {
        var pbf = new ol.ext.PBF((source));
        var pbfLayers = pbf.readFields(ol.format.MVT.pbfReaders_.layers, {});
        var features = [];
        var pbfLayer;
        var zoomMatchedGeoStylesGroupByLayerId = this.styleJsonCache.geoStyleGroupByZoom[zoom];
        if (!zoomMatchedGeoStylesGroupByLayerId) {
            return features;
        }
        var pbfLayerNamesWithGeoStyle = [];
        for (var pbfLayerName in zoomMatchedGeoStylesGroupByLayerId) {
            pbfLayerNamesWithGeoStyle.push(pbfLayerName);
        }
        var instructsCache = [];
        for (var name_3 in pbfLayers) {
            if (this.layers_ && this.layers_.indexOf(name_3) === -1) {
                continue;
            }
            if (pbfLayerNamesWithGeoStyle.indexOf(name_3) === -1) {
                continue;
            }
            pbfLayer = pbfLayers[name_3];
            var cacheTrees = zoomMatchedGeoStylesGroupByLayerId[name_3];
            if (cacheTrees && cacheTrees.length > 0) {
                this.replaceFiltersToIndexOfPbfLayer(cacheTrees, pbfLayer);
                var _loop_5 = function (i) {
                    var rawFeature = ol.format.MVT.readRawFeature_(pbf, pbfLayer, i);
                    var feature = void 0;
                    var _loop_6 = function (j) {
                        var cacheTree = cacheTrees[j];
                        var treeIndex = cacheTree.treeIndex;
                        if (instructsCache[treeIndex] === undefined) {
                            instructsCache[treeIndex] = {
                                min: 10,
                                max: -10
                            };
                        }
                        var matchedNode;
                        var checkNodeMatched = function (node) {
                            var styleJsonCacheItem = node.data;
                            var matched = false;
                            if (styleJsonCacheItem.filterGroup.length > 0) {
                                for (var i_4 = 0; i_4 < styleJsonCacheItem.filterGroup.length; i_4++) {
                                    var filters = styleJsonCacheItem.filterGroup[i_4];
                                    var groupMatched = true;
                                    for (var j_3 = 0; j_3 < filters.length; j_3++) {
                                        var filter = filters[j_3];
                                        if (!filter.matchOLFeature(rawFeature, zoom)) {
                                            groupMatched = false;
                                            break;
                                        }
                                    }
                                    if (groupMatched) {
                                        matched = true;
                                        break;
                                    }
                                }
                            }
                            else {
                                matched = true;
                            }
                            return matched;
                        };
                        var selectNode = function (node) {
                            matchedNode = node.data;
                        };
                        cacheTree.traverseNode(checkNodeMatched, selectNode);
                        if (matchedNode) {
                            if (feature === undefined) {
                                feature = this_3.createFeature_(pbf, rawFeature);
                                if (this_3.minimalist) {
                                    feature.properties_ = {};
                                }
                            }
                            var zindex = void 0;
                            if (cacheTree.root.data.zIndex) {
                                zindex = rawFeature.properties[cacheTree.root.data.zIndex];
                                feature.properties_[cacheTree.root.data.zIndex] = zindex;
                            }
                            if (isNaN(zindex)) {
                                zindex = 0;
                            }
                            if (instructsCache[treeIndex][zindex] === undefined) {
                                instructsCache[treeIndex][zindex] = [];
                                if (zindex < instructsCache[treeIndex]["min"]) {
                                    instructsCache[treeIndex]["min"] = zindex;
                                }
                                if (zindex > instructsCache[treeIndex]["max"]) {
                                    instructsCache[treeIndex]["max"] = zindex;
                                }
                            }
                            instructsCache[treeIndex][zindex].push([feature, matchedNode]);
                            if (this_3.minimalist) {
                                if (matchedNode.geoStyle && matchedNode.geoStyle.constructor.name === "GeoTextStyle") {
                                    feature.properties_[matchedNode.geoStyle.name] = rawFeature.properties[matchedNode.geoStyle.name];
                                }
                                if (matchedNode.childrenGeoStyles && matchedNode.childrenGeoStyles.length > 0) {
                                    for (var i_5 = 0; i_5 < matchedNode.childrenGeoStyles.length; i_5++) {
                                        feature.properties_[matchedNode.childrenGeoStyles[i_5].name] = rawFeature.properties[matchedNode.childrenGeoStyles[i_5].name];
                                    }
                                }
                            }
                            feature.extent_ = undefined;
                        }
                    };
                    for (var j = 0; j < cacheTrees.length; j++) {
                        _loop_6(j);
                    }
                };
                var this_3 = this;
                for (var i = 0; i < pbfLayer.length; i++) {
                    _loop_5(i);
                }
            }
            this.extent_ = pbfLayer ? [0, 0, pbfLayer.extent, pbfLayer.extent] : null;
        }
        var instructs = [];
        // the tress index means the index of SyleId.
        for (var i = 0; i < instructsCache.length; i++) {
            var instructsInOneTree = instructsCache[i];
            if (instructsInOneTree) {
                for (var j = instructsInOneTree.min, jj = instructsInOneTree.max; j <= jj; j++) {
                    var instructsInOneZIndex = instructsInOneTree[j];
                    if (instructsInOneZIndex) {
                        var childrenInstructs = [];
                        for (var h = 0; h < instructsInOneZIndex.length; h++) {
                            var instruct = instructsInOneZIndex[h];
                            instruct[0].styleId = instruct[0].styleId ? instruct[0].styleId : {};
                            if (instruct[1].geoStyle) {
                                instruct[0].styleId[instruct[1].geoStyle.id] = 0;
                                instructs.push([instruct[0], instruct[1].geoStyle, i]);
                            }
                            if (instruct[1].childrenGeoStyles) {
                                for (var k = 0; k < instruct[1].childrenGeoStyles.length; k++) {
                                    instruct[0].styleId[instruct[1].childrenGeoStyles[k].id] = 1;
                                    childrenInstructs.push([instruct[0], instruct[1].childrenGeoStyles[k], i]);
                                }
                            }
                        }
                        Array.prototype.push.apply(instructs, childrenInstructs);
                    }
                }
            }
        }
        return [features, instructs];
    };
    GeoMVTFormat.readRawFeature_ = function (pbf, layer, i) {
        pbf.pos = layer.features[i];
        var end = pbf.readVarint() + pbf.pos;
        var feature = {
            layer: layer,
            type: 0,
            properties: {},
            propertiesIndex: {}
        };
        pbf.readFields(ol.format.MVT.pbfReaders_.featureColumnValue, feature, end);
        return feature;
    };
    GeoMVTFormat.featureColumnValue = function (tag, feature, pbf) {
        if (tag === 1) {
            feature.id = pbf.readVarint();
        }
        else if (tag === 2) {
            var end = pbf.readVarint() + pbf.pos;
            while (pbf.pos < end) {
                var key = pbf.readVarint();
                var value = pbf.readVarint();
                feature.propertiesIndex[key] = value;
                key = feature.layer.keys[key];
                value = feature.layer.values[value];
                feature.properties[key] = value;
            }
        }
        else if (tag === 3) {
            feature.type = pbf.readVarint();
        }
        else if (tag === 4) {
            feature.geometry = pbf.pos;
        }
    };
    return GeoMVTFormat;
}(ol.format.MVT));

ol.format.MVT.readRawFeature_ = GeoMVTFormat.readRawFeature_;
ol.format.MVT.pbfReaders_["featureColumnValue"] = GeoMVTFormat.featureColumnValue;


/***/ }),

/***/ "./src/geoVectorTile.ts":
/*!******************************!*\
  !*** ./src/geoVectorTile.ts ***!
  \******************************/
/*! exports provided: GeoVectorTile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoVectorTile", function() { return GeoVectorTile; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var GeoVectorTile = /** @class */ (function (_super) {
    __extends(GeoVectorTile, _super);
    function GeoVectorTile(tileCoord, state, src, format, tileLoadFunction) {
        var _this = _super.call(this, tileCoord, state, src, format, tileLoadFunction) || this;
        _this.disposeInternal = _this.disposeInternalCustom;
        return _this;
    }
    GeoVectorTile.prototype.disposeInternalCustom = function () {
        this.features_ = null;
        this.replayGroups_ = {};
        // this.state = ol.TileState.ABORT;
        this.state = ol.TileState.IDLE;
        this.changed();
        if (this["xhr"] != undefined) {
            this["xhr"].abort();
        }
        if (this.workerId !== undefined) {
            var disposeInfo = {
                formatId: ol.getUid(this.getFormat()),
                maxDataZoom: this.getFormat().maxDataZoom,
                tileCoord: this.tileCoord,
                requestTileCoord: this.requestTileCoord
            };
            this.getFormat().workerManager.postMessage(this.tileCoord + ol.getUid(disposeInfo), "vectorTileDispose", disposeInfo, null, this.workerId);
        }
        ol.Tile.prototype.disposeInternal.call(this);
    };
    GeoVectorTile.prototype.onLoad = function (dataProjection, extent) {
        this.setProjection(dataProjection);
        this.setFeatures();
        this.setExtent(extent);
    };
    GeoVectorTile.prototype.setRenderFeatureInstructs = function (instructs) {
        this.instructs = instructs;
    };
    GeoVectorTile.prototype.getRenderFeatureInstructs = function (instructs) {
        return this.instructs;
    };
    return GeoVectorTile;
}(ol.VectorTile));



/***/ }),

/***/ "./src/layer/vectorTileLayer.ts":
/*!**************************************!*\
  !*** ./src/layer/vectorTileLayer.ts ***!
  \**************************************/
/*! exports provided: VectorTileLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VectorTileLayer", function() { return VectorTileLayer; });
/* harmony import */ var _source_geoVectorTileSource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../source/geoVectorTileSource */ "./src/source/geoVectorTileSource.ts");
/* harmony import */ var _geoVectorTile__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geoVectorTile */ "./src/geoVectorTile.ts");
/* harmony import */ var _style_geoStyle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../style/geoStyle */ "./src/style/geoStyle.ts");
/* harmony import */ var _format_geoMvt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../format/geoMvt */ "./src/format/geoMvt.ts");
/* harmony import */ var _tree_styleJsonCache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tree/styleJsonCache */ "./src/tree/styleJsonCache.ts");
/* harmony import */ var _tree_styleJsonCacheItem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tree/styleJsonCacheItem */ "./src/tree/styleJsonCacheItem.ts");
/* harmony import */ var _render_geoVectorTilelayerRender__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../render/geoVectorTilelayerRender */ "./src/render/geoVectorTilelayerRender.ts");
/* harmony import */ var _tree_TreeNode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tree/TreeNode */ "./src/tree/TreeNode.ts");
/* harmony import */ var _tree_tree__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tree/tree */ "./src/tree/tree.ts");
/* harmony import */ var _worker_workerManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../worker/workerManager */ "./src/worker/workerManager.ts");
/* harmony import */ var _worker_webglManager__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../worker/webglManager */ "./src/worker/webglManager.ts");
/* harmony import */ var _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../worker/vectorTileLayerThreadMode */ "./src/worker/vectorTileLayerThreadMode.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();












var VectorTileLayer = /** @class */ (function (_super) {
    __extends(VectorTileLayer, _super);
    function VectorTileLayer(styleJson, opt_options) {
        var _this = this;
        // default
        if (opt_options !== undefined) {
            opt_options["declutter"] = opt_options["declutter"] === undefined ? true : opt_options["declutter"];
            opt_options["minimalist"] = opt_options["minimalist"] === undefined ? true : opt_options["minimalist"];
            opt_options["renderMode"] = 'vector';
            _this = _super.call(this, opt_options) || this;
        }
        else {
            var options = {};
            options["declutter"] = true;
            options["minimalist"] = true;
            opt_options["renderMode"] = 'vector';
            _this = _super.call(this, options) || this;
        }
        if (opt_options !== undefined) {
            // temp Emil
            var tempIsMultithread = opt_options["multithread"] === undefined ? true : opt_options["multithread"];
            _this.threadMode = opt_options["threadMode"] === undefined ? true : opt_options["threadMode"];
            _this.isMultithread = _this.threadMode !== _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_11__["VectorTileLayerThreadMode"].SingleThread;
            _this.backgroundWorkerCount = opt_options["backgroundWorkerCount"];
            // temp Emil
            if (tempIsMultithread) {
                _this.threadMode = _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_11__["VectorTileLayerThreadMode"].Default;
                _this.backgroundWorkerCount = 1;
            }
            _this.minimalist = opt_options["minimalist"] === undefined ? true : opt_options["minimalist"];
            _this.maxDataZoom = opt_options["maxDataZoom"] === undefined ? 14 : opt_options["maxDataZoom"];
            _this.proxy = opt_options["proxy"];
            _this.clientId = opt_options["clientId"];
            _this.clientSecret = opt_options["clientSecret"];
            _this.apiKey = opt_options["apiKey"];
        }
        else {
            _this.isMultithread = true;
            _this.minimalist = true;
            _this.maxDataZoom = 14;
        }
        _this.registerGeoVector();
        if (_this.isStyleJsonUrl(styleJson)) {
            _this.loadStyleJsonAsyn(styleJson);
        }
        else {
            _this.loadStyleJson(styleJson);
        }
        _this.type = ol.LayerType.MAPSUITE_VECTORTILE;
        // create webworker for webgl        
        if (!window.webglManager) {
            window.webglManager = new _worker_webglManager__WEBPACK_IMPORTED_MODULE_10__["WebglManager"]();
        }
        return _this;
    }
    VectorTileLayer.prototype.loadStyleJsonAsyn = function (styleJsonUrl) {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", styleJsonUrl);
        xhr.onload = function (event) {
            if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {
                var source = void 0;
                source = xhr.responseText;
                this.styleJson = JSON.parse(source);
                this.loadStyleJson(JSON.parse(source));
            }
        }.bind(this);
        xhr.onerror = function () {
        }.bind(this);
        xhr.send();
    };
    VectorTileLayer.prototype.loadStyleJson = function (inputStyleJson) {
        var styleJson = this.styleJson = JSON.parse(JSON.stringify(inputStyleJson));
        this.version = styleJson["version"];
        this.owner = styleJson["owner"];
        this.dateTime = styleJson["dateTime"];
        this.variables = this.getVariables(styleJson["variables"]);
        this.background = styleJson["background"];
        this.replaceVariables(styleJson, this.variables);
        this.geoSources = {};
        if (styleJson["layers"] && styleJson["layers"].length > 0) {
            var layerJson = styleJson["layers"][0];
            var sourceId = layerJson["source"];
            var source = this.getGeoSource(sourceId);
            if (source) {
                this.setSource(source);
                if (this.background) {
                    var backgroundColor = _style_geoStyle__WEBPACK_IMPORTED_MODULE_2__["GeoStyle"].toRGBAColor(this.background);
                    if (backgroundColor) {
                        this["background"] = backgroundColor;
                    }
                }
                var styleJsons = styleJson["styles"];
                var styleIds = layerJson["styles"];
                var minZoom = 0;
                var maxZoom = 22;
                var layerName = source.getGeoFormat().getLayerName();
                var styleJsonCache = new _tree_styleJsonCache__WEBPACK_IMPORTED_MODULE_4__["StyleJsonCache"]();
                var styleIdIndex = 0;
                for (var _i = 0, styleIds_1 = styleIds; _i < styleIds_1.length; _i++) {
                    var styleId = styleIds_1[_i];
                    var styleJson_1 = void 0;
                    for (var index = 0; index < styleJsons.length; index++) {
                        if (styleJsons[index].id === styleId) {
                            styleJson_1 = styleJsons[index];
                        }
                    }
                    if (styleJson_1) {
                        styleJsonCache.styleJson[styleId] = styleJson_1;
                        var item = new _tree_styleJsonCacheItem__WEBPACK_IMPORTED_MODULE_5__["StyleJsonCacheItem"](styleJson_1, minZoom, maxZoom, layerName);
                        for (var zoom = item.minZoom; zoom <= item.maxZoom; zoom++) {
                            var treeNode = new _tree_TreeNode__WEBPACK_IMPORTED_MODULE_7__["TreeNode"](item);
                            this.createChildrenNode(treeNode, item, zoom);
                            styleJsonCache.add(zoom, item.dataLayerName, new _tree_tree__WEBPACK_IMPORTED_MODULE_8__["Tree"](treeNode, styleIdIndex));
                        }
                        styleIdIndex += 1;
                    }
                }
                var geoFormat = source.getGeoFormat();
                geoFormat["styleJsonCache"] = styleJsonCache;
                if (this.isMultithread) {
                    if (this.workerManager) {
                        var messageData = {
                            formatId: ol.getUid(geoFormat),
                            styleJson: styleJsonCache.styleJson,
                            geoTextStyleInfos: styleJsonCache.geoTextStyleInfo
                        };
                        for (var i = 0; i < this.workerManager.workerCount; i++) {
                            this.workerManager.postMessage(ol.getUid(messageData), "initStyleJSON", messageData, undefined, i);
                        }
                    }
                }
            }
        }
    };
    VectorTileLayer.prototype.getGeoSource = function (sourceId) {
        var _this = this;
        if (this.geoSources && this.geoSources[sourceId]) {
            return this.geoSources[sourceId];
        }
        if (this.styleJson["sources"]) {
            this.styleJson['sources'].forEach(function (sourceJson) {
                if (sourceId === sourceJson['id']) {
                    if (!sourceJson['urls'] && sourceJson['url']) {
                        sourceJson['urls'] = [sourceJson['url']];
                        delete sourceJson['url'];
                    }
                    sourceJson['urls'] = sourceJson['urls'].map(function (url) {
                        if (url.indexOf('http') === -1 && url.indexOf('https') === -1) {
                            var host = location.host;
                            var protocol = location.protocol;
                            if (url.indexOf('/') !== 0) {
                                url = protocol + '//' + host + '/' + url;
                            }
                            else if (url.indexOf('/') === 0) {
                                url = protocol + '//' + host + url;
                            }
                        }
                        // apiKey
                        if (url.indexOf('apiKey') === -1 && _this.apiKey) {
                            url = url + '?apiKey=' + _this.apiKey;
                        }
                        // proxy
                        if (_this.proxy) {
                            url = _this.proxy + encodeURIComponent(url);
                        }
                        return url;
                    });
                    _this.geoSources[sourceJson["id"]] = _this.createVectorTileSource(sourceJson);
                    return true;
                }
            });
            return this.geoSources[sourceId];
        }
        return false;
    };
    VectorTileLayer.prototype.createVectorTileSource = function (sourceJson) {
        if (sourceJson["type"] === "MVT") {
            var format = this.getVectorSourceFormat();
            var source = new _source_geoVectorTileSource__WEBPACK_IMPORTED_MODULE_0__["GeoVectorTileSource"]({
                tileClass: _geoVectorTile__WEBPACK_IMPORTED_MODULE_1__["GeoVectorTile"],
                urls: sourceJson["urls"],
                clientId: this.clientId,
                clientSecret: this.clientSecret,
                format: format,
                projection: "EPSG:3857",
                tileGrid: this.createVectorTileGrid(),
                cacheSize: 1024,
                multithread: this.isMultithread,
                minimalist: this.minimalist,
                maxDataZoom: this.maxDataZoom
            });
            format['source'] = source;
            return source;
        }
    };
    VectorTileLayer.prototype.getVectorSourceFormat = function () {
        var format = new _format_geoMvt__WEBPACK_IMPORTED_MODULE_3__["GeoMVTFormat"](undefined, { multithread: this.isMultithread, minimalist: this.minimalist });
        if (this.isMultithread) {
            if (!this.workerManager || !this.workerManager.inited) {
                this.workerManager = new _worker_workerManager__WEBPACK_IMPORTED_MODULE_9__["WorkerManager"](this.threadMode, this.backgroundWorkerCount);
                this.workerManager.initWorkers();
            }
            if (this.workerManager.inited) {
                format["workerManager"] = this.workerManager;
            }
        }
        return format;
    };
    VectorTileLayer.prototype.createVectorTileGrid = function () {
        return ol.tilegrid.createXYZ({ tileSize: 512, maxZoom: 22 });
    };
    VectorTileLayer.prototype.getVariables = function (variablesJson) {
        var variables = {};
        for (var variablesName in variablesJson) {
            if (variablesName.indexOf(",") > 0) {
                var variableNames = variablesName.split(",");
                for (var i = 0; i < variableNames.length; i++) {
                    variables[variableNames[i]] = variablesJson[variablesName];
                }
            }
            else {
                variables[variablesName] = variablesJson[variablesName];
            }
        }
        return variables;
    };
    VectorTileLayer.prototype.replaceVariables = function (styleJson, variables) {
        for (var propertyName in styleJson) {
            var property = styleJson[propertyName];
            if (typeof property === "object") {
                this.replaceVariables(property, variables);
            }
            else if (typeof property === "string") {
                var keyWordIndex = property.indexOf("@");
                if (keyWordIndex >= 0) {
                    var lines = property.split(" ");
                    if (lines.length > 1) {
                        var tempWord = void 0;
                        var results = [];
                        for (var i = 0; i < lines.length; i++) {
                            tempWord = lines[i];
                            if (tempWord.indexOf("@") === 0) {
                                tempWord = variables[tempWord];
                            }
                            results.push(tempWord);
                        }
                        styleJson[propertyName] = results.join(" ");
                    }
                    else {
                        styleJson[propertyName] = variables[lines[0]];
                    }
                }
            }
        }
    };
    VectorTileLayer.prototype.createChildrenNode = function (currentNode, item, zoom) {
        if (item.subStyleCacheItems && item.subStyleCacheItems.length > 0) {
            for (var i = 0, ii = item.subStyleCacheItems.length; i < ii; i++) {
                var subStyleItem = item.subStyleCacheItems[i];
                if (zoom >= subStyleItem.minZoom && zoom <= subStyleItem.maxZoom) {
                    var node = new _tree_TreeNode__WEBPACK_IMPORTED_MODULE_7__["TreeNode"](subStyleItem);
                    currentNode.children.push(node);
                    this.createChildrenNode(node, subStyleItem, zoom);
                }
            }
        }
    };
    VectorTileLayer.prototype.isStyleJsonUrl = function (styleJson) {
        if (styleJson) {
            if (typeof styleJson !== "object") {
                return true;
            }
        }
        return false;
    };
    VectorTileLayer.prototype.registerGeoVector = function () {
        ol.LayerType["GEOVECTORTILE"] = "GEOVECTORTILE";
        // TODO: check the plugin had been registed.
        ol.plugins.register(ol.PluginType.LAYER_RENDERER, _render_geoVectorTilelayerRender__WEBPACK_IMPORTED_MODULE_6__["GeoVectorTileLayerRender"]);
        // (<any>ol.VectorTile).Event = function (type, xhr) {
        //     ol.events.Event.call(this, type);
        //     this.xhr = xhr;
        // };
        // ol.inherits((<any>ol.VectorTile), (<any>ol.events).Event);
        ol.VectorImageTile.prototype.disposeInternal = function () {
            for (var i = 0, ii = this.tileKeys.length; i < ii; ++i) {
                var sourceTileKey = this.tileKeys[i];
                var sourceTile = this.getTile(sourceTileKey);
                sourceTile.consumers--;
                if (sourceTile.consumers == 0) {
                    delete this.sourceTiles_[sourceTileKey];
                    sourceTile.dispose();
                }
            }
            this.sourceTiles_ = null;
            this.loadListenerKeys_.forEach(ol.events.unlistenByKey);
            this.loadListenerKeys_.length = 0;
            if (this.interimTile) {
                this.interimTile.dispose();
            }
            this.state = ol.TileState.ABORT;
            this.changed();
            // for the disposeInternal
            this.tileKeys.length = 0;
            this.sourceTileListenerKeys_.forEach(ol.events.unlistenByKey);
            this.sourceTileListenerKeys_.length = 0;
            ol.Tile.prototype.disposeInternal.call(this);
        };
        ol.TileQueue.prototype.handleTileChange = function (event) {
            var tile = /** @type {ol.Tile} */ (event.target);
            var state = tile.getState();
            if (state === ol.TileState.LOADED || state === ol.TileState.ERROR ||
                state === ol.TileState.EMPTY || state === ol.TileState.ABORT ||
                state === ol.TileState.CANCEL) {
                if (state === ol.TileState.ABORT || state === ol.TileState.ERROR) {
                    ol.events.unlisten(tile, ol.events.EventType.CHANGE, this.handleTileChange, this);
                }
                var tileKey = tile.getKey();
                if (tileKey in this.tilesLoadingKeys_) {
                    delete this.tilesLoadingKeys_[tileKey];
                    --this.tilesLoading_;
                }
                // Remove the enqueue records, if the tile has been dispose before load
                if (tileKey in this.queuedElements_) {
                    delete this.queuedElements_[tileKey];
                }
                this.tileChangeCallback_();
            }
        };
        // remove quickZoom when animation complete
        ol.View.prototype.updateAnimations_ = function () {
            if (this.updateAnimationKey_ !== undefined) {
                cancelAnimationFrame(this.updateAnimationKey_);
                this.updateAnimationKey_ = undefined;
            }
            if (!this.getAnimating()) {
                return;
            }
            var now = Date.now();
            var more = false;
            for (var i = this.animations_.length - 1; i >= 0; --i) {
                var series = this.animations_[i];
                var seriesComplete = true;
                for (var j = 0, jj = series.length; j < jj; ++j) {
                    var animation = series[j];
                    if (animation.complete) {
                        continue;
                    }
                    var elapsed = now - animation.start;
                    var fraction = animation.duration > 0 ? elapsed / animation.duration : 1;
                    if (fraction >= 1) {
                        animation.complete = true;
                        fraction = 1;
                    }
                    else {
                        seriesComplete = false;
                    }
                    var progress = animation.easing(fraction);
                    if (animation.sourceCenter) {
                        var x0 = animation.sourceCenter[0];
                        var y0 = animation.sourceCenter[1];
                        var x1 = animation.targetCenter[0];
                        var y1 = animation.targetCenter[1];
                        var x = x0 + progress * (x1 - x0);
                        var y = y0 + progress * (y1 - y0);
                        this.set(ol.ViewProperty.CENTER, [x, y]);
                    }
                    if (animation.sourceResolution && animation.targetResolution) {
                        var resolution = progress === 1 ?
                            animation.targetResolution :
                            animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);
                        if (animation.anchor) {
                            this.set(ol.ViewProperty.CENTER, this.calculateCenterZoom(resolution, animation.anchor));
                        }
                        this.set(ol.ViewProperty.RESOLUTION, resolution);
                    }
                    if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {
                        var rotation = progress === 1 ?
                            ol.math.modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :
                            animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);
                        if (animation.anchor) {
                            this.set(ol.ViewProperty.CENTER, this.calculateCenterRotate(rotation, animation.anchor));
                        }
                        this.set(ol.ViewProperty.ROTATION, rotation);
                    }
                    more = true;
                    if (!animation.complete) {
                        break;
                    }
                }
                if (seriesComplete) {
                    this.animations_[i] = null;
                    this.setHint(ol.ViewHint.ANIMATING, -1);
                    var callback = series[0].callback;
                    if (callback) {
                        callback(true);
                    }
                }
            }
            // prune completed series
            this.animations_ = this.animations_.filter(Boolean);
            if (more && this.updateAnimationKey_ === undefined) {
                this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_);
            }
        };
        // Get quickZoom zoom in/out
        ol.View.prototype.animate = function (var_args) {
            var animationCount = arguments.length;
            var callback;
            if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {
                callback = arguments[animationCount - 1];
                --animationCount;
            }
            if (!this.isDef()) {
                // if view properties are not yet set, shortcut to the final state
                var state = arguments[animationCount - 1];
                if (state.center) {
                    this.setCenter(state.center);
                }
                if (state.zoom !== undefined) {
                    this.setZoom(state.zoom);
                }
                if (state.rotation !== undefined) {
                    this.setRotation(state.rotation);
                }
                if (callback) {
                    callback(true);
                }
                return;
            }
            var start = Date.now();
            var center = this.getCenter().slice();
            var resolution = this.getResolution();
            var rotation = this.getRotation();
            var series = [];
            var quickZoom = false;
            for (var i = 0; i < animationCount; ++i) {
                var options = /** @type {olx.AnimationOptions} */ (arguments[i]);
                var animation = /** @type {ol.ViewAnimation} */ ({
                    start: start,
                    complete: false,
                    anchor: options.anchor,
                    duration: options.duration !== undefined ? options.duration : 1000,
                    easing: options.easing || ol.easing.inAndOut
                });
                if (options.center) {
                    animation["sourceCenter"] = center;
                    animation["targetCenter"] = options.center;
                    center = animation["targetCenter"];
                }
                if (options.zoom !== undefined) {
                    animation["sourceResolution"] = resolution;
                    animation["targetResolution"] = this.constrainResolution(this.maxResolution_, options.zoom - this.minZoom_, 0);
                    resolution = animation["targetResolution"];
                    if (!quickZoom) {
                        quickZoom = Math.abs(animation["sourceResolution"] - animation["targetResolution"]) * 2 >= animation["sourceResolution"];
                    }
                }
                else if (options.resolution) {
                    animation["sourceResolution"] = resolution;
                    animation["targetResolution"] = options.resolution;
                    resolution = animation["targetResolution"];
                    if (!quickZoom) {
                        quickZoom = Math.abs(animation["sourceResolution"] - animation["targetResolution"]) * 2 >= animation["sourceResolution"];
                    }
                }
                if (options.rotation !== undefined) {
                    animation["sourceRotation"] = rotation;
                    var delta = ol.math.modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;
                    animation["targetRotation"] = rotation + delta;
                    rotation = animation["targetRotation"];
                }
                animation["callback"] = callback;
                // check if animation is a no-op
                if (ol.View.isNoopAnimation(animation)) {
                    animation.complete = true;
                    // we still push it onto the series for callback handling
                }
                else {
                    start += animation.duration;
                }
                series.push(animation);
            }
            this.animations_.push(series);
            this["quickZoom"] = quickZoom;
            this.setHint(ol.ViewHint.ANIMATING, 1);
            this.updateAnimations_();
        };
        // add quickZoom into frameState
        ol.PluggableMap.prototype.renderFrame_ = function (time) {
            var i, ii, viewState;
            var size = this.getSize();
            var view = this.getView();
            var extent = ol.extent.createEmpty();
            var previousFrameState = this.frameState_;
            /** @type {?olx.FrameState} */
            var frameState = null;
            if (size !== undefined && ol.size.hasArea(size) && view && view.isDef()) {
                var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);
                var quickZoom = view["quickZoom"];
                var layerStatesArray = this.getLayerGroup().getLayerStatesArray();
                var layerStates = {};
                for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {
                    layerStates[ol.getUid(layerStatesArray[i].layer)] = layerStatesArray[i];
                }
                viewState = view.getState();
                var center = viewState.center;
                var pixelResolution = viewState.resolution / this.pixelRatio_;
                center[0] = Math.round(center[0] / pixelResolution) * pixelResolution;
                center[1] = Math.round(center[1] / pixelResolution) * pixelResolution;
                frameState = /** @type {olx.FrameState} */ ({
                    animate: false,
                    coordinateToPixelTransform: this.coordinateToPixelTransform_,
                    extent: extent,
                    focus: !this.focus_ ? center : this.focus_,
                    index: this.frameIndex_++,
                    layerStates: layerStates,
                    layerStatesArray: layerStatesArray,
                    logos: ol.obj.assign({}, this.logos_),
                    pixelRatio: this.pixelRatio_,
                    pixelToCoordinateTransform: this.pixelToCoordinateTransform_,
                    postRenderFunctions: [],
                    size: size,
                    skippedFeatureUids: this.skippedFeatureUids_,
                    tileQueue: this.tileQueue_,
                    time: time,
                    usedTiles: {},
                    viewState: viewState,
                    viewHints: viewHints,
                    quickZoom: quickZoom,
                    currentResolution: viewState.resolution,
                    wantedTiles: {},
                    context: this.renderer_.context_
                });
            }
            if (frameState) {
                frameState.extent = ol.extent.getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, frameState.size, extent);
            }
            this.frameState_ = frameState;
            this.renderer_.renderFrame(frameState);
            if (frameState) {
                if (frameState.animate) {
                    this.render();
                }
                Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);
                if (previousFrameState) {
                    var moveStart = !this.previousExtent_ ||
                        (!ol.extent.isEmpty(this.previousExtent_) &&
                            !ol.extent.equals(frameState.extent, this.previousExtent_));
                    if (moveStart) {
                        this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVESTART, this, previousFrameState));
                        this.previousExtent_ = ol.extent.createOrUpdateEmpty(this.previousExtent_);
                    }
                }
                var idle = this.previousExtent_ &&
                    !frameState.viewHints[ol.ViewHint.ANIMATING] &&
                    !frameState.viewHints[ol.ViewHint.INTERACTING] &&
                    !ol.extent.equals(frameState.extent, this.previousExtent_);
                if (idle) {
                    this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVEEND, this, frameState));
                    ol.extent.clone(frameState.extent, this.previousExtent_);
                }
            }
            this.dispatchEvent(new ol.MapEvent(ol.MapEventType.POSTRENDER, this, frameState));
            setTimeout(this.handlePostRender.bind(this), 0);
        };
        // refine drawImage performance
        ol.renderer.canvas.TileLayer.prototype.drawTileImage = function (tile, frameState, layerState, x, y, w, h, gutter, transition) {
            var image = tile.getImage(this.getLayer());
            if (!image) {
                return;
            }
            var uid = ol.getUid(this);
            var alpha = transition ? tile.getAlpha(uid, frameState.time) : 1;
            if (alpha === 1 && !this.getLayer().getSource().getOpaque(frameState.viewState.projection)) {
                this.context.clearRect(x, y, w, h);
            }
            var alphaChanged = alpha !== this.context.globalAlpha;
            if (alphaChanged) {
                this.context.save();
                this.context.globalAlpha = alpha;
            }
            this.context.drawImage(image, gutter, gutter, image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);
            if (alphaChanged) {
                this.context.restore();
            }
            if (alpha !== 1) {
                frameState.animate = true;
            }
            else if (transition) {
                tile.endTransition(uid);
            }
        };
        // overwrite
        ol.render.webgl.Replay.prototype.replay = function (context, transform, viewRotation, skippedFeaturesHash) {
            this.viewRotation_ = viewRotation;
            this.webglReplay_(context, transform, skippedFeaturesHash, this.instructions, undefined, undefined);
        };
        // webgl render
        ol.render.webgl.Replay.prototype.webglReplay_ = function (context, transform, skippedFeaturesHash, instructions, featureCallback, opt_hitExtent) {
            var frameState = context.frameState;
            var layerState = context.layerState;
            var viewState = frameState.viewState;
            var center = viewState.center;
            var size = frameState.size;
            var pixelRatio = frameState.pixelRatio;
            var resolution = viewState.resolution;
            var opacity = layerState.opacity;
            var rotation = viewState.rotation;
            var oneByOne = undefined;
            var gl = context.getGL();
            var tmpStencil, tmpStencilFunc, tmpStencilMaskVal, tmpStencilRef, tmpStencilMask, tmpStencilOpFail, tmpStencilOpPass, tmpStencilOpZFail;
            if (this instanceof ol.render.webgl.LineStringReplay || this.lineStringReplay) {
                tmpStencil = gl.isEnabled(gl.STENCIL_TEST);
                tmpStencilFunc = gl.getParameter(gl.STENCIL_FUNC);
                tmpStencilMaskVal = gl.getParameter(gl.STENCIL_VALUE_MASK);
                tmpStencilRef = gl.getParameter(gl.STENCIL_REF);
                tmpStencilMask = gl.getParameter(gl.STENCIL_WRITEMASK);
                tmpStencilOpFail = gl.getParameter(gl.STENCIL_FAIL);
                tmpStencilOpPass = gl.getParameter(gl.STENCIL_PASS_DEPTH_PASS);
                tmpStencilOpZFail = gl.getParameter(gl.STENCIL_PASS_DEPTH_FAIL);
                gl.enable(gl.STENCIL_TEST);
                gl.clear(gl.STENCIL_BUFFER_BIT);
                gl.stencilMask(255);
                gl.stencilFunc(gl.ALWAYS, 1, 255);
                gl.stencilOp(gl.KEEP, gl.KEEP, gl.REPLACE);
                // this.lineStringReplay.replay(context,
                //     center, resolution, rotation, size, pixelRatio,
                //     opacity, skippedFeaturesHash,
                //     featureCallback, oneByOne, opt_hitExtent);
                // gl.stencilMask(0);
                // FIXME Eric
                // gl.stencilFunc(context.NOTEQUAL, 1, 255);
            }
            // var webglContext = context.webglContext;
            context.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);
            context.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);
            var locations = this.setUpProgram(gl, context, size, pixelRatio);
            // set the "uniform" values
            var projectionMatrix = ol.transform.reset(this.projectionMatrix_);
            ol.transform.scale(projectionMatrix, 2 / (resolution * size[0]), 2 / (resolution * size[1]));
            ol.transform.rotate(projectionMatrix, -rotation);
            ol.transform.translate(projectionMatrix, -(center[0] - this.origin[0]), -(center[1] - this.origin[1]));
            var offsetScaleMatrix = ol.transform.reset(this.offsetScaleMatrix_);
            ol.transform.scale(offsetScaleMatrix, 2 / size[0], 2 / size[1]);
            var offsetRotateMatrix = ol.transform.reset(this.offsetRotateMatrix_);
            if (rotation !== 0) {
                ol.transform.rotate(offsetRotateMatrix, -rotation);
            }
            gl.uniformMatrix4fv(locations.u_projectionMatrix, false, ol.vec.Mat4.fromTransform(this.tmpMat4_, projectionMatrix));
            gl.uniformMatrix4fv(locations.u_offsetScaleMatrix, false, ol.vec.Mat4.fromTransform(this.tmpMat4_, offsetScaleMatrix));
            gl.uniformMatrix4fv(locations.u_offsetRotateMatrix, false, ol.vec.Mat4.fromTransform(this.tmpMat4_, offsetRotateMatrix));
            gl.uniform1f(locations.u_opacity, opacity);
            // fix for WebGL not to unpremultiply
            if (this instanceof ol.render.webgl.PolygonReplay) {
                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);
                // gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);
            }
            // draw!
            var result;
            if (featureCallback === undefined) {
                this.drawReplay(gl, context, skippedFeaturesHash, false);
            }
            else {
                // draw feature by feature for the hit-detection
                result = this.drawHitDetectionReplay(context, context, skippedFeaturesHash, featureCallback, oneByOne, opt_hitExtent);
            }
            // disable the vertex attrib arrays
            this.shutDownProgram(gl, locations);
            if (this instanceof ol.render.webgl.LineStringReplay || this.lineStringReplay) {
                if (!tmpStencil) {
                    gl.disable(gl.STENCIL_TEST);
                }
                gl.clear(gl.STENCIL_BUFFER_BIT);
                gl.stencilFunc(/** @type {number} */ (tmpStencilFunc), 
                /** @type {number} */ (tmpStencilRef), /** @type {number} */ (tmpStencilMaskVal));
                gl.stencilMask(/** @type {number} */ (tmpStencilMask));
                gl.stencilOp(/** @type {number} */ (tmpStencilOpFail), 
                /** @type {number} */ (tmpStencilOpZFail), /** @type {number} */ (tmpStencilOpPass));
                // gl.stencilMask(0);
            }
            return result;
        };
        ol.renderer.canvas.VectorTileLayer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, thisArg) {
            var resolution = frameState.viewState.resolution;
            var rotation = frameState.viewState.rotation;
            hitTolerance = hitTolerance == undefined ? 0 : hitTolerance;
            var layer = this.getLayer();
            /** @type {Object.<string, boolean>} */
            var features = {};
            /** @type {Array.<ol.VectorImageTile>} */
            var renderedTiles = this.renderedTiles;
            var source = /** @type {ol.source.VectorTile} */ (layer.getSource());
            var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);
            var bufferedExtent, found;
            var i, ii, replayGroup;
            var tile, tileCoord, tileExtent;
            for (i = 0, ii = renderedTiles.length; i < ii; ++i) {
                tile = renderedTiles[i];
                tileCoord = tile.wrappedTileCoord;
                tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);
                bufferedExtent = ol.extent.buffer(tileExtent, hitTolerance * resolution, bufferedExtent);
                if (!ol.extent.containsCoordinate(bufferedExtent, coordinate)) {
                    continue;
                }
                for (var t = 0, tt = tile.tileKeys.length; t < tt; ++t) {
                    var sourceTile = tile.getTile(tile.tileKeys[t]);
                    if (sourceTile.getState() == ol.TileState.ERROR) {
                        continue;
                    }
                    replayGroup = sourceTile.getReplayGroup(layer, tileCoord.toString());
                    found = found || replayGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {}, 
                    /**
                     * @param {ol.Feature|ol.render.Feature} feature Feature.
                     * @return {?} Callback result.
                     */
                    function (feature) {
                        var key = ol.getUid(feature).toString();
                        if (!(key in features)) {
                            features[key] = true;
                            return callback.call(thisArg, feature, layer);
                        }
                    }, null);
                }
            }
            return found;
        };
    };
    return VectorTileLayer;
}(ol.layer.VectorTile));



/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _layer_vectorTileLayer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layer/vectorTileLayer */ "./src/layer/vectorTileLayer.ts");
/* harmony import */ var _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./worker/vectorTileLayerThreadMode */ "./src/worker/vectorTileLayerThreadMode.ts");
/* harmony import */ var _worker_webgl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./worker/webgl */ "./src/worker/webgl.js");



ol.mapsuite = {};
ol.mapsuite["VectorTileLayer"] = _layer_vectorTileLayer__WEBPACK_IMPORTED_MODULE_0__["VectorTileLayer"];
ol.mapsuite["VectorTileLayerThreadMode"] = _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_1__["VectorTileLayerThreadMode"];
window["ol"] = ol;
window["webglCaculate"] = _worker_webgl__WEBPACK_IMPORTED_MODULE_2__["webglCaculate"];


/***/ }),

/***/ "./src/render/geoVectorTilelayerRender.ts":
/*!************************************************!*\
  !*** ./src/render/geoVectorTilelayerRender.ts ***!
  \************************************************/
/*! exports provided: GeoVectorTileLayerRender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoVectorTileLayerRender", function() { return GeoVectorTileLayerRender; });
/* harmony import */ var _webgl_replayGroupCustom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./webgl/replayGroupCustom */ "./src/render/webgl/replayGroupCustom.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoVectorTileLayerRender = /** @class */ (function (_super) {
    __extends(GeoVectorTileLayerRender, _super);
    function GeoVectorTileLayerRender(layer) {
        var _this = _super.call(this, layer) || this;
        _this.VECTOR_REPLAYS_CUSTOM = {
            "image": [ol.render.ReplayType.DEFAULT],
            "hybrid": [ol.render.ReplayType.IMAGE, ol.render.ReplayType.TEXT, ol.render.ReplayType.DEFAULT],
            "vector": ol.render.replay.ORDER
        };
        _this.VECTOR_REPLAYS = _this.VECTOR_REPLAYS_CUSTOM;
        _this.prepareFrame = _this.prepareFrameCustom;
        _this.renderTileImage_ = _this.renderTileImageCustom;
        return _this;
    }
    GeoVectorTileLayerRender.prototype.tileLayerPrepareFrameCustom = function (frameState, layerState) {
        var pixelRatio = frameState.pixelRatio;
        var size = frameState.size;
        var viewState = frameState.viewState;
        var projection = viewState.projection;
        var viewResolution = viewState.resolution;
        var viewCenter = viewState.center;
        var tileLayer = this.getLayer();
        var tileSource = /** @type {ol.source.Tile} */ (tileLayer.getSource());
        var sourceRevision = tileSource.getRevision();
        var tileGrid = tileSource.getTileGridForProjection(projection);
        var z = tileGrid.getZForResolution(viewResolution, this.zDirection);
        var tileResolution = tileGrid.getResolution(z);
        var oversampling = Math.round(viewResolution / tileResolution) || 1;
        // let extent = frameState.extent;
        // update for webgl
        var extent = ol.extent.buffer(frameState.extent, tileLayer.getRenderBuffer() * viewResolution);
        if (layerState.extent !== undefined) {
            extent = ol.extent.getIntersection(extent, layerState.extent);
        }
        if (ol.extent.isEmpty(extent)) {
            // Return false to prevent the rendering of the layer.
            return false;
        }
        var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);
        // Adjust tile cache size according to tile Range, TODO: add a property for that
        var xOffset = (tileRange.maxX - tileRange.minX);
        var yOffset = (tileRange.maxY - tileRange.minY);
        xOffset = xOffset <= 0 ? 1 : xOffset * 2 + 3;
        yOffset = yOffset <= 0 ? 1 : yOffset * 2 + 3;
        var cacheSize = xOffset * yOffset;
        tileSource.tileCache.highWaterMark = cacheSize <= 15 ? 15 : cacheSize;
        // Adjust vectorTileData cache size according to the tile Range in data max zoom. it will pass 
        var dataTileRand = tileGrid.getTileRangeForExtentAndZ(extent, tileSource.maxDataZoom);
        var offsetX = dataTileRand.maxX - dataTileRand.minX;
        var offsetY = dataTileRand.maxY - dataTileRand.minY;
        offsetX = offsetX <= 0 ? 1 : offsetX + 3;
        offsetY = offsetY <= 0 ? 1 : offsetY + 3;
        var vectorTileDataCahceSize = offsetX * offsetY;
        tileSource["vectorTileDataCahceSize"] = vectorTileDataCahceSize;
        tileSource.getGeoFormat()["vectorTileDataCahceSize"] = vectorTileDataCahceSize;
        var imageExtent = tileGrid.getTileRangeExtent(z, tileRange);
        var tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);
        /**
         * @type {Object.<number, Object.<string, ol.Tile>>}
         */
        var tilesToDrawByZ = {};
        tilesToDrawByZ[z] = {};
        var findLoadedTiles = this.createLoadedTileFinder(tileSource, projection, tilesToDrawByZ);
        var tmpExtent = this.tmpExtent;
        var tmpTileRange = this.tmpTileRange_;
        var newTiles = false;
        var tile, x, y;
        for (x = tileRange.minX; x <= tileRange.maxX; ++x) {
            for (y = tileRange.minY; y <= tileRange.maxY; ++y) {
                tile = tileSource.getTile(z, x, y, pixelRatio, projection);
                // FIXME Eric
                tile.tileRange = tileRange;
                tile.pixelRatio = pixelRatio;
                if (tile.getState() === ol.TileState.ERROR) {
                    if (!tileLayer.getUseInterimTilesOnError()) {
                        // When useInterimTilesOnError is false, we consider the error tile as loaded.
                        tile.setState(ol.TileState.LOADED);
                    }
                    else if (tileLayer.getPreload() > 0) {
                        // Preloaded tiles for lower resolutions might have finished loading.
                        newTiles = true;
                    }
                }
                if (!this.isDrawableTile_(tile)) {
                    tile = tile.getInterimTile();
                }
                if (this.isDrawableTile_(tile)) {
                    var uid = ol.getUid(this);
                    if (tile.getState() === ol.TileState.LOADED) {
                        tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;
                        var inTransition = tile.inTransition(uid);
                        if (!newTiles && (inTransition || this.renderedTiles.indexOf(tile) === -1)) {
                            newTiles = true;
                        }
                    }
                    if (tile.getAlpha(uid, frameState.time) === 1) {
                        // don't look for alt tiles if alpha is 1
                        continue;
                    }
                }
                var childTileRange = tileGrid.getTileCoordChildTileRange(tile.tileCoord, tmpTileRange, tmpExtent);
                var covered = false;
                if (childTileRange) {
                    covered = findLoadedTiles(z + 1, childTileRange);
                }
                if (!covered) {
                    tileGrid.forEachTileCoordParentTileRange(tile.tileCoord, findLoadedTiles, null, tmpTileRange, tmpExtent);
                }
            }
        }
        var renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;
        var hints = frameState.viewHints;
        var animatingOrInteracting = hints[ol.ViewHint.ANIMATING] || hints[ol.ViewHint.INTERACTING];
        if (!(this.renderedResolution && Date.now() - frameState.time > 16 && animatingOrInteracting) && (newTiles ||
            !(this.renderedExtent_ && ol.extent.containsExtent(this.renderedExtent_, extent)) ||
            this.renderedRevision !== sourceRevision ||
            oversampling !== this.oversampling_ ||
            !animatingOrInteracting && renderedResolution !== this.renderedResolution)) {
            var context = this.context;
            if (context) {
                var tilePixelSize = tileSource.getTilePixelSize(z, pixelRatio, projection);
                var width = Math.round(tileRange.getWidth() * tilePixelSize[0] / oversampling);
                var height = Math.round(tileRange.getHeight() * tilePixelSize[1] / oversampling);
                var canvas = context.canvas;
                if (canvas.width !== width || canvas.height !== height) {
                    this.oversampling_ = oversampling;
                    canvas.width = width;
                    canvas.height = height;
                }
                else {
                    if (this.renderedExtent_ && !ol.extent.equals(imageExtent, this.renderedExtent_)) {
                        context.clearRect(0, 0, width, height);
                    }
                    oversampling = this.oversampling_;
                }
            }
            this.renderedTiles.length = 0;
            /** @type {Array.<number>} */
            var zs = Object.keys(tilesToDrawByZ).map(Number);
            zs.sort(function (a, b) {
                if (a === z) {
                    return 1;
                }
                else if (b === z) {
                    return -1;
                }
                else {
                    return a > b ? 1 : a < b ? -1 : 0;
                }
            });
            var currentResolution = void 0, currentScale = void 0, currentTilePixelSize = void 0, currentZ = void 0, i = void 0, ii = void 0;
            var tileExtent = void 0, tileGutter = void 0, tilesToDraw = void 0, w = void 0, h = void 0;
            for (i = 0, ii = zs.length; i < ii; ++i) {
                currentZ = zs[i];
                currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);
                currentResolution = tileGrid.getResolution(currentZ);
                currentScale = currentResolution / tileResolution;
                tileGutter = tilePixelRatio * tileSource.getGutter(projection);
                tilesToDraw = tilesToDrawByZ[currentZ];
                for (var tileCoordKey in tilesToDraw) {
                    tile = tilesToDraw[tileCoordKey];
                    tileExtent = tileGrid.getTileCoordExtent(tile.getTileCoord(), tmpExtent);
                    x = (tileExtent[0] - imageExtent[0]) / tileResolution * tilePixelRatio / oversampling;
                    y = (imageExtent[3] - tileExtent[3]) / tileResolution * tilePixelRatio / oversampling;
                    w = currentTilePixelSize[0] * currentScale / oversampling;
                    h = currentTilePixelSize[1] * currentScale / oversampling;
                    this.drawTileImage(tile, frameState, layerState, x, y, w, h, tileGutter, z === currentZ);
                    this.renderedTiles.push(tile);
                }
            }
            this.renderedRevision = sourceRevision;
            this.renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;
            this.renderedExtent_ = imageExtent;
        }
        var scale = this.renderedResolution / viewResolution;
        var transform = ol.transform.compose(this.imageTransform_, pixelRatio * size[0] / 2, pixelRatio * size[1] / 2, scale, scale, 0, (this.renderedExtent_[0] - viewCenter[0]) / this.renderedResolution * pixelRatio, (viewCenter[1] - this.renderedExtent_[3]) / this.renderedResolution * pixelRatio);
        ol.transform.compose(this.coordinateToCanvasPixelTransform, pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5], pixelRatio / viewResolution, -pixelRatio / viewResolution, 0, -viewCenter[0], -viewCenter[1]);
        this.updateUsedTiles(frameState.usedTiles, tileSource, z, tileRange);
        this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio, projection, extent, z, tileLayer.getPreload());
        this.scheduleExpireCache(frameState, tileSource);
        this.updateLogos(frameState, tileSource);
        return this.renderedTiles.length > 0;
    };
    GeoVectorTileLayerRender.prototype.prepareFrameCustom = function (frameState, layerState) {
        var layer = this.getLayer();
        var layerRevision = layer.getRevision();
        if (this.renderedLayerRevision_ !== layerRevision) {
            this.renderedTiles.length = 0;
            var renderMode = layer.getRenderMode();
            if (!this.context && renderMode !== ol.layer.VectorTileRenderType.VECTOR) {
                this.context = ol.dom.createCanvasContext2D();
            }
            if (this.context && renderMode === ol.layer.VectorTileRenderType.VECTOR) {
                this.context = null;
            }
        }
        this.renderedLayerRevision_ = layerRevision;
        return this.tileLayerPrepareFrameCustom.apply(this, arguments);
    };
    GeoVectorTileLayerRender.prototype.postCompose = function (context, frameState, layerState) {
        var layer = this.getLayer();
        var declutterReplays = layer.getDeclutter() ? {} : null;
        var source = /** @type {ol.source.VectorTile} */ (layer.getSource());
        var renderMode = layer.getRenderMode();
        var replayTypes = this.VECTOR_REPLAYS_CUSTOM[renderMode];
        var pixelRatio = frameState.pixelRatio;
        var rotation = frameState.viewState.rotation;
        var size = frameState.size;
        var offsetX, offsetY;
        if (rotation) {
            offsetX = Math.round(pixelRatio * size[0] / 2);
            offsetY = Math.round(pixelRatio * size[1] / 2);
            // (<any>ol.render.canvas).rotateAtOffset(context, -rotation, offsetX, offsetY);
        }
        if (declutterReplays) {
            // this.declutterTree_.clear();
        }
        var tiles = this.renderedTiles;
        var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);
        // let clips = [];
        var zs = [];
        for (var i = tiles.length - 1; i >= 0; --i) {
            var tile = /** @type {ol.VectorImageTile} */ (tiles[i]);
            if (tile.getState() === ol.TileState.ABORT) {
                continue;
            }
            var tileCoord = tile.tileCoord;
            var worldOffset = tileGrid.getTileCoordExtent(tileCoord)[0] -
                tileGrid.getTileCoordExtent(tile.wrappedTileCoord)[0];
            var transform = undefined;
            for (var t = 0, tt = tile.tileKeys.length; t < tt; ++t) {
                var sourceTile = tile.getTile(tile.tileKeys[t]);
                if (sourceTile.getState() === ol.TileState.ERROR) {
                    continue;
                }
                // reuse replayGroup of source Tile to reduce the memory.
                // let replayGroup = sourceTile.getReplayGroup(layer, tileCoord.toString());
                var replayGroup = sourceTile.getReplayGroup(layer, sourceTile.tileCoord.toString());
                if (renderMode !== ol.layer.VectorTileRenderType.VECTOR && !replayGroup.hasReplays(replayTypes)) {
                    continue;
                }
                if (!transform) {
                    transform = this.getTransform(frameState, worldOffset);
                }
                // let currentZ = sourceTile.tileCoord[0];
                // let currentClip = replayGroup.getClipCoords(transform);
                // context.save();
                context.globalAlpha = layerState.opacity;
                // Create a clip mask for regions in this low resolution tile that are
                // already filled by a higher resolution tile
                // for (let j = 0, jj = clips.length; j < jj; ++j) {
                //     let clip = clips[j];
                //     if (currentZ < zs[j]) {
                //         context.beginPath();
                //         // counter-clockwise (outer ring) for current tile
                //         context.moveTo(currentClip[0], currentClip[1]);
                //         context.lineTo(currentClip[2], currentClip[3]);
                //         context.lineTo(currentClip[4], currentClip[5]);
                //         context.lineTo(currentClip[6], currentClip[7]);
                //         // clockwise (inner ring) for higher resolution tile
                //         context.moveTo(clip[6], clip[7]);
                //         context.lineTo(clip[4], clip[5]);
                //         context.lineTo(clip[2], clip[3]);
                //         context.lineTo(clip[0], clip[1]);
                //         context.clip();
                //     }
                // }
                context.frameState = frameState;
                context.layerState = layerState;
                replayGroup.replay(context, transform, rotation, {}, replayTypes, declutterReplays);
                // context.restore();
                // clips.push(currentClip);
                // zs.push(currentZ);
            }
        }
        if (declutterReplays) {
            var hints = frameState.viewHints;
            var animatingOrInteracting = hints[ol.ViewHint.ANIMATING] || hints[ol.ViewHint.INTERACTING];
            // delete context["quickZoom"]
            if (animatingOrInteracting) {
                context["quickZoom"] = frameState["quickZoom"];
            }
            context["currentResolution"] = frameState["currentResolution"];
            ol.render.canvas.ReplayGroup.replayDeclutter(declutterReplays, context, rotation);
        }
        if (rotation) {
            //     (<any>ol.render.canvas).rotateAtOffset(context, rotation,
            // /** @type {number} */(offsetX), /** @type {number} */(offsetY));
        }
        ol.renderer.canvas.TileLayer.prototype.postCompose.apply(this, arguments);
    };
    GeoVectorTileLayerRender.prototype.createReplayGroup_ = function (tile, frameState, x, y) {
        var layer = this.getLayer();
        var pixelRatio = frameState.pixelRatio;
        var projection = frameState.viewState.projection;
        var revision = layer.getRevision();
        var renderOrder = /** @type {ol.RenderOrderFunction} */ (layer.getRenderOrder()) || null;
        var replayState = tile.getReplayState(layer);
        if (!replayState.dirty && replayState.renderedRevision === revision &&
            replayState.renderedRenderOrder === renderOrder) {
            return;
        }
        var source = /** @type {ol.source.VectorTile} */ (layer.getSource());
        var sourceTileGrid = source.getTileGrid();
        var tileGrid = source.getTileGridForProjection(projection);
        var resolution = tileGrid.getResolution(tile.tileCoord[0]);
        var tileExtent = tileGrid.getTileCoordExtent(tile.wrappedTileCoord);
        var _loop_1 = function (t, tt) {
            var sourceTile = tile.getTile(tile.tileKeys[t]);
            if (sourceTile.getState() === ol.TileState.ERROR) {
                return "continue";
            }
            var sourceTileCoord = sourceTile.requestTileCoord;
            var sourceTileExtent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);
            var sharedExtent = ol.extent.getIntersection(tileExtent, sourceTileExtent);
            // let bufferedExtent = ol.extent.equals(sourceTileExtent, sharedExtent) ? null :
            //     ol.extent.buffer(sharedExtent, layer.getRenderBuffer() * resolution);
            var tileProjection = sourceTile.getProjection();
            var reproject = true;
            replayState.dirty = false;
            // reuse replayGroup of source Tile to reduce the memory.
            var distReplayGroup = sourceTile.getReplayGroup(layer, tile.wrappedTileCoord.toString());
            if (distReplayGroup) {
                // Check replayGroup has  replays
                var replaysZindexCount = 0;
                if (distReplayGroup.replaysByZIndex_) {
                    for (var zindex in distReplayGroup.replaysByZIndex_) {
                        replaysZindexCount++;
                    }
                }
                if (source.isMultithread && replaysZindexCount === 0) {
                    // the replays did not created, it will create after web worker call back
                    if (sourceTile)
                        if (sourceTile["reuseVectorImageTile"] === undefined) {
                            sourceTile["reuseVectorImageTile"] = [];
                        }
                    sourceTile["reuseVectorImageTile"].push(tile);
                }
                else {
                    replayState.renderedRevision = revision;
                    replayState.renderedRenderOrder = renderOrder;
                    replayState.renderedTileLoaded = true;
                }
            }
            else {
                replayGroup = new _webgl_replayGroupCustom__WEBPACK_IMPORTED_MODULE_0__["ReplayGroupCustom"](0, sharedExtent, layer.getRenderBuffer(), this_1.declutterTree_);
                // let replayGroup = new ReplayGroupCustom(0, sharedExtent, resolution, pixelRatio, source.getOverlaps(), this.declutterTree_, layer.getRenderBuffer());
                var squaredTolerance_1 = ol.renderer.vector.getSquaredTolerance(resolution, pixelRatio);
                var strategyTree_1 = ol.ext.rbush(9);
                /**
                 * @param {ol.Feature|ol.render.Feature} feature Feature.
                 * @this {ol.renderer.canvas.VectorTileLayer}
                 */
                var renderFeature_1 = function (feature, geoStyles, options) {
                    var styles;
                    if (geoStyles) {
                        if (geoStyles && geoStyles.length > 0) {
                            for (var i = 0, ii = geoStyles.length; i < ii; i++) {
                                if (geoStyles[i]) {
                                    var ol4Styles = geoStyles[i].getStyles(feature, resolution, options);
                                    if (styles === undefined) {
                                        styles = [];
                                    }
                                    Array.prototype.push.apply(styles, ol4Styles);
                                }
                            }
                        }
                    }
                    else {
                        var styleFunction = feature.getStyleFunction();
                        if (styleFunction) {
                            styles = styleFunction.call(/** @type {ol.Feature} */ (feature), resolution);
                        }
                        else {
                            styleFunction = layer.getStyleFunction();
                            if (styleFunction) {
                                styles = styleFunction(feature, resolution);
                            }
                        }
                    }
                    if (styles) {
                        var dirty = this.renderFeature(feature, squaredTolerance_1, styles, replayGroup);
                        this.dirty_ = this.dirty_ || dirty;
                        replayState.dirty = replayState.dirty || dirty;
                    }
                };
                var instructs = void 0;
                var features = void 0;
                if (sourceTile.featuresAndInstructs) {
                    instructs = sourceTile.featuresAndInstructs["instructs"];
                    features = sourceTile.featuresAndInstructs["features"];
                }
                if (source.isMultithread) {
                    // let render = this;
                    if (tileProjection.getUnits() === ol.proj.Units.TILE_PIXELS) {
                        tileProjection.setWorldExtent(sourceTileExtent);
                        tileProjection.setExtent(sourceTile.getExtent());
                    }
                    var tileProjectionInfo = {};
                    for (var name_1 in tileProjection) {
                        if (typeof tileProjection[name_1] !== "function") {
                            tileProjectionInfo[name_1] = tileProjection[name_1];
                        }
                    }
                    var projectInfo = {};
                    for (var name_2 in projection) {
                        if (typeof projection[name_2] !== "function") {
                            projectInfo[name_2] = projection[name_2];
                        }
                    }
                    var geoStyles_1 = source.getGeoFormat().styleJsonCache.geoStyles;
                    if (features && instructs) {
                        for (var i = 0; i < instructs.length; i++) {
                            var geoStyleId = instructs[i][1];
                            var geoStyle = geoStyles_1[geoStyleId];
                            var featureInfo = features[instructs[i][0]];
                            var feature = new ol.render.Feature(featureInfo.type_, featureInfo.flatCoordinates_, featureInfo.ends_, featureInfo.properties_);
                            if (featureInfo["projected"] === undefined) {
                                if (tileProjection.getUnits() === ol.proj.Units.TILE_PIXELS) {
                                    // projected tile extent
                                    tileProjection.setWorldExtent(sourceTileExtent);
                                    // tile extent in tile pixel space
                                    tileProjection.setExtent(sourceTile.getExtent());
                                }
                                feature.getGeometry().transform(tileProjection, projection);
                                feature.extent_ = null;
                                featureInfo["projected"] = "";
                            }
                            feature["tempTreeZindex"] = instructs[i][2];
                            feature["styleId"] = geoStyleId;
                            renderFeature_1.call(this_1, feature, [geoStyle], { strategyTree: strategyTree_1, frameState: frameState });
                        }
                    }
                    var messageData = [
                        [0, tileExtent, resolution, pixelRatio, source.getOverlaps(), this_1.declutterTree_, layer.getRenderBuffer(), source.getGeoFormat().minimalist],
                        sourceTile.requestTileCoord,
                        sourceTile.tileCoord,
                        tileProjectionInfo,
                        projectInfo,
                        squaredTolerance_1,
                        window.devicePixelRatio,
                        ol.getUid(source.getGeoFormat()),
                        frameState["coordinateToPixelTransform"],
                        source.getGeoFormat().maxDataZoom,
                        source["vectorTileDataCahceSize"],
                        x,
                        y
                    ];
                    rendera = this_1;
                    var callabck = function (messageData) {
                        var replaysByZIndex_ = messageData["replays"];
                        var features = messageData["features"];
                        var instructs = messageData["instructs"];
                        if (features && instructs) {
                            for (var i_1 = 0; i_1 < instructs.length; i_1++) {
                                var geoStyleId = instructs[i_1][1];
                                var geoStyle = geoStyles_1[geoStyleId];
                                var featureInfo = features[instructs[i_1][0]];
                                var feature = new ol.render.Feature(featureInfo.type_, featureInfo.flatCoordinates_, featureInfo.ends_, featureInfo.properties_);
                                feature["tempTreeZindex"] = instructs[i_1][2];
                                feature["styleId"] = geoStyleId;
                                renderFeature_1.call(rendera, feature, [geoStyle], { strategyTree: strategyTree_1, frameState: frameState });
                            }
                        }
                        // replayGroup.getReplaysMerged(replaysByZIndex_);
                        for (var zindex_1 in replaysByZIndex_) {
                            for (var replayType in replaysByZIndex_[zindex_1]) {
                                // merge worker to main with replaysByZIndex_
                                var replay = replayGroup.getReplay(zindex_1, replayType);
                                var workerReplay = replaysByZIndex_[zindex_1][replayType];
                                for (var key in workerReplay) {
                                    if (key !== 'lineStringReplay') {
                                        replay[key] = workerReplay[key];
                                    }
                                }
                                if (workerReplay['lineStringReplay']) {
                                    for (var lineStringKey in workerReplay['lineStringReplay']) {
                                        replay['lineStringReplay'][lineStringKey] = workerReplay['lineStringReplay'][lineStringKey];
                                    }
                                }
                            }
                        }
                        // for (let r in replayGroup.getReplays()) {
                        //     zIndexKeys[r] = true;
                        // }     
                        replayGroup.finish(frameState['context']);
                        replayState.renderedTileLoaded = true;
                        sourceTile.state = ol.TileState.LOADED;
                        if (sourceTile["reuseVectorImageTile"]) {
                            for (var i = 0; i < sourceTile["reuseVectorImageTile"].length; i++) {
                                var reusedVectorImageTile = sourceTile["reuseVectorImageTile"][i];
                                delete sourceTile["reuseVectorImageTile"][i];
                                var vectorImageTileReplayState = reusedVectorImageTile.getReplayState(layer);
                                vectorImageTileReplayState.renderedRevision = revision;
                                vectorImageTileReplayState.renderedRenderOrder = renderOrder;
                                vectorImageTileReplayState.renderedTileLoaded = true;
                                reusedVectorImageTile.setState(ol.TileState.LOADED);
                            }
                        }
                        tile.setState(ol.TileState.LOADED);
                    };
                    // reuse replayGroup of source Tile to reduce the memory.
                    sourceTile.setReplayGroup(layer, sourceTile.tileCoord.toString(), replayGroup);
                    source.getGeoFormat().workerManager.postMessage(sourceTile.tileCoord + ol.getUid(callabck), "createReplay", messageData, callabck, sourceTile.workerId);
                    replayState.renderedRevision = revision;
                    replayState.renderedTileLoaded = false;
                }
                else {
                    if (instructs && instructs.length > 0) {
                        for (var i = 0; i < instructs.length; i++) {
                            var featureIndex = instructs[i][0];
                            var feature = features[featureIndex];
                            if (feature["projected"] === undefined) {
                                if (reproject) {
                                    if (tileProjection.getUnits() === ol.proj.Units.TILE_PIXELS) {
                                        // projected tile extent
                                        tileProjection.setWorldExtent(sourceTileExtent);
                                        // tile extent in tile pixel space
                                        tileProjection.setExtent(sourceTile.getExtent());
                                    }
                                    feature.getGeometry().transform(tileProjection, projection);
                                    feature.extent_ = null;
                                    feature.getExtent();
                                }
                                feature["projected"] = "";
                            }
                            feature["tempTreeZindex"] = instructs[i][2];
                            renderFeature_1.call(this_1, feature, [instructs[i][1]], { strategyTree: strategyTree_1, frameState: frameState });
                        }
                    }
                    replayGroup.finish();
                    // for (let r in replayGroup.getReplays()) {
                    //     zIndexKeys[r] = true;
                    // }
                    sourceTile.setReplayGroup(layer, sourceTile.tileCoord.toString(), replayGroup);
                    replayState.renderedRevision = revision;
                    replayState.renderedRenderOrder = renderOrder;
                    replayState.renderedTileLoaded = true;
                }
            }
        };
        var this_1 = this, replayGroup, rendera;
        // let zIndexKeys = {};
        for (var t = 0, tt = tile.tileKeys.length; t < tt; ++t) {
            _loop_1(t, tt);
        }
    };
    GeoVectorTileLayerRender.prototype.renderTileImageCustom = function (tile, frameState, layerState) {
        var layer = this.getLayer();
        var replayState = tile.getReplayState(layer);
        var revision = layer.getRevision();
        var replays = ol.renderer.canvas.VectorTileLayer.IMAGE_REPLAYS[layer.getRenderMode()];
        if (replays && replayState.renderedTileLoaded && replayState.renderedTileRevision !== revision) {
            replayState.renderedTileRevision = revision;
            var tileCoord = tile.wrappedTileCoord;
            var z = tileCoord[0];
            var pixelRatio = frameState.pixelRatio;
            var source = /** @type {ol.source.VectorTile} */ (layer.getSource());
            var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);
            var resolution = tileGrid.getResolution(z);
            var context = tile.getContext(layer);
            var size = source.getTilePixelSize(z, pixelRatio, frameState.viewState.projection);
            context.canvas.width = size[0];
            context.canvas.height = size[1];
            var tileExtent = tileGrid.getTileCoordExtent(tileCoord);
            if (layer.background) {
                context.rect(0, 0, size[0], size[1]);
                context.fillStyle = layer.background;
                context.fill();
            }
            for (var i = 0, ii = tile.tileKeys.length; i < ii; ++i) {
                var sourceTile = tile.getTile(tile.tileKeys[i]);
                if (sourceTile.getState() === ol.TileState.ERROR) {
                    continue;
                }
                var pixelScale = pixelRatio / resolution;
                var transform = ol.transform.reset(this.tmpTransform_);
                ol.transform.scale(transform, pixelScale, -pixelScale);
                ol.transform.translate(transform, -tileExtent[0], -tileExtent[3]);
                // reuse replayGroup of source Tile to reduce the memory.
                var replayGroup = sourceTile.getReplayGroup(layer, tileCoord);
                replayGroup.replay(context, transform, 0, {}, replays);
            }
        }
    };
    GeoVectorTileLayerRender.handles = function (type, layer) {
        return type === ol.renderer.Type.CANVAS && layer.getType() === ol.LayerType.MAPSUITE_VECTORTILE;
    };
    GeoVectorTileLayerRender.create = function (mapRenderer, layer) {
        return new GeoVectorTileLayerRender(layer);
    };
    GeoVectorTileLayerRender.prototype.disposeInternal = function () {
        ol.events.unlisten(ol.render.canvas.labelCache, ol.events.EventType.CLEAR, this.handleFontsChanged_, this);
        var workerManager = this.getLayer().getSource().getGeoFormat().workerManager;
        workerManager.close();
        ol.renderer.canvas.TileLayer.prototype.disposeInternal.call(this);
    };
    ;
    return GeoVectorTileLayerRender;
}(ol.renderer.canvas.VectorTileLayer));



/***/ }),

/***/ "./src/render/webgl/replayGroupCustom.ts":
/*!***********************************************!*\
  !*** ./src/render/webgl/replayGroupCustom.ts ***!
  \***********************************************/
/*! exports provided: ReplayGroupCustom */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplayGroupCustom", function() { return ReplayGroupCustom; });
// import { TextReplayCustom } from "./textReplayCustom";
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var ReplayGroupCustom = /** @class */ (function (_super) {
    __extends(ReplayGroupCustom, _super);
    function ReplayGroupCustom(tolerance, maxExtent, opt_renderBuffer, declutterTree) {
        var _this = _super.call(this, tolerance, maxExtent, opt_renderBuffer) || this;
        _this.BATCH_CONSTRUCTORS_CUSTOM = {
            "Circle": ol.render.webgl.PolygonReplay,
            "Default": ol.render.webgl.Replay,
            "Image": ol.render.webgl.ImageReplay,
            "LineString": ol.render.webgl.LineStringReplay,
            "Polygon": ol.render.webgl.PolygonReplay,
            "Text": ol.render.webgl.TextReplay
        };
        _this.getReplay = _this.getReplayCustom;
        _this.BATCH_CONSTRUCTORS_ = _this.BATCH_CONSTRUCTORS_CUSTOM;
        _this.replay = _this.replayCustom;
        _this.declutterTree = declutterTree;
        return _this;
        // this.forEachFeatureAtCoordinate = this.forEachFeatureAtCoordinateCustom;
    }
    ReplayGroupCustom.prototype.forEachFeatureAtCoordinateCustom = function (coordinate, resolution, rotation, hitTolerance, skippedFeaturesHash, callback, declutterReplays) {
        hitTolerance = Math.round(hitTolerance);
        var contextSize = hitTolerance * 2 + 1;
        var transform = ol.transform.compose(this.hitDetectionTransform_, hitTolerance + 0.5, hitTolerance + 0.5, 1 / resolution, -1 / resolution, -rotation, -coordinate[0], -coordinate[1]);
        var context = this.hitDetectionContext_;
        if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {
            context.canvas.width = contextSize;
            context.canvas.height = contextSize;
        }
        else {
            context.clearRect(0, 0, contextSize, contextSize);
        }
        /**
         * @type {ol.Extent}
         */
        var hitExtent;
        if (this.renderBuffer_ !== undefined) {
            hitExtent = ol.extent.createEmpty();
            ol.extent.extendCoordinate(hitExtent, coordinate);
            ol.extent.buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);
        }
        var mask = ol.render.canvas.ReplayGroup.getCircleArray_(hitTolerance);
        var declutteredFeatures;
        // if (this.declutterTree_) {
        //     declutteredFeatures = this.declutterTree_.all().map(function (entry) {
        //         return entry.value;
        //     });
        // }
        /**
         * @param {ol.Feature|ol.render.Feature} feature Feature.
         * @return {?} Callback result.
         */
        function hitDetectionCallback(feature) {
            var imageData = context.getImageData(0, 0, contextSize, contextSize).data;
            for (var i = 0; i < contextSize; i++) {
                for (var j = 0; j < contextSize; j++) {
                    if (mask[i][j]) {
                        if (imageData[(j * contextSize + i) * 4 + 3] > 0) {
                            var result = void 0;
                            if (!declutteredFeatures || declutteredFeatures.indexOf(feature) !== -1) {
                                result = callback(feature);
                            }
                            if (result) {
                                return result;
                            }
                            else {
                                context.clearRect(0, 0, contextSize, contextSize);
                                return undefined;
                            }
                        }
                    }
                }
            }
        }
        return this.replayHitDetection_(context, transform, rotation, skippedFeaturesHash, hitDetectionCallback, hitExtent, declutterReplays);
    };
    ReplayGroupCustom.prototype.replayCustom = function (context, transform, viewRotation, skippedFeaturesHash, opt_replayTypes, opt_declutterReplays) {
        /** @type {Array.<number>} */
        var zs = Object.keys(this.replaysByZIndex_).map(Number);
        zs.sort(ol.array.numberSafeCompareFunction);
        // setup clipping so that the parts of over-simplified geometries are not
        // visible outside the current extent when panning
        // context.save();
        // this.clip(context, transform);
        var replayTypes = opt_replayTypes ? opt_replayTypes : ol.render.replay.ORDER;
        var i, ii, j, jj, replays, replay;
        for (i = 0, ii = zs.length; i < ii; ++i) {
            var zIndexKey = zs[i].toString();
            replays = this.replaysByZIndex_[zIndexKey];
            for (j = 0, jj = replayTypes.length; j < jj; ++j) {
                var replayType = replayTypes[j];
                replay = replays[replayType];
                if (replay !== undefined) {
                    if (opt_declutterReplays &&
                        (replayType === ol.render.ReplayType.IMAGE || replayType === ol.render.ReplayType.TEXT)) {
                        var declutter = opt_declutterReplays[zIndexKey];
                        if (!declutter) {
                            opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];
                        }
                        else {
                            declutter.push(replay, transform.slice(0));
                        }
                    }
                    else {
                        replay.replay(context, transform, viewRotation, skippedFeaturesHash);
                    }
                }
            }
        }
        // context.restore();
    };
    ReplayGroupCustom.prototype.getReplayCustom = function (zIndex, replayType) {
        var zIndexKey = zIndex !== undefined ? zIndex.toString() : "0";
        var replays = this.replaysByZIndex_[zIndexKey];
        if (replays === undefined) {
            replays = {};
            this.replaysByZIndex_[zIndexKey] = replays;
        }
        var replay = replays[replayType];
        if (replay === undefined) {
            var Constructor = this.BATCH_CONSTRUCTORS_[replayType];
            replay = new Constructor(this.tolerance_, this.maxExtent_, this.declutterTree);
            replays[replayType] = replay;
        }
        return replay;
    };
    return ReplayGroupCustom;
}(ol.render.webgl.ReplayGroup));



/***/ }),

/***/ "./src/source/geoVectorTileSource.ts":
/*!*******************************************!*\
  !*** ./src/source/geoVectorTileSource.ts ***!
  \*******************************************/
/*! exports provided: GeoVectorTileSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoVectorTileSource", function() { return GeoVectorTileSource; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var GeoVectorTileSource = /** @class */ (function (_super) {
    __extends(GeoVectorTileSource, _super);
    function GeoVectorTileSource(options) {
        var _this = _super.call(this, options) || this;
        _this.maxDataZoom = options.maxDataZoom;
        if (options["tileUrlFunction"] === undefined) {
            _this.setTileUrlFunction(_this.getGeoTileUrlFunction());
        }
        _this.clientId = options.clientId;
        _this.clientSecret = options.clientSecret;
        _this.geoFormat = options.format;
        _this.tileLoadFunction = _this.vectorTileLoadFunction.bind(_this);
        _this.isMultithread = options["multithread"] === undefined ? true : options["multithread"];
        return _this;
    }
    GeoVectorTileSource.prototype.getGeoFormat = function () {
        return this.geoFormat;
    };
    GeoVectorTileSource.prototype.getGeoTileUrlFunction = function () {
        var zRegEx = /\{z\}/g;
        var xRegEx = /\{x\}/g;
        var yRegEx = /\{y\}/g;
        var dashYRegEx = /\{-y\}/g;
        var urls = this.urls;
        var tileGrid = this.tileGrid;
        var maxDataZoom = this.maxDataZoom;
        return function (tileCoord) {
            if (!tileCoord) {
                return undefined;
            }
            else {
                var requestCoord_1 = [tileCoord[0], tileCoord[1], tileCoord[2]];
                if (maxDataZoom && requestCoord_1[0] > maxDataZoom) {
                    while (requestCoord_1[0] !== maxDataZoom) {
                        requestCoord_1[0] -= 1;
                        requestCoord_1[1] = Math.floor(requestCoord_1[1] / 2);
                        requestCoord_1[2] = Math.floor(requestCoord_1[2] / 2);
                    }
                }
                var h = ol.tilecoord.hash(tileCoord);
                var index = ol.math.modulo(h, urls.length);
                var template = urls[index];
                return template.replace(zRegEx, requestCoord_1[0].toString())
                    .replace(xRegEx, requestCoord_1[1].toString())
                    .replace(yRegEx, function () {
                    var y = -requestCoord_1[2] - 1;
                    return y.toString();
                })
                    .replace(dashYRegEx, function () {
                    var z = requestCoord_1[0];
                    var range = tileGrid.getFullTileRange(z);
                    ol.asserts.assert(range, 55); // The {-y} placeholder requires a tile grid with extent
                    var y = range.getHeight() + requestCoord_1[2];
                    return y.toString();
                });
            }
        };
    };
    GeoVectorTileSource.prototype.vectorTileLoadFunction = function (tile, url) {
        var loader = this.loadFeaturesXhr(url, tile.getFormat(), tile.onLoad.bind(tile), tile.onError.bind(tile), this);
        tile.setLoader(loader);
    };
    GeoVectorTileSource.prototype.getIDAndSecret = function (self) {
        var xhr = new XMLHttpRequest();
        var url = 'https://gisserver.thinkgeo.com/api/v1/auth/token';
        var content = 'ApiKey=' + self.clientId + '&ApiSecret=' + self.clientSecret;
        xhr.open("POST", url, false);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.onload = function (event) {
            if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {
                var token = JSON.parse(xhr.responseText).data.access_token;
                self.token = token;
            }
        }.bind(this);
        xhr.onerror = function () {
        }.bind(this);
        xhr.send(content);
    };
    GeoVectorTileSource.prototype.loadFeaturesXhr = function (url, format, success, failure, self) {
        return (function (extent, resolution, projection) {
            var sourceTile = this;
            var maxDataZoom = format.maxDataZoom;
            var requestTileCoord = [this.tileCoord[0], this.tileCoord[1], this.tileCoord[2]];
            if (maxDataZoom && requestTileCoord[0] > maxDataZoom) {
                while (requestTileCoord[0] !== maxDataZoom) {
                    requestTileCoord[0] -= 1;
                    requestTileCoord[1] = Math.floor(requestTileCoord[1] / 2);
                    requestTileCoord[2] = Math.floor(requestTileCoord[2] / 2);
                }
            }
            this.requestTileCoord = requestTileCoord;
            var tileGrid = self.getTileGrid();
            var tileExtent = tileGrid.getTileCoordExtent(sourceTile.tileCoord);
            var tileResolution = tileGrid.getResolution(sourceTile.tileCoord[0]);
            var callback = function (tile, callbackFunction, sourceProjection, lastExtent) {
                callbackFunction.call(tile, sourceProjection, lastExtent);
            };
            var hasRequested = false;
            hasRequested = format.registerTileLoadEvent(this, success, failure, callback);
            if (!hasRequested) {
                // Client ID and Client Secret   
                if (url.indexOf('apiKey') === -1 && self.clientId && self.clientSecret && !self.token) {
                    self.getIDAndSecret(self);
                }
                if (format.isMultithread && format.workerManager) {
                    var requestInfo = {
                        url: typeof url === "function" ? url(extent, resolution, projection) : url,
                        type: format.getType(),
                        tileCoord: this.tileCoord,
                        requestCoord: requestTileCoord,
                        minimalist: format.minimalist,
                        maxDataZoom: format.maxDataZoom,
                        formatId: ol.getUid(format),
                        layerName: format.layerName,
                        token: self.token,
                        vectorTileDataCahceSize: format["vectorTileDataCahceSize"],
                        tileRange: sourceTile.tileRange,
                        // tileCoordWithSourceCoord: sourceTile.tileCoordWithSourceCoord,
                        vectorImageTileCoord: sourceTile.vectorImageTileCoord,
                        tileExtent: tileExtent,
                        tileResolution: tileResolution,
                        tileSize: this.format_.source.tileGrid.tileSize_ * sourceTile.pixelRatio
                    };
                    var loadedCallback = function (data, methodInfo) {
                        var requestKey = data.requestKey;
                        var tileLoadEventInfos = format.registeredLoadEvents[requestKey];
                        delete format.registeredLoadEvents[requestKey];
                        for (var i = 0; i < tileLoadEventInfos.length; i++) {
                            var loadEventInfo = tileLoadEventInfos[i];
                            loadEventInfo.tile.workerId = methodInfo.workerId; // Currently, we just one web worker for one layer.
                            // let tileKey = "" + loadEventInfo.tile.tileCoord[1] + "," + loadEventInfo.tile.tileCoord[2];
                            // FIXME Eric
                            if (data.status === "cancel") {
                                loadEventInfo.tile.setState(ol.TileState.CANCEL);
                            }
                            else if (data.status === "succeed") {
                                loadEventInfo.callback(loadEventInfo.tile, loadEventInfo.successFunction, format.readProjection());
                            }
                            else {
                                loadEventInfo.callback(loadEventInfo.tile, loadEventInfo.failureFunction, format.readProjection());
                            }
                        }
                    };
                    format.workerManager.postMessage(this.tileCoord + ol.getUid(loadedCallback), "request", requestInfo, loadedCallback, undefined);
                }
                else {
                    var tileCoord_1 = this.tileCoord;
                    var tile_1 = this;
                    var xhr_1 = new XMLHttpRequest();
                    xhr_1.open("GET", typeof url === "function" ? url(extent, resolution, projection) : url, true);
                    if (self.token) {
                        xhr_1.setRequestHeader('Authorization', 'Bearer ' + self.token);
                    }
                    if (format.getType() === ol.format.FormatType.ARRAY_BUFFER) {
                        xhr_1.responseType = "arraybuffer";
                    }
                    xhr_1.onload = function (event) {
                        if (!xhr_1.status || xhr_1.status >= 200 && xhr_1.status < 300) {
                            var type = format.getType();
                            /** @type {Document|Node|Object|string|undefined} */
                            var source = void 0;
                            if (type === ol.format.FormatType.JSON ||
                                type === ol.format.FormatType.TEXT) {
                                source = xhr_1.responseText;
                            }
                            else if (type === ol.format.FormatType.XML) {
                                source = xhr_1.responseXML;
                                if (!source) {
                                    source = ol.xml.parse(xhr_1.responseText);
                                }
                            }
                            else if (type === ol.format.FormatType.ARRAY_BUFFER) {
                                source = /** @type {ArrayBuffer} */ (xhr_1.response);
                            }
                            if (source) {
                                // ReadFeature
                                var data = format.readFeaturesAndCreateInstructsNew(source, requestTileCoord, tileCoord_1);
                                // Call Load Event
                                var requestKey = tile_1.requestTileCoord.join(",") + "," + tile_1.tileCoord[0];
                                var tileLoadEventInfos = format.registeredLoadEvents[requestKey];
                                delete format.registeredLoadEvents[requestKey];
                                for (var i = 0; i < tileLoadEventInfos.length; i++) {
                                    var loadEventInfo = tileLoadEventInfos[i];
                                    var tileKey = "" + loadEventInfo.tile.tileCoord[1] + "," + loadEventInfo.tile.tileCoord[2];
                                    loadEventInfo.tile.featuresAndInstructs = { features: data[0], instructs: data[1][tileKey] };
                                    loadEventInfo.callback(loadEventInfo.tile, loadEventInfo.successFunction, format.readProjection());
                                }
                            }
                            else {
                                failure.call(this);
                            }
                        }
                        else {
                            failure.call(this);
                        }
                    }.bind(this);
                    xhr_1.onerror = function () {
                        failure.call(this);
                    }.bind(this);
                    this["xhr"] = xhr_1;
                    format.source.dispatchEvent(new ol.VectorTile.Event("sendingTileRequest", xhr_1));
                    xhr_1.send();
                }
            }
        });
    };
    return GeoVectorTileSource;
}(ol.source.VectorTile));



/***/ }),

/***/ "./src/style/detectTextLabelingStrategy.ts":
/*!*************************************************!*\
  !*** ./src/style/detectTextLabelingStrategy.ts ***!
  \*************************************************/
/*! exports provided: DetectTextLabelingStrategy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetectTextLabelingStrategy", function() { return DetectTextLabelingStrategy; });
/* harmony import */ var _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textLabelingStrategy */ "./src/style/textLabelingStrategy.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var DetectTextLabelingStrategy = /** @class */ (function (_super) {
    __extends(DetectTextLabelingStrategy, _super);
    function DetectTextLabelingStrategy() {
        var _this = _super.call(this) || this;
        _this.markLocationCore = _this.markLocationCoreCustom;
        return _this;
    }
    DetectTextLabelingStrategy.prototype.markLocationCoreCustom = function (flatCoordinates, width, height, resolution, geometryType, textStyle, grid, frameState) {
        switch (geometryType) {
            case ol.geom.GeometryType.POINT:
            case ol.geom.GeometryType.MULTI_POINT:
            case ol.geom.GeometryType.CIRCLE:
                if (this.isOverlapping(flatCoordinates, width, height, textStyle.margin, textStyle.minDistance, textStyle.minPadding, textStyle.spacing, grid, frameState)) {
                    flatCoordinates = this.movePointLabel(flatCoordinates, width, height, resolution, textStyle, grid, frameState);
                }
                break;
            case ol.geom.GeometryType.LINE_STRING:
            case ol.geom.GeometryType.MULTI_LINE_STRING:
            case ol.geom.GeometryType.POLYGON:
            case ol.geom.GeometryType.MULTI_POLYGON:
                if (this.isOverlapping(flatCoordinates, width, height, textStyle.margin, textStyle.minDistance, textStyle.minPadding, textStyle.spacing, grid, frameState)) {
                    flatCoordinates = undefined;
                }
        }
        return flatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.movePointLabel = function (flatCoordinates, width, height, resolution, textStyle, grid, frameState) {
        var gridSize = 50;
        var distance = gridSize * resolution;
        if (textStyle.placements) {
            var placements = textStyle.placements.split(",");
            for (var _i = 0, placements_1 = placements; _i < placements_1.length; _i++) {
                var placement = placements_1[_i];
                var newFlatCoordinates = this.getMovedPosition(flatCoordinates, placement, distance);
                if (!this.isOverlapping(newFlatCoordinates, width, height, textStyle.margin, textStyle.minDistance, textStyle.minPadding, textStyle.spacing, grid, frameState)) {
                    return newFlatCoordinates;
                }
            }
        }
        return undefined;
    };
    DetectTextLabelingStrategy.prototype.getMovedPosition = function (flatCoordinates, placement, distance) {
        var newFlatCoordinates;
        switch (placement) {
            case "UR":
                newFlatCoordinates = this.moveToUR(flatCoordinates, distance);
                break;
            case "U":
                newFlatCoordinates = this.moveToU(flatCoordinates, distance);
                break;
            case "UL":
                newFlatCoordinates = this.moveToUL(flatCoordinates, distance);
                break;
            case "B":
                newFlatCoordinates = this.moveToB(flatCoordinates, distance);
                break;
            case "BR":
                newFlatCoordinates = this.moveToBR(flatCoordinates, distance);
                break;
            case "BL":
                newFlatCoordinates = this.moveToBL(flatCoordinates, distance);
                break;
            case "L":
                newFlatCoordinates = this.moveToL(flatCoordinates, distance);
                break;
            case "R":
                newFlatCoordinates = this.moveToR(flatCoordinates, distance);
                break;
        }
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToUR = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] + distance);
        newFlatCoordinates.push(flatCoordinates[1] + distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToU = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0]);
        newFlatCoordinates.push(flatCoordinates[1] + distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToUL = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] - distance);
        newFlatCoordinates.push(flatCoordinates[1] + distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToB = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0]);
        newFlatCoordinates.push(flatCoordinates[1] - distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToBR = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] + distance);
        newFlatCoordinates.push(flatCoordinates[1] - distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToBL = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] - distance);
        newFlatCoordinates.push(flatCoordinates[1] - distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToL = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] - distance);
        newFlatCoordinates.push(flatCoordinates[1]);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToR = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] + distance);
        newFlatCoordinates.push(flatCoordinates[1]);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    return DetectTextLabelingStrategy;
}(_textLabelingStrategy__WEBPACK_IMPORTED_MODULE_0__["TextLabelingStrategy"]));



/***/ }),

/***/ "./src/style/geoAreaStyle.ts":
/*!***********************************!*\
  !*** ./src/style/geoAreaStyle.ts ***!
  \***********************************/
/*! exports provided: GeoAreaStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoAreaStyle", function() { return GeoAreaStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
/* harmony import */ var _style_geoBrush__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../style/geoBrush */ "./src/style/geoBrush.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var GeoAreaStyle = /** @class */ (function (_super) {
    __extends(GeoAreaStyle, _super);
    function GeoAreaStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        if (styleJson) {
            _this.brushType = styleJson["polygon-brush-type"];
            _this.rotateAngle = styleJson["polygon-rotate-angle"];
            _this.dx = styleJson["polygon-dx"];
            _this.dy = styleJson["polygon-dy"];
            _this.fill = styleJson["polygon-fill"];
            _this.foregroundFill = styleJson["polygon-foreground-fill"];
            _this.gamma = styleJson["polygon-gamma"] ? styleJson["polygon-gamma"] : true;
            _this.geometryTransform = styleJson["polygon-geometry-transform"];
            _this.hatchStyle = styleJson["polygon-hatch-style"];
            _this.opacity = styleJson["polygon-opacity"];
            _this.outlineColor = styleJson["polygon-outline-color"];
            _this.outlineDashArray = styleJson["polygon-outline-dasharray"];
            _this.outlineOpacity = styleJson["polygon-outline-opacity"];
            _this.outlineWidth = styleJson["polygon-outline-width"];
            _this.linearGradient = styleJson["polygon-linear-gradient"];
            _this.radialGradient = styleJson["polygon-radial-gradient"];
            _this.textureFile = styleJson["polygon-texture-file"];
            _this.shadowColor = styleJson["polygon-shadow-color"];
            _this.shadowDx = styleJson["polygon-shadow-dx"];
            _this.shadowDy = styleJson["polygon-shadow-dy"];
        }
        return _this;
    }
    GeoAreaStyle.prototype.initializeCore = function () {
        this.brushType = this.brushType || "solid";
        this.brushOptions = {
            fillColor: this.fill,
            fillOpacity: this.opacity,
            linearGradient: this.linearGradient,
            radialGradient: this.radialGradient,
            textureFile: this.textureFile,
            foregroundFill: this.foregroundFill,
            hatchStyle: this.hatchStyle
        };
        if (this.geometryTransform) {
            this.geometryTransformValue = this.getTransformValues(this.geometryTransform);
        }
        if (this.brushType === "solid" || this.brushType === "hatch") {
            this.geoBrush = _style_geoBrush__WEBPACK_IMPORTED_MODULE_1__["GeoBrush"].createBrushByType(this.brushType, null, null, this.brushOptions);
        }
        if (this.outlineColor) {
            this.convertedOutlineColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.outlineColor, this.outlineOpacity);
        }
        if (this.outlineDashArray) {
            this.convertedOutlineDashArray = this.outlineDashArray.split(",");
        }
        if (this.shadowColor) {
            this.convertedShadowColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.shadowColor);
        }
        this.shadowTranslateValueByResolution = {};
    };
    GeoAreaStyle.prototype.getTransformValues = function (transform) {
        // get transform values which look like transform(value1, value2)
        var start = transform.indexOf("(");
        var end = transform.indexOf(")");
        var valueString = transform.substring(start + 1, end);
        var values = [];
        if (valueString.includes(",")) {
            values = valueString.split(",");
        }
        else {
            values.push(valueString);
        }
        return values;
    };
    GeoAreaStyle.prototype.GetTransformedCoordinates = function (feature) {
        var tmpFlatCoordinates = feature.getFlatCoordinates();
        var tmpCoordinates = [[]];
        var index = 0;
        for (var i = 0; i < tmpFlatCoordinates.length; i += 2) {
            tmpCoordinates[index] || (tmpCoordinates[index] = []);
            tmpCoordinates[index].push([tmpFlatCoordinates[i], tmpFlatCoordinates[i + 1]]);
            if (tmpCoordinates[index].length > 3 && tmpCoordinates[index][0][0] === tmpFlatCoordinates[i] && tmpCoordinates[index][0][1] === tmpFlatCoordinates[i + 1]) {
                index++;
            }
        }
        var geometry = new ol.geom.Polygon(tmpCoordinates, "XY");
        if (this.geometryTransform.indexOf("translate") === 0) {
            geometry.translate(+this.geometryTransformValue[0].trim(), +this.geometryTransformValue[1].trim());
        }
        else if (this.geometryTransform.indexOf("scale") === 0) {
            geometry.scale(+this.geometryTransformValue[0].trim(), +this.geometryTransformValue[1].trim());
        }
        else if (this.geometryTransform.indexOf("rotate") === 0) {
            var center = ol.extent.getCenter(geometry.getExtent());
            var angle = +this.geometryTransformValue[0].trim() * Math.PI / 180;
            geometry.rotate(angle, center);
        }
        else if (this.geometryTransform.indexOf("skew") === 0) {
            this.skewGeometry(geometry, +this.geometryTransformValue[0].trim(), +this.geometryTransformValue[1].trim());
        }
        return geometry.flatCoordinates;
    };
    GeoAreaStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        var length = 0;
        this.styles = [];
        if (this.fill || (this.outlineColor && this.outlineWidth) || this.linearGradient || this.radialGradient) {
            if (this.geometryTransform) {
                feature.flatCoordinates_ = this.GetTransformedCoordinates(feature);
            }
            if (this.shadowDx || this.shadowDy) {
                var shadowTranslateValue = this.shadowTranslateValueByResolution[resolution];
                if (shadowTranslateValue === undefined) {
                    var tmpResolution = Math.round(resolution * 100000000) / 100000000;
                    this.shadowTranslate = ("translate(" + (this.shadowDx ? this.shadowDx : 0) * tmpResolution + "," + (this.shadowDy ? this.shadowDy : 0) * tmpResolution + ")");
                    shadowTranslateValue = this.getTransformValues(this.shadowTranslate);
                    this.shadowTranslateValueByResolution[resolution] = shadowTranslateValue;
                }
                var tmpFlatCoordinates = feature.getFlatCoordinates();
                var newFlatCoordinates = ol.geom.flat.transform.translate(tmpFlatCoordinates, 0, tmpFlatCoordinates.length, 2, +shadowTranslateValue[0].trim(), +shadowTranslateValue[1].trim(), undefined);
                var tmpCoordinates = [[]];
                var index = 0;
                for (var i = 0; i < newFlatCoordinates.length; i += 2) {
                    tmpCoordinates[index] || (tmpCoordinates[index] = []);
                    tmpCoordinates[index].push([newFlatCoordinates[i], newFlatCoordinates[i + 1]]);
                    if (tmpCoordinates[index].length > 3 && tmpCoordinates[index][0][0] === newFlatCoordinates[i] && tmpCoordinates[index][0][1] === newFlatCoordinates[i + 1]) {
                        index++;
                    }
                }
                var geometry = new ol.geom.Polygon(tmpCoordinates, "XY");
                GeoAreaStyle.areaShadowStyle.getFill().setColor(this.convertedShadowColor);
                GeoAreaStyle.areaShadowStyle.setGeometry(geometry);
                this.styles[length++] = GeoAreaStyle.areaShadowStyle;
            }
            if (this.fill) {
                this.geoBrush = _style_geoBrush__WEBPACK_IMPORTED_MODULE_1__["GeoBrush"].createBrushByType(this.brushType, feature, resolution, this.brushOptions);
                GeoAreaStyle.areaStyle.getFill().setColor(this.geoBrush);
            }
            // stroke to handle outlineColor, outlineDashArray, outlineOpacity and outlineWidth
            if (this.outlineColor || this.outlineDashArray || this.outlineWidth) {
                var newStroke = new ol.style.Stroke();
                newStroke.setColor(this.convertedOutlineColor);
                newStroke.setLineDash(this.convertedOutlineDashArray);
                newStroke.setWidth(this.outlineWidth);
                GeoAreaStyle.areaStyle.setStroke(newStroke);
            }
            else {
                GeoAreaStyle.areaStyle.setStroke(undefined);
            }
            GeoAreaStyle.areaStyle.setGeometry(feature);
            this.styles[length++] = GeoAreaStyle.areaStyle;
            if (this.gamma !== undefined && options.layer) {
                var styleGamma_1 = this.gamma;
                options.layer.on("precompose", function (evt) {
                    evt.context.imageSmoothingEnabled = styleGamma_1;
                    evt.context.webkitImageSmoothingEnabled = styleGamma_1;
                    evt.context.mozImageSmoothingEnabled = styleGamma_1;
                    evt.context.msImageSmoothingEnabled = styleGamma_1;
                });
            }
        }
        return this.styles;
    };
    GeoAreaStyle.areaStyle = new ol.style.Style({
        fill: new ol.style.Fill({}),
        stroke: new ol.style.Stroke({})
    });
    GeoAreaStyle.areaShadowStyle = new ol.style.Style({
        fill: new ol.style.Fill({}),
    });
    return GeoAreaStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));



/***/ }),

/***/ "./src/style/geoBrush.ts":
/*!*******************************!*\
  !*** ./src/style/geoBrush.ts ***!
  \*******************************/
/*! exports provided: GeoBrush */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoBrush", function() { return GeoBrush; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");

var GeoBrush = /** @class */ (function () {
    function GeoBrush() {
    }
    GeoBrush.createBrushByType = function (brushType, feature, resolution, brushTypeOptions) {
        var geoBrushFunction = this.geoBrushFunctions[brushType];
        if (typeof geoBrushFunction === "function") {
            return geoBrushFunction(feature, resolution, brushTypeOptions);
        }
        else {
            return null;
        }
    };
    GeoBrush.registerGeoBrushFunction = function (key, geoBrushFunction) {
        this.geoBrushFunctions[key] = geoBrushFunction;
    };
    GeoBrush.createGeoSolidBrush = function (feature, resolution, geoBrushOptions) {
        if (geoBrushOptions.fillColor) {
            return _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(geoBrushOptions.fillColor, geoBrushOptions.fillOpacity);
        }
    };
    GeoBrush.createRadialGradientColor = function (feature, resolution, geoBrushOptions) {
        var extent = feature.getExtent();
        // TODO: try to create it when creating the GeoStyle.
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        // TODO: check if there is a difference by srid.
        var width = ol.extent.getWidth(extent) / resolution * ol.has.DEVICE_PIXEL_RATIO;
        var height = ol.extent.getHeight(extent) / resolution * ol.has.DEVICE_PIXEL_RATIO;
        // TODO: the (x0,y0) is the center of feature extent, optimize it
        var x0 = width / 2;
        var y0 = height / 2;
        var r1 = x0;
        var grd = context.createRadialGradient(x0, y0, 0, x0, y0, r1);
        var gradientColors = geoBrushOptions.radialGradient.split(",");
        for (var _i = 0, gradientColors_1 = gradientColors; _i < gradientColors_1.length; _i++) {
            var gradientColor = gradientColors_1[_i];
            gradientColor = gradientColor.trim();
            var colorStop = gradientColor.substr(1, gradientColor.length - 2);
            var cs = colorStop.split(":");
            grd.addColorStop(Number(cs[0].trim()), _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(cs[1].trim(), geoBrushOptions.fillOpacity));
        }
        return grd;
    };
    GeoBrush.createLinearGradientColor = function (feature, resolution, geoBrushOptions) {
        var extent = feature.getExtent();
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        // TODO: the direction Angle by x0,y0,x1,y1. this.directionAngle
        var grd = context.createLinearGradient(0, 0, ol.extent.getWidth(extent) / resolution * ol.has.DEVICE_PIXEL_RATIO, ol.extent.getHeight(extent) / resolution * ol.has.DEVICE_PIXEL_RATIO);
        var gradientColors = geoBrushOptions.linearGradient.split(",");
        for (var _i = 0, gradientColors_2 = gradientColors; _i < gradientColors_2.length; _i++) {
            var gradientColor = gradientColors_2[_i];
            gradientColor = gradientColor.trim();
            var colorStop = gradientColor.substr(1, gradientColor.length - 2);
            var cs = colorStop.split(":");
            grd.addColorStop(Number(cs[0].trim()), _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(cs[1].trim(), geoBrushOptions.fillOpacity));
        }
        return grd;
    };
    GeoBrush.createImageCanvasPattern = function (feature, resolution, geoBrushOptions) {
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        var imageElement = document.createElement("img");
        imageElement.src = geoBrushOptions.textureFile;
        return context.createPattern(imageElement, "repeat");
    };
    GeoBrush.createPatternColor = function (feature, resolution, geoBrushOptions) {
        var createPatternFunction = GeoBrush.geoPatternFunctions[geoBrushOptions.hatchStyle];
        if (typeof createPatternFunction === "function") {
            return createPatternFunction(geoBrushOptions.fillColor, geoBrushOptions.foregroundFill);
        }
        else {
            return _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(geoBrushOptions.fillColor, geoBrushOptions.fillOpacity);
        }
    };
    GeoBrush.getCrossPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // horizon line
        context.fillStyle = foregroundFill;
        context.fillRect(0, canvas.height / 2, canvas.width, 1);
        // vertical line
        context.fillRect(canvas.width / 2, 0, 1, canvas.height);
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getHorizontalPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // horizon line
        context.fillStyle = foregroundFill;
        context.fillRect(0, canvas.height / 2, canvas.width, 1);
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getVerticalPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // vertical line
        context.fillStyle = foregroundFill;
        context.fillRect(canvas.width / 2, 0, 1, canvas.height);
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getForwardDiagonalPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // vertical line
        context.strokeStyle = foregroundFill;
        context.moveTo(0, 0);
        context.lineTo(canvas.width, canvas.height);
        context.stroke();
        // context.fillStyle = foregroundFill;
        // context.moveTo(-1, -1);
        // context.lineTo(1, -1);
        // context.lineTo(canvas.width + 1, canvas.height);
        // context.lineTo(canvas.width + 1, canvas.height + 1);
        // context.lineTo(canvas.width, canvas.height + 1);
        // context.lineTo(-1, 0);
        // context.lineTo(-1, -1);
        // context.closePath();
        // context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getBackwardDiagonalPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // vertical line
        context.strokeStyle = foregroundFill;
        context.moveTo(canvas.width, 0);
        context.lineTo(0, canvas.height);
        context.stroke();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent05Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.95 + 1) * ratio;
        canvas.height = size * (2 * 0.95 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.45);
        context.lineTo(canvas.width * 0.55, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.55);
        context.lineTo(canvas.width * 0.45, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.45);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent10Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.9 + 1) * ratio;
        canvas.height = size * (2 * 0.9 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.4);
        context.lineTo(canvas.width * 0.6, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.6);
        context.lineTo(canvas.width * 0.4, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.4);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent20Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.8 + 1) * ratio;
        canvas.height = size * (2 * 0.8 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.3);
        context.lineTo(canvas.width * 0.7, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.7);
        context.lineTo(canvas.width * 0.3, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.3);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent25Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 0.4 * ratio;
        canvas.height = size * 0.4 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.strokeStyle = foregroundFill;
        context.beginPath();
        context.ellipse(canvas.width * 0.25, canvas.height * 0.25, 0.8, 0.8, 0, 0, 2 * Math.PI);
        // context.stroke();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent30Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.7 + 1) * ratio;
        canvas.height = size * (2 * 0.7 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.2);
        context.lineTo(canvas.width * 0.8, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.8);
        context.lineTo(canvas.width * 0.2, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.2);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent40Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.4 + 1) * ratio;
        canvas.height = size * (2 * 0.4 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.1);
        context.lineTo(canvas.width * 0.9, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.9);
        context.lineTo(canvas.width * 0.1, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.1);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent50Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.5 + 1) * ratio;
        canvas.height = size * (2 * 0.5 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, 0);
        context.lineTo(canvas.width, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height);
        context.lineTo(0, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, 0);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent60Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.4 + 1) * ratio;
        canvas.height = size * (2 * 0.4 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.4, 0);
        context.lineTo(canvas.width * 0.6, 0);
        context.lineTo(canvas.width, canvas.height * 0.4);
        context.lineTo(canvas.width, canvas.height * 0.6);
        context.lineTo(canvas.width * 0.6, canvas.height);
        context.lineTo(canvas.width * 0.4, canvas.height);
        context.lineTo(0, canvas.height * 0.6);
        context.lineTo(0, canvas.height * 0.4);
        context.lineTo(canvas.width * 0.4, 0);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent70Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.3 + 1) * ratio;
        canvas.height = size * (2 * 0.3 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.3, 0);
        context.lineTo(canvas.width * 0.7, 0);
        context.lineTo(canvas.width, canvas.height * 0.3);
        context.lineTo(canvas.width, canvas.height * 0.7);
        context.lineTo(canvas.width * 0.7, canvas.height);
        context.lineTo(canvas.width * 0.3, canvas.height);
        context.lineTo(0, canvas.height * 0.7);
        context.lineTo(0, canvas.height * 0.3);
        context.lineTo(canvas.width * 0.3, 0);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent75Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.25 + 1) * ratio;
        canvas.height = size * (2 * 0.25 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.25, 0);
        context.lineTo(canvas.width * 0.75, 0);
        context.lineTo(canvas.width, canvas.height * 0.25);
        context.lineTo(canvas.width, canvas.height * 0.75);
        context.lineTo(canvas.width * 0.75, canvas.height);
        context.lineTo(canvas.width * 0.25, canvas.height);
        context.lineTo(0, canvas.height * 0.75);
        context.lineTo(0, canvas.height * 0.25);
        context.lineTo(canvas.width * 0.25, 0);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent80Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 0.8 * ratio;
        canvas.height = size * 0.8 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.strokeStyle = foregroundFill;
        context.beginPath();
        context.ellipse(canvas.width * 0.1, canvas.height * 0.1, 0.8, 0.8, 0, 0, 2 * Math.PI);
        // context.stroke();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent90Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.1 + 1) * ratio;
        canvas.height = size * (2 * 0.1 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.strokeStyle = foregroundFill;
        context.beginPath();
        context.ellipse(canvas.width * 0.1, canvas.height * 0.1, 0.4, 0.4, 0, 0, 2 * Math.PI);
        // context.stroke();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getLargeGridPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // grid rect
        context.strokeStyle = foregroundFill;
        context.strokeRect(0, 0, canvas.width, canvas.height);
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getDiagonalCrossPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // left to right diagonal line
        context.strokeStyle = foregroundFill;
        context.moveTo(0, 0);
        context.lineTo(canvas.width, canvas.height);
        context.stroke();
        // right to left diagonal line
        context.strokeStyle = foregroundFill;
        context.moveTo(canvas.width, 0);
        context.lineTo(0, canvas.height);
        context.stroke();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.geoBrushFunctions = {
        solid: GeoBrush.createGeoSolidBrush,
        radialgradient: GeoBrush.createRadialGradientColor,
        lineargradient: GeoBrush.createLinearGradientColor,
        hatch: GeoBrush.createPatternColor,
        texture: GeoBrush.createImageCanvasPattern
    };
    GeoBrush.geoPatternFunctions = {
        Cross: GeoBrush.getCrossPattern,
        Horizontal: GeoBrush.getHorizontalPattern,
        Vertical: GeoBrush.getVerticalPattern,
        ForwardDiagonal: GeoBrush.getForwardDiagonalPattern,
        BackwardDiagonal: GeoBrush.getBackwardDiagonalPattern,
        LargeGrid: GeoBrush.getLargeGridPattern,
        DiagonalCross: GeoBrush.getDiagonalCrossPattern,
        Percent05: GeoBrush.getPercent05Pattern,
        Percent10: GeoBrush.getPercent10Pattern,
        Percent20: GeoBrush.getPercent20Pattern,
        Percent25: GeoBrush.getPercent25Pattern,
        Percent30: GeoBrush.getPercent30Pattern,
        Percent40: GeoBrush.getPercent40Pattern,
        Percent50: GeoBrush.getPercent50Pattern,
        Percent60: GeoBrush.getPercent60Pattern,
        Percent70: GeoBrush.getPercent70Pattern,
        Percent75: GeoBrush.getPercent75Pattern,
        Percent80: GeoBrush.getPercent80Pattern,
        Percent90: GeoBrush.getPercent90Pattern,
    };
    return GeoBrush;
}());



/***/ }),

/***/ "./src/style/geoLineStyle.ts":
/*!***********************************!*\
  !*** ./src/style/geoLineStyle.ts ***!
  \***********************************/
/*! exports provided: GeoLineStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoLineStyle", function() { return GeoLineStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoLineStyle = /** @class */ (function (_super) {
    __extends(GeoLineStyle, _super);
    function GeoLineStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        _this.geometryLineCaps = [
            "triangle",
            "squareanchor",
            "roundanchor",
            "diamondanchor",
            "arrowanchor"
        ];
        _this.olLineCapsMap = {
            butt: "butt",
            flat: "square",
            square: "square",
            round: "round",
            noanchor: "square",
            anchormask: "square",
            custom: "square"
        };
        _this.convertedDashArray = new Array();
        _this.convertedInnerDashArray = new Array();
        _this.convertedCenterDashArray = new Array();
        _this.lineStroke = new ol.style.Stroke();
        _this.lineStyle = new ol.style.Style({ stroke: _this.lineStroke });
        _this.lineCapFill = new ol.style.Fill();
        _this.lineCapStyle = new ol.style.Style({ fill: _this.lineCapFill });
        _this.lineInnerStroke = new ol.style.Stroke();
        _this.lineInnerStyle = new ol.style.Style({ stroke: _this.lineInnerStroke });
        _this.lineCapInnerFill = new ol.style.Fill();
        _this.lineCapInnerStyle = new ol.style.Style({
            fill: _this.lineCapInnerFill
        });
        _this.lineCenterStroke = new ol.style.Stroke();
        _this.lineCenterStyle = new ol.style.Style({
            stroke: _this.lineCenterStroke
        });
        _this.lineCapCenterFill = new ol.style.Fill();
        _this.lineCapCenterStyle = new ol.style.Style({
            fill: _this.lineCapCenterFill
        });
        if (styleJson) {
            _this.lineCap = styleJson["line-cap"];
            _this.color = styleJson["line-color"];
            _this.dashArray = styleJson["line-dasharray"];
            _this.gamma = styleJson["line-gamma"];
            _this.geometryTransform = styleJson["line-geometry-transform"];
            _this.lineJoin = styleJson["line-join"];
            _this.miterLimit = styleJson["line-miterlimit"];
            _this.offset = styleJson["line-offset"];
            _this.opacity = styleJson["line-opacity"];
            _this.width = styleJson["line-width"];
            _this.lineCapInner = styleJson["line-cap-inner"];
            _this.colorInner = styleJson["line-color-inner"];
            _this.dashArrayInner = styleJson["line-dasharray-inner"];
            _this.lineJoinInner = styleJson["line-join-inner"];
            _this.miterLimitInner = styleJson["line-miterlimit-inner"];
            _this.widthInner = styleJson["line-width-inner"];
            _this.lineCapCenter = styleJson["line-cap-center"];
            _this.colorCenter = styleJson["line-color-center"];
            _this.dashArrayCenter = styleJson["line-dasharray-center"];
            _this.lineJoinCenter = styleJson["line-join-center"];
            _this.miterLimitCenter = styleJson["line-miterlimit-center"];
            _this.widthCenter = styleJson["line-width-center"];
            _this.onewaySymbol = styleJson["line-oneway-symbol"];
        }
        return _this;
    }
    GeoLineStyle.prototype.initializeCore = function () {
        if (this.color) {
            this.olColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.color, this.opacity);
            this.lineStroke.setColor(this.olColor);
            this.lineCapFill.setColor(this.olColor);
        }
        if (this.dashArray) {
            var tmpArray = this.dashArray.split(",");
            for (var _i = 0, tmpArray_1 = tmpArray; _i < tmpArray_1.length; _i++) {
                var a = tmpArray_1[_i];
                this.convertedDashArray.push(parseFloat(a));
            }
        }
        // Drawing inner
        if (this.colorInner) {
            this.olInnerColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.colorInner, this.opacity);
            this.lineInnerStroke.setColor(this.olInnerColor);
            this.lineCapInnerFill.setColor(this.olInnerColor);
        }
        if (this.dashArrayInner) {
            var tmpArray = this.dashArrayInner.split(",");
            for (var _a = 0, tmpArray_2 = tmpArray; _a < tmpArray_2.length; _a++) {
                var a = tmpArray_2[_a];
                this.convertedInnerDashArray.push(parseFloat(a));
            }
        }
        // Drawing center
        if (this.colorCenter) {
            this.olCenterColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.colorCenter, this.opacity);
            this.lineCenterStroke.setColor(this.olCenterColor);
            this.lineCapCenterFill.setColor(this.olCenterColor);
        }
        if (this.dashArrayCenter) {
            var tmpArray = this.dashArrayCenter.split(",");
            for (var _b = 0, tmpArray_3 = tmpArray; _b < tmpArray_3.length; _b++) {
                var a = tmpArray_3[_b];
                this.convertedCenterDashArray.push(parseFloat(a));
            }
        }
        if (this.onewaySymbol) {
            this.onewayIcon = new ol.style.Icon({
                src: this.onewaySymbol,
                imgSize: [18, 5],
                anchor: [0.5, 0.5],
                rotateWithView: true
            });
            this.onewayStyle = new ol.style.Style({
                image: this.onewayIcon
            });
        }
    };
    GeoLineStyle.prototype.getTransformValues = function (transform) {
        // get transform values which look like transform(value1, value2)
        var start = transform.indexOf("(");
        var end = transform.indexOf(")");
        var valueString = transform.substring(start + 1, end);
        var values = [];
        if (valueString.includes(",")) {
            values = valueString.split(",");
        }
        else {
            values.push(valueString);
        }
        return values;
    };
    GeoLineStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        var _this = this;
        var length = 0;
        this.styles = [];
        if (this.color && this.width) {
            if (this.olLineCapsMap[this.lineCap]) {
                this.lineStroke.setLineCap(this.olLineCapsMap[this.lineCap]);
            }
            if (this.color) {
                this.lineStroke.setColor(this.olColor);
                this.lineCapFill.setColor(this.olColor);
            }
            if (this.dashArray) {
                this.lineStroke.setLineDash(this.convertedDashArray);
            }
            if (this.lineJoin) {
                this.lineStroke.setLineJoin(this.lineJoin);
            }
            if (this.miterLimit !== 4) {
                this.lineStroke.setMiterLimit(this.miterLimit);
            }
            if (this.width) {
                this.lineStroke.setWidth(this.width);
            }
            // Set inner
            if (this.colorInner) {
                this.lineInnerStroke.setColor(this.olInnerColor);
                this.lineCapInnerFill.setColor(this.olInnerColor);
            }
            if (this.dashArrayInner) {
                this.lineInnerStroke.setLineDash(this.convertedInnerDashArray);
            }
            if (this.lineJoinInner) {
                this.lineInnerStroke.setLineJoin(this.lineJoinInner);
            }
            if (this.miterLimitInner !== 4) {
                this.lineInnerStroke.setMiterLimit(this.miterLimitInner);
            }
            if (this.widthInner) {
                this.lineInnerStroke.setWidth(this.widthInner);
            }
            // Set center
            if (this.colorCenter) {
                this.lineCenterStroke.setColor(this.olCenterColor);
                this.lineCapCenterFill.setColor(this.olCenterColor);
                this.lineCenterStroke.setLineCap("butt");
            }
            if (this.dashArrayCenter) {
                this.lineCenterStroke.setLineDash(this.convertedCenterDashArray);
            }
            if (this.lineJoinCenter) {
                this.lineCenterStroke.setLineJoin(this.lineJoinCenter);
            }
            if (this.miterLimitCenter !== 4) {
                this.lineCenterStroke.setMiterLimit(this.miterLimitCenter);
            }
            if (this.widthCenter) {
                this.lineCenterStroke.setWidth(this.widthCenter);
            }
            var geometryFunction = function (feature) {
                if (_this.geometryTransform) {
                    var geometry = _this.getGeometry(feature);
                    if (_this.geometryTransform) {
                        var values = _this.getTransformValues(_this.geometryTransform);
                        if (_this.geometryTransform.indexOf("translate") === 0) {
                            geometry.translate(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("scale") === 0) {
                            geometry.scale(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("rotate") === 0) {
                            var center = ol.extent.getCenter(geometry.getExtent());
                            var angle = +values[0].trim() * Math.PI / 180;
                            geometry.rotate(angle, center);
                        }
                        else if (_this.geometryTransform.indexOf("skew") === 0) {
                            _this.skewGeometry(geometry, +values[0].trim(), +values[1].trim());
                        }
                    }
                }
                return feature.getGeometry();
            };
            this.lineStyle.setGeometry(geometryFunction);
            this.styles[length++] = this.lineStyle;
            if (this.gamma !== undefined && options.layer) {
                var styleGamma_1 = this.gamma;
                options.layer.on("precompose", function (evt) {
                    evt.context.imageSmoothingEnabled = styleGamma_1;
                    evt.context.webkitImageSmoothingEnabled = styleGamma_1;
                    evt.context.mozImageSmoothingEnabled = styleGamma_1;
                    evt.context.msImageSmoothingEnabled = styleGamma_1;
                });
            }
            if (this.geometryLineCaps.includes(this.lineCap)) {
                var geometryFunction_1 = function (feature) {
                    var geometry = _this.getGeometry(feature);
                    return GeoLineStyle.createAnchoredGeometry(geometry, _this.lineCap, _this.width, resolution);
                };
                this.lineCapStyle.setGeometry(geometryFunction_1);
                this.styles[length++] = this.lineCapStyle;
            }
            // Drawing inner
            if (this.colorInner && this.widthInner) {
                var geometryFunction_2 = function (feature) {
                    var geometry = _this.getGeometry(feature);
                    if (_this.geometryTransform) {
                        var values = _this.getTransformValues(_this.geometryTransform);
                        if (_this.geometryTransform.indexOf("translate") === 0) {
                            geometry.translate(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("scale") === 0) {
                            geometry.scale(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("rotate") === 0) {
                            var center = ol.extent.getCenter(geometry.getExtent());
                            var angle = +values[0].trim() * Math.PI / 180;
                            geometry.rotate(angle, center);
                        }
                        else if (_this.geometryTransform.indexOf("skew") === 0) {
                            _this.skewGeometry(geometry, +values[0].trim(), +values[1].trim());
                        }
                    }
                    return feature.getGeometry();
                };
                this.lineInnerStyle.setGeometry(geometryFunction_2);
                this.styles[length++] = this.lineInnerStyle;
                if (this.geometryLineCaps.includes(this.lineCapInner)) {
                    var geometryFunction_3 = function (feature) {
                        var geometry = _this.getGeometry(feature);
                        return GeoLineStyle.createAnchoredGeometry(geometry, _this.lineCapInner, _this.widthInner, resolution);
                    };
                    this.lineCapInnerStyle.setGeometry(geometryFunction_3);
                    this.styles[length++] = this.lineCapInnerStyle;
                }
            }
            // Drawing center
            if (this.colorCenter && this.widthCenter) {
                var geometryFunction_4 = function (feature) {
                    var geometry = _this.getGeometry(feature);
                    if (_this.geometryTransform) {
                        var values = _this.getTransformValues(_this.geometryTransform);
                        if (_this.geometryTransform.indexOf("translate") === 0) {
                            geometry.translate(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("scale") === 0) {
                            geometry.scale(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("rotate") === 0) {
                            var center = ol.extent.getCenter(geometry.getExtent());
                            var angle = +values[0].trim() * Math.PI / 180;
                            geometry.rotate(angle, center);
                        }
                        else if (_this.geometryTransform.indexOf("skew") === 0) {
                            _this.skewGeometry(geometry, +values[0].trim(), +values[1].trim());
                        }
                    }
                    return feature.getGeometry();
                };
                this.lineCenterStyle.setGeometry(geometryFunction_4);
                this.styles[length++] = this.lineCenterStyle;
                if (this.geometryLineCaps.includes(this.lineCapCenter)) {
                    var geometryFunction_5 = function (feature) {
                        var geometry = _this.getGeometry(feature);
                        return GeoLineStyle.createAnchoredGeometry(geometry, _this.lineCapCenter, _this.widthCenter, resolution);
                    };
                    this.lineCapCenterStyle.setGeometry(geometryFunction_5);
                    this.styles[length++] = this.lineCapCenterStyle;
                }
            }
        }
        if (this.onewaySymbol) {
            var flatCoordinates = feature.getFlatCoordinates();
            var longest = 0;
            var longestIndex = void 0;
            for (var i = 0; i <= flatCoordinates.length - 4; i += 2) {
                var dX = Math.abs(flatCoordinates[i] - flatCoordinates[i + 2]);
                var dY = Math.abs(flatCoordinates[i + 1] - flatCoordinates[i + 3]);
                var distance = dX + dY;
                if (distance > longest) {
                    longest = distance;
                    longestIndex = i;
                }
            }
            var start = [flatCoordinates[longestIndex], flatCoordinates[longestIndex + 1]];
            var end = [flatCoordinates[longestIndex + 2], flatCoordinates[longestIndex + 3]];
            var dx = end[0] - start[0];
            var dy = end[1] - start[1];
            var rotation = Math.atan2(dy, dx);
            var centerPoint = [(start[0] + end[0]) * 0.5, (start[1] + end[1]) * 0.5];
            var geometry = new ol.geom.Point(centerPoint, "XY");
            this.onewayIcon.rotation_ = -rotation;
            this.onewayStyle.setGeometry(geometry);
            this.styles[length++] = this.onewayStyle;
        }
        return this.styles;
    };
    GeoLineStyle.prototype.getGeometry = function (feature) {
        var tmpFlatCoordinates = feature.getFlatCoordinates();
        var tmpCoordinates = [];
        for (var i = 0; i < tmpFlatCoordinates.length; i += 2) {
            tmpCoordinates.push([tmpFlatCoordinates[i], tmpFlatCoordinates[i + 1]]);
        }
        return new ol.geom.LineString(tmpCoordinates);
    };
    GeoLineStyle.createAnchoredGeometry = function (geometry, lineCap, lineWidth, resolution) {
        var segments = GeoLineStyle.getTerminalSegments(geometry);
        var linearRing = undefined;
        var multiPolygon = new ol.geom.MultiPolygon([]);
        for (var _i = 0, segments_1 = segments; _i < segments_1.length; _i++) {
            var segment = segments_1[_i];
            var first = segment[0];
            var last = segment[1];
            var delta = lineWidth * resolution / 2;
            var translateDelta = (lineWidth - 1) * resolution / 2;
            switch (lineCap) {
                case "triangle":
                    linearRing = new ol.geom.LinearRing([
                        [last[0], last[1] + delta],
                        [last[0] + delta, last[1]],
                        [last[0], last[1] - delta],
                        [last[0], last[1] + delta]
                    ]);
                    break;
                case "squareanchor":
                    delta *= 1.5;
                    linearRing = new ol.geom.LinearRing([
                        [last[0] - delta, last[1] + delta],
                        [last[0] + delta, last[1] + delta],
                        [last[0] + delta, last[1] - delta],
                        [last[0] - delta, last[1] - delta],
                        [last[0] - delta, last[1] + delta]
                    ]);
                    break;
                case "roundanchor":
                    delta *= 2;
                    var radiusDelta = Math.PI / 18;
                    var coordinates = [];
                    var radius = 0;
                    for (var i = 0; i < 36; i++) {
                        coordinates.push([
                            Math.cos(radius) * delta + last[0],
                            Math.sin(radius) * delta + last[1]
                        ]);
                        radius += radiusDelta;
                    }
                    coordinates.push(coordinates[0]);
                    linearRing = new ol.geom.LinearRing(coordinates);
                    break;
                case "diamondanchor":
                    delta *= 1.5;
                    linearRing = new ol.geom.LinearRing([
                        [last[0] - delta, last[1] + delta],
                        [last[0] + delta, last[1] + delta],
                        [last[0] + delta, last[1] - delta],
                        [last[0] - delta, last[1] - delta],
                        [last[0] - delta, last[1] + delta]
                    ]);
                    linearRing.rotate(Math.PI / 4, last);
                    break;
                case "arrowanchor":
                    delta *= 2;
                    linearRing = new ol.geom.LinearRing([
                        [last[0], last[1] + delta],
                        [last[0] + delta * Math.cos(Math.PI / 6) * 2, last[1]],
                        [last[0], last[1] - delta],
                        [last[0], last[1] + delta]
                    ]);
                    break;
            }
            if (first[0] === last[0]) {
                if (first[1] > last[1]) {
                    linearRing.rotate(-Math.PI / 2, last);
                    linearRing.translate(0, -translateDelta);
                }
                else {
                    linearRing.rotate(Math.PI / 2, last);
                    linearRing.translate(0, translateDelta);
                }
            }
            else if (first[1] === last[1]) {
                if (last[0] < first[0]) {
                    linearRing.rotate(Math.PI, last);
                    linearRing.translate(-translateDelta, 0);
                }
                else {
                    linearRing.translate(translateDelta, 0);
                }
            }
            else {
                var dx = last[0] - first[0];
                var dy = last[1] - first[1];
                var radians = Math.atan(dy / dx);
                if (last[0] > first[0]) {
                    linearRing.rotate(radians, last);
                    linearRing.translate(Math.cos(radians) * translateDelta, Math.sin(radians) * translateDelta);
                }
                else {
                    linearRing.rotate(radians + Math.PI, last);
                    linearRing.translate(-Math.cos(radians) * translateDelta, -Math.sin(radians) * translateDelta);
                }
            }
            var polygon = new ol.geom.Polygon([]);
            polygon.appendLinearRing(linearRing);
            multiPolygon.appendPolygon(polygon);
        }
        return multiPolygon;
    };
    GeoLineStyle.getTerminalSegments = function (geometry) {
        var type = geometry.getType();
        var results = [];
        var geometryType = ol.geom.GeometryType;
        switch (type) {
            case geometryType.LINE_STRING:
                var coords = geometry.getCoordinates();
                var start = [coords[1], coords[0]];
                var end = [coords[coords.length - 2], coords[coords.length - 1]];
                results.push(start);
                results.push(end);
                break;
            case geometryType.MULTI_LINE_STRING:
                var lines = geometry.getLineStrings();
                for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {
                    var line = lines_1[_i];
                    Array.prototype.push.apply(results, GeoLineStyle.getTerminalSegments(line));
                }
                break;
            case geometryType.GEOMETRY_COLLECTION:
                var geometries = geometry.getGeometries();
                for (var _a = 0, geometries_1 = geometries; _a < geometries_1.length; _a++) {
                    var geom = geometries_1[_a];
                    Array.prototype.push.apply(results, GeoLineStyle.getTerminalSegments(geom));
                }
                break;
        }
        return results;
    };
    return GeoLineStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));



/***/ }),

/***/ "./src/style/geoPointStyle.ts":
/*!************************************!*\
  !*** ./src/style/geoPointStyle.ts ***!
  \************************************/
/*! exports provided: GeoPointStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoPointStyle", function() { return GeoPointStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoPointStyle = /** @class */ (function (_super) {
    __extends(GeoPointStyle, _super);
    function GeoPointStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        if (styleJson) {
            _this.glyph = styleJson["point-glyph"];
            _this.linearGradient = styleJson["point-linear-gradient"];
            _this.radialGradient = styleJson["point-radial-gradient"];
            _this.fill = styleJson["point-fill"];
            _this.glyphName = styleJson["point-glyph-name"];
            _this.glyphMaskColor = styleJson["point-glyph-mask-color"];
            _this.glyphMaskMargin = styleJson["point-glyph-mask-margin"];
            _this.glyphMaskOutlineColor = styleJson["point-glyph-mask-outline-color"];
            _this.glyphMaskOutlineWidth = styleJson["point-glyph-mask-outline-width"];
            _this.glyphMaskType = styleJson["point-glyph-mask-type"];
            _this.outlineColor = styleJson["point-outline-color"];
            _this.outlineWidth = styleJson["point-outline-width"];
            _this.size = styleJson["point-size"];
            _this.angle = styleJson["point-rotate-angle"] ? styleJson["point-rotate-angle"] : 0;
            _this.dx = styleJson["point-dx"];
            _this.dy = styleJson["point-dy"];
            _this.pointFile = styleJson["point-file"];
            _this.opacity = styleJson["point-opacity"];
            _this.symbolType = styleJson["point-symbol-type"];
            _this.transform = styleJson["point-transform"];
            _this.pointType = styleJson["point-type"];
            if (_this.outlineColor) {
                _this.convertedGlyphOutLineColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(_this.outlineColor, _this.opacity);
            }
            if (_this.fill) {
                _this.convertedGlyphFill = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(_this.fill, _this.opacity);
            }
            if (_this.linearGradient) {
                if (GeoPointStyle.linearGradientDictionary.hasOwnProperty(_this.linearGradient)) {
                    _this.convertedGlyphFill = GeoPointStyle.linearGradientDictionary[_this.linearGradient];
                }
                else {
                    _this.convertedGlyphFill = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toOLLinearGradient(_this.linearGradient, _this.opacity, _this.size);
                    GeoPointStyle.linearGradientDictionary[_this.linearGradient] = _this.convertedGlyphFill;
                }
            }
            if (_this.radialGradient) {
                if (GeoPointStyle.radialGradientDictionary.hasOwnProperty(_this.radialGradient)) {
                    _this.convertedGlyphFill = GeoPointStyle.radialGradientDictionary[_this.radialGradient];
                }
                else {
                    _this.convertedGlyphFill = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toOLRadialGradient(_this.radialGradient, _this.opacity, _this.size);
                    GeoPointStyle.radialGradientDictionary[_this.radialGradient] = _this.convertedGlyphFill;
                }
            }
        }
        return _this;
    }
    GeoPointStyle.prototype.initializeCore = function () {
        this.style = new ol.style.Style();
        switch (this.pointType) {
            case "symbol":
                this.initSymbolStyle();
                break;
            case "image":
                this.initBitmapStyle();
                break;
            case "glyph":
                this.initGlyphStyle();
            default:
                break;
        }
        if (this.pointType === "glyph") {
            if (this.glyph && this.glyphName) {
                this.textStyle.label = this.getGlyphImage(this.textStyle);
                this.style.setImage(null);
                this.style.setText(this.textStyle);
            }
        }
        else {
            this.style.setImage(this.imageStyle);
        }
    };
    GeoPointStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        if (this.pointType === "glyph") {
            if (this.glyph && this.glyphName) {
                this.textStyle.labelPosition = feature.getFlatCoordinates();
            }
        }
        var featureZindex = feature["tempTreeZindex"];
        if (featureZindex === undefined) {
            featureZindex = 0;
        }
        this.style.setZIndex(featureZindex);
        this.styles = [];
        this.styles[0] = this.style;
        return this.styles;
    };
    GeoPointStyle.prototype.getGlyphImage = function (textState) {
        var font = textState.font_;
        var strokeColor;
        var outlineWidth = 0;
        var textStrok = textState.getStroke();
        if (textStrok) {
            strokeColor = textStrok.getColor();
            outlineWidth = textStrok.getWidth();
        }
        var scale = window.devicePixelRatio;
        // here
        var width = ol.render.canvas.TextReplay.measureTextWidths(font, [textState.text_], []) + outlineWidth * 2;
        var height = ol.render.canvas.measureTextHeight(font) + outlineWidth * 2;
        var tmpMaskMargin = (this.glyphMaskMargin ? this.glyphMaskMargin : "0").split(',');
        var tmpMaskHeightMargin = 0;
        var tmpMaskWidthMargin = 0;
        switch (tmpMaskMargin.length) {
            case 1:
                tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) * 2;
                tmpMaskWidthMargin = parseInt(tmpMaskMargin[0]) * 2;
                break;
            case 2:
                tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) * 2;
                tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) * 2;
                break;
            case 3:
                tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) + parseInt(tmpMaskMargin[2]);
                tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) * 2;
                break;
            case 4:
                tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) + parseInt(tmpMaskMargin[2]);
                tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) + parseInt(tmpMaskMargin[3]);
                break;
            default:
                break;
        }
        var tmpMaskOutlineWidth = (this.glyphMaskOutlineWidth ? this.glyphMaskOutlineWidth : 0) * 2;
        var renderWidth = width + tmpMaskWidthMargin;
        var renderHeight = height + tmpMaskWidthMargin;
        var canvasWidth = width + tmpMaskWidthMargin + tmpMaskOutlineWidth;
        var canvasHeight = height + tmpMaskHeightMargin + tmpMaskOutlineWidth;
        var context = ol.dom.createCanvasContext2D(canvasWidth * scale, canvasHeight * scale);
        if (scale !== 1) {
            context.scale(scale, scale);
        }
        this.drawMask(context, 0, 0, renderWidth, renderHeight);
        context.font = font;
        context.textBaseline = "middle";
        context.textAlign = "center";
        if (textStrok) {
            if (strokeColor && outlineWidth > 0) {
                context.strokeStyle = strokeColor;
                context.lineWidth = outlineWidth * (ol.has.SAFARI ? scale : 1);
                context.strokeText(textState.text_, canvasWidth / 2, canvasHeight / 2);
            }
        }
        var textFill = textState.getFill();
        if (textFill) {
            var color = textFill.getColor();
            if (color) {
                context.fillStyle = color;
                context.fillText(textState.text_, canvasWidth / 2, canvasHeight / 2);
            }
        }
        return context.canvas;
    };
    GeoPointStyle.prototype.drawMask = function (context, x, y, width, height) {
        var fill = undefined;
        var stroke = undefined;
        if (this.glyphMaskColor) {
            fill = new ol.style.Fill();
            fill.setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.glyphMaskColor, this.opacity ? this.opacity : 1));
        }
        if (this.glyphMaskOutlineColor && this.glyphMaskOutlineWidth) {
            stroke = new ol.style.Stroke();
            if (this.glyphMaskOutlineColor) {
                stroke.setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.glyphMaskOutlineColor, this.opacity ? this.opacity : 1));
            }
            if (this.glyphMaskOutlineWidth) {
                stroke.setWidth(this.glyphMaskOutlineWidth ? this.glyphMaskOutlineWidth : 0);
            }
        }
        switch (this.glyphMaskType) {
            case "default":
            case "Default":
            case "rectangle":
            case "Rectangle":
                this.drawRectangle(context, x, y, width, height, fill, stroke);
                break;
            case "roundedCorners":
            case "RoundedCorners":
                this.drawRoundRectangle(context, x, y, width, height, fill, stroke);
                break;
            case "roundedEnds":
            case "RoundedEnds":
                this.drawRoundedEnds(context, x, y, width, height, fill, stroke);
                break;
            case "circle":
            case "Circle":
                this.drawCircle(context, x, y, width, height, fill, stroke);
                break;
        }
    };
    GeoPointStyle.prototype.drawRectangle = function (context, x, y, width, height, fill, stroke) {
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fillRect(x, y, width, height);
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.strokeRect(x + stroke.getWidth(), y + stroke.getWidth(), width, height);
        }
    };
    GeoPointStyle.prototype.drawRoundRectangle = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.3;
        // width *= 0.9;
        // height *= 0.8;
        if (stroke) {
            x = x + (stroke.getWidth() ? stroke.getWidth() : 0);
            y = y + (stroke.getWidth() ? stroke.getWidth() : 0);
        }
        context.beginPath();
        context.moveTo(x + radius, y);
        context.lineTo(x + width - radius, y);
        context.quadraticCurveTo(x + width, y, x + width, y + radius);
        context.lineTo(x + width, y + height - radius);
        context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        context.lineTo(x + radius, y + height);
        context.quadraticCurveTo(x, y + height, x, y + height - radius);
        context.lineTo(x, y + radius);
        context.quadraticCurveTo(x, y, x + radius, y);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoPointStyle.prototype.drawRoundedEnds = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.2;
        // width *= 0.9;
        // height *= 0.8;
        if (stroke) {
            x = x + (stroke.getWidth() ? stroke.getWidth() : 0);
            y = y + (stroke.getWidth() ? stroke.getWidth() : 0);
        }
        context.beginPath();
        context.moveTo(x + radius, y);
        context.lineTo(x + width - radius, y);
        context.quadraticCurveTo(x + width, y + height * 0.5, x + width - radius, y + height);
        context.lineTo(x + radius, y + height);
        context.quadraticCurveTo(x, y + height * 0.5, x + radius, y);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoPointStyle.prototype.drawCircle = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.5;
        // width *= 0.9;
        // height *= 0.8;
        if (stroke) {
            x = x + (stroke.getWidth() ? stroke.getWidth() : 0);
            y = y + (stroke.getWidth() ? stroke.getWidth() : 0);
        }
        context.beginPath();
        context.arc(x + width * 0.5, y + height * 0.5, radius, 0, 2 * Math.PI, false);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoPointStyle.prototype.initSymbolStyle = function () {
        var radius = this.size / 2;
        switch (this.symbolType) {
            case "circle":
                this.imageStyle = new ol.style.Circle({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    radius: radius
                });
                break;
            case "square":
                this.imageStyle = new ol.style.RegularShape({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    points: 4,
                    radius: radius,
                    angle: Math.PI / 4 + this.angle
                });
                break;
            case "triangle":
                this.imageStyle = new ol.style.RegularShape({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    points: 3,
                    radius: radius,
                    angle: this.angle
                });
                break;
            case "cross":
                this.imageStyle = new ol.style.RegularShape({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    points: 4,
                    radius: radius,
                    radius2: 0,
                    angle: this.angle
                });
                break;
            case "diamond":
                break;
            case "diamond2":
                break;
            case "star":
                this.imageStyle = new ol.style.RegularShape({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    points: 5,
                    radius: radius,
                    radius2: radius / 2.5,
                    angle: this.angle
                });
                break;
            case "star2":
                break;
        }
    };
    GeoPointStyle.prototype.initBitmapStyle = function () {
        if (this.pointFile) {
            this.imageStyle = new ol.style.Icon(({
                opacity: this.opacity || 1,
                src: this.pointFile,
                rotation: this.angle * Math.PI / 180,
                offset: [this.dx, -this.dy]
            }));
        }
    };
    GeoPointStyle.prototype.initGlyphStyle = function () {
        if (this.glyph) {
            this.textStyle = new ol.style.Text(({
                font: this.size + "px " + this.glyph,
                offsetX: this.dx,
                offsetY: this.dy,
                text: this.glyphName,
                fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                    color: this.convertedGlyphFill
                })) : undefined,
                stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                    color: this.convertedGlyphOutLineColor,
                    width: this.outlineWidth
                })) : undefined,
                rotation: this.angle * Math.PI / 180
            }));
        }
    };
    GeoPointStyle.prototype.applyTransForm = function (style) {
        var transformRgx = /([a-z]+)\((.*?)\)/i;
        if (this.transform && transformRgx.test(this.transform)) {
            var matchedResults = this.transform.match(transformRgx);
            var transFormType = matchedResults.length > 2 ? matchedResults[1] : "";
            var transFormValue = matchedResults.length > 2 ? matchedResults[2] : "";
            switch (transFormType) {
                case "rotate":
                    style.getImage() && style.getImage().setRotation(parseInt(transFormValue));
                    style.getText() && style.getText().setRotation(parseInt(transFormValue));
                    break;
                case "scale":
                    var scale = parseInt(transFormValue.split(",")[0]);
                    style.getImage() && style.getImage().setScale(scale);
                    style.getText() && style.getText().setScale(scale);
                    break;
                case "translate":
                default:
                    throw "not support " + this.transform;
            }
        }
    };
    GeoPointStyle.linearGradientDictionary = {};
    GeoPointStyle.radialGradientDictionary = {};
    return GeoPointStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));



/***/ }),

/***/ "./src/style/geoShieldStyle.ts":
/*!*************************************!*\
  !*** ./src/style/geoShieldStyle.ts ***!
  \*************************************/
/*! exports provided: GeoShieldStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoShieldStyle", function() { return GeoShieldStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
/* harmony import */ var _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./textLabelingStrategy */ "./src/style/textLabelingStrategy.ts");
/* harmony import */ var _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./detectTextLabelingStrategy */ "./src/style/detectTextLabelingStrategy.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



var GeoShieldStyle = /** @class */ (function (_super) {
    __extends(GeoShieldStyle, _super);
    function GeoShieldStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        _this.textAligns = ["left", "right", "center", "end", "start"];
        _this.BATCH_CONSTRUCTORS_DEFAULT = {
            Point: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            MultiPoint: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            LineString: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            Circle: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            MultiLineString: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            Polygon: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            MultiPolygon: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"]
        };
        _this.BATCH_CONSTRUCTORS_DETECT = {
            Point: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            MultiPoint: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            LineString: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            Circle: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            MultiLineString: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            Polygon: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            MultiPolygon: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"]
        };
        _this.imageCache = [];
        _this.labelInfos = new ol.structs.LRUCache(512);
        _this.charWidths = {};
        if (styleJson) {
            _this.iconType = styleJson["shield-icon-type"];
            _this.iconSymbolType = styleJson["shield-icon-symbol-type"];
            _this.iconSize = styleJson["shield-icon-size"] ? styleJson["shield-icon-size"] : 0;
            _this.iconSrc = styleJson["shield-icon-src"];
            _this.iconColor = styleJson["shield-icon-color"];
            _this.iconOutlineColor = styleJson["shield-icon-outline-color"];
            _this.iconOutlineWidth = styleJson["shield-icon-outline-width"] ? styleJson["shield-icon-outline-width"] : 0;
            if (_this.iconSrc) {
                if (!GeoShieldStyle.poiCache[_this.iconSrc]) {
                    var imageElement = document.createElement("img");
                    imageElement.src = _this.iconSrc;
                    GeoShieldStyle.poiCache[_this.iconSrc] = imageElement;
                }
            }
            _this.name = styleJson["shield-name"];
            _this.font = styleJson["shield-font"];
            _this.align = styleJson["shield-align"];
            _this.angle = styleJson["shield-rotate-angle"] ? styleJson["shield-rotate-angle"] : 0;
            // this.avoidEdges = styleJson["shield-avoid-edges"];
            _this.dateFormat = styleJson["shield-date-format"];
            // TODO
            _this.dx = styleJson["shield-dx"] ? styleJson["shield-dx"] : 0;
            _this.dy = styleJson["shield-dy"] ? styleJson["shield-dy"] : 0;
            _this.faceName = styleJson["shield-face-name"];
            _this.fill = styleJson["shield-fill"];
            // this.forceHorizontalForLine = styleJson["shield-force-horizontal-for-line"];
            _this.haloFill = styleJson["shield-halo-fill"] ? styleJson["shield-halo-fill"] : "Transparent";
            _this.haloRadius = styleJson["shield-halo-radius"] ? styleJson["shield-halo-radius"] : 0;
            // using in strategy
            _this.margin = styleJson["shield-margin"];
            // this.maxCharAngleDelta = styleJson["shield-max-char-angle-delta"];
            // using in strategy
            _this.minDistance = styleJson["shield-min-distance"];
            // using in strategy
            _this.minPadding = styleJson["shield-min-padding"];
            _this.name = styleJson["shield-name"];
            _this.numericFormat = styleJson["shield-numeric-format"];
            _this.opacity = styleJson["shield-opacity"];
            _this.orientation = styleJson["shield-orientation"];
            // using in strategy
            _this.placements = styleJson["shield-placements"] ? styleJson["shield-placements"] : "UR,U,UL,B,BR,BL,L,R";
            // using in strategy
            _this.placementType = styleJson["shield-placement-type"] ? styleJson["shield-placement-type"] : "default";
            _this.size = styleJson["shield-size"];
            // using in strategy
            _this.spacing = styleJson["shield-spacing"] !== undefined ? styleJson["shield-spacing"] : 10;
            _this.textFormat = styleJson["shield-text-format"];
            _this.wrap = styleJson["shield-wrap-before"] ? true : styleJson["shield-wrap-before"];
            _this.wrapWidth = styleJson["shield-wrap-width"];
        }
        return _this;
    }
    GeoShieldStyle.prototype.initializeCore = function () {
        var font;
        var size;
        this.textStyle = new ol.style.Text({
            stroke: new ol.style.Stroke()
        });
        if (this.textAligns.indexOf(this.align) >= 0) {
            this.textStyle.setTextAlign(this.align);
        }
        if (this.font) {
            this.textStyle.setFont(this.font ? this.font : "10px sans-serif");
        }
        if (this.fill) {
            this.textStyle.getFill().setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.fill, this.opacity));
        }
        if (this.haloFill) {
            this.textStyle.getStroke().setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.haloFill, this.opacity));
        }
        if (this.haloRadius) {
            this.textStyle.getStroke().setWidth(this.haloRadius);
        }
        if (this.orientation) {
            this.textStyle.setRotation(this.orientation);
        }
        if (this.iconColor) {
            this.convertSymbolColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.iconColor);
        }
        if (this.iconOutlineColor) {
            this.convertSymbolOutlineColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.iconOutlineColor);
        }
        this.style = new ol.style.Style({
            text: this.textStyle
        });
        var chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
        for (var i = 0; i < chars.length; i++) {
            this.charWidths[chars[i]] = ol.render.canvas.measureTextWidth(this.font, chars[i]);
        }
        this.charWidths[" "] = ol.render.canvas.measureTextWidth(this.font, " ");
        for (var i = 0; i <= 9; i++) {
            this.charWidths[i] = ol.render.canvas.measureTextWidth(this.font, i);
        }
        switch (this.iconType) {
            case "image":
            case "Image":
                this.setShiledImageIcon();
                break;
            case "symbol":
            case "Symbol":
                this.setShieldSymbolIcon();
                break;
        }
    };
    GeoShieldStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        var featureText = "";
        if (this.name) {
            featureText = feature.get(this.name);
        }
        featureText = this.formatText(featureText);
        if (featureText === undefined || featureText === "") {
            return;
        }
        this.textStyle.setText(featureText);
        var labelInfo = this.getLabelInfo(featureText);
        var flatCoordinates = this.setLabelPosition(feature, resolution, labelInfo, options.strategyTree, options.frameState);
        if (flatCoordinates === undefined || flatCoordinates.length < 2) {
            return;
        }
        this.style.setGeometry(new ol.geom.Point(flatCoordinates, "XY"));
        var labelimage = this.getImage(labelInfo);
        this.textStyle.label = labelimage;
        this.textStyle.labelPosition = flatCoordinates;
        if (this.imageCache[featureText] === undefined) {
            this.imageCache[featureText] = [];
        }
        var featureZindex = feature["tempTreeZindex"];
        if (featureZindex === undefined) {
            featureZindex = 0;
        }
        this.style.setZIndex(featureZindex);
        return [this.style];
    };
    GeoShieldStyle.prototype.setShieldSymbolIcon = function () {
        if (this.iconSymbolType !== undefined) {
            switch (this.iconSymbolType) {
                case "circle":
                    this.setCircleIcon();
                    break;
                case "square":
                    this.setSquareIcon();
                    break;
                case "triangle":
                    this.setTriangleIcon();
                    break;
                case "cross":
                    this.setCrossIcon();
                    break;
                case "star":
                    this.setStarIcon();
                    break;
            }
            this.style.setImage(this.image);
        }
    };
    GeoShieldStyle.prototype.setStarIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.RegularShape({
            fill: fill,
            stroke: stroke,
            points: 5,
            radius: radius,
            radius2: radius / 2.5,
            angle: this.angle
        });
    };
    GeoShieldStyle.prototype.setCrossIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.RegularShape({
            fill: fill,
            stroke: stroke,
            points: 4,
            radius: radius,
            radius2: 0,
            angle: this.angle
        });
    };
    GeoShieldStyle.prototype.setTriangleIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.RegularShape({
            fill: fill,
            stroke: stroke,
            points: 3,
            radius: radius,
            angle: this.angle
        });
    };
    GeoShieldStyle.prototype.setSquareIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.RegularShape({
            fill: fill,
            stroke: stroke,
            points: 4,
            radius: radius,
            angle: Math.PI / 4 + this.angle
        });
    };
    GeoShieldStyle.prototype.setCircleIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.Circle({
            fill: fill,
            stroke: stroke,
            radius: radius
        });
    };
    GeoShieldStyle.prototype.setShiledImageIcon = function () {
        if (this.iconSrc !== undefined) {
            var poiImg = GeoShieldStyle.poiCache[this.iconSrc];
            if (poiImg.complete) {
                if (poiImg.naturalWidth !== 0) {
                    this.image = new ol.style.Icon({
                        img: poiImg,
                        imgSize: [poiImg.width, poiImg.height],
                        rotation: this.angle * Math.PI / 180
                    });
                    this.style.setImage(this.image);
                }
            }
        }
    };
    GeoShieldStyle.prototype.getLabelInfo = function (text) {
        var key = text;
        if (!this.labelInfos.containsKey(key)) {
            var font = this.formatFont(this.textStyle.getFont());
            text = this.wrapText(text, font);
            var fillState = this.textStyle.getFill();
            var strokeState = this.textStyle.getStroke();
            var pixelRatio = window.devicePixelRatio;
            var scale = this.textStyle.getScale();
            scale = (scale ? scale : 1) * pixelRatio;
            var align = ol.render.replay.TEXT_ALIGN[this.textStyle.getTextAlign() || ol.render.canvas.defaultTextAlign];
            var strokeWidth = strokeState && strokeState.getWidth() ? strokeState.getWidth() : 0;
            var lines = text.split("\n");
            var numLines = lines.length;
            var widths = [];
            // let width = (<any>ol.render.canvas).TextReplay.measureTextWidths(font, lines, widths);
            var width = this.getEstimatedWidth(font, lines, widths);
            var renderWidth = width + strokeWidth;
            var lineHeight = ol.render.canvas.measureTextHeight(font);
            var height = lineHeight * numLines;
            // if (this.dx) { this.textStyle.setOffsetX(this.dx + height / 2); }
            if (this.dx) {
                this.textStyle.setOffsetX(this.dx);
            }
            // if (this.dy) { this.textStyle.setOffsetY(this.dy + height / 2); }
            if (this.dy) {
                this.textStyle.setOffsetY(this.dy);
            }
            var labelWidth = Math.ceil(renderWidth * scale);
            var labelHeight = Math.ceil((height + strokeWidth) * scale);
            var labelInfo = {
                width: labelWidth,
                height: labelHeight,
                scale: scale,
                numLines: numLines,
                lines: lines,
                widths: widths,
                lineHeight: lineHeight,
                font: font
            };
            this.labelInfos.set(key, labelInfo);
        }
        return this.labelInfos.get(key);
    };
    GeoShieldStyle.prototype.setLabelPosition = function (geometry, resolution, labelInfo, strategyTree, frameState) {
        var geometryType = geometry.getType();
        var flatCoordinates;
        var i, ii;
        var Constructor;
        if (this.placementType === "default") {
            Constructor = this.BATCH_CONSTRUCTORS_DEFAULT[geometryType];
        }
        else if (this.placementType === "detect") {
            Constructor = this.BATCH_CONSTRUCTORS_DETECT[geometryType];
        }
        var textLabelingStrategy = new Constructor();
        var width = labelInfo.width;
        var height = labelInfo.height;
        switch (geometryType) {
            case ol.geom.GeometryType.POINT:
            case ol.geom.GeometryType.MULTI_POINT:
                flatCoordinates = geometry.getFlatCoordinates();
                break;
            case ol.geom.GeometryType.LINE_STRING:
                flatCoordinates = /** @type {ol.geom.LineString} */ (geometry).getFlatMidpoint();
                break;
            case ol.geom.GeometryType.CIRCLE:
                flatCoordinates = /** @type {ol.geom.Circle} */ (geometry).getCenter();
                break;
            case ol.geom.GeometryType.MULTI_LINE_STRING:
                flatCoordinates = /** @type {ol.geom.MultiLineString} */ (geometry).getFlatMidpoints();
                break;
            case ol.geom.GeometryType.POLYGON:
                flatCoordinates = /** @type {ol.geom.Polygon} */ (geometry).getFlatInteriorPoint();
                break;
            case ol.geom.GeometryType.MULTI_POLYGON:
                var interiorPoints = /** @type {ol.geom.MultiPolygon} */ (geometry).getFlatInteriorPoints();
                flatCoordinates = [];
                for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {
                    if (this.textStyle.overflow || interiorPoints[i + 2] / resolution >= width) {
                        flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);
                    }
                }
                break;
            default:
        }
        flatCoordinates = textLabelingStrategy.markLocation(flatCoordinates, width, height, resolution, geometryType, this, strategyTree, frameState);
        return flatCoordinates;
    };
    GeoShieldStyle.prototype.getEstimatedWidth = function (font, lines, widths) {
        var numLines = lines.length;
        var width = 0;
        var currentWidth, i;
        for (i = 0; i < numLines; ++i) {
            currentWidth = 0;
            for (var j = 0; j < lines[i].length; j++) {
                var charWidth = this.charWidths[lines[i][j]];
                if (charWidth) {
                    currentWidth += charWidth;
                }
                else {
                    currentWidth += this.charWidths["W"];
                }
            }
            width = Math.max(width, currentWidth);
            widths.push(currentWidth);
        }
        return width;
    };
    GeoShieldStyle.prototype.getImage = function (labelInfo) {
        if (labelInfo.label === undefined) {
            var context = ol.dom.createCanvasContext2D(labelInfo.width, labelInfo.height);
            var label = context.canvas;
            if (labelInfo.scale !== 1) {
                context.scale(labelInfo.scale, labelInfo.scale);
            }
            context.font = labelInfo.font;
            var strokeState = this.textStyle.getStroke();
            var strokeWidth = strokeState && strokeState.getWidth() ? strokeState.getWidth() : 0;
            var fillState = this.textStyle.getFill();
            if (strokeState) {
                context.strokeStyle = strokeState.getColor() ? strokeState.getColor() : "Transparent";
                context.lineWidth = strokeWidth * (ol.has.SAFARI ? labelInfo.scale : 1);
                context.lineCap = strokeState.getLineCap();
                context.lineJoin = strokeState.getLineJoin();
                context.miterLimit = strokeState.getMiterLimit();
                var lineDash = strokeState.getLineDash();
                lineDash = lineDash ? lineDash.slice() : ol.render.canvas.defaultLineDash;
                if (ol.has.CANVAS_LINE_DASH && lineDash.length) {
                    context.setLineDash(strokeState.getLineDash());
                    context.lineDashOffset = strokeState.getLineDashOffset();
                }
            }
            if (fillState) {
                context.fillStyle = fillState.getColor();
            }
            context.textBaseline = "middle";
            context.textAlign = "center";
            var align = ol.render.replay.TEXT_ALIGN[this.textStyle.getTextAlign() || ol.render.canvas.defaultTextAlign];
            var leftRight = (0.5 - align);
            var x = align * label.width / labelInfo.scale + leftRight * strokeWidth;
            var i = void 0;
            if (strokeState) {
                for (i = 0; i < labelInfo.numLines; ++i) {
                    context.strokeText(labelInfo.lines[i], x + leftRight * labelInfo.widths[i], 0.5 * (strokeWidth + labelInfo.lineHeight) + i * labelInfo.lineHeight);
                }
            }
            if (fillState) {
                for (i = 0; i < labelInfo.numLines; ++i) {
                    context.fillText(labelInfo.lines[i], x + leftRight * labelInfo.widths[i], 0.5 * (strokeWidth + labelInfo.lineHeight) + i * labelInfo.lineHeight);
                }
            }
            labelInfo["label"] = label;
        }
        return labelInfo["label"];
    };
    GeoShieldStyle.prototype.formatText = function (featureText) {
        if (this.numericFormat) {
            featureText = this.getTextWithNumericFormat(featureText);
        }
        if (this.dateFormat) {
            featureText = this.getTextWithDateFormat(featureText);
        }
        if (this.textFormat) {
            featureText = this.getTextWithFormat(featureText);
        }
        return featureText;
    };
    GeoShieldStyle.prototype.getTextWithNumericFormat = function (featureText) {
        var tmpArguments = this.numericFormat.split(",");
        var numericFormatOptions = {};
        for (var _i = 0, tmpArguments_1 = tmpArguments; _i < tmpArguments_1.length; _i++) {
            var tmpArgument = tmpArguments_1[_i];
            var keyValuePair = tmpArgument.split(":");
            switch (keyValuePair[0].trim()) {
                case "localeMatcher":
                    numericFormatOptions.localeMatcher = keyValuePair[1].trim();
                    break;
                case "style":
                    numericFormatOptions.style = keyValuePair[1].trim();
                    break;
                case "currency":
                    numericFormatOptions.currency = keyValuePair[1].trim();
                    break;
                case "currencyDisplay":
                    numericFormatOptions.currencyDisplay = keyValuePair[1].trim();
                    break;
                case "useGrouping":
                    numericFormatOptions.useGrouping = keyValuePair[1].trim();
                    break;
                case "minimumIntegerDigits":
                    numericFormatOptions.minimumIntegerDigits = keyValuePair[1].trim();
                    break;
                case "minimumFractionDigits":
                    numericFormatOptions.minimumFractionDigits = keyValuePair[1].trim();
                    break;
                case "maximumFractionDigits":
                    numericFormatOptions.maximumFractionDigits = keyValuePair[1].trim();
                    break;
                case "minimumSignificantDigits":
                    numericFormatOptions.minimumSignificantDigits = keyValuePair[1].trim();
                    break;
                case "maximumSignificantDigits":
                    numericFormatOptions.maximumSignificantDigits = keyValuePair[1].trim();
                    break;
            }
        }
        var numeric = new Intl.NumberFormat(tmpArguments[0], numericFormatOptions);
        return numeric.format(Number(featureText));
    };
    GeoShieldStyle.prototype.getTextWithDateFormat = function (featureText) {
        return (new Date(featureText)).format(this.dateFormat);
    };
    GeoShieldStyle.prototype.getTextWithFormat = function (featureText) {
        return String.format(featureText, this.textFormat);
    };
    GeoShieldStyle.prototype.getPointGeometry = function (feature) {
        return feature.getGeometry();
    };
    GeoShieldStyle.prototype.wrapText = function (text, font) {
        var resultText;
        if (text !== "") {
            var lines = [text];
            var widths = [];
            // let width = (<any>ol.render.canvas).TextReplay.measureTextWidths(font, lines, widths);
            var width = this.getEstimatedWidth(font, lines, widths);
            var wrapWidth = this.wrapWidth;
            var wrapCharacter = " ";
            var isWrapBefore = this.wrap;
            if (wrapWidth > 0 && width > wrapWidth && text.includes(wrapCharacter)) {
                var textLines = [];
                lines = text.split(wrapCharacter);
                var wrapLines = [];
                var wrapWidthSum = 0;
                var tmpWrapWidth = void 0;
                if (isWrapBefore) {
                    for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {
                        var line = lines_1[_i];
                        var tmpLine = [line];
                        // tmpWrapWidth = (<any>ol.render.canvas).TextReplay.measureTextWidths(font, tmpLine, widths);
                        tmpWrapWidth = this.getEstimatedWidth(font, tmpLine, widths);
                        wrapWidthSum += tmpWrapWidth;
                        if (tmpWrapWidth > wrapWidth) {
                            wrapLines = [];
                            textLines = [];
                            wrapWidthSum = 0;
                            break;
                        }
                        if (wrapLines.length > 0) {
                            if (wrapWidthSum > wrapWidth) {
                                wrapLines.push("\n");
                                textLines.push(wrapLines.join(""));
                                wrapLines = [];
                                wrapWidthSum = 0;
                            }
                        }
                        wrapLines.push(" " + line);
                    }
                    if (wrapLines.length > 0) {
                        textLines.push(wrapLines.join(""));
                    }
                }
                else {
                    for (var _a = 0, lines_2 = lines; _a < lines_2.length; _a++) {
                        var line = lines_2[_a];
                        wrapLines.push(" " + line);
                        var tmpLine = [line];
                        // tmpWrapWidth = (<any>ol.render.canvas).TextReplay.measureTextWidths(font, tmpLine, widths);
                        tmpWrapWidth = this.getEstimatedWidth(font, tmpLine, widths);
                        wrapWidthSum += tmpWrapWidth;
                        if (wrapWidthSum > wrapWidth) {
                            wrapLines.push("\n");
                            textLines.push(wrapLines.join(""));
                            wrapLines = [];
                            wrapWidthSum = 0;
                        }
                    }
                    if (wrapLines.length > 0) {
                        textLines.push(wrapLines.join(""));
                    }
                }
                resultText = textLines.join("");
                if (resultText.lastIndexOf("\n") === resultText.length - 1) {
                    resultText = resultText.substr(0, resultText.length - 1);
                }
            }
            else {
                resultText = text;
            }
        }
        return resultText;
    };
    GeoShieldStyle.prototype.formatFont = function (font) {
        var tmpFonts = font.split(" ");
        var formatedFont = [];
        if (tmpFonts[tmpFonts.length - 1].includes("bold") || tmpFonts[tmpFonts.length - 1].includes("italic")) {
            formatedFont.push(tmpFonts[tmpFonts.length - 1] + " ");
            for (var i = 0; i < tmpFonts.length - 1; i++) {
                formatedFont.push(tmpFonts[i] + " ");
            }
        }
        else {
            return font;
        }
        return formatedFont.join("").trim();
    };
    GeoShieldStyle.poiCache = [];
    return GeoShieldStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));



/***/ }),

/***/ "./src/style/geoStyle.ts":
/*!*******************************!*\
  !*** ./src/style/geoStyle.ts ***!
  \*******************************/
/*! exports provided: GeoStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoStyle", function() { return GeoStyle; });
var GeoStyle = /** @class */ (function () {
    function GeoStyle(styleJson) {
        this.styles = [];
        if (styleJson) {
            this.id = styleJson["id"];
            this.uid = ol.getUid(this);
            this.visible = styleJson["visible"] === undefined ? true : styleJson["visible"];
        }
    }
    GeoStyle.prototype.initialize = function () {
        if (!this.initialized) {
            this.initializeCore();
            this.initialized = true;
        }
    };
    GeoStyle.prototype.initializeCore = function () {
    };
    GeoStyle.prototype.getStyles = function (feature, resolution, options) {
        var results = [];
        if (this.visible) {
            results = this.getConvertedStyle(feature, resolution, options);
        }
        return results;
    };
    GeoStyle.prototype.getConvertedStyle = function (feature, resolution, options) {
        this.initialize();
        return this.getConvertedStyleCore(feature, resolution, options);
    };
    GeoStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        return [];
    };
    GeoStyle.prototype.skewGeometry = function (geometry, xDeg, yDeg) {
        var center = ol.extent.getCenter(geometry.getExtent());
        for (var i = 0; i < geometry.flatCoordinates.length; i += 2) {
            var x = geometry.flatCoordinates[i];
            var y = geometry.flatCoordinates[i + 1];
            var rx = this.skewX(x, y, center[0], center[1], xDeg);
            var ry = this.skewY(x, y, center[0], center[1], yDeg);
            geometry.flatCoordinates[i] = rx;
            geometry.flatCoordinates[i + 1] = ry;
        }
    };
    GeoStyle.prototype.skewX = function (x, y, cx, cy, xDeg) {
        var rx = x;
        if (xDeg !== 0) {
            var xResolution = Math.tan(1.0 * xDeg * Math.PI / 180);
            var distance = void 0;
            if (x > cx) {
                if (y > cy) {
                    distance = xResolution * Math.abs(y - cy);
                }
                else {
                    distance = 0 - xResolution * Math.abs(y - cy);
                }
            }
            else {
                if (y > cy) {
                    distance = xResolution * Math.abs(y - cy);
                }
                else {
                    distance = 0 - xResolution * Math.abs(y - cy);
                }
            }
            rx += Math.round(distance);
        }
        return rx;
    };
    GeoStyle.prototype.skewY = function (x, y, cx, cy, yDeg) {
        var ry = y;
        if (yDeg !== 0) {
            var yResolution = Math.tan(1.0 * yDeg * Math.PI / 180);
            var distance = void 0;
            if (y > cy) {
                if (x > cx) {
                    distance = yResolution * Math.abs(x - cx);
                }
                else {
                    distance = 0 - yResolution * Math.abs(x - cx);
                }
            }
            else {
                if (x > cx) {
                    distance = yResolution * Math.abs(x - cx);
                }
                else {
                    distance = 0 - yResolution * Math.abs(x - cx);
                }
            }
            ry += Math.round(distance);
        }
        return ry;
    };
    GeoStyle.toRGBAColor = function (color, opacity) {
        if (opacity === void 0) { opacity = 1; }
        if (color.indexOf("#") === 0) {
            var array = void 0;
            var r = void 0;
            var g = void 0;
            var b = void 0;
            var a = void 0;
            if (color.length === 4) {
                r = +("0x" + color.substr(1, 1) + color.substr(1, 1));
                g = +("0x" + color.substr(2, 1) + color.substr(2, 1));
                b = +("0x" + color.substr(3, 1) + color.substr(3, 1));
                a = opacity;
            }
            else {
                r = +("0x" + color.substr(1, 2));
                g = +("0x" + color.substr(3, 2));
                b = +("0x" + color.substr(5, 2));
                a = opacity;
            }
            array = [r, g, b, a];
            if (!isNaN(r) && !isNaN(g) && !isNaN(b)) {
                return "rgba(" + array.join(",") + ")";
            }
            else {
                return "rgba(0,0,0,0)";
            }
        }
        if (color.indexOf("rgb(") === 0) {
            color = color.replace("rgb(", "rgba(");
            color = color.substring(0, color.length - 1) + "," + opacity + ")";
        }
        if (color.indexOf("argb(") === 0) {
            color = color.replace("argb(", "").replace(")", "");
            var array = color.split(",");
            var a = array.shift();
            array.push(a);
            color = "rgba(" + array.join(",") + ")";
        }
        return color;
    };
    GeoStyle.toOLLinearGradient = function (color, opacity, size) {
        if (opacity === void 0) { opacity = 1; }
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        context.rect(0, 0, size, size);
        var grd = context.createLinearGradient(0, 0, size, size);
        var colorStops = color.split(",");
        for (var _i = 0, colorStops_1 = colorStops; _i < colorStops_1.length; _i++) {
            var colorStop = colorStops_1[_i];
            colorStop = colorStop.trim();
            var tmpColorStop = colorStop.substr(1, colorStop.length - 2);
            var cs = tmpColorStop.split(":");
            grd.addColorStop(Number(cs[0].trim()), this.toRGBAColor(cs[1].trim(), opacity));
        }
        return grd;
    };
    GeoStyle.toOLRadialGradient = function (color, opacity, size) {
        if (opacity === void 0) { opacity = 1; }
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        context.rect(0, 0, size, size);
        var grd = context.createRadialGradient(size / 2, size / 2, 0, size / 2, size / 2, size / 2);
        var colorStops = color.split(",");
        for (var _i = 0, colorStops_2 = colorStops; _i < colorStops_2.length; _i++) {
            var colorStop = colorStops_2[_i];
            colorStop = colorStop.trim();
            var tmpColorStop = colorStop.substr(1, colorStop.length - 2);
            var cs = tmpColorStop.split(":");
            grd.addColorStop(Number(cs[0].trim()), this.toRGBAColor(cs[1].trim(), opacity));
        }
        return grd;
    };
    return GeoStyle;
}());



/***/ }),

/***/ "./src/style/geoStyleProperty.ts":
/*!***************************************!*\
  !*** ./src/style/geoStyleProperty.ts ***!
  \***************************************/
/*! exports provided: GeoStyleProperty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoStyleProperty", function() { return GeoStyleProperty; });
/* harmony import */ var _filter_geoFilterItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../filter/geoFilterItem */ "./src/filter/geoFilterItem.ts");
/* harmony import */ var _filter_geoZoomFilter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/geoZoomFilter */ "./src/filter/geoZoomFilter.ts");
/* harmony import */ var _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../filter/geoStringAttributeFilter */ "./src/filter/geoStringAttributeFilter.ts");
/* harmony import */ var _filter_geoRegexFilter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../filter/geoRegexFilter */ "./src/filter/geoRegexFilter.ts");
/* harmony import */ var _filter_geoNumberAttributeFilter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../filter/geoNumberAttributeFilter */ "./src/filter/geoNumberAttributeFilter.ts");





var GeoStyleProperty = /** @class */ (function () {
    function GeoStyleProperty(styleJsonValue, defaultValue) {
        this.styleJsonValue = styleJsonValue;
        this.defaultValue = defaultValue;
    }
    GeoStyleProperty.prototype.initialize = function () {
        if (this.styleJsonValue !== undefined) {
            if (typeof this.styleJsonValue === "object") {
                this.conditions = [];
                this.values = [];
                for (var name_1 in this.styleJsonValue) {
                    var filters = this.createFilter(name_1);
                    this.conditions.push(filters);
                    this.values.push(this.initializeValue(this.styleJsonValue[name_1]));
                }
            }
        }
        this.value = this.initializeValue(this.defaultValue);
    };
    GeoStyleProperty.prototype.initializeValue = function (value) {
        return value;
    };
    GeoStyleProperty.prototype.isCondition = function () {
        return this.conditions && this.conditions.length > 0;
    };
    GeoStyleProperty.prototype.getValue = function (columnValue) {
        if (this.conditions && this.conditions.length > 0) {
            if (columnValue) {
                var i = 0;
                var matched = false;
                for (i = 0; i < this.conditions.length; i++) {
                    var filterGroup = this.conditions[i];
                    for (var j = 0; j < filterGroup.length; j++) {
                        var filters = filterGroup[j];
                        var groupMatched = true;
                        for (var k = 0; k < filters.length; k++) {
                            var filter = filters[k];
                            var rawFeature = { properties: columnValue };
                            if (!filter.matchOLFeature(rawFeature, 0)) {
                                groupMatched = false;
                                break;
                            }
                        }
                        if (groupMatched) {
                            matched = true;
                            break;
                        }
                    }
                    if (matched) {
                        break;
                    }
                }
                if (matched) {
                    return this.values[i];
                }
            }
            else {
                return this.value;
            }
        }
        else {
            return this.value;
        }
    };
    GeoStyleProperty.prototype.createFilter = function (filterString) {
        var filterGroup = [];
        if (filterString) {
            var filterStrings = filterString.split("|");
            for (var i = 0; i < filterStrings.length; i++) {
                var filterStr = filterStrings[i];
                var expression = "(\\w+?=~'.+?')|(\\w+?[<>!=]*'[^;]+?')|(\\w+?[<>!=]*[^;]+)";
                var regex = new RegExp(expression, "g");
                var results = filterStr.match(regex);
                var rangeFilters = {};
                var filters = [];
                var geoZoomFilter = void 0;
                for (var i_1 = 0; i_1 < results.length; i_1++) {
                    if (results[i_1]) {
                        var filterItem = _filter_geoFilterItem__WEBPACK_IMPORTED_MODULE_0__["GeoFilterItem"].createFilterItem(results[i_1]);
                        if (filterItem.value.indexOf("~'") === 0) {
                            filters.push(new _filter_geoRegexFilter__WEBPACK_IMPORTED_MODULE_3__["GeoRegexFilter"]([filterItem]));
                        }
                        else if (filterItem.key === "zoom") {
                            if (geoZoomFilter === undefined) {
                                geoZoomFilter = new _filter_geoZoomFilter__WEBPACK_IMPORTED_MODULE_1__["GeoZoomFilter"]([]);
                            }
                            geoZoomFilter.addFilterItem(filterItem);
                        }
                        else if (filterItem.value.includes("'")) {
                            filters.push(new _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__["GeoStringAttributeFilter"]([filterItem]));
                        }
                        else {
                            rangeFilters[filterItem.key] = rangeFilters[filterItem.key] || new _filter_geoNumberAttributeFilter__WEBPACK_IMPORTED_MODULE_4__["GeoNumberAttributeFilter"]([]);
                            rangeFilters[filterItem.key].addFilterItem(filterItem);
                        }
                    }
                }
                for (var name_2 in rangeFilters) {
                    filters.push(rangeFilters[name_2]);
                }
                filterGroup.push(filters);
            }
        }
        return filterGroup;
    };
    return GeoStyleProperty;
}());



/***/ }),

/***/ "./src/style/geoTextStyle.ts":
/*!***********************************!*\
  !*** ./src/style/geoTextStyle.ts ***!
  \***********************************/
/*! exports provided: GeoTextStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoTextStyle", function() { return GeoTextStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
/* harmony import */ var _geoStyleProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./geoStyleProperty */ "./src/style/geoStyleProperty.ts");
/* harmony import */ var _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./textLabelingStrategy */ "./src/style/textLabelingStrategy.ts");
/* harmony import */ var _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./detectTextLabelingStrategy */ "./src/style/detectTextLabelingStrategy.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




var GeoTextStyle = /** @class */ (function (_super) {
    __extends(GeoTextStyle, _super);
    function GeoTextStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        _this.textAligns = ["left", "right", "center", "end", "start"];
        _this.textBaseline = ["bottom", "top", "middle", "alphabetic", "hanging", "ideographic"];
        _this.textTransforms = ["default", "uppercase", "lowercase"];
        _this.drawnMask = false;
        _this.BATCH_CONSTRUCTORS_DEFAULT = {
            Point: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            MultiPoint: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            LineString: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            Circle: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            MultiLineString: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            Polygon: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            MultiPolygon: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"]
        };
        _this.BATCH_CONSTRUCTORS_DETECT = {
            Point: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            MultiPoint: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            LineString: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            Circle: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            MultiLineString: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            Polygon: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            MultiPolygon: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"]
        };
        _this.labelInfos = new ol.structs.LRUCache(512);
        _this.charWidths = {};
        if (styleJson) {
            _this.align = styleJson["text-align"];
            _this.baseline = styleJson["text-base-line"];
            _this.dx = styleJson["text-dx"];
            _this.dy = styleJson["text-dy"];
            _this.font = styleJson["text-font"];
            _this.fill = styleJson["text-fill"];
            _this.forceHorizontalForLine = styleJson["text-force-horizontal-for-line"];
            _this.haloFill = styleJson["text-halo-fill"];
            _this.haloRadius = styleJson["text-halo-radius"];
            _this.margin = styleJson["text-margin"];
            _this.maskColor = styleJson["text-mask-color"];
            _this.maskMargin = styleJson["text-mask-margin"];
            _this.maskOutlineColor = styleJson["text-mask-outline-color"];
            _this.maskOutlineWidth = styleJson["text-mask-outline-width"];
            _this.maskType = styleJson["text-mask-type"];
            _this.maxCharAngle = styleJson["text-max-char-angle"];
            _this.minDistance = styleJson["text-min-distance"];
            _this.minPadding = styleJson["text-min-padding"];
            _this.name = styleJson["text-name"];
            _this.opacity = styleJson["text-opacity"];
            _this.rotateAngle = styleJson["text-rotate-angle"];
            _this.propertyPlacements = new _geoStyleProperty__WEBPACK_IMPORTED_MODULE_1__["GeoStyleProperty"](styleJson[GeoTextStyle.placementsName], "U,B,L,R");
            _this.placementType = styleJson["text-placement-type"] ? styleJson["text-placement-type"] : "default";
            _this.spacing = styleJson["text-spacing"] !== undefined ? styleJson["text-spacing"] : 10;
            _this.wrapBefore = styleJson["text-wrap-before"] ? true : styleJson["text-wrap-before"];
            _this.wrapWidth = styleJson["text-wrap-width"];
            _this.textFormat = styleJson["text-text-format"];
            _this.dateFormat = styleJson["text-date-format"];
            _this.numericFormat = styleJson["text-numeric-format"];
            _this.textTransform = styleJson["text-letter-case"];
            _this.letterSpacing = styleJson["text-letter-spacing"];
            // TODO
            _this.avoidEdge = styleJson["text-avoid-edge"];
            // TODO
            _this.splineType = styleJson["text-spline-type"];
            // TODO
            _this.polygonLabelingLocation = styleJson["text-polygon-labeling-location"];
            var chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
            for (var i = 0; i < chars.length; i++) {
                _this.charWidths[chars[i]] = ol.render.canvas.measureTextWidth(_this.font, chars[i]);
            }
            _this.charWidths[" "] = ol.render.canvas.measureTextWidth(_this.font, " ");
            for (var i = 0; i <= 9; i++) {
                _this.charWidths[i] = ol.render.canvas.measureTextWidth(_this.font, i);
            }
        }
        return _this;
    }
    GeoTextStyle.prototype.initializeCore = function () {
        this.propertyPlacements.initialize();
        this.placements = this.propertyPlacements.getValue();
        if (this.fill) {
            this.fillColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.fill, this.opacity);
        }
        if (this.haloFill) {
            this.haloFillColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.haloFill, this.opacity);
        }
        var fill = new ol.style.Fill();
        var stroke = new ol.style.Stroke();
        var textStyle = new ol.style.Text({
            fill: fill,
            stroke: stroke
        });
        this.style = new ol.style.Style({
            text: textStyle
        });
        if (this.textAligns.indexOf(this.align) >= 0) {
            textStyle.setTextAlign(this.align);
        }
        if (this.textBaseline.indexOf(this.baseline) >= 0) {
            textStyle.setTextBaseline(this.baseline);
        }
        if (this.dx) {
            textStyle.setOffsetX(this.dx);
        }
        if (this.dy) {
            textStyle.setOffsetY(this.dy);
        }
        if (this.font) {
            textStyle.setFont(this.font);
        }
        if (this.fillColor) {
            fill.setColor(this.fillColor);
        }
        if (this.haloFillColor) {
            stroke.setColor(this.haloFillColor);
        }
        if (this.haloRadius) {
            stroke.setWidth(this.haloRadius);
        }
        if (this.haloFillColor === undefined && this.haloRadius === undefined) {
            textStyle.setStroke(undefined);
        }
        if (this.rotateAngle) {
            textStyle.setRotation(this.rotateAngle);
        }
        if (this.maxCharAngle >= 0) {
            textStyle.setMaxAngle(this.maxCharAngle);
        }
        if (this.textTransforms.includes(this.textTransform)) {
        }
        else {
            // TODO: invalid inputs.
            this.textTransform = this.textTransforms[0];
        }
    };
    GeoTextStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        var textStyles = [];
        var featureText = "";
        var featureProperties = feature.getProperties();
        if (this.name) {
            featureText = feature.get(this.name);
        }
        // A workaround for the language, remove the data update
        if ((featureText === undefined || featureText === "") && this.name.indexOf("name_") === 0) {
            featureText = feature.get("name");
        }
        if (this.numericFormat) {
            featureText = this.getTextWithNumericFormat(featureText);
        }
        if (this.dateFormat) {
            featureText = this.getTextWithDateFormat(featureText);
        }
        if (this.textFormat) {
            featureText = this.getTextWithFormat(featureText);
        }
        if (featureText === undefined || featureText === "") {
            return textStyles;
        }
        featureText = this.getTextTransform(featureText);
        this.placements = this.propertyPlacements.getValue(featureProperties);
        this.style.getText().setText(featureText);
        if (this.setLabelPosition(featureText, feature, resolution, this.style.getText(), options.strategyTree, options.frameState)) {
            var featureZindex = feature["tempTreeZindex"];
            if (featureZindex === undefined) {
                featureZindex = 0;
            }
            this.style.setZIndex(featureZindex);
            textStyles.push(this.style);
        }
        return textStyles;
    };
    GeoTextStyle.prototype.setLabelPosition = function (text, geometry, resolution, textState, strategyTree, frameState) {
        var flatCoordinates;
        var geometryType = geometry.getType();
        if ((geometryType === ol.geom.GeometryType.LINE_STRING || geometryType === ol.geom.GeometryType.MULTI_LINE_STRING) && !this.forceHorizontalForLine) {
            var geometryType_1 = geometry.getType();
            flatCoordinates = geometry.getFlatCoordinates();
            if (flatCoordinates === undefined) {
                return false;
            }
        }
        else {
            var labelInfo = this.getLabelInfo(text, textState);
            var labelWidth = labelInfo.labelWidth;
            var labelHeight = labelInfo.labelHeight;
            var scale = labelInfo.scale;
            var font = labelInfo.font;
            var strokeWidth = labelInfo.strokeWidth;
            var numLines = labelInfo.numLines;
            var lines = labelInfo.lines;
            var lineHeight = labelInfo.lineHeight;
            var renderWidth = labelInfo.renderWidth;
            var height = labelInfo.height;
            var widths = labelInfo.widths;
            var Constructor = void 0;
            if (this.placementType === "default") {
                Constructor = this.BATCH_CONSTRUCTORS_DEFAULT[geometryType];
            }
            else if (this.placementType === "detect") {
                Constructor = this.BATCH_CONSTRUCTORS_DETECT[geometryType];
            }
            var textLabelingStrategy = new Constructor();
            var tmpLabelWidth = labelWidth / window.devicePixelRatio;
            var tmpLabelHeight = labelHeight / window.devicePixelRatio;
            switch (geometryType) {
                case ol.geom.GeometryType.POINT:
                    flatCoordinates = geometry.getFlatCoordinates();
                    break;
                case ol.geom.GeometryType.MULTI_POINT:
                    flatCoordinates = geometry.getCenter();
                    break;
                case ol.geom.GeometryType.LINE_STRING:
                    flatCoordinates = /** @type {ol.geom.LineString} */ (geometry).getFlatMidpoint();
                    break;
                case ol.geom.GeometryType.CIRCLE:
                    flatCoordinates = /** @type {ol.geom.Circle} */ (geometry).getCenter();
                    break;
                case ol.geom.GeometryType.MULTI_LINE_STRING:
                    flatCoordinates = /** @type {ol.geom.MultiLineString} */ (geometry).getFlatMidpoints();
                    break;
                case ol.geom.GeometryType.POLYGON:
                    flatCoordinates = /** @type {ol.geom.Polygon} */ (geometry).getFlatInteriorPoint();
                    break;
                case ol.geom.GeometryType.MULTI_POLYGON:
                    var interiorPoints = /** @type {ol.geom.MultiPolygon} */ (geometry).getFlatMidpoint();
                    break;
                default:
            }
            flatCoordinates = textLabelingStrategy.markLocation(flatCoordinates, tmpLabelWidth, tmpLabelHeight, resolution, geometryType, this, strategyTree, frameState);
            if (flatCoordinates === undefined) {
                return false;
            }
            var labelImage = this.getImage(textState, labelWidth, labelHeight, scale, font, strokeWidth, numLines, lines, lineHeight, renderWidth, height, widths);
            if (labelImage === undefined) {
                return;
            }
            textState.label = labelImage;
        }
        textState.labelPosition = flatCoordinates;
        return true;
    };
    GeoTextStyle.prototype.getLabelInfo = function (text, textState) {
        var key = text + this.uid;
        if (!this.labelInfos.containsKey(key)) {
            var font = textState.getFont();
            text = this.wrapText(text, font);
            var strokeState = textState.getStroke();
            var strokeWidth = strokeState && strokeState.getWidth() ? strokeState.getWidth() : 0;
            var lines = text.split("\n");
            var numLines = lines.length;
            var textScale = textState.getScale();
            textScale = textScale === undefined ? 1 : textScale;
            var scale = textScale * window.devicePixelRatio;
            var widths = [];
            var width = this.getEstimatedWidth(font, lines, widths, this.letterSpacing);
            var lineHeight = ol.render.canvas.measureTextHeight(font);
            var tmpMaskMargin = (this.maskMargin ? this.maskMargin : "0").split(',');
            var tmpMaskHeightMargin = 0;
            var tmpMaskWidthMargin = 0;
            switch (tmpMaskMargin.length) {
                case 1:
                    tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) * 2;
                    tmpMaskWidthMargin = parseInt(tmpMaskMargin[0]) * 2;
                    break;
                case 2:
                    tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) * 2;
                    tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) * 2;
                    break;
                case 3:
                    tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) + parseInt(tmpMaskMargin[2]);
                    tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) * 2;
                    break;
                case 4:
                    tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) + parseInt(tmpMaskMargin[2]);
                    tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) + parseInt(tmpMaskMargin[3]);
                    break;
                default:
                    break;
            }
            if (this.maskType) {
                if (this.maskType.toLowerCase() === "circle") {
                    tmpMaskHeightMargin = tmpMaskHeightMargin > tmpMaskWidthMargin ? tmpMaskHeightMargin : tmpMaskWidthMargin;
                    tmpMaskWidthMargin = tmpMaskHeightMargin;
                }
            }
            var height = lineHeight * numLines + strokeWidth + tmpMaskHeightMargin;
            var renderWidth = width + strokeWidth + tmpMaskWidthMargin;
            var tmpMaskOutlineWidth = (this.maskOutlineWidth ? this.maskOutlineWidth : 0);
            var labelWidth = Math.ceil((renderWidth + tmpMaskOutlineWidth * 3) * 1.1 * scale);
            var labelHeight = Math.ceil((height + tmpMaskOutlineWidth * 3) * 1.1 * scale);
            var labelInfo = {
                labelWidth: labelWidth,
                labelHeight: labelHeight,
                scale: scale,
                font: font,
                strokeWidth: strokeWidth,
                numLines: numLines,
                lines: lines,
                lineHeight: lineHeight,
                renderWidth: renderWidth,
                height: height,
                widths: widths
            };
            this.labelInfos.set(key, labelInfo);
        }
        return this.labelInfos.get(key);
    };
    GeoTextStyle.prototype.getEstimatedWidth = function (font, lines, widths, letterSpacing) {
        var numLines = lines.length;
        var width = 0;
        var currentWidth, i;
        for (i = 0; i < numLines; ++i) {
            currentWidth = 0;
            for (var j = 0; j < lines[i].length; j++) {
                var charWidth = this.charWidths[lines[i][j]];
                if (charWidth) {
                    currentWidth += charWidth;
                }
                else {
                    currentWidth += this.charWidths["W"];
                }
            }
            if (letterSpacing) {
                currentWidth = currentWidth + (lines[i].length - 1) * letterSpacing;
            }
            width = Math.max(width, currentWidth);
            widths.push(currentWidth);
        }
        return width;
    };
    GeoTextStyle.prototype.getImage = function (textState, labelWidth, labelHeight, scale, font, strokeWidth, numLines, lines, lineHeight, renderWidth, height, widths) {
        var labelCache = ol.render.canvas.labelCache;
        var key = this.uid !== undefined ? this.uid : ol.getUid(this);
        key += lines.toString();
        if (!labelCache.containsKey(key)) {
            var fillState = textState.getFill();
            var strokeState = textState.getStroke();
            var label = void 0;
            var align = ol.render.replay.TEXT_ALIGN[textState.getTextAlign() || ol.render.canvas.defaultTextAlign];
            var context = ol.dom.createCanvasContext2D(labelWidth, labelHeight);
            label = context.canvas;
            labelCache.set(key, label);
            label.style.display = "none";
            // For letterSpacing we need app
            var body = void 0;
            if (this.letterSpacing) {
                body = document.getElementsByTagName("body")[0];
                if (body) {
                    label.style.display = "none";
                    body.appendChild(label);
                }
                label.style.letterSpacing = this.letterSpacing + "px";
                context = label.getContext("2d");
            }
            if (scale !== 1) {
                context.scale(scale, scale);
            }
            context.font = font;
            if (strokeState) {
                context.strokeStyle = strokeState.getColor();
                context.lineWidth = strokeWidth * (ol.has.SAFARI ? scale : 1);
                context.lineCap = strokeState.getLineCap();
                context.lineJoin = strokeState.getLineJoin();
                context.miterLimit = strokeState.getMiterLimit();
                var lineDash = strokeState.getLineDash();
                lineDash = lineDash ? lineDash.slice() : ol.render.canvas.defaultLineDash;
                if (ol.has.CANVAS_LINE_DASH && lineDash.length) {
                    context.setLineDash(strokeState.getLineDash());
                    context.lineDashOffset = strokeState.getLineDashOffset();
                }
            }
            this.drawMask(context, 0, 0, renderWidth, height);
            if (this.maskType) {
                if (this.maskType.toLowerCase() === "circle") {
                    if (scale !== 1) {
                        context.scale(scale, scale);
                    }
                    context.font = font;
                    if (strokeState) {
                        context.strokeStyle = strokeState.getColor();
                        context.lineWidth = strokeWidth * (ol.has.SAFARI ? scale : 1);
                        context.lineCap = strokeState.getLineCap();
                        context.lineJoin = strokeState.getLineJoin();
                        context.miterLimit = strokeState.getMiterLimit();
                        var lineDash = strokeState.getLineDash();
                        lineDash = lineDash ? lineDash.slice() : ol.render.canvas.defaultLineDash;
                        if (ol.has.CANVAS_LINE_DASH && lineDash.length) {
                            context.setLineDash(strokeState.getLineDash());
                            context.lineDashOffset = strokeState.getLineDashOffset();
                        }
                    }
                }
            }
            context.textBaseline = "middle";
            context.textAlign = "center";
            var leftRight = 0.5 - align;
            var x = align * label.width / scale + leftRight * strokeWidth;
            var i = void 0;
            var tmpMaskMargin = (this.maskMargin ? this.maskMargin : "0").split(',');
            var tmpMaskOutlineWidth = this.maskOutlineWidth ? this.maskOutlineWidth : 0;
            if (strokeState) {
                if (strokeState.getColor() !== null) {
                    context.strokeStyle = strokeState.getColor();
                    context.lineWidth = this.haloRadius ? this.haloRadius : 0;
                    for (i = 0; i < numLines; ++i) {
                        if (this.drawnMask) {
                            context.strokeText(lines[i], x + leftRight * widths[i] * 1.2 - strokeWidth * 1.2 + tmpMaskOutlineWidth * 0.5 / 1.2 - (tmpMaskMargin[3] ? parseInt(tmpMaskMargin[1]) - parseInt(tmpMaskMargin[3]) : 0) * 0.5, this.maskType.toLowerCase() === "circle" ? context.canvas.height / scale * 0.5 - (tmpMaskMargin[2] ? parseInt(tmpMaskMargin[2]) - parseInt(tmpMaskMargin[0]) : 0) : strokeWidth + (i + 1) * lineHeight * 0.5 + parseInt(tmpMaskMargin[0]) + tmpMaskOutlineWidth);
                        }
                        else {
                            context.strokeText(lines[i], x + leftRight * widths[i] * 1.2 - (tmpMaskMargin[3] ? parseInt(tmpMaskMargin[1]) - parseInt(tmpMaskMargin[3]) : 0) * 0.5, 0.5 * (strokeWidth + lineHeight) + i * lineHeight * 1.2 - +parseInt(tmpMaskMargin[0]) + (this.maskOutlineWidth ? this.maskOutlineWidth : 0));
                        }
                    }
                }
            }
            if (fillState) {
                if (fillState.getColor() !== null) {
                    context.fillStyle = fillState.getColor();
                    for (i = 0; i < numLines; ++i) {
                        if (this.drawnMask) {
                            context.fillText(lines[i], x + leftRight * widths[i] * 1.2 - strokeWidth * 1.2 + tmpMaskOutlineWidth * 0.5 / 1.2 - (tmpMaskMargin[3] ? parseInt(tmpMaskMargin[1]) - parseInt(tmpMaskMargin[3]) : 0) * 0.5, this.maskType.toLowerCase() === "circle" ? context.canvas.height / scale * 0.5 - (tmpMaskMargin[2] ? parseInt(tmpMaskMargin[2]) - parseInt(tmpMaskMargin[0]) : 0) : strokeWidth + (i + 1) * lineHeight * 0.5 + parseInt(tmpMaskMargin[0]) + tmpMaskOutlineWidth);
                        }
                        else {
                            context.fillText(lines[i], x + leftRight * widths[i] * 1.2 - (tmpMaskMargin[3] ? parseInt(tmpMaskMargin[1]) - parseInt(tmpMaskMargin[3]) : 0) * 0.5, 0.5 * (strokeWidth + lineHeight) + i * lineHeight * 1.2 + parseInt(tmpMaskMargin[0]) + (this.maskOutlineWidth ? this.maskOutlineWidth : 0));
                        }
                    }
                }
            }
            if (this.letterSpacing && body) {
                body.removeChild(label);
            }
        }
        return labelCache.get(key);
    };
    GeoTextStyle.prototype.wrapText = function (text, font) {
        var resultText;
        if (text !== "") {
            var lines = [text];
            var widths = [];
            var width = this.getEstimatedWidth(font, lines, widths, this.letterSpacing);
            var wrapWidth = this.wrapWidth;
            var wrapCharacter = " ";
            var isWrapBefore = this.wrapBefore;
            if (wrapWidth > 0 && width > wrapWidth && text.includes(wrapCharacter)) {
                var textLines = [];
                lines = text.split(wrapCharacter);
                var wrapLines = [];
                var wrapWidthSum = 0;
                var tmpWrapWidth = void 0;
                if (isWrapBefore) {
                    for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {
                        var line = lines_1[_i];
                        var tmpLine = [line];
                        tmpWrapWidth = this.getEstimatedWidth(font, tmpLine, widths, this.letterSpacing);
                        wrapWidthSum += tmpWrapWidth;
                        if (tmpWrapWidth > wrapWidth) {
                            wrapLines = [];
                            textLines = [];
                            wrapWidthSum = 0;
                            break;
                        }
                        if (wrapLines.length > 0) {
                            if (wrapWidthSum > wrapWidth) {
                                wrapLines.push("\n");
                                textLines.push(wrapLines.join(""));
                                wrapLines = [];
                                wrapWidthSum = 0;
                            }
                        }
                        wrapLines.push(" " + line);
                    }
                    if (wrapLines.length > 0) {
                        textLines.push(wrapLines.join(""));
                    }
                }
                else {
                    for (var _a = 0, lines_2 = lines; _a < lines_2.length; _a++) {
                        var line = lines_2[_a];
                        wrapLines.push(" " + line);
                        var tmpLine = [line];
                        tmpWrapWidth = this.getEstimatedWidth(font, tmpLine, widths, this.letterSpacing);
                        wrapWidthSum += tmpWrapWidth;
                        if (wrapWidthSum > wrapWidth) {
                            wrapLines.push("\n");
                            textLines.push(wrapLines.join(""));
                            wrapLines = [];
                            wrapWidthSum = 0;
                        }
                    }
                    if (wrapLines.length > 0) {
                        textLines.push(wrapLines.join(""));
                    }
                }
                resultText = textLines.join("");
                if (resultText.lastIndexOf("\n") === resultText.length - 1) {
                    resultText = resultText.substr(0, resultText.length - 1);
                }
            }
            else {
                resultText = text;
            }
        }
        return resultText;
    };
    GeoTextStyle.prototype.drawMask = function (context, x, y, width, height) {
        var fill = undefined;
        var stroke = undefined;
        if (this.maskColor) {
            fill = new ol.style.Fill();
            fill.setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.maskColor, this.opacity ? this.opacity : 1));
        }
        if (this.maskOutlineColor && this.maskOutlineWidth) {
            stroke = new ol.style.Stroke();
            if (this.maskOutlineColor) {
                stroke.setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.maskOutlineColor, this.opacity ? this.opacity : 1));
            }
            if (this.maskOutlineWidth) {
                stroke.setWidth(this.maskOutlineWidth ? this.maskOutlineWidth : 0);
            }
        }
        if (this.maskType) {
            this.drawnMask = true;
        }
        else {
            this.drawnMask = false;
        }
        switch (this.maskType) {
            case "default":
            case "Default":
            case "rectangle":
            case "Rectangle":
                this.drawRectangle(context, x, y, width, height, fill, stroke);
                break;
            case "roundedCorners":
            case "RoundedCorners":
                this.drawRoundRectangle(context, x, y, width, height, fill, stroke);
                break;
            case "roundedEnds":
            case "RoundedEnds":
                this.drawRoundedEnds(context, x, y, width, height, fill, stroke);
                break;
            case "circle":
            case "Circle":
                this.drawCircle(context, x, y, width, height, fill, stroke);
                break;
        }
    };
    GeoTextStyle.prototype.drawRectangle = function (context, x, y, width, height, fill, stroke) {
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fillRect(x + stroke.getWidth(), y + stroke.getWidth(), width + stroke.getWidth() * 2, height);
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.strokeRect(x + stroke.getWidth(), y + stroke.getWidth(), width + stroke.getWidth() * 2, height);
        }
    };
    GeoTextStyle.prototype.drawRoundRectangle = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.3;
        // width *= 0.9;
        // height *= 0.8;
        if (stroke) {
            x = x + (stroke.getWidth() ? stroke.getWidth() : 0);
            y = y + (stroke.getWidth() ? stroke.getWidth() : 0);
        }
        context.beginPath();
        context.moveTo(x + radius + stroke.getWidth() * 2, y);
        context.lineTo(x + width - radius + stroke.getWidth() * 2, y);
        context.quadraticCurveTo(x + width + stroke.getWidth() * 2, y, x + width + stroke.getWidth() * 2, y + radius);
        context.lineTo(x + width + stroke.getWidth() * 2, y + height - radius);
        context.quadraticCurveTo(x + width + stroke.getWidth() * 2, y + height, x + width - radius + stroke.getWidth() * 2, y + height);
        context.lineTo(x + radius, y + height);
        context.quadraticCurveTo(x, y + height, x, y + height - radius);
        context.lineTo(x, y + radius);
        context.quadraticCurveTo(x, y, x + radius, y);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoTextStyle.prototype.drawRoundedEnds = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.2;
        // width *= 0.9;
        // height *= 0.8;
        var strokeWidth = (stroke.getWidth() ? stroke.getWidth() : 0);
        if (stroke) {
            x = x + strokeWidth;
            y = y + strokeWidth;
        }
        context.beginPath();
        context.moveTo(x + radius, y);
        context.lineTo(x + width - radius + strokeWidth * 2, y);
        context.quadraticCurveTo(x + width + strokeWidth * 2, y + height * 0.5, x + width - radius + strokeWidth * 2, y + height);
        context.lineTo(x + radius, y + height);
        context.quadraticCurveTo(x, y + height * 0.5, x + radius, y);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoTextStyle.prototype.drawCircle = function (context, x, y, width, height, fill, stroke) {
        context.canvas.width = context.canvas.width > context.canvas.height ? context.canvas.width : context.canvas.height;
        context.canvas.height = context.canvas.width;
        var radius = 0;
        if (stroke) {
            radius -= stroke.getWidth();
        }
        radius += context.canvas.width * 0.5;
        context.beginPath();
        context.arc(x + context.canvas.width * 0.5, y + context.canvas.width * 0.5, radius, 0, 2 * Math.PI, false);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth() * window.devicePixelRatio;
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoTextStyle.prototype.getTextWithNumericFormat = function (featureText) {
        var tmpArguments = this.numericFormat.split(",");
        var numericFormatOptions = {};
        for (var _i = 0, tmpArguments_1 = tmpArguments; _i < tmpArguments_1.length; _i++) {
            var tmpArgument = tmpArguments_1[_i];
            var keyValuePair = tmpArgument.split(":");
            switch (keyValuePair[0].trim()) {
                case "localeMatcher":
                    numericFormatOptions.localeMatcher = keyValuePair[1].trim();
                    break;
                case "style":
                    numericFormatOptions.style = keyValuePair[1].trim();
                    break;
                case "currency":
                    numericFormatOptions.currency = keyValuePair[1].trim();
                    break;
                case "currencyDisplay":
                    numericFormatOptions.currencyDisplay = keyValuePair[1].trim();
                    break;
                case "useGrouping":
                    numericFormatOptions.useGrouping = keyValuePair[1].trim();
                    break;
                case "minimumIntegerDigits":
                    numericFormatOptions.minimumIntegerDigits = keyValuePair[1].trim();
                    break;
                case "minimumFractionDigits":
                    numericFormatOptions.minimumFractionDigits = keyValuePair[1].trim();
                    break;
                case "maximumFractionDigits":
                    numericFormatOptions.maximumFractionDigits = keyValuePair[1].trim();
                    break;
                case "minimumSignificantDigits":
                    numericFormatOptions.minimumSignificantDigits = keyValuePair[1].trim();
                    break;
                case "maximumSignificantDigits":
                    numericFormatOptions.maximumSignificantDigits = keyValuePair[1].trim();
                    break;
            }
        }
        var numeric = new Intl.NumberFormat(tmpArguments[0], numericFormatOptions);
        return numeric.format(Number(featureText));
    };
    GeoTextStyle.prototype.getTextWithDateFormat = function (featureText) {
        return (new Date(featureText)).format(this.dateFormat);
    };
    GeoTextStyle.prototype.getTextWithFormat = function (featureText) {
        return String.format(this.textFormat, featureText);
    };
    GeoTextStyle.prototype.getTextTransform = function (featureText) {
        if (featureText !== undefined) {
            switch (this.textTransform) {
                case "uppercase":
                    featureText = featureText.toLocaleUpperCase();
                    break;
                case "lowercase":
                    featureText = featureText.toLocaleLowerCase();
                    break;
                default:
                    break;
            }
        }
        return featureText;
    };
    GeoTextStyle.placementsName = "text-placements";
    return GeoTextStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));

String.format = function () {
    var s = arguments[0];
    for (var i = 0; i < arguments.length - 1; i++) {
        var reg = new RegExp("\\{" + i + "\\}", "gm");
        s = s.replace(reg, arguments[i + 1]);
    }
    return s;
};
Date.prototype.format = function (fmt) {
    var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
    };
    if (/(y+)/.test(fmt))
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
    for (var k in o)
        if (new RegExp("(" + k + ")").test(fmt))
            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
    return fmt;
};


/***/ }),

/***/ "./src/style/textLabelingStrategy.ts":
/*!*******************************************!*\
  !*** ./src/style/textLabelingStrategy.ts ***!
  \*******************************************/
/*! exports provided: TextLabelingStrategy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextLabelingStrategy", function() { return TextLabelingStrategy; });
var TextLabelingStrategy = /** @class */ (function () {
    function TextLabelingStrategy() {
    }
    TextLabelingStrategy.prototype.markLocation = function (flatCoordinates, width, height, resolution, geometryType, textStyle, strategyTree, frameState) {
        return this.markLocationCore(flatCoordinates, width, height, resolution, geometryType, textStyle, strategyTree, frameState);
    };
    TextLabelingStrategy.prototype.markLocationCore = function (flatCoordinates, width, height, resolution, geometryType, textStyle, strategyTree, frameState) {
        if (this.isOverlapping(flatCoordinates, width, height, textStyle.margin, textStyle.minDistance, textStyle.minPadding, textStyle.spacing, strategyTree, frameState)) {
            return undefined;
        }
        else {
            return flatCoordinates;
        }
    };
    TextLabelingStrategy.prototype.isOverlapping = function (flatCoordinates, width, height, margin, minDistance, minPadding, spacing, strategyTree, frameState) {
        if (flatCoordinates === undefined) {
            return true;
        }
        var distance = (margin ? margin : 0) + (minDistance ? minDistance : 0) + (minPadding ? minPadding : 0) + (spacing ? spacing : 0);
        var coordinate = [flatCoordinates[0], flatCoordinates[1]];
        var screenCoordinates = this.convertPixelFromCoordinate(coordinate, frameState);
        var minX = screenCoordinates[0] - width / 2 - distance * 0.5;
        var minY = screenCoordinates[1] - height / 2 - distance * 0.5;
        var maxX = minX + width + distance;
        var maxY = minY + height + distance;
        var box = {
            minX: minX,
            minY: minY,
            maxX: maxX,
            maxY: maxY
        };
        if (!strategyTree.collides(box)) {
            strategyTree.insert(box);
            return false;
        }
        else {
            return true;
        }
    };
    TextLabelingStrategy.prototype.convertPixelFromCoordinate = function (coordinate, frameState) {
        if (!frameState) {
            return null;
        }
        return ol.transform.apply(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));
    };
    return TextLabelingStrategy;
}());



/***/ }),

/***/ "./src/tree/TreeNode.ts":
/*!******************************!*\
  !*** ./src/tree/TreeNode.ts ***!
  \******************************/
/*! exports provided: TreeNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TreeNode", function() { return TreeNode; });
var TreeNode = /** @class */ (function () {
    function TreeNode(data) {
        this.data = data;
        this.children = [];
    }
    return TreeNode;
}());



/***/ }),

/***/ "./src/tree/styleJsonCache.ts":
/*!************************************!*\
  !*** ./src/tree/styleJsonCache.ts ***!
  \************************************/
/*! exports provided: StyleJsonCache */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleJsonCache", function() { return StyleJsonCache; });
/* harmony import */ var _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../style/geoTextStyle */ "./src/style/geoTextStyle.ts");

var StyleJsonCache = /** @class */ (function () {
    function StyleJsonCache() {
        this.geoStyleGroupByZoom = [];
        this.styleJson = {};
        this.geoStyles = {};
        this.geoTextStyleInfo = {};
    }
    StyleJsonCache.prototype.add = function (zoom, dataLayerName, tree) {
        if (this.geoStyleGroupByZoom[zoom] === undefined) {
            this.geoStyleGroupByZoom[zoom] = {};
        }
        if (this.geoStyleGroupByZoom[zoom] === undefined) {
            this.geoStyleGroupByZoom[zoom] = {};
        }
        if (this.geoStyleGroupByZoom[zoom][dataLayerName] === undefined) {
            this.geoStyleGroupByZoom[zoom][dataLayerName] = [];
        }
        this.geoStyleGroupByZoom[zoom][dataLayerName].push(tree);
        this.readGeoStyleFromTree(tree);
    };
    StyleJsonCache.prototype.readGeoStyleFromTree = function (tree) {
        return this.readGeoStyleFromTreeNode(tree.root);
    };
    StyleJsonCache.prototype.readGeoStyleFromTreeNode = function (node) {
        var result = [];
        if (node.data.geoStyle) {
            this.geoStyles[node.data.geoStyle.id] = node.data.geoStyle;
            // get the widths of GeoTextStyle
            if (node.data.geoStyle instanceof _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_0__["GeoTextStyle"]) {
                this.geoTextStyleInfo[node.data.geoStyle.id] = node.data.geoStyle.charWidths;
            }
        }
        if (node.data.childrenGeoStyles && node.data.childrenGeoStyles.length > 0) {
            for (var i = 0; i < node.data.childrenGeoStyles.length; i++) {
                this.geoStyles[node.data.childrenGeoStyles[i].id] = node.data.childrenGeoStyles[i];
                if (node.data.childrenGeoStyles[i] instanceof _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_0__["GeoTextStyle"]) {
                    this.geoTextStyleInfo[node.data.childrenGeoStyles[i].id] = node.data.childrenGeoStyles[i];
                }
            }
        }
        if (node.children && node.children.length > 0) {
            for (var i = 0; i < node.children.length; i++) {
                this.readGeoStyleFromTreeNode(node.children[i]);
            }
        }
        return result;
    };
    StyleJsonCache.prototype.clear = function () {
        this.geoStyleGroupByZoom.length = 0;
    };
    return StyleJsonCache;
}());



/***/ }),

/***/ "./src/tree/styleJsonCacheItem.ts":
/*!****************************************!*\
  !*** ./src/tree/styleJsonCacheItem.ts ***!
  \****************************************/
/*! exports provided: StyleJsonCacheItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleJsonCacheItem", function() { return StyleJsonCacheItem; });
/* harmony import */ var _filter_geoFilterItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../filter/geoFilterItem */ "./src/filter/geoFilterItem.ts");
/* harmony import */ var _filter_geoZoomFilter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/geoZoomFilter */ "./src/filter/geoZoomFilter.ts");
/* harmony import */ var _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../filter/geoStringAttributeFilter */ "./src/filter/geoStringAttributeFilter.ts");
/* harmony import */ var _filter_geoRegexFilter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../filter/geoRegexFilter */ "./src/filter/geoRegexFilter.ts");
/* harmony import */ var _filter_geoNumberAttributeFilter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../filter/geoNumberAttributeFilter */ "./src/filter/geoNumberAttributeFilter.ts");
/* harmony import */ var _style_geoAreaStyle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../style/geoAreaStyle */ "./src/style/geoAreaStyle.ts");
/* harmony import */ var _style_geoLineStyle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../style/geoLineStyle */ "./src/style/geoLineStyle.ts");
/* harmony import */ var _style_geoPointStyle__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../style/geoPointStyle */ "./src/style/geoPointStyle.ts");
/* harmony import */ var _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../style/geoTextStyle */ "./src/style/geoTextStyle.ts");
/* harmony import */ var _style_geoShieldStyle__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../style/geoShieldStyle */ "./src/style/geoShieldStyle.ts");










var StyleJsonCacheItem = /** @class */ (function () {
    function StyleJsonCacheItem(styleJson, minZoom, maxZoom, dataLayerColumnName) {
        this.childrenGeoStyles = [];
        this.subStyleCacheItems = [];
        this.minZoom = minZoom;
        this.maxZoom = maxZoom;
        this.zIndex = styleJson["z-index"];
        this.styleFirst = styleJson["style-first"];
        this.filterGroup = this.createFilters(styleJson.filter, dataLayerColumnName) || [];
        this.createSubItems(styleJson, dataLayerColumnName);
        this.geoStyle = this.createGeoStyle(styleJson);
        this.createChildrenGeoStyle(styleJson);
    }
    StyleJsonCacheItem.prototype.createFilters = function (filterString, dataLayerColumnName) {
        var filterGroup = [];
        var tempMinZoom = this.maxZoom;
        var tempMaxZoom = this.minZoom;
        if (filterString) {
            var filterStrings = filterString.split("|");
            for (var i = 0; i < filterStrings.length; i++) {
                var filterStr = filterStrings[i];
                var expression = "(\\w+?=~'.+?')|(\\w+?[<>!=]*'[^;]+?')|(\\w+?[<>!=]*[^;]+)";
                var regex = new RegExp(expression, "g");
                var results = filterStr.match(regex);
                var rangeFilters = {};
                var filters = [];
                var geoZoomFilter = void 0;
                var dataLayerNameFilter = void 0;
                for (var i_1 = 0; i_1 < results.length; i_1++) {
                    if (results[i_1]) {
                        var filterItem = _filter_geoFilterItem__WEBPACK_IMPORTED_MODULE_0__["GeoFilterItem"].createFilterItem(results[i_1]);
                        if (filterItem.value.indexOf("~'") === 0) {
                            filters.push(new _filter_geoRegexFilter__WEBPACK_IMPORTED_MODULE_3__["GeoRegexFilter"]([filterItem]));
                        }
                        else if (filterItem.key === "zoom") {
                            if (geoZoomFilter === undefined) {
                                geoZoomFilter = new _filter_geoZoomFilter__WEBPACK_IMPORTED_MODULE_1__["GeoZoomFilter"]([]);
                            }
                            geoZoomFilter.addFilterItem(filterItem);
                        }
                        else if (filterItem.value.includes("'")) {
                            if (filterItem.key === dataLayerColumnName) {
                                if (dataLayerNameFilter === undefined) {
                                    dataLayerNameFilter = new _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__["GeoStringAttributeFilter"]([filterItem]);
                                }
                            }
                            else {
                                filters.push(new _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__["GeoStringAttributeFilter"]([filterItem]));
                            }
                        }
                        else {
                            rangeFilters[filterItem.key] = rangeFilters[filterItem.key] || new _filter_geoNumberAttributeFilter__WEBPACK_IMPORTED_MODULE_4__["GeoNumberAttributeFilter"]([]);
                            rangeFilters[filterItem.key].addFilterItem(filterItem);
                        }
                    }
                }
                // update the minZoom and maxZoom by ZoomFilter
                if (geoZoomFilter) {
                    filters.push(geoZoomFilter);
                    geoZoomFilter.initialize();
                    if (geoZoomFilter.ranges.length > 0) {
                        var minZ = +geoZoomFilter.ranges[0][0];
                        var maxZ = +geoZoomFilter.ranges[0][1];
                        if (minZ <= tempMinZoom) {
                            tempMinZoom = minZ;
                        }
                        if (maxZ >= tempMaxZoom) {
                            tempMaxZoom = maxZ;
                        }
                    }
                    else {
                        var z = +geoZoomFilter.allowedValues[0];
                        if (z <= tempMinZoom) {
                            tempMinZoom = z;
                        }
                        if (z >= tempMaxZoom) {
                            tempMaxZoom = z;
                        }
                    }
                }
                // update the dataLayerName
                if (dataLayerNameFilter) {
                    dataLayerNameFilter.initialize();
                    this.dataLayerName = dataLayerNameFilter.expectedValues[0];
                }
                for (var name_1 in rangeFilters) {
                    filters.push(rangeFilters[name_1]);
                }
                filterGroup.push(filters);
            }
        }
        if (tempMaxZoom !== this.minZoom || tempMinZoom !== this.maxZoom) {
            this.maxZoom = tempMaxZoom;
            this.minZoom = tempMinZoom;
        }
        return filterGroup;
    };
    StyleJsonCacheItem.prototype.createSubItems = function (styleJson, dataLayerColumnName) {
        if (styleJson.style) {
            // apply the property to sub style.
            for (var key in styleJson) {
                if (key !== "style" && key !== "filter") {
                    for (var i = 0; i < styleJson.style.length; i++) {
                        // Apply the property to sub style if the sub style does not included.
                        if (styleJson.style[i][key] === undefined) {
                            if (key === "id") {
                                styleJson.style[i][key] = styleJson[key] + "#" + i;
                            }
                            else {
                                styleJson.style[i][key] = styleJson[key];
                            }
                        }
                    }
                }
            }
            var subItemMinZoom = void 0;
            var subItemMaxZoom = void 0;
            for (var _i = 0, _a = styleJson.style; _i < _a.length; _i++) {
                var subStyle = _a[_i];
                var styleJsonCacheSubItem = new StyleJsonCacheItem(subStyle, this.minZoom, this.maxZoom, dataLayerColumnName);
                if (subItemMaxZoom === undefined || styleJsonCacheSubItem.maxZoom > subItemMaxZoom) {
                    subItemMaxZoom = styleJsonCacheSubItem.maxZoom;
                }
                if (subItemMinZoom === undefined || styleJsonCacheSubItem.minZoom < subItemMinZoom) {
                    subItemMinZoom = styleJsonCacheSubItem.minZoom;
                }
                this.subStyleCacheItems.push(styleJsonCacheSubItem);
            }
            if (subItemMinZoom && subItemMinZoom > this.minZoom) {
                this.minZoom = subItemMinZoom;
            }
            if (subItemMaxZoom && subItemMaxZoom < this.maxZoom) {
                this.maxZoom = subItemMaxZoom;
            }
        }
    };
    StyleJsonCacheItem.prototype.createGeoStyle = function (styleJson) {
        var geoStyle;
        for (var key in styleJson) {
            if (key !== "style" && key !== "filter") {
                var keys = key.split("-");
                if (keys.length > 1) {
                    switch (keys[0]) {
                        case "polygon":
                            geoStyle = new _style_geoAreaStyle__WEBPACK_IMPORTED_MODULE_5__["GeoAreaStyle"](styleJson);
                            break;
                        case "line":
                            geoStyle = new _style_geoLineStyle__WEBPACK_IMPORTED_MODULE_6__["GeoLineStyle"](styleJson);
                            break;
                        case "text":
                            geoStyle = new _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_8__["GeoTextStyle"](styleJson);
                            break;
                        case "point":
                            geoStyle = new _style_geoPointStyle__WEBPACK_IMPORTED_MODULE_7__["GeoPointStyle"](styleJson);
                            break;
                        case "shield":
                            geoStyle = new _style_geoShieldStyle__WEBPACK_IMPORTED_MODULE_9__["GeoShieldStyle"](styleJson);
                            break;
                        default:
                            break;
                    }
                    break;
                }
            }
        }
        return geoStyle;
    };
    StyleJsonCacheItem.prototype.createChildrenGeoStyle = function (styleJson) {
        if (styleJson["children"]) {
            for (var i = 0; i < styleJson["children"].length; i++) {
                var childrenGeoStyleJson = styleJson["children"][i];
                if (childrenGeoStyleJson["id"] === undefined) {
                    childrenGeoStyleJson["id"] = styleJson["id"] + "#c" + i;
                }
                this.childrenGeoStyles.push(this.createGeoStyle(childrenGeoStyleJson));
            }
        }
    };
    return StyleJsonCacheItem;
}());



/***/ }),

/***/ "./src/tree/tree.ts":
/*!**************************!*\
  !*** ./src/tree/tree.ts ***!
  \**************************/
/*! exports provided: Tree */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tree", function() { return Tree; });
var Tree = /** @class */ (function () {
    function Tree(node, treeIndex) {
        this.node = node;
        this.root = node;
        this.treeIndex = treeIndex;
    }
    Tree.prototype.traverseNode = function (callback, select) {
        (function recurse(currentNode) {
            if (callback(currentNode)) {
                if (currentNode.children.length > 0) {
                    for (var i = 0, length_1 = currentNode.children.length; i < length_1; i++) {
                        if (recurse(currentNode.children[i])) {
                            break;
                        }
                    }
                }
                else {
                    // current node is matched, and without children
                    select(currentNode);
                }
                // true: the currentNode is matched.
                return true;
            }
            // false: the currentNode is not matched.
            return false;
        })(this.root);
    };
    return Tree;
}());



/***/ }),

/***/ "./src/worker/vectorTileLayerThreadMode.ts":
/*!*************************************************!*\
  !*** ./src/worker/vectorTileLayerThreadMode.ts ***!
  \*************************************************/
/*! exports provided: VectorTileLayerThreadMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VectorTileLayerThreadMode", function() { return VectorTileLayerThreadMode; });
var VectorTileLayerThreadMode;
(function (VectorTileLayerThreadMode) {
    VectorTileLayerThreadMode[VectorTileLayerThreadMode["Default"] = 1] = "Default";
    VectorTileLayerThreadMode[VectorTileLayerThreadMode["SingleThread"] = 2] = "SingleThread";
    VectorTileLayerThreadMode[VectorTileLayerThreadMode["SingleBackgroundWorker"] = 3] = "SingleBackgroundWorker";
    VectorTileLayerThreadMode[VectorTileLayerThreadMode["MultiBackgroundWorker"] = 4] = "MultiBackgroundWorker";
})(VectorTileLayerThreadMode || (VectorTileLayerThreadMode = {}));


/***/ }),

/***/ "./src/worker/webgl.js":
/*!*****************************!*\
  !*** ./src/worker/webgl.js ***!
  \*****************************/
/*! exports provided: webglCaculate */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "webglCaculate", function() { return webglCaculate; });
function webglCaculate(){

    onmessage = function(e){
      let data = e.data;
      let {
          replays
      } = data;
      let webglPolygonIndex;
      let webglLineIndex;
      
      for(let key in replays){
          let replay = replays[key];
          if(replay.webglDrawType === 'lineStringReplay'){
            webglLineIndex = getWebglLineIndex(replay);
            delete replay.webglEnds;
            delete replay.webglStyle;
            delete replay.webglCoordinates;
          }else if(replay.webglDrawType === 'polygonReplay'){
            webglPolygonIndex = getWebglIndexObj(replay);
            delete replay['webglEnds'];
            delete replay['webglFlatCoordinates'];
            delete replay['featureIndices'];
            delete replay['styleIndices'];
            delete replay['webglDrawType'];
          }
      }      

      postMessage({
        webglPolygonIndex,
        webglLineIndex,
        uid: data.uid,
        messageData: data.messageData,
        methodInfo: data.methodInfo
      });
    }
    
    // polygon
    function getWebglIndexObj(data) {
        let {
            webglFlatCoordinates,
            webglEnds,
            featureIndices,
            styleIndices    
        } = data;
        let offset = 0;
        let styleOffset = 0;
        // debugger      
        for (var i = 0, prev = 0, index = [], length = webglEnds.length; i < length; i++) {
            let end = webglEnds[i];
            let tempIndex = earcut(webglFlatCoordinates.slice(prev, end));

            if(i === featureIndices[offset]){
                data.startIndices.push(index.length);
                offset += 1;
            }

            if(i === styleIndices[styleOffset]){
                data.styleIndices_.push(index.length);
                styleOffset += 1;
            }

            if (tempIndex.length > 0) {
                tempIndex = tempIndex.map(val => val + prev / 2);
                index.push(...tempIndex);  
            }
            prev = end;            
        }

        data.indices = index;
        
        for(let i = 0; i < webglFlatCoordinates.length; i += 2){
            webglFlatCoordinates[i] -= data.origin[0];
            webglFlatCoordinates[i + 1] -= data.origin[1];
        }

        data.vertices = webglFlatCoordinates; 
    }
    
    function colorStrToWebglColor(str) {
        let color = [];
        let strColor = str.match(/[\d\.]+/mg);
        if(+strColor[3] !== 1){
            const A1 = +strColor[3];
            const R3 = +strColor[0] * A1 + 240 * (1 - A1); //240  238  232
            const G3 = +strColor[1] * A1 + 238 * (1 - A1); //240  238  232
            const B3 = +strColor[2] * A1 + 232 * (1 - A1); //240  238  232
            const A3 = 1;
            strColor[0] = R3.toString();
            strColor[1] = G3.toString();
            strColor[2] = B3.toString();
            strColor[3] = A3.toString();
        }
    
        color = strColor.map((val, index) => {
            if (index !== 3) return +val / 255;
    
            return +val;
        });
    
        return color;
    };

    // lineString
    function getPathOffset(points, offset) {
        var len = points.length / 2;
        var count = len * 3 * 2;
        var position = [];
        var positionPrev = [];
        var positionNext = [];
        if(len===2 && points[0]===points[2] && points[1]===points[3]){
          return [[],[]];
        }
        var indicesCount = 3 * 2 * (len - 1);
        var triangleOffset = 0;
        for (var i = 0; i < len; i++) {
          var i3 = i * 3 * 2;
          var i4 = i * 4 * 2;
          var pointX = points[2 * i];
          var pointY = points[2 * i + 1]
          if(pointX===points[2*i+2] && pointY===points[2*i+3]){
            indicesCount-=6;
            continue;
          }
          position[i3 + 0] = pointX;
          position[i3 + 1] = pointY;
          position[i3 + 2] = 0;
          position[i3 + 3] = pointX;
          position[i3 + 4] = pointY;
          position[i3 + 5] = 0;
          if (i < count - 1) {
            var i3p = i3 + 6;
            positionNext[i3p + 0] = pointX;
            positionNext[i3p + 1] = pointY;
            positionNext[i3p + 2] = 0;
      
            positionNext[i3p + 3] = pointX;
            positionNext[i3p + 4] = pointY;
            positionNext[i3p + 5] = 0;
          }
          if (i > 0) {
            var i3n = i3 - 6;
            positionPrev[i3n + 0] = pointX;
            positionPrev[i3n + 1] = pointY;
            positionPrev[i3n + 2] = 0;
      
            positionPrev[i3n + 3] = pointX;
            positionPrev[i3n + 4] = pointY;
            positionPrev[i3n + 5] = 0;
          }
        }
      
        var indices = new Uint16Array(indicesCount);
        var end = count - 1;
        for (i = 0; i < 6; i++) {
          positionNext[i] = positionNext[i + 6];
          positionPrev[end - i] = positionPrev[end - i - 6];
        }
        for (i = 0; i < indicesCount; i++) {
          if (i % 2 == 0) {
            indices[triangleOffset++] = i;
            indices[triangleOffset++] = i + 1;
            indices[triangleOffset++] = i + 2;
          } else {
            indices[triangleOffset++] = i + 1;
            indices[triangleOffset++] = i;
            indices[triangleOffset++] = i + 2;
          }
        }
      
        var coordinates = getPathCoordinate(position, positionNext, positionPrev, offset)
        return [coordinates, indices]
    };

    function getWebglLineIndex(data) {
        let {
            webglCoordinates,
            webglEnds,
            webglStyle    
        } = data; 
        var lines = {
            indexArr: [],
            coordinatesArr: [],
            colorArr: []
        }
        var multiplyLine = {
            indexArr: [],
            coordinatesArr: [],
            colorArr: [],
            railwayIndexArr: [],
            railwayCoordinatesArr: [],
            railwayColorArr: []
        }        
        var lineArr = [];
        var lineIndexArr = [];
        var lineColorArr = [];
    
        var mutiLineArr = [];
        var mutiLineIndexArr = [];
        var mutiLineColorArr = [];

        // railway
        var mutiRailwayLineArr = [];
        var mutiRailwayLineIndexArr = [];
        var mutiRailwayLineColorArr = [];
        // FIXME needs a varying instead of constant
        var canvasSize = [512, 512];

        for (var i = 0, length = webglEnds.length, prevEnd = 0; i < length; i++) {

            var coord = webglCoordinates.slice(prevEnd, webglEnds[i]);
            var webglColor = colorStrToWebglColor(webglStyle[i].strokeStyle);
    
            if (webglStyle[i].lineWidth === 1) {
                var lastLength = lineArr.length / 2;
                lineArr = lineArr.concat(coord);
                var currentLength = lineArr.length / 2;
    
                while (lastLength < currentLength - 1) {
                    lineIndexArr.push(lastLength++, lastLength);
                    lineColorArr.push(...webglColor);
                }
                lineColorArr.push(...webglColor);  //last time
            } else if (webglStyle[i].lineWidth !== 1) {
                if(webglStyle[i].styleId){
                    // railway
                    let mutiRailwayLineIndexArr_ = [];
                    let mutiRailwayLineColorArr_ = [];

                    var widthHalf = webglStyle[i].lineWidth / (canvasSize[0] / 2) / 2;
                    var [tempCoordinates, tempIndex] = getPathOffset(coord, widthHalf);

                    mutiRailwayLineArr.push(new Float32Array(tempCoordinates));           
                    
                    for (let i = 0, length = tempCoordinates.length; i < length / 2; i++) {
                        mutiRailwayLineIndexArr_.push(i);
                        mutiRailwayLineColorArr_.push(...webglColor);
                    }
                    mutiRailwayLineIndexArr.push(new Uint16Array(mutiRailwayLineIndexArr_));
                    mutiRailwayLineColorArr.push(new Float32Array(mutiRailwayLineColorArr_));
                }else {
                    var widthHalf = webglStyle[i].lineWidth / (canvasSize[0] / 2) / 2;
                    var lastLength = (mutiLineArr.length) / 2;
                    var [tempCoordinates, tempIndex] = getPathOffset(coord, widthHalf);
                    mutiLineArr = mutiLineArr.concat(tempCoordinates);
                    var currentLength = mutiLineArr.length / 2;
        
                    for (let i = 0, length = tempIndex.length; i < length; i++) {
                        mutiLineIndexArr.push(lastLength + tempIndex[i]);
                    }
        
                    while (lastLength++ < currentLength) {
                        mutiLineColorArr.push(...webglColor);
                    }
                }
            }
    
            prevEnd = webglEnds[i];
        }
        lines.indexArr.push(new Uint16Array(lineIndexArr));
        lines.coordinatesArr.push(new Float32Array(lineArr));
        lines.colorArr.push(new Float32Array(lineColorArr));

        lineIndexArr = [];
        lineArr = [];
        lineColorArr = [];

        if (mutiLineIndexArr.length > 0) {
            multiplyLine.indexArr.push(new Uint16Array(mutiLineIndexArr));
            multiplyLine.coordinatesArr.push(new Float32Array(mutiLineArr));
            multiplyLine.colorArr.push(new Float32Array(mutiLineColorArr));

            mutiLineIndexArr = null;
            mutiLineArr = null;
            mutiLineColorArr = null;
        }

        // railway
        if (mutiRailwayLineIndexArr.length > 0) {
            multiplyLine.railwayIndexArr.push(...mutiRailwayLineIndexArr);
            multiplyLine.railwayCoordinatesArr.push(...mutiRailwayLineArr);
            multiplyLine.railwayColorArr.push(...mutiRailwayLineColorArr);

            mutiRailwayLineIndexArr = null;
            mutiRailwayLineArr = null;
            mutiRailwayLineColorArr = null;
        }

        return {
            multiplyLine,
            lines
        }
    }

    function getPathCoordinate(a_position, a_positionNext, a_positionPrev, a_offset) {
        var pointss = [];
        var length = a_position.length;
        var flag = 1;
        for (var i = 0; i < length; i += 3) {
          var curr = { x: a_position[i], y: a_position[i + 1] }
          var next = { x: a_positionNext[i], y: a_positionNext[i + 1] }
          var prev = { x: a_positionPrev[i], y: a_positionPrev[i + 1] }
          var dir, len = a_offset * flag;
          if (curr.x === prev.x && curr.y === prev.y) {
            dir = normalize(next.x - curr.x, next.y - curr.y);
          }
          else if (curr.x === next.x && curr.y === next.y) {
            dir = normalize(curr.x - prev.x, curr.y - prev.y)
          }
          else {
            var dir1 = normalize(curr.x - prev.x, curr.y - prev.y)
            var dir2 = normalize(next.x - curr.x, next.y - curr.y)
            dir = normalize(dir1.x + dir2.x, dir1.y + dir2.y);
            var miter = 1.0 / Math.max(dir.x * dir1.x + dir.y * dir1.y, 0.5);
            len *= miter;
          }
          dir = { x: -dir.y * len, y: dir.x * len };
          pointss.push(curr.x + dir.x);
          pointss.push(curr.y + dir.y);
          flag *= -1;
        }
        return pointss
    }

    function normalize(x, y) {
        var m = Math.sqrt(x * x + y * y);
        return { x: x / m, y: y / m }
    }        

    /**
     * earcut
     */
    function earcut(data, holeIndices, dim) {

        dim = dim || 2;

        var hasHoles = holeIndices && holeIndices.length,
            outerLen = hasHoles ? holeIndices[0] * dim : data.length,
            outerNode = linkedList(data, 0, outerLen, dim, true),
            triangles = [];

        if (!outerNode) return triangles;

        var minX, minY, maxX, maxY, x, y, invSize;

        if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);

        // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox
        if (data.length > 80 * dim) {
            minX = maxX = data[0];
            minY = maxY = data[1];

            for (var i = dim; i < outerLen; i += dim) {
                x = data[i];
                y = data[i + 1];
                if (x < minX) minX = x;
                if (y < minY) minY = y;
                if (x > maxX) maxX = x;
                if (y > maxY) maxY = y;
            }

            // minX, minY and invSize are later used to transform coords into integers for z-order calculation
            invSize = Math.max(maxX - minX, maxY - minY);
            invSize = invSize !== 0 ? 1 / invSize : 0;
        }

        earcutLinked(outerNode, triangles, dim, minX, minY, invSize);

        return triangles;
    }

    // create a circular doubly linked list from polygon points in the specified winding order
    function linkedList(data, start, end, dim, clockwise) {
        var i, last;

        if (clockwise === (signedArea(data, start, end, dim) > 0)) {
            for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);
        } else {
            for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);
        }

        if (last && equals(last, last.next)) {
            removeNode(last);
            last = last.next;
        }

        return last;
    }

    // eliminate colinear or duplicate points
    function filterPoints(start, end) {
        if (!start) return start;
        if (!end) end = start;

        var p = start,
            again;
        do {
            again = false;

            if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {
                removeNode(p);
                p = end = p.prev;
                if (p === p.next) break;
                again = true;

            } else {
                p = p.next;
            }
        } while (again || p !== end);

        return end;
    }

    // main ear slicing loop which triangulates a polygon (given as a linked list)
    function earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {
        if (!ear) return;

        // interlink polygon nodes in z-order
        if (!pass && invSize) indexCurve(ear, minX, minY, invSize);

        var stop = ear,
            prev, next;

        // iterate through ears, slicing them one by one
        while (ear.prev !== ear.next) {
            prev = ear.prev;
            next = ear.next;

            if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {
                // cut off the triangle
                triangles.push(prev.i / dim);
                triangles.push(ear.i / dim);
                triangles.push(next.i / dim);

                removeNode(ear);

                // skipping the next vertice leads to less sliver triangles
                ear = next.next;
                stop = next.next;

                continue;
            }

            ear = next;

            // if we looped through the whole remaining polygon and can't find any more ears
            if (ear === stop) {
                // try filtering points and slicing again
                if (!pass) {
                    earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);

                // if this didn't work, try curing all small self-intersections locally
                } else if (pass === 1) {
                    ear = cureLocalIntersections(ear, triangles, dim);
                    earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);

                // as a last resort, try splitting the remaining polygon into two
                } else if (pass === 2) {
                    splitEarcut(ear, triangles, dim, minX, minY, invSize);
                }

                break;
            }
        }
    }

    // check whether a polygon node forms a valid ear with adjacent nodes
    function isEar(ear) {
        var a = ear.prev,
            b = ear,
            c = ear.next;

        if (area(a, b, c) >= 0) return false; // reflex, can't be an ear

        // now make sure we don't have other points inside the potential ear
        var p = ear.next.next;

        while (p !== ear.prev) {
            if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&
                area(p.prev, p, p.next) >= 0) return false;
            p = p.next;
        }

        return true;
    }

    function isEarHashed(ear, minX, minY, invSize) {
        var a = ear.prev,
            b = ear,
            c = ear.next;

        if (area(a, b, c) >= 0) return false; // reflex, can't be an ear

        // triangle bbox; min & max are calculated like this for speed
        var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),
            minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),
            maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),
            maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);

        // z-order range for the current triangle bbox;
        var minZ = zOrder(minTX, minTY, minX, minY, invSize),
            maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);

        var p = ear.prevZ,
            n = ear.nextZ;

        // look for points inside the triangle in both directions
        while (p && p.z >= minZ && n && n.z <= maxZ) {
            if (p !== ear.prev && p !== ear.next &&
                pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&
                area(p.prev, p, p.next) >= 0) return false;
            p = p.prevZ;

            if (n !== ear.prev && n !== ear.next &&
                pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&
                area(n.prev, n, n.next) >= 0) return false;
            n = n.nextZ;
        }

        // look for remaining points in decreasing z-order
        while (p && p.z >= minZ) {
            if (p !== ear.prev && p !== ear.next &&
                pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&
                area(p.prev, p, p.next) >= 0) return false;
            p = p.prevZ;
        }

        // look for remaining points in increasing z-order
        while (n && n.z <= maxZ) {
            if (n !== ear.prev && n !== ear.next &&
                pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&
                area(n.prev, n, n.next) >= 0) return false;
            n = n.nextZ;
        }

        return true;
    }

    // go through all polygon nodes and cure small local self-intersections
    function cureLocalIntersections(start, triangles, dim) {
        var p = start;
        do {
            var a = p.prev,
                b = p.next.next;

            if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {

                triangles.push(a.i / dim);
                triangles.push(p.i / dim);
                triangles.push(b.i / dim);

                // remove two nodes involved
                removeNode(p);
                removeNode(p.next);

                p = start = b;
            }
            p = p.next;
        } while (p !== start);

        return p;
    }

    // try splitting polygon into two and triangulate them independently
    function splitEarcut(start, triangles, dim, minX, minY, invSize) {
        // look for a valid diagonal that divides the polygon into two
        var a = start;
        do {
            var b = a.next.next;
            while (b !== a.prev) {
                if (a.i !== b.i && isValidDiagonal(a, b)) {
                    // split the polygon in two by the diagonal
                    var c = splitPolygon(a, b);

                    // filter colinear points around the cuts
                    a = filterPoints(a, a.next);
                    c = filterPoints(c, c.next);

                    // run earcut on each half
                    earcutLinked(a, triangles, dim, minX, minY, invSize);
                    earcutLinked(c, triangles, dim, minX, minY, invSize);
                    return;
                }
                b = b.next;
            }
            a = a.next;
        } while (a !== start);
    }

    // link every hole into the outer loop, producing a single-ring polygon without holes
    function eliminateHoles(data, holeIndices, outerNode, dim) {
        var queue = [],
            i, len, start, end, list;

        for (i = 0, len = holeIndices.length; i < len; i++) {
            start = holeIndices[i] * dim;
            end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;
            list = linkedList(data, start, end, dim, false);
            if (list === list.next) list.steiner = true;
            queue.push(getLeftmost(list));
        }

        queue.sort(compareX);

        // process holes from left to right
        for (i = 0; i < queue.length; i++) {
            eliminateHole(queue[i], outerNode);
            outerNode = filterPoints(outerNode, outerNode.next);
        }

        return outerNode;
    }

    function compareX(a, b) {
        return a.x - b.x;
    }

    // find a bridge between vertices that connects hole with an outer ring and and link it
    function eliminateHole(hole, outerNode) {
        outerNode = findHoleBridge(hole, outerNode);
        if (outerNode) {
            var b = splitPolygon(outerNode, hole);
            filterPoints(b, b.next);
        }
    }

    // David Eberly's algorithm for finding a bridge between hole and outer polygon
    function findHoleBridge(hole, outerNode) {
        var p = outerNode,
            hx = hole.x,
            hy = hole.y,
            qx = -Infinity,
            m;

        // find a segment intersected by a ray from the hole's leftmost point to the left;
        // segment's endpoint with lesser x will be potential connection point
        do {
            if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {
                var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);
                if (x <= hx && x > qx) {
                    qx = x;
                    if (x === hx) {
                        if (hy === p.y) return p;
                        if (hy === p.next.y) return p.next;
                    }
                    m = p.x < p.next.x ? p : p.next;
                }
            }
            p = p.next;
        } while (p !== outerNode);

        if (!m) return null;

        if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint

        // look for points inside the triangle of hole point, segment intersection and endpoint;
        // if there are no points found, we have a valid connection;
        // otherwise choose the point of the minimum angle with the ray as connection point

        var stop = m,
            mx = m.x,
            my = m.y,
            tanMin = Infinity,
            tan;

        p = m.next;

        while (p !== stop) {
            if (hx >= p.x && p.x >= mx && hx !== p.x &&
                    pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {

                tan = Math.abs(hy - p.y) / (hx - p.x); // tangential

                if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {
                    m = p;
                    tanMin = tan;
                }
            }

            p = p.next;
        }

        return m;
    }

    // interlink polygon nodes in z-order
    function indexCurve(start, minX, minY, invSize) {
        var p = start;
        do {
            if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);
            p.prevZ = p.prev;
            p.nextZ = p.next;
            p = p.next;
        } while (p !== start);

        p.prevZ.nextZ = null;
        p.prevZ = null;

        sortLinked(p);
    }

    // Simon Tatham's linked list merge sort algorithm
    // http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html
    function sortLinked(list) {
        var i, p, q, e, tail, numMerges, pSize, qSize,
            inSize = 1;

        do {
            p = list;
            list = null;
            tail = null;
            numMerges = 0;

            while (p) {
                numMerges++;
                q = p;
                pSize = 0;
                for (i = 0; i < inSize; i++) {
                    pSize++;
                    q = q.nextZ;
                    if (!q) break;
                }
                qSize = inSize;

                while (pSize > 0 || (qSize > 0 && q)) {

                    if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {
                        e = p;
                        p = p.nextZ;
                        pSize--;
                    } else {
                        e = q;
                        q = q.nextZ;
                        qSize--;
                    }

                    if (tail) tail.nextZ = e;
                    else list = e;

                    e.prevZ = tail;
                    tail = e;
                }

                p = q;
            }

            tail.nextZ = null;
            inSize *= 2;

        } while (numMerges > 1);

        return list;
    }

    // z-order of a point given coords and inverse of the longer side of data bbox
    function zOrder(x, y, minX, minY, invSize) {
        // coords are transformed into non-negative 15-bit integer range
        x = 32767 * (x - minX) * invSize;
        y = 32767 * (y - minY) * invSize;

        x = (x | (x << 8)) & 0x00FF00FF;
        x = (x | (x << 4)) & 0x0F0F0F0F;
        x = (x | (x << 2)) & 0x33333333;
        x = (x | (x << 1)) & 0x55555555;

        y = (y | (y << 8)) & 0x00FF00FF;
        y = (y | (y << 4)) & 0x0F0F0F0F;
        y = (y | (y << 2)) & 0x33333333;
        y = (y | (y << 1)) & 0x55555555;

        return x | (y << 1);
    }

    // find the leftmost node of a polygon ring
    function getLeftmost(start) {
        var p = start,
            leftmost = start;
        do {
            if (p.x < leftmost.x) leftmost = p;
            p = p.next;
        } while (p !== start);

        return leftmost;
    }

    // check if a point lies within a convex triangle
    function pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {
        return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&
            (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&
            (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;
    }

    // check if a diagonal between two polygon nodes is valid (lies in polygon interior)
    function isValidDiagonal(a, b) {
        return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&
            locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);
    }

    // signed area of a triangle
    function area(p, q, r) {
        return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);
    }

    // check if two points are equal
    function equals(p1, p2) {
        return p1.x === p2.x && p1.y === p2.y;
    }

    // check if two segments intersect
    function intersects(p1, q1, p2, q2) {
        if ((equals(p1, q1) && equals(p2, q2)) ||
            (equals(p1, q2) && equals(p2, q1))) return true;
        return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&
            area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;
    }

    // check if a polygon diagonal intersects any polygon segments
    function intersectsPolygon(a, b) {
        var p = a;
        do {
            if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&
                    intersects(p, p.next, a, b)) return true;
            p = p.next;
        } while (p !== a);

        return false;
    }

    // check if a polygon diagonal is locally inside the polygon
    function locallyInside(a, b) {
        return area(a.prev, a, a.next) < 0 ?
            area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :
            area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;
    }

    // check if the middle point of a polygon diagonal is inside the polygon
    function middleInside(a, b) {
        var p = a,
            inside = false,
            px = (a.x + b.x) / 2,
            py = (a.y + b.y) / 2;
        do {
            if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&
                    (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))
                inside = !inside;
            p = p.next;
        } while (p !== a);

        return inside;
    }

    // link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;
    // if one belongs to the outer ring and another to a hole, it merges it into a single ring
    function splitPolygon(a, b) {
        var a2 = new Node(a.i, a.x, a.y),
            b2 = new Node(b.i, b.x, b.y),
            an = a.next,
            bp = b.prev;

        a.next = b;
        b.prev = a;

        a2.next = an;
        an.prev = a2;

        b2.next = a2;
        a2.prev = b2;

        bp.next = b2;
        b2.prev = bp;

        return b2;
    }

    // create a node and optionally link it with previous one (in a circular doubly linked list)
    function insertNode(i, x, y, last) {
        var p = new Node(i, x, y);

        if (!last) {
            p.prev = p;
            p.next = p;

        } else {
            p.next = last.next;
            p.prev = last;
            last.next.prev = p;
            last.next = p;
        }
        return p;
    }

    function removeNode(p) {
        p.next.prev = p.prev;
        p.prev.next = p.next;

        if (p.prevZ) p.prevZ.nextZ = p.nextZ;
        if (p.nextZ) p.nextZ.prevZ = p.prevZ;
    }

    function Node(i, x, y) {
        // vertice index in coordinates array
        this.i = i;

        // vertex coordinates
        this.x = x;
        this.y = y;

        // previous and next vertice nodes in a polygon ring
        this.prev = null;
        this.next = null;

        // z-order curve value
        this.z = null;

        // previous and next nodes in z-order
        this.prevZ = null;
        this.nextZ = null;

        // indicates whether this is a steiner point
        this.steiner = false;
    }

    // return a percentage difference between the polygon area and its triangulation area;
    // used to verify correctness of triangulation
    earcut.deviation = function (data, holeIndices, dim, triangles) {
        var hasHoles = holeIndices && holeIndices.length;
        var outerLen = hasHoles ? holeIndices[0] * dim : data.length;

        var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));
        if (hasHoles) {
            for (var i = 0, len = holeIndices.length; i < len; i++) {
                var start = holeIndices[i] * dim;
                var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;
                polygonArea -= Math.abs(signedArea(data, start, end, dim));
            }
        }

        var trianglesArea = 0;
        for (i = 0; i < triangles.length; i += 3) {
            var a = triangles[i] * dim;
            var b = triangles[i + 1] * dim;
            var c = triangles[i + 2] * dim;
            trianglesArea += Math.abs(
                (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -
                (data[a] - data[b]) * (data[c + 1] - data[a + 1]));
        }

        return polygonArea === 0 && trianglesArea === 0 ? 0 :
            Math.abs((trianglesArea - polygonArea) / polygonArea);
    };

    function signedArea(data, start, end, dim) {
        var sum = 0;
        for (var i = start, j = end - dim; i < end; i += dim) {
            sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);
            j = i;
        }
        return sum;
    }

    // turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts
    earcut.flatten = function (data) {
        var dim = data[0][0].length,
            result = {vertices: [], holes: [], dimensions: dim},
            holeIndex = 0;

        for (var i = 0; i < data.length; i++) {
            for (var j = 0; j < data[i].length; j++) {
                for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);
            }
            if (i > 0) {
                holeIndex += data[i - 1].length;
                result.holes.push(holeIndex);
            }
        }
        return result;
    };
}

/***/ }),

/***/ "./src/worker/webglManager.ts":
/*!************************************!*\
  !*** ./src/worker/webglManager.ts ***!
  \************************************/
/*! exports provided: WebglManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WebglManager", function() { return WebglManager; });
var WebglManager = /** @class */ (function () {
    function WebglManager() {
        this.worker = {};
        this.workerCallback = {};
        this.initWorkers();
    }
    WebglManager.prototype.initWorkers = function () {
        try {
            var callBack_1 = this.workerCallback;
            var source = '(' + window["webglCaculate"] + ')()';
            var blob = new Blob([source]);
            this.worker = new Worker(window.URL.createObjectURL(blob));
            this.worker.onmessage = function (e) {
                var data = e.data;
                var uid = data.uid;
                var webglCallBack = callBack_1[uid];
                // add webglIndexObj to data??? webglIndexObj is the result of earcut
                if (webglCallBack) {
                    var replay = data.messageData.replays[0];
                    if (replay) {
                        replay.Polygon && (replay.Polygon.webglIndexObj = data.webglPolygonIndex);
                        webglCallBack(data.messageData, data.methodInfo);
                    }
                }
                delete callBack_1[uid];
            };
            return true;
        }
        catch (e) {
            return false;
        }
    };
    WebglManager.prototype.postMessage = function (data) {
        var replays = data.replays, uid = data.uid, callBack = data.callBack, messageData = data.messageData, methodInfo = data.methodInfo;
        if (callBack) {
            this.workerCallback[uid] = callBack;
        }
        var postMessage = {
            replays: replays,
            uid: uid,
            messageData: messageData,
            methodInfo: methodInfo
        };
        this.worker.postMessage(postMessage);
    };
    WebglManager.prototype.close = function () {
        this.worker.terminate();
    };
    return WebglManager;
}());



/***/ }),

/***/ "./src/worker/workerManager.ts":
/*!*************************************!*\
  !*** ./src/worker/workerManager.ts ***!
  \*************************************/
/*! exports provided: WorkerManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkerManager", function() { return WorkerManager; });
/* harmony import */ var _vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vectorTileLayerThreadMode */ "./src/worker/vectorTileLayerThreadMode.ts");

var WorkerManager = /** @class */ (function () {
    function WorkerManager(threadMode, workerCount) {
        if (threadMode === _vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_0__["VectorTileLayerThreadMode"].SingleBackgroundWorker) {
            this.workerCount = 1;
        }
        else {
            if (isNaN(workerCount) || workerCount <= 0) {
                this.workerCount = Math.max(Math.floor(window.navigator.hardwareConcurrency / 2), 1);
            }
            else {
                // passed by parm
                this.workerCount = workerCount;
            }
        }
        this.currentWorkerIndex = 0;
        this.workers = [];
        this.workerCallback = {};
    }
    WorkerManager.prototype.initWorkers = function () {
        try {
            var callbacks_1 = this.workerCallback;
            for (var i = 0; i < this.workerCount; i++) {
                var source = '(' + window["olInit"] + ')()';
                var blob = new Blob([source]);
                var worker = new Worker(window.URL.createObjectURL(blob));
                worker.onmessage = function (e) {
                    var methodInfo = e.data["methodInfo"];
                    var messageData = e.data["messageData"];
                    var uid = methodInfo.uid;
                    var callback = callbacks_1[uid];
                    if (false) { var replays; }
                    else {
                        if (callback) {
                            callback(messageData, methodInfo);
                        }
                    }
                    delete callbacks_1[uid];
                };
                this.workers.push(worker);
            }
            this.inited = true;
            return true;
        }
        catch (e) {
            this.inited = false;
            return false;
        }
    };
    WorkerManager.prototype.postMessage = function (uid, methodName, messageData, callbackInfo, workerIndex) {
        if (typeof workerIndex !== "number" || isNaN(workerIndex) || workerIndex >= this.workers.length) {
            workerIndex = this.currentWorkerIndex = (this.currentWorkerIndex + 1) % this.workers.length;
        }
        var methodInfo = {
            uid: uid,
            methodName: methodName,
            workerId: workerIndex
        };
        if (callbackInfo) {
            this.workerCallback[uid] = callbackInfo;
        }
        var postMessage = {
            methodInfo: methodInfo,
            messageData: messageData
        };
        this.workers[workerIndex].postMessage(postMessage);
        return workerIndex;
    };
    WorkerManager.prototype.close = function () {
        this.workerCallback = {};
        for (var index = 0; index < this.workers.length; index++) {
            this.workers[index].terminate();
        }
    };
    return WorkerManager;
}());



/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbHRlci9nZW9GaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbHRlci9nZW9GaWx0ZXJJdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9maWx0ZXIvZ2VvTnVtYmVyQXR0cmlidXRlRmlsdGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9maWx0ZXIvZ2VvUmFuZ2VGaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbHRlci9nZW9SZWdleEZpbHRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL2dlb1N0cmluZ0F0dHJpYnV0ZUZpbHRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL2dlb1pvb21GaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Zvcm1hdC9nZW9NdnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlb1ZlY3RvclRpbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheWVyL3ZlY3RvclRpbGVMYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyL2dlb1ZlY3RvclRpbGVsYXllclJlbmRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyL3dlYmdsL3JlcGxheUdyb3VwQ3VzdG9tLnRzIiwid2VicGFjazovLy8uL3NyYy9zb3VyY2UvZ2VvVmVjdG9yVGlsZVNvdXJjZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvZGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3kudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL2dlb0FyZWFTdHlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvZ2VvQnJ1c2gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL2dlb0xpbmVTdHlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvZ2VvUG9pbnRTdHlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvZ2VvU2hpZWxkU3R5bGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL2dlb1N0eWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS9nZW9TdHlsZVByb3BlcnR5LnRzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS9nZW9UZXh0U3R5bGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL3RleHRMYWJlbGluZ1N0cmF0ZWd5LnRzIiwid2VicGFjazovLy8uL3NyYy90cmVlL1RyZWVOb2RlLnRzIiwid2VicGFjazovLy8uL3NyYy90cmVlL3N0eWxlSnNvbkNhY2hlLnRzIiwid2VicGFjazovLy8uL3NyYy90cmVlL3N0eWxlSnNvbkNhY2hlSXRlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHJlZS90cmVlLnRzIiwid2VicGFjazovLy8uL3NyYy93b3JrZXIvdmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvd29ya2VyL3dlYmdsLmpzIiwid2VicGFjazovLy8uL3NyYy93b3JrZXIvd2ViZ2xNYW5hZ2VyLnRzIiwid2VicGFjazovLy8uL3NyYy93b3JrZXIvd29ya2VyTWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrREFBMEMsZ0NBQWdDO0FBQzFFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0VBQXdELGtCQUFrQjtBQUMxRTtBQUNBLHlEQUFpRCxjQUFjO0FBQy9EOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBeUMsaUNBQWlDO0FBQzFFLHdIQUFnSCxtQkFBbUIs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QUFDLFNBQVMsRUFBRSxDQUFDO1FBQ3BCLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDdEMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0QyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNsRCxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUMsQ0FBQztRQUNsRCxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsR0FBRyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsRCxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEdBQUcsR0FBRyxFQUFFLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNsRCxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDdkMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0QyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDcEIsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDO1FBRWYsT0FBTyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBRU0sNEJBQW1CLEdBQTFCLFVBQTJCLElBQVksRUFBRSxjQUFzQjtRQUMzRCxJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7UUFD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S0FBSyxDQUFDO3dCQUNsQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQzt3QkFDbEMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7d0JBQ2xDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDO3dCQUNsQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztxQkFDckMsQ0FBQyxDQUFDO29CQUNILFVBQVUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7b0JBQ3JDLE1BQU07Z0JBQ1YsS0FBSyxhQUFhO29CQUNkLEtBQUssSUFBSSxDQUFDLENBQUM7b0JBQ1gsVUFBVSxHQUFHLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7d0JBQ2hDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7d0JBQzFCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQzt3QkFDdEQsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQzt3QkFDMUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztxQkFDN0IsQ0FBQyxDQUFD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QUFDLENBQUMsR0FBRyxHQUFHLEdBQUcsV0FBVyxHQUFHLEdBQUcsR0FBRyxtQkFBbUIsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsVUFBVSxHQUFHLEdBQUcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsbUJBQW1CLENBQUMsQ0FBQzt5QkFDamQ7NkJBQ0k7NEJBQ0QsT0FBTyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLENBQUMsV0FB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QTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFEQUFxRCxTQUFTO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQkFBbUIsc0JBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsMENBQTBDLFNBQVM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0FBQyxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNuRCxPQUFPLFdBQVcsQ0FBQztJQUN2QixDQUFDO0lBRUQsNkJBQUssR0FBTDtRQUNJLElBQUksQ0FBQyxjQUFjLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLEtBQUssSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsRUFBRTtZQUN0RCxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDO1NBQ25DO0lBQ0wsQ0FBQztJQUNMLG9CQUFDO0FBQUQsQ0FBQyIsImZpbGUiOiJvbC5tYXBzdWl0ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBcIi4vc3JjL21haW4udHNcIik7XG4iLCJpbXBvcnQgeyBHZW9GaWx0ZXJJdGVtIH0gZnJvbSBcIi4vZ2VvRmlsdGVySXRlbVwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEdlb0ZpbHRlciB7XHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZWQ6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgZmlsdGVySXRlbXM6IEdlb0ZpbHRlckl0ZW1bXTtcclxuICAgIHB1YmxpYyByZXBsYWNlZFZhbHVlVG9JbmRleDogYm9vbGVhbjtcclxuXHJcbiAgICBwdWJsaWMga2V5OiBhbnk7XHJcbiAgICBwdWJsaWMga2V5SW5kZXg6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJJdGVtczogR2VvRmlsdGVySXRlbVtdKSB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJJdGVtcyA9IGZpbHRlckl0ZW1zIHx8IFtdO1xyXG4gICAgICAgIHRoaXMucmVwbGFjZWRWYWx1ZVRvSW5kZXggPSBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRGaWx0ZXJJdGVtKGZpbHRlckl0ZW06IEdlb0ZpbHRlckl0ZW0pIHtcclxuICAgICAgICB0aGlzLmZpbHRlckl0ZW1zLnB1c2goZmlsdGVySXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVDb3JlKCk7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUNvcmUoKSB7IH1cclxuXHJcbiAgICBtYXRjaE9MRmVhdHVyZShmZWF0dXJlOiBvbC5GZWF0dXJlLCB6b29tOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm1hdGNoRmVhdHVyZUNvcmUoZmVhdHVyZSwgem9vbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVwbGFjZVZhdWxlc1RvUGJmSW5kZXgocGJmTGF5ZXI6IGFueSkge1xyXG4gICAgICAgIHRoaXMucmVwbGFjZVZhdWxlc1RvUGJmSW5kZXhDb3JlKHBiZkxheWVyKTtcclxuICAgIH1cclxuXHJcbiAgICBhYnN0cmFjdCBtYXRjaEZlYXR1cmVDb3JlKGZlYXR1cmU6IG9sLkZlYXR1cmUsIHpvb206IG51bWJlcik6IGJvb2xlYW47XHJcbiAgICBhYnN0cmFjdCByZXBsYWNlVmF1bGVzVG9QYmZJbmRleENvcmUocGJmTGF5ZXI6IGFueSk7XHJcbn0iLCJleHBvcnQgY2xhc3MgR2VvRmlsdGVySXRlbSB7XHJcbiAgICBrZXk6IHN0cmluZztcclxuICAgIG9wZXJhdG9yOiBzdHJpbmc7XHJcbiAgICB2YWx1ZTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGtleTogc3RyaW5nLCBvcGVyYXRvcjogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5rZXkgPSBrZXk7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRvciA9IG9wZXJhdG9yO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgb3BlcmF0b3JSZWdleCA9IG5ldyBSZWdFeHAoXCJbPD4hPV0rXCIsIFwiZ1wiKTtcclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRmlsdGVySXRlbShmaWx0ZXJJdGVtU3RyaW5nOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgb3BlcmF0b3IgPSBmaWx0ZXJJdGVtU3RyaW5nLm1hdGNoKHRoaXMub3BlcmF0b3JSZWdleClbMF07XHJcbiAgICAgICAgbGV0IHBhcnRzID0gZmlsdGVySXRlbVN0cmluZy5zcGxpdChvcGVyYXRvcik7XHJcbiAgICAgICAgbGV0IGl0ZW0gPSBuZXcgR2VvRmlsdGVySXRlbShwYXJ0c1swXSwgb3BlcmF0b3IsIHBhcnRzWzFdKTtcclxuICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdlb0ZpbHRlckl0ZW0gfSBmcm9tIFwiLi9nZW9GaWx0ZXJJdGVtXCI7XHJcbmltcG9ydCB7IEdlb1JhbmdlRmlsdGVyIH0gZnJvbSBcIi4vZ2VvUmFuZ2VGaWx0ZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9OdW1iZXJBdHRyaWJ1dGVGaWx0ZXIgZXh0ZW5kcyBHZW9SYW5nZUZpbHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJJdGVtczogR2VvRmlsdGVySXRlbVtdKSB7XHJcbiAgICAgICAgc3VwZXIoZmlsdGVySXRlbXMpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEdlb0ZpbHRlciB9IGZyb20gXCIuL2dlb0ZpbHRlclwiO1xyXG5pbXBvcnQgeyBHZW9GaWx0ZXJJdGVtIH0gZnJvbSBcIi4vZ2VvRmlsdGVySXRlbVwiO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEdlb1JhbmdlRmlsdGVyIGV4dGVuZHMgR2VvRmlsdGVyIHtcclxuICAgIHB1YmxpYyByYW5nZXM6IE51bWJlcltdW10gPSBbXTtcclxuICAgIHB1YmxpYyBhbGxvd2VkVmFsdWVzOiBOdW1iZXJbXSA9IFtdO1xyXG4gICAgcHVibGljIGRpc2FsbG93ZWRWYWx1ZXM6IE51bWJlcltdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoZmlsdGVySXRlbXM6IEdlb0ZpbHRlckl0ZW1bXSkge1xyXG4gICAgICAgIHN1cGVyKGZpbHRlckl0ZW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ29yZSgpIHtcclxuICAgICAgICB0aGlzLmZpbHRlckl0ZW1zLnNvcnQoKGEsIGIpID0+ICthLnZhbHVlIC0gK2IudmFsdWUpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5maWx0ZXJJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZmlsdGVySXRlbSA9IHRoaXMuZmlsdGVySXRlbXNbaV07XHJcbiAgICAgICAgICAgIHRoaXMua2V5ID0gZmlsdGVySXRlbS5rZXk7XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9ICtmaWx0ZXJJdGVtLnZhbHVlO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGZpbHRlckl0ZW0ub3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCI+XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZXMucHVzaChbdmFsdWUgKyAwLjAwMDAxLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCI+PVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VzLnB1c2goW3ZhbHVlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFldKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWxsb3dlZFZhbHVlcy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCI9XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxvd2VkVmFsdWVzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmlsdGVySXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGZpbHRlckl0ZW0gPSB0aGlzLmZpbHRlckl0ZW1zW2ldO1xyXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSArZmlsdGVySXRlbS52YWx1ZTtcclxuICAgICAgICAgICAgbGV0IHJhbmdlID0gR2VvUmFuZ2VGaWx0ZXIuZ2V0UmFuZ2UodGhpcy5yYW5nZXMsIHZhbHVlKTtcclxuICAgICAgICAgICAgc3dpdGNoIChmaWx0ZXJJdGVtLm9wZXJhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiPFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZVsxXSA9IHZhbHVlICsgMC4wMDAwMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlID0gW051bWJlci5ORUdBVElWRV9JTkZJTklUWSwgdmFsdWUgKyAwLjAwMDAxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZXMucHVzaChyYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjw9XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlWzFdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByYW5nZSA9IFtOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIHZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZXMucHVzaChyYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1hdGNoRmVhdHVyZUNvcmUoZmVhdHVyZTogYW55LCB6b29tOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgY3VycmVudFZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLnJlcGxhY2VkVmFsdWVUb0luZGV4KSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IGZlYXR1cmUucHJvcGVydGllc1t0aGlzLmtleV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBmZWF0dXJlLnByb3BlcnRpZXNbdGhpcy5rZXldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJblJhbmdlKCtjdXJyZW50VmFsdWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcGxhY2VWYXVsZXNUb1BiZkluZGV4Q29yZShwYmZMYXllcikge1xyXG4gICAgICAgIHRoaXMucmVwbGFjZWRWYWx1ZVRvSW5kZXggPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGlzSW5SYW5nZShjdXJyZW50VmFsdWU6IGFueSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2FsbG93ZWRWYWx1ZXMuaW5jbHVkZXMoY3VycmVudFZhbHVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmFsbG93ZWRWYWx1ZXMuaW5jbHVkZXMoY3VycmVudFZhbHVlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHJhbmdlID0gdGhpcy5yYW5nZXNbaV07XHJcbiAgICAgICAgICAgIGlmIChyYW5nZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VmFsdWUgPj0gcmFuZ2VbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VmFsdWUgPj0gcmFuZ2VbMF0gJiYgY3VycmVudFZhbHVlIDw9IHJhbmdlWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzdGF0aWMgZ2V0UmFuZ2UocmFuZ2VzOiBOdW1iZXJbXVtdLCB2YWx1ZTogbnVtYmVyKTogTnVtYmVyW10ge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCByYW5nZSA9IHJhbmdlc1tpXTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID49IHJhbmdlWzBdICYmIHZhbHVlIDw9IHJhbmdlWzFdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmFuZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IEdlb0ZpbHRlciB9IGZyb20gXCIuL2dlb0ZpbHRlclwiO1xyXG5pbXBvcnQgeyBHZW9GaWx0ZXJJdGVtIH0gZnJvbSBcIi4vZ2VvRmlsdGVySXRlbVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb1JlZ2V4RmlsdGVyIGV4dGVuZHMgR2VvRmlsdGVyIHtcclxuICAgIHJlZ2V4OiBSZWdFeHA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZmlsdGVySXRlbXM6IEdlb0ZpbHRlckl0ZW1bXSkge1xyXG4gICAgICAgIHN1cGVyKGZpbHRlckl0ZW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ29yZSgpIHtcclxuICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLmZpbHRlckl0ZW1zWzBdLnZhbHVlO1xyXG4gICAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMiwgdmFsdWUubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgdGhpcy5yZWdleCA9IG5ldyBSZWdFeHAodmFsdWUsIFwiZ1wiKTtcclxuXHJcbiAgICAgICAgdGhpcy5rZXkgPSB0aGlzLmZpbHRlckl0ZW1zWzBdLmtleTtcclxuICAgIH1cclxuXHJcbiAgICBtYXRjaEZlYXR1cmVDb3JlKGZlYXR1cmU6IGFueSwgem9vbTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZTtcclxuICAgICAgICBpZiAodGhpcy5yZXBsYWNlZFZhbHVlVG9JbmRleCkge1xyXG4gICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBmZWF0dXJlLnByb3BlcnRpZXNbdGhpcy5rZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY3VycmVudFZhbHVlID0gZmVhdHVyZS5wcm9wZXJ0aWVzW3RoaXMua2V5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghY3VycmVudFZhbHVlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjdXJyZW50VmFsdWUudG9TdHJpbmcoKS5tYXRjaCh0aGlzLnJlZ2V4KSAhPT0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICByZXBsYWNlVmF1bGVzVG9QYmZJbmRleENvcmUocGJmTGF5ZXIpIHtcclxuICAgICAgICB0aGlzLnJlcGxhY2VkVmFsdWVUb0luZGV4ID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBHZW9GaWx0ZXIgfSBmcm9tIFwiLi9nZW9GaWx0ZXJcIjtcclxuaW1wb3J0IHsgR2VvRmlsdGVySXRlbSB9IGZyb20gXCIuL2dlb0ZpbHRlckl0ZW1cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9TdHJpbmdBdHRyaWJ1dGVGaWx0ZXIgZXh0ZW5kcyBHZW9GaWx0ZXIge1xyXG4gICAgZXhwZWN0ZWRWYWx1ZXM6IHN0cmluZ1tdO1xyXG4gICAgZXhwZWN0ZWRWYWx1ZUluZGV4czogbnVtYmVyW107XHJcblxyXG4gICAgY29uc3RydWN0b3IoZmlsdGVySXRlbXM6IEdlb0ZpbHRlckl0ZW1bXSkge1xyXG4gICAgICAgIHN1cGVyKGZpbHRlckl0ZW1zKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ29yZSgpIHtcclxuICAgICAgICBsZXQgZXhwZWN0ZWRWYWx1ZSA9IHRoaXMuZmlsdGVySXRlbXNbMF0udmFsdWU7XHJcbiAgICAgICAgZXhwZWN0ZWRWYWx1ZSA9IGV4cGVjdGVkVmFsdWUuc2xpY2UoMSwgZXhwZWN0ZWRWYWx1ZS5sZW5ndGggLSAxKTtcclxuICAgICAgICB0aGlzLmV4cGVjdGVkVmFsdWVzID0gZXhwZWN0ZWRWYWx1ZS5zcGxpdChcIixcIik7XHJcbiAgICAgICAgdGhpcy5rZXkgPSB0aGlzLmZpbHRlckl0ZW1zWzBdLmtleTtcclxuICAgIH1cclxuXHJcbiAgICBtYXRjaEZlYXR1cmVDb3JlKGZlYXR1cmU6IGFueSwgem9vbTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZTtcclxuICAgICAgICBsZXQgY3VycmVudEV4cGVjdGVkVmFsdWVzO1xyXG4gICAgICAgIGlmICh0aGlzLnJlcGxhY2VkVmFsdWVUb0luZGV4KSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IGZlYXR1cmUucHJvcGVydGllc0luZGV4W3RoaXMua2V5SW5kZXhdO1xyXG4gICAgICAgICAgICBjdXJyZW50RXhwZWN0ZWRWYWx1ZXMgPSB0aGlzLmV4cGVjdGVkVmFsdWVJbmRleHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBmZWF0dXJlLnByb3BlcnRpZXNbdGhpcy5rZXldO1xyXG4gICAgICAgICAgICBjdXJyZW50RXhwZWN0ZWRWYWx1ZXMgPSB0aGlzLmV4cGVjdGVkVmFsdWVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmZpbHRlckl0ZW1zWzBdLm9wZXJhdG9yKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCI9XCI6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudEV4cGVjdGVkVmFsdWVzLmluY2x1ZGVzKGN1cnJlbnRWYWx1ZSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCIhPVwiOlxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFjdXJyZW50RXhwZWN0ZWRWYWx1ZXMuaW5jbHVkZXMoY3VycmVudFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVwbGFjZVZhdWxlc1RvUGJmSW5kZXhDb3JlKHBiZkxheWVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5rZXlJbmRleCA9IHBiZkxheWVyLmtleXMuaW5kZXhPZih0aGlzLmtleSk7XHJcblxyXG4gICAgICAgIGxldCByZXBsYWNlZEV4cGVjdGVkVmF1bGVzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDAsIGpqID0gdGhpcy5leHBlY3RlZFZhbHVlcy5sZW5ndGg7IGogPCBqajsgaisrKSB7XHJcbiAgICAgICAgICAgIGxldCBudW1iZXJWYWx1ZSA9ICt0aGlzLmV4cGVjdGVkVmFsdWVzW2pdO1xyXG4gICAgICAgICAgICBpZiAoaXNOYU4obnVtYmVyVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXBsYWNlZEV4cGVjdGVkVmF1bGVzLnB1c2gocGJmTGF5ZXIudmFsdWVzLmluZGV4T2YodGhpcy5leHBlY3RlZFZhbHVlc1tqXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVwbGFjZWRFeHBlY3RlZFZhdWxlcy5wdXNoKHBiZkxheWVyLnZhbHVlcy5pbmRleE9mKG51bWJlclZhbHVlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZXhwZWN0ZWRWYWx1ZUluZGV4cyA9IHJlcGxhY2VkRXhwZWN0ZWRWYXVsZXM7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlZFZhbHVlVG9JbmRleCA9IHRydWU7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBHZW9GaWx0ZXIgfSBmcm9tIFwiLi9nZW9GaWx0ZXJcIjtcclxuaW1wb3J0IHsgR2VvRmlsdGVySXRlbSB9IGZyb20gXCIuL2dlb0ZpbHRlckl0ZW1cIjtcclxuaW1wb3J0IHsgR2VvUmFuZ2VGaWx0ZXIgfSBmcm9tIFwiLi9nZW9SYW5nZUZpbHRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb1pvb21GaWx0ZXIgZXh0ZW5kcyBHZW9SYW5nZUZpbHRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJJdGVtczogR2VvRmlsdGVySXRlbVtdKSB7XHJcbiAgICAgICAgc3VwZXIoZmlsdGVySXRlbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIG1hdGNoRmVhdHVyZUNvcmUoZmVhdHVyZTogb2wuRmVhdHVyZSwgem9vbTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNJblJhbmdlKHpvb20pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcGxhY2VWYXVsZXNUb1BiZkluZGV4Q29yZShwYmZMYXllcikge1xyXG4gICAgICAgIHRoaXMucmVwbGFjZWRWYWx1ZVRvSW5kZXggPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBHZW9NVlRGb3JtYXQgZXh0ZW5kcyAob2wuZm9ybWF0Lk1WVCBhcyB7IG5ldyhwOiBvbHguZm9ybWF0Lk1WVE9wdGlvbnMpOiBhbnk7IH0pIHtcclxuICAgIHN0eWxlSnNvbkNhY2hlOiBhbnk7XHJcbiAgICBsYXllck5hbWU6IHN0cmluZztcclxuICAgIG1heERhdGFab29tOiBudW1iZXI7XHJcbiAgICBtYXhEYXRhWm9vbUNhY2hlOiBhbnk7XHJcbiAgICByZWdpc3RlcmVkTG9hZEV2ZW50czogYW55O1xyXG5cclxuICAgIGxydUNhY2hlOiBhbnk7XHJcbiAgICBzb3VyY2VDYWNoZTogYW55O1xyXG5cclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzdHlsZUpTb25DYWNoZTogYW55LCBvcHRpb25zOiBhbnkpIHtcclxuICAgICAgICBvcHRpb25zLmxheWVyTmFtZSA9IG9wdGlvbnMubGF5ZXJOYW1lID8gb3B0aW9ucy5sYXllck5hbWUgOiBcImxheWVyTmFtZVwiO1xyXG4gICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuaXNNdWx0aXRocmVhZCA9IG9wdGlvbnMubXVsdGl0aHJlYWQ7XHJcbiAgICAgICAgdGhpcy5taW5pbWFsaXN0ID0gb3B0aW9ucy5taW5pbWFsaXN0O1xyXG4gICAgICAgIHRoaXMubWF4RGF0YVpvb20gPSBvcHRpb25zLm1heERhdGFab29tID8gb3B0aW9ucy5tYXhEYXRhWm9vbSA6IDE0O1xyXG4gICAgICAgIHRoaXMubGF5ZXJOYW1lID0gb3B0aW9ucy5sYXllck5hbWU7XHJcbiAgICAgICAgdGhpcy5zdHlsZUpzb25DYWNoZSA9IHN0eWxlSlNvbkNhY2hlO1xyXG4gICAgICAgIHRoaXMubWF4RGF0YVpvb21DYWNoZSA9IHt9O1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJlZExvYWRFdmVudHMgPSB7fTtcclxuICAgICAgICB0aGlzLmxydUNhY2hlID0gbmV3ICg8YW55Pm9sKS5zdHJ1Y3RzLkxSVUNhY2hlKDE1KTtcclxuICAgICAgICB0aGlzLnNvdXJjZUNhY2hlID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGF5ZXJOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJOYW1lO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZWdpc3RlclRpbGVMb2FkRXZlbnQodGlsZSwgc3VjY2VzcywgZmFpbHVyZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBsZXQgaGFzUmVxdWVzdGVkID0gdHJ1ZTtcclxuICAgICAgICBsZXQgcmVxdWVzdEtleSA9IHRpbGUucmVxdWVzdFRpbGVDb29yZC5qb2luKFwiLFwiKSArIFwiLFwiICsgdGlsZS50aWxlQ29vcmRbMF07XHJcbiAgICAgICAgbGV0IGxvYWRFdmVudEluZm8gPSB7XHJcbiAgICAgICAgICAgIHRpbGU6IHRpbGUsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3NGdW5jdGlvbjogc3VjY2VzcyxcclxuICAgICAgICAgICAgZmFpbHVyZUZ1bmN0aW9uOiBmYWlsdXJlLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2tcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVnaXN0ZXJlZExvYWRFdmVudHNbcmVxdWVzdEtleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyZWRMb2FkRXZlbnRzW3JlcXVlc3RLZXldID0gW107XHJcbiAgICAgICAgICAgIGhhc1JlcXVlc3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcmVkTG9hZEV2ZW50c1tyZXF1ZXN0S2V5XS5wdXNoKGxvYWRFdmVudEluZm8pO1xyXG4gICAgICAgIHJldHVybiBoYXNSZXF1ZXN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZEZlYXR1cmVzQW5kQ3JlYXRlSW5zdHJ1Y3RzTmV3KHNvdXJjZTogQXJyYXlCdWZmZXIsIHJlcXVlc3RUaWxlQ29vcmQsIHRpbGVDb29yZCkge1xyXG4gICAgICAgIGxldCBwYmYgPSBuZXcgKDxhbnk+b2wpLmV4dC5QQkYoKHNvdXJjZSkpO1xyXG4gICAgICAgIGxldCBwYmZMYXllcnMgPSBwYmYucmVhZEZpZWxkcygoPGFueT5vbCkuZm9ybWF0Lk1WVC5wYmZSZWFkZXJzXy5sYXllcnMsIHt9KTtcclxuICAgICAgICBsZXQgcGJmTGF5ZXI7XHJcbiAgICAgICAgbGV0IGZlYXR1cmVzID0gW107XHJcbiAgICAgICAgbGV0IGZlYXR1cmVJbmRleCA9IC0xO1xyXG5cclxuICAgICAgICBsZXQgem9vbU1hdGNoZWRHZW9TdHlsZXNHcm91cEJ5TGF5ZXJJZCA9IHRoaXMuc3R5bGVKc29uQ2FjaGUuZ2VvU3R5bGVHcm91cEJ5Wm9vbVt0aWxlQ29vcmRbMF1dO1xyXG4gICAgICAgIGlmICghem9vbU1hdGNoZWRHZW9TdHlsZXNHcm91cEJ5TGF5ZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmVhdHVyZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcGJmTGF5ZXJOYW1lc1dpdGhHZW9TdHlsZSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHBiZkxheWVyTmFtZSBpbiB6b29tTWF0Y2hlZEdlb1N0eWxlc0dyb3VwQnlMYXllcklkKSB7XHJcbiAgICAgICAgICAgIHBiZkxheWVyTmFtZXNXaXRoR2VvU3R5bGUucHVzaChwYmZMYXllck5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGluc3RydWN0c0NhY2hlID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBwYmZMYXllcnMpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGF5ZXJzXyAmJiB0aGlzLmxheWVyc18uaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYmZMYXllck5hbWVzV2l0aEdlb1N0eWxlLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGJmTGF5ZXIgPSBwYmZMYXllcnNbbmFtZV07XHJcblxyXG4gICAgICAgICAgICBsZXQgY2FjaGVUcmVlcyA9IHpvb21NYXRjaGVkR2VvU3R5bGVzR3JvdXBCeUxheWVySWRbbmFtZV07XHJcblxyXG5cclxuICAgICAgICAgICAgaWYgKGNhY2hlVHJlZXMgJiYgY2FjaGVUcmVlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VGaWx0ZXJzVG9JbmRleE9mUGJmTGF5ZXIoY2FjaGVUcmVlcywgcGJmTGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYmZMYXllci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByYXdGZWF0dXJlID0gKDxhbnk+b2wuZm9ybWF0Lk1WVCkucmVhZFJhd0ZlYXR1cmVfKHBiZiwgcGJmTGF5ZXIsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2FjaGVUcmVlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FjaGVUcmVlID0gY2FjaGVUcmVlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRyZWVJbmRleCA9IGNhY2hlVHJlZS50cmVlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IC0xMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZWROb2RlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoZWNrTm9kZU1hdGNoZWQgPSBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlSnNvbkNhY2hlSXRlbSA9IG5vZGUuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVKc29uQ2FjaGVJdGVtLmZpbHRlckdyb3VwLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlSnNvbkNhY2hlSXRlbS5maWx0ZXJHcm91cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVycyA9IHN0eWxlSnNvbkNhY2hlSXRlbS5maWx0ZXJHcm91cFtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdyb3VwTWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZmlsdGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlciA9IGZpbHRlcnNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5tYXRjaE9MRmVhdHVyZShyYXdGZWF0dXJlLCB0aWxlQ29vcmRbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBNYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyb3VwTWF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdE5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZE5vZGUgPSBub2RlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlVHJlZS50cmF2ZXJzZU5vZGUoY2hlY2tOb2RlTWF0Y2hlZCwgc2VsZWN0Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUgPSB0aGlzLmNyZWF0ZUZlYXR1cmVfKHBiZiwgcmF3RmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlSW5kZXggKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgemluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVHJlZS5yb290LmRhdGEuekluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemluZGV4ID0gcmF3RmVhdHVyZS5wcm9wZXJ0aWVzW2NhY2hlVHJlZS5yb290LmRhdGEuekluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXNfW2NhY2hlVHJlZS5yb290LmRhdGEuekluZGV4XSA9IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oemluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bemluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVt6aW5kZXhdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHppbmRleCA8IGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bXCJtaW5cIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1pblwiXSA9IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHppbmRleCA+IGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bXCJtYXhcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1heFwiXSA9IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVt6aW5kZXhdLnB1c2goW2ZlYXR1cmVJbmRleCwgbWF0Y2hlZE5vZGVdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmV4dGVudF8gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW50XyA9IHBiZkxheWVyID8gWzAsIDAsIHBiZkxheWVyLmV4dGVudCwgcGJmTGF5ZXIuZXh0ZW50XSA6IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbnN0cnVjdHMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnN0cnVjdHNDYWNoZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5zdHJ1Y3RzSW5PbmVUcmVlID0gaW5zdHJ1Y3RzQ2FjaGVbaV07XHJcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdHNJbk9uZVRyZWUpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpbnN0cnVjdHNJbk9uZVRyZWUubWluLCBqaiA9IGluc3RydWN0c0luT25lVHJlZS5tYXg7IGogPD0gamo7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnN0cnVjdHNJbk9uZVpJbmRleCA9IGluc3RydWN0c0luT25lVHJlZVtqXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RzSW5PbmVaSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoaWxkcmVuSW5zdHJ1Y3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGggPSAwOyBoIDwgaW5zdHJ1Y3RzSW5PbmVaSW5kZXgubGVuZ3RoOyBoKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnN0cnVjdCA9IGluc3RydWN0c0luT25lWkluZGV4W2hdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlc1tpbnN0cnVjdFswXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnN0eWxlSWQgPSBmZWF0dXJlLnN0eWxlSWQgPyBmZWF0dXJlLnN0eWxlSWQgOiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0WzFdLmdlb1N0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5zdHlsZUlkW2luc3RydWN0WzFdLmdlb1N0eWxlLmlkXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzLnB1c2goW2luc3RydWN0WzBdLCBpbnN0cnVjdFsxXS5nZW9TdHlsZSwgaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdFsxXS5jaGlsZHJlbkdlb1N0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgaW5zdHJ1Y3RbMV0uY2hpbGRyZW5HZW9TdHlsZXMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5zdHlsZUlkW2luc3RydWN0WzFdLmNoaWxkcmVuR2VvU3R5bGVzW2tdLmlkXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuSW5zdHJ1Y3RzLnB1c2goW2luc3RydWN0WzBdLCBpbnN0cnVjdFsxXS5jaGlsZHJlbkdlb1N0eWxlc1trXSwgaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShpbnN0cnVjdHMsIGNoaWxkcmVuSW5zdHJ1Y3RzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBsZXQgc3ViVGlsZUNhY2hlZEluc3RydWN0ID0ge307XHJcbiAgICAgICAgbGV0IG9mZnNldFogPSB0aWxlQ29vcmRbMF0gLSByZXF1ZXN0VGlsZUNvb3JkWzBdO1xyXG5cclxuICAgICAgICAvLyBUT0RPIEdldCBFeHRlbnQgXHJcbiAgICAgICAgbGV0IHRpbGVTaXplID0gNDA5NiAvIE1hdGgucG93KDIsIG9mZnNldFopO1xyXG5cclxuICAgICAgICBsZXQgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2UocmVxdWVzdFRpbGVDb29yZCwgdGlsZUNvb3JkWzBdKTtcclxuICAgICAgICBsZXQgdGlsZXMgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCB4ID0gdGlsZVJhbmdlWzBdOyB4IDw9IHRpbGVSYW5nZVsyXTsgeCsrKSB7XHJcbiAgICAgICAgICAgIGxldCBtaW5YID0gKHggLSB0aWxlUmFuZ2VbMF0pICogdGlsZVNpemU7XHJcbiAgICAgICAgICAgIGxldCBtYXhYID0gKHggLSB0aWxlUmFuZ2VbMF0gKyAxKSAqIHRpbGVTaXplO1xyXG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gdGlsZVJhbmdlWzNdOyB5ID49IHRpbGVSYW5nZVsxXTsgeS0tKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWluWSA9ICh0aWxlUmFuZ2VbM10gLSB5KSAqIHRpbGVTaXplO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1heFkgPSAodGlsZVJhbmdlWzNdIC0geSArIDEpICogdGlsZVNpemU7XHJcbiAgICAgICAgICAgICAgICB0aWxlc1tcIlwiICsgW3gsIHldXSA9IFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluc3RydWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5zdHJ1Y3QgPSBpbnN0cnVjdHNbaV07XHJcbiAgICAgICAgICAgIGxldCBmZWF0dXJlID0gZmVhdHVyZXNbaW5zdHJ1Y3RbMF1dO1xyXG4gICAgICAgICAgICBsZXQgZmVhdHVyZUV4dGVudCA9IGZlYXR1cmUuZ2V0RXh0ZW50KCk7XHJcbiAgICAgICAgICAgIGxldCBmZWF0dXJlVGlsZVJhbmdlID0gdGhpcy5nZXRGZWF0dXJlVGlsZVJhbmdlKGZlYXR1cmVFeHRlbnQsIDQwOTYsIHRpbGVTaXplLCByZXF1ZXN0VGlsZUNvb3JkLCBvZmZzZXRaKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSB0aWxlUmFuZ2VbMF0gPiBmZWF0dXJlVGlsZVJhbmdlWzBdID8gdGlsZVJhbmdlWzBdIDogZmVhdHVyZVRpbGVSYW5nZVswXSwgeHggPSBmZWF0dXJlVGlsZVJhbmdlWzJdID4gdGlsZVJhbmdlWzJdID8gdGlsZVJhbmdlWzJdIDogZmVhdHVyZVRpbGVSYW5nZVsyXTsgeCA8PSB4eDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gdGlsZVJhbmdlWzFdID4gZmVhdHVyZVRpbGVSYW5nZVsxXSA/IHRpbGVSYW5nZVsxXSA6IGZlYXR1cmVUaWxlUmFuZ2VbMV0sIHl5ID0gZmVhdHVyZVRpbGVSYW5nZVszXSA+IHRpbGVSYW5nZVszXSA/IHRpbGVSYW5nZVszXSA6IGZlYXR1cmVUaWxlUmFuZ2VbM107IHkgPD0geXk7IHkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlS2V5ID0gXCJcIiArIFt4LCB5XTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGlsZUV4dGVudCA9IHRpbGVzW3RpbGVLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3RbdGlsZUtleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3RbdGlsZUtleV0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViVGlsZUNhY2hlZEluc3RydWN0W3RpbGVLZXldLnB1c2goaW5zdHJ1Y3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFtmZWF0dXJlcywgc3ViVGlsZUNhY2hlZEluc3RydWN0XTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICBnZXRDYWNoZWRTb3VyY2UodGlsZUNvb3JkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2VDYWNoZVt0aWxlQ29vcmRdO1xyXG4gICAgfVxyXG5cclxuICAgIHRyeUxvYWRUaWxlRnJvbUNhY2hlT3JSZWdvc3RlckxvYWRFdmVudCh0aWxlQ29vcmQ6IGFueSwgb3JpZ2luYWxab29tLCBjYWNoZVRpbGVJbmZvOiBhbnkpIHtcclxuICAgICAgICBsZXQgaGFzUmVxdWVzdGVkID0gdHJ1ZTtcclxuICAgICAgICBsZXQgdGlsZUNvb3JkS2V5ID0gdGlsZUNvb3JkLmpvaW4oXCIsXCIpICsgXCIsXCIgKyBvcmlnaW5hbFpvb207XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmxydUNhY2hlLmNvbnRhaW5zS2V5KHRpbGVDb29yZEtleSkpIHtcclxuICAgICAgICAgICAgbGV0IG9UaWxlID0gdGhpcy5scnVDYWNoZS5nZXQodGlsZUNvb3JkS2V5KTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRUaWxlQ2FsbGJhY2sob1RpbGUsIFtjYWNoZVRpbGVJbmZvXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5yZWdpc3RlcmVkTG9hZEV2ZW50c1t0aWxlQ29vcmRLZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJlZExvYWRFdmVudHNbdGlsZUNvb3JkS2V5XSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgaGFzUmVxdWVzdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJlZExvYWRFdmVudHNbdGlsZUNvb3JkS2V5XS5wdXNoKGNhY2hlVGlsZUluZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGFzUmVxdWVzdGVkO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFNvdXJjZVRvQ2FjaGUoc291cmNlOiBBcnJheUJ1ZmZlciwgem9vbTogbnVtYmVyLCBvcHRpb25zOiBhbnkpIHtcclxuICAgICAgICBpZiAodGhpcy5zb3VyY2VDYWNoZVtvcHRpb25zLnRpbGVDb29yZF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNvdXJjZUNhY2hlW29wdGlvbnMudGlsZUNvb3JkXSA9IHNvdXJjZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpbnN0cnVjdHNUcmVlID0gdGhpcy5yZWFkRmVhdHVyZXNBbmRDcmVhdGVJbnN0cnVjdFRyZWVzKHNvdXJjZSwgem9vbSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGxldCBpbnN0cnVjdHMgPSB0aGlzLmdldEluc3RydWN0cyhpbnN0cnVjdHNUcmVlKTtcclxuXHJcbiAgICAgICAgbGV0IHN1YlRpbGVJbnN0cnVjdENhY2hlcyA9IHRoaXMuY3JlYXRlU3ViVGlsZUluc3RydWN0Q2FjaGVzKGluc3RydWN0cywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGxldCBzb3VyY2VQcm9qZWN0ID0gdGhpcy5yZWFkUHJvamVjdGlvbihzb3VyY2UpO1xyXG4gICAgICAgIGxldCB0aWxlQ29vcmRLZXkgPSBvcHRpb25zLnRpbGVDb29yZC5qb2luKFwiLFwiKSArIFwiLFwiICsgem9vbTtcclxuXHJcbiAgICAgICAgbGV0IGxhc3RFeHRlbnQgPSB0aGlzLmdldExhc3RFeHRlbnQoKTtcclxuXHJcbiAgICAgICAgbGV0IG9UaWxlID0geyBzdWJUaWxlSW5zdHJ1Y3RDYWNoZXM6IHN1YlRpbGVJbnN0cnVjdENhY2hlcywgc291cmNlUHJvamVjdDogc291cmNlUHJvamVjdCwgbGFzdEV4dGVudDogbGFzdEV4dGVudCB9O1xyXG4gICAgICAgIHRoaXMubHJ1Q2FjaGUuc2V0KHRpbGVDb29yZEtleSwgb1RpbGUpO1xyXG5cclxuICAgICAgICBsZXQgY2FjaGVkVGlsZUluZm8gPSB0aGlzLnJlZ2lzdGVyZWRMb2FkRXZlbnRzW3RpbGVDb29yZEtleV07XHJcbiAgICAgICAgZGVsZXRlIHRoaXMucmVnaXN0ZXJlZExvYWRFdmVudHNbdGlsZUNvb3JkS2V5XTtcclxuXHJcbiAgICAgICAgdGhpcy5jYWNoZWRUaWxlQ2FsbGJhY2sob1RpbGUsIGNhY2hlZFRpbGVJbmZvKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkRmVhdHVyZXNBbmRDcmVhdGVJbnN0cnVjdFRyZWVzKHNvdXJjZTogQXJyYXlCdWZmZXIsIHpvb206IG51bWJlciwgb3B0aW9uczogYW55KSB7XHJcbiAgICAgICAgbGV0IHBiZiA9IG5ldyAoPGFueT5vbCkuZXh0LlBCRigoc291cmNlKSk7XHJcbiAgICAgICAgbGV0IHBiZkxheWVycyA9IHBiZi5yZWFkRmllbGRzKCg8YW55Pm9sKS5mb3JtYXQuTVZULnBiZlJlYWRlcnNfLmxheWVycywge30pO1xyXG4gICAgICAgIGxldCBmZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgIGxldCBwYmZMYXllcjtcclxuXHJcbiAgICAgICAgbGV0IHpvb21NYXRjaGVkR2VvU3R5bGVzR3JvdXBCeUxheWVySWQgPSB0aGlzLnN0eWxlSnNvbkNhY2hlLmdlb1N0eWxlR3JvdXBCeVpvb21bem9vbV07XHJcbiAgICAgICAgaWYgKCF6b29tTWF0Y2hlZEdlb1N0eWxlc0dyb3VwQnlMYXllcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmZWF0dXJlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwYmZMYXllck5hbWVzV2l0aEdlb1N0eWxlID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgcGJmTGF5ZXJOYW1lIGluIHpvb21NYXRjaGVkR2VvU3R5bGVzR3JvdXBCeUxheWVySWQpIHtcclxuICAgICAgICAgICAgcGJmTGF5ZXJOYW1lc1dpdGhHZW9TdHlsZS5wdXNoKHBiZkxheWVyTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaW5zdHJ1Y3RzQ2FjaGUgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBwYmZMYXllcnMpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxheWVyc18gJiYgdGhpcy5sYXllcnNfLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGJmTGF5ZXJOYW1lc1dpdGhHZW9TdHlsZS5pbmRleE9mKG5hbWUpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBiZkxheWVyID0gcGJmTGF5ZXJzW25hbWVdO1xyXG4gICAgICAgICAgICBvcHRpb25zW1wiZXh0ZW50XCJdID0gcGJmTGF5ZXIuZXh0ZW50O1xyXG5cclxuICAgICAgICAgICAgbGV0IGNhY2hlVHJlZXMgPSB6b29tTWF0Y2hlZEdlb1N0eWxlc0dyb3VwQnlMYXllcklkW25hbWVdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNhY2hlVHJlZXMgJiYgY2FjaGVUcmVlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VGaWx0ZXJzVG9JbmRleE9mUGJmTGF5ZXIoY2FjaGVUcmVlcywgcGJmTGF5ZXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGJmTGF5ZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmF3RmVhdHVyZSA9ICg8YW55Pm9sLmZvcm1hdC5NVlQpLnJlYWRSYXdGZWF0dXJlXyhwYmYsIHBiZkxheWVyLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjYWNoZVRyZWVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYWNoZVRyZWUgPSBjYWNoZVRyZWVzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHJlZUluZGV4ID0gY2FjaGVUcmVlLnRyZWVJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogLTEwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZE5vZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGVja05vZGVNYXRjaGVkID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHlsZUpzb25DYWNoZUl0ZW0gPSBub2RlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlSnNvbkNhY2hlSXRlbS5maWx0ZXJHcm91cC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZUpzb25DYWNoZUl0ZW0uZmlsdGVyR3JvdXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcnMgPSBzdHlsZUpzb25DYWNoZUl0ZW0uZmlsdGVyR3JvdXBbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBncm91cE1hdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZpbHRlcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSBmaWx0ZXJzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIubWF0Y2hPTEZlYXR1cmUocmF3RmVhdHVyZSwgem9vbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cE1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXBNYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkTm9kZSA9IG5vZGUuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVUcmVlLnRyYXZlcnNlTm9kZShjaGVja05vZGVNYXRjaGVkLCBzZWxlY3ROb2RlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUgPSB0aGlzLmNyZWF0ZUZlYXR1cmVfKHBiZiwgcmF3RmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWluaW1hbGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXNfID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB6aW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVUcmVlLnJvb3QuZGF0YS56SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aW5kZXggPSByYXdGZWF0dXJlLnByb3BlcnRpZXNbY2FjaGVUcmVlLnJvb3QuZGF0YS56SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllc19bY2FjaGVUcmVlLnJvb3QuZGF0YS56SW5kZXhdID0gemluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTih6aW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW3ppbmRleF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bemluZGV4XSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh6aW5kZXggPCBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW1wibWluXCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bXCJtaW5cIl0gPSB6aW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh6aW5kZXggPiBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW1wibWF4XCJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bXCJtYXhcIl0gPSB6aW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVt6aW5kZXhdLnB1c2goW2ZlYXR1cmUsIG1hdGNoZWROb2RlXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWluaW1hbGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkTm9kZS5nZW9TdHlsZSAmJiAobWF0Y2hlZE5vZGUuZ2VvU3R5bGUuY29uc3RydWN0b3IubmFtZSA9PT0gXCJHZW9UZXh0U3R5bGVcIiB8fCBtYXRjaGVkTm9kZS5nZW9TdHlsZS5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIkdlb1NoaWVsZFN0eWxlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllc19bbWF0Y2hlZE5vZGUuZ2VvU3R5bGUubmFtZV0gPSByYXdGZWF0dXJlLnByb3BlcnRpZXNbbWF0Y2hlZE5vZGUuZ2VvU3R5bGUubmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkTm9kZS5jaGlsZHJlbkdlb1N0eWxlcyAmJiBtYXRjaGVkTm9kZS5jaGlsZHJlbkdlb1N0eWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0Y2hlZE5vZGUuY2hpbGRyZW5HZW9TdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllc19bbWF0Y2hlZE5vZGUuY2hpbGRyZW5HZW9TdHlsZXNbaV0ubmFtZV0gPSByYXdGZWF0dXJlLnByb3BlcnRpZXNbbWF0Y2hlZE5vZGUuY2hpbGRyZW5HZW9TdHlsZXNbaV0ubmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5leHRlbnRfID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW50XyA9IHBiZkxheWVyID8gWzAsIDAsIHBiZkxheWVyLmV4dGVudCwgcGJmTGF5ZXIuZXh0ZW50XSA6IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0cnVjdHNDYWNoZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbnN0cnVjdHMoaW5zdHJ1Y3RzVHJlZSkge1xyXG4gICAgICAgIGxldCBpbnN0cnVjdHMgPSBbXTtcclxuICAgICAgICAvLyB0aGUgdHJlc3MgaW5kZXggbWVhbnMgdGhlIGluZGV4IG9mIFN5bGVJZC5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluc3RydWN0c1RyZWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGluc3RydWN0c0luT25lVHJlZSA9IGluc3RydWN0c1RyZWVbaV07XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3RzSW5PbmVUcmVlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gaW5zdHJ1Y3RzSW5PbmVUcmVlLm1pbiwgamogPSBpbnN0cnVjdHNJbk9uZVRyZWUubWF4OyBqIDw9IGpqOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5zdHJ1Y3RzSW5PbmVaSW5kZXggPSBpbnN0cnVjdHNJbk9uZVRyZWVbal07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0c0luT25lWkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbkluc3RydWN0cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBoID0gMDsgaCA8IGluc3RydWN0c0luT25lWkluZGV4Lmxlbmd0aDsgaCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5zdHJ1Y3QgPSBpbnN0cnVjdHNJbk9uZVpJbmRleFtoXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0WzBdLnN0eWxlSWQgPSBpbnN0cnVjdFswXS5zdHlsZUlkID8gaW5zdHJ1Y3RbMF0uc3R5bGVJZCA6IHt9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0WzFdLmdlb1N0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RbMF0uc3R5bGVJZFtpbnN0cnVjdFsxXS5nZW9TdHlsZS5pZF0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0cy5wdXNoKFtpbnN0cnVjdFswXSwgaW5zdHJ1Y3RbMV0uZ2VvU3R5bGUsIGldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RbMV0uY2hpbGRyZW5HZW9TdHlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGluc3RydWN0WzFdLmNoaWxkcmVuR2VvU3R5bGVzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0WzBdLnN0eWxlSWRbaW5zdHJ1Y3RbMV0uY2hpbGRyZW5HZW9TdHlsZXNba10uaWRdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5JbnN0cnVjdHMucHVzaChbaW5zdHJ1Y3RbMF0sIGluc3RydWN0WzFdLmNoaWxkcmVuR2VvU3R5bGVzW2tdLCBpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGluc3RydWN0cywgY2hpbGRyZW5JbnN0cnVjdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdHJ1Y3RzO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVN1YlRpbGVJbnN0cnVjdENhY2hlcyhpbnN0cnVjdHMsIG9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgc3ViVGlsZUNhY2hlZEluc3RydWN0ID0ge307XHJcblxyXG4gICAgICAgIGxldCBvZmZzZXRaID0gb3B0aW9ucy5vcmlnaW5hbENvb3JkWzBdIC0gb3B0aW9ucy50aWxlQ29vcmRbMF07XHJcbiAgICAgICAgbGV0IHRpbGVTaXplID0gb3B0aW9ucy5leHRlbnQgLyBNYXRoLnBvdygyLCBvZmZzZXRaKTtcclxuXHJcbiAgICAgICAgbGV0IHRpbGVSYW5nZSA9IHRoaXMuZ2V0VGlsZVJhbmdlKG9wdGlvbnMudGlsZUNvb3JkLCBvcHRpb25zLm9yaWdpbmFsQ29vcmRbMF0pO1xyXG4gICAgICAgIGxldCB0aWxlcyA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IHggPSB0aWxlUmFuZ2VbMF07IHggPD0gdGlsZVJhbmdlWzJdOyB4KyspIHtcclxuICAgICAgICAgICAgbGV0IG1pblggPSAoeCAtIHRpbGVSYW5nZVswXSkgKiB0aWxlU2l6ZTtcclxuICAgICAgICAgICAgbGV0IG1heFggPSAoeCAtIHRpbGVSYW5nZVswXSArIDEpICogdGlsZVNpemU7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSB0aWxlUmFuZ2VbM107IHkgPj0gdGlsZVJhbmdlWzFdOyB5LS0pIHtcclxuICAgICAgICAgICAgICAgIGxldCBtaW5ZID0gKHRpbGVSYW5nZVszXSAtIHkpICogdGlsZVNpemU7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4WSA9ICh0aWxlUmFuZ2VbM10gLSB5ICsgMSkgKiB0aWxlU2l6ZTtcclxuICAgICAgICAgICAgICAgIHRpbGVzW1wiXCIgKyBbeCwgeV1dID0gW21pblgsIG1pblksIG1heFgsIG1heFldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluc3RydWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5zdHJ1Y3QgPSBpbnN0cnVjdHNbaV07XHJcbiAgICAgICAgICAgIGxldCBmZWF0dXJlRXh0ZW50ID0gaW5zdHJ1Y3RbMF0uZ2V0R2VvbWV0cnkoKS5nZXRFeHRlbnQoKTtcclxuICAgICAgICAgICAgbGV0IGZlYXR1cmVUaWxlUmFuZ2UgPSB0aGlzLmdldEZlYXR1cmVUaWxlUmFuZ2UoZmVhdHVyZUV4dGVudCwgb3B0aW9ucy5leHRlbnQsIHRpbGVTaXplLCBvcHRpb25zLnRpbGVDb29yZCwgb2Zmc2V0Wik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHggPSB0aWxlUmFuZ2VbMF0gPiBmZWF0dXJlVGlsZVJhbmdlWzBdID8gdGlsZVJhbmdlWzBdIDogZmVhdHVyZVRpbGVSYW5nZVswXSwgeHggPSBmZWF0dXJlVGlsZVJhbmdlWzJdID4gdGlsZVJhbmdlWzJdID8gdGlsZVJhbmdlWzJdIDogZmVhdHVyZVRpbGVSYW5nZVsyXTsgeCA8PSB4eDsgeCsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gdGlsZVJhbmdlWzFdID4gZmVhdHVyZVRpbGVSYW5nZVsxXSA/IHRpbGVSYW5nZVsxXSA6IGZlYXR1cmVUaWxlUmFuZ2VbMV0sIHl5ID0gZmVhdHVyZVRpbGVSYW5nZVszXSA+IHRpbGVSYW5nZVszXSA/IHRpbGVSYW5nZVszXSA6IGZlYXR1cmVUaWxlUmFuZ2VbM107IHkgPD0geXk7IHkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlS2V5ID0gXCJcIiArIFt4LCB5XTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGlsZUV4dGVudCA9IHRpbGVzW3RpbGVLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3RbdGlsZUtleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3RbdGlsZUtleV0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViVGlsZUNhY2hlZEluc3RydWN0W3RpbGVLZXldLnB1c2goaW5zdHJ1Y3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3Q7XHJcbiAgICB9XHJcblxyXG4gICAgY2FjaGVkVGlsZUNhbGxiYWNrKG9UaWxlLCBjYWNoZVRpbGVJbmZvcykge1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhY2hlVGlsZUluZm9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBjYWNoZVRpbGVJbmZvID0gY2FjaGVUaWxlSW5mb3NbaV07XHJcbiAgICAgICAgICAgIGxldCB0aWxlS2V5ID0gXCJcIiArIGNhY2hlVGlsZUluZm8udGlsZS50aWxlQ29vcmRbMV0gKyBcIixcIiArIGNhY2hlVGlsZUluZm8udGlsZS50aWxlQ29vcmRbMl07XHJcblxyXG4gICAgICAgICAgICBjYWNoZVRpbGVJbmZvLmNhbGxiYWNrKGNhY2hlVGlsZUluZm8udGlsZSwgY2FjaGVUaWxlSW5mby5zdWNjZXNzRnVuY3Rpb24sIFtdLCBvVGlsZS5zdWJUaWxlSW5zdHJ1Y3RDYWNoZXNbdGlsZUtleV0sIG9UaWxlLnNvdXJjZVByb2plY3QsIG9UaWxlLmxhc3RFeHRlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRUaWxlUmFuZ2UodGlsZUNvb3JkLCB6b29tKSB7XHJcbiAgICAgICAgbGV0IHggPSB0aWxlQ29vcmRbMV07XHJcbiAgICAgICAgbGV0IHkgPSB0aWxlQ29vcmRbMl07XHJcbiAgICAgICAgbGV0IG1pblggPSB4O1xyXG4gICAgICAgIGxldCBtYXhYID0geDtcclxuICAgICAgICBsZXQgbWluWSA9IHk7XHJcbiAgICAgICAgbGV0IG1heFkgPSB5O1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gdGlsZUNvb3JkWzBdOyBpIDwgem9vbTsgaSsrKSB7XHJcbiAgICAgICAgICAgIG1pblggPSBtaW5YICogMjtcclxuICAgICAgICAgICAgbWF4WCA9IG1heFggKiAyICsgMTtcclxuICAgICAgICAgICAgbWluWSA9IG1pblkgKiAyO1xyXG4gICAgICAgICAgICBtYXhZID0gbWF4WSAqIDIgKyAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW21pblgsIG1pblksIG1heFgsIG1heFldO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEZlYXR1cmVUaWxlUmFuZ2UoZmVhdHVyZUV4dGVudCwgZXh0ZW50LCB0aWxlU2l6ZSwgcmVxdWVzdFRpbGVDb29yZCwgb2Zmc2V0Wikge1xyXG5cclxuICAgICAgICBsZXQgbWluWCA9IHJlcXVlc3RUaWxlQ29vcmRbMV0gKiBNYXRoLnBvdygyLCBvZmZzZXRaKSArIE1hdGguZmxvb3IoZmVhdHVyZUV4dGVudFswXSAvIHRpbGVTaXplKTtcclxuICAgICAgICBsZXQgbWF4WCA9IHJlcXVlc3RUaWxlQ29vcmRbMV0gKiBNYXRoLnBvdygyLCBvZmZzZXRaKSArIE1hdGguZmxvb3IoZmVhdHVyZUV4dGVudFsyXSAvIHRpbGVTaXplKTtcclxuICAgICAgICBsZXQgbWluWSA9IHJlcXVlc3RUaWxlQ29vcmRbMl0gKiBNYXRoLnBvdygyLCBvZmZzZXRaKSArIE1hdGguZmxvb3IoKGV4dGVudCAtIGZlYXR1cmVFeHRlbnRbM10pIC8gdGlsZVNpemUpO1xyXG4gICAgICAgIGxldCBtYXhZID0gcmVxdWVzdFRpbGVDb29yZFsyXSAqIE1hdGgucG93KDIsIG9mZnNldFopICsgTWF0aC5mbG9vcigoZXh0ZW50IC0gZmVhdHVyZUV4dGVudFsxXSkgLyB0aWxlU2l6ZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RXh0ZW50KG9yaWdpbmFsQ29vcmQsIHRpbGVjb29yZCwgZXh0ZW50KSB7XHJcbiAgICAgICAgbGV0IG94ID0gb3JpZ2luYWxDb29yZFsxXTtcclxuICAgICAgICBsZXQgeCA9IHRpbGVjb29yZFsxXTtcclxuICAgICAgICBsZXQgeFBhdGggPSBbXTtcclxuICAgICAgICB3aGlsZSAob3ggIT09IHgpIHtcclxuICAgICAgICAgICAgbGV0IHJlbWFpbmRlciA9IG94ICUgMjtcclxuICAgICAgICAgICAgeFBhdGgucHVzaChyZW1haW5kZXIpO1xyXG4gICAgICAgICAgICBveCA9IE1hdGguZmxvb3Iob3ggLyAyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG5ld0V4dGVudCA9IGV4dGVudDtcclxuICAgICAgICBsZXQgb2Zmc2V0WCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHhQYXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIG5ld0V4dGVudCA9IG5ld0V4dGVudCAvIDI7XHJcbiAgICAgICAgICAgIGlmICh4UGF0aFtpXSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0WCArPSBuZXdFeHRlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBveSA9IG9yaWdpbmFsQ29vcmRbMl07XHJcbiAgICAgICAgbGV0IHkgPSB0aWxlY29vcmRbMl07XHJcbiAgICAgICAgbGV0IHlQYXRoID0gW107XHJcbiAgICAgICAgd2hpbGUgKG95ICE9PSB5KSB7XHJcbiAgICAgICAgICAgIGxldCByZW1haW5kZXIgPSBveSAlIDI7XHJcbiAgICAgICAgICAgIHlQYXRoLnB1c2gocmVtYWluZGVyKTtcclxuICAgICAgICAgICAgb3kgPSBNYXRoLmZsb29yKG95IC8gMik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ld0V4dGVudCA9IGV4dGVudDtcclxuICAgICAgICBsZXQgb2Zmc2V0WSA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHlQYXRoLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIG5ld0V4dGVudCA9IG5ld0V4dGVudCAvIDI7XHJcbiAgICAgICAgICAgIGlmICh5UGF0aFtpXSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0WSArPSBuZXdFeHRlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETzogYWRkIHRoZSBidWZmZXJcclxuICAgICAgICByZXR1cm4gW29mZnNldFgsIG9mZnNldFksIG9mZnNldFggKyBuZXdFeHRlbnQsIG9mZnNldFkgKyBuZXdFeHRlbnRdO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcGxhY2VGaWx0ZXJzVG9JbmRleE9mUGJmTGF5ZXIoY2FjaGVUcmVlcywgcGJmTGF5ZXIpIHtcclxuICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBjYWNoZVRyZWVzLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGNhY2hlVHJlZSA9IGNhY2hlVHJlZXNbaV07XHJcbiAgICAgICAgICAgIHRoaXMucmVwbGFjZUNhY2hlSXRlbUZpbHRlcnNUb0luZGV4T2ZQYmZMYXllcihjYWNoZVRyZWUucm9vdCwgcGJmTGF5ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXBsYWNlQ2FjaGVJdGVtRmlsdGVyc1RvSW5kZXhPZlBiZkxheWVyKG5vZGUsIHBiZkxheWVyKSB7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBub2RlLmRhdGE7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5maWx0ZXJHcm91cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZmlsdGVycyA9IGRhdGEuZmlsdGVyR3JvdXBbaV07XHJcbiAgICAgICAgICAgIGxldCBnZW9GaWx0ZXI7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZmlsdGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZ2VvRmlsdGVyID0gZmlsdGVyc1tqXTtcclxuICAgICAgICAgICAgICAgIGdlb0ZpbHRlci5yZXBsYWNlVmF1bGVzVG9QYmZJbmRleChwYmZMYXllcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBpZiAobm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZUNhY2hlSXRlbUZpbHRlcnNUb0luZGV4T2ZQYmZMYXllcihub2RlLmNoaWxkcmVuW2ldLCBwYmZMYXllcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuXHJcbiAgICByZWFkRmVhdHVyZXNBbmRDcmVhdGVJbnN0cnVjdHMoc291cmNlOiBBcnJheUJ1ZmZlciwgem9vbTogbnVtYmVyLCBvcHRpb25zOiBhbnkpIHtcclxuICAgICAgICBsZXQgcGJmID0gbmV3ICg8YW55Pm9sKS5leHQuUEJGKChzb3VyY2UpKTtcclxuICAgICAgICBsZXQgcGJmTGF5ZXJzID0gcGJmLnJlYWRGaWVsZHMoKDxhbnk+b2wpLmZvcm1hdC5NVlQucGJmUmVhZGVyc18ubGF5ZXJzLCB7fSk7XHJcbiAgICAgICAgbGV0IGZlYXR1cmVzID0gW107XHJcbiAgICAgICAgbGV0IHBiZkxheWVyO1xyXG5cclxuICAgICAgICBsZXQgem9vbU1hdGNoZWRHZW9TdHlsZXNHcm91cEJ5TGF5ZXJJZCA9IHRoaXMuc3R5bGVKc29uQ2FjaGUuZ2VvU3R5bGVHcm91cEJ5Wm9vbVt6b29tXTtcclxuICAgICAgICBpZiAoIXpvb21NYXRjaGVkR2VvU3R5bGVzR3JvdXBCeUxheWVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBiZkxheWVyTmFtZXNXaXRoR2VvU3R5bGUgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBwYmZMYXllck5hbWUgaW4gem9vbU1hdGNoZWRHZW9TdHlsZXNHcm91cEJ5TGF5ZXJJZCkge1xyXG4gICAgICAgICAgICBwYmZMYXllck5hbWVzV2l0aEdlb1N0eWxlLnB1c2gocGJmTGF5ZXJOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpbnN0cnVjdHNDYWNoZSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHBiZkxheWVycykge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubGF5ZXJzXyAmJiB0aGlzLmxheWVyc18uaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYmZMYXllck5hbWVzV2l0aEdlb1N0eWxlLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGJmTGF5ZXIgPSBwYmZMYXllcnNbbmFtZV07XHJcblxyXG4gICAgICAgICAgICBsZXQgY2FjaGVUcmVlcyA9IHpvb21NYXRjaGVkR2VvU3R5bGVzR3JvdXBCeUxheWVySWRbbmFtZV07XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FjaGVUcmVlcyAmJiBjYWNoZVRyZWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZUZpbHRlcnNUb0luZGV4T2ZQYmZMYXllcihjYWNoZVRyZWVzLCBwYmZMYXllcik7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYmZMYXllci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByYXdGZWF0dXJlID0gKDxhbnk+b2wuZm9ybWF0Lk1WVCkucmVhZFJhd0ZlYXR1cmVfKHBiZiwgcGJmTGF5ZXIsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNhY2hlVHJlZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhY2hlVHJlZSA9IGNhY2hlVHJlZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmVlSW5kZXggPSBjYWNoZVRyZWUudHJlZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAtMTBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkTm9kZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGVja05vZGVNYXRjaGVkID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzdHlsZUpzb25DYWNoZUl0ZW0gPSBub2RlLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlSnNvbkNhY2hlSXRlbS5maWx0ZXJHcm91cC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZUpzb25DYWNoZUl0ZW0uZmlsdGVyR3JvdXAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcnMgPSBzdHlsZUpzb25DYWNoZUl0ZW0uZmlsdGVyR3JvdXBbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBncm91cE1hdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZpbHRlcnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXIgPSBmaWx0ZXJzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIubWF0Y2hPTEZlYXR1cmUocmF3RmVhdHVyZSwgem9vbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cE1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXBNYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkTm9kZSA9IG5vZGUuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVUcmVlLnRyYXZlcnNlTm9kZShjaGVja05vZGVNYXRjaGVkLCBzZWxlY3ROb2RlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUgPSB0aGlzLmNyZWF0ZUZlYXR1cmVfKHBiZiwgcmF3RmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWluaW1hbGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXNfID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRyZWUucm9vdC5kYXRhLnpJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppbmRleCA9IHJhd0ZlYXR1cmUucHJvcGVydGllc1tjYWNoZVRyZWUucm9vdC5kYXRhLnpJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzX1tjYWNoZVRyZWUucm9vdC5kYXRhLnpJbmRleF0gPSB6aW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKHppbmRleCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bemluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVt6aW5kZXhdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHppbmRleCA8IGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bXCJtaW5cIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1pblwiXSA9IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHppbmRleCA+IGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bXCJtYXhcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1heFwiXSA9IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW3ppbmRleF0ucHVzaChbZmVhdHVyZSwgbWF0Y2hlZE5vZGVdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1pbmltYWxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZE5vZGUuZ2VvU3R5bGUgJiYgbWF0Y2hlZE5vZGUuZ2VvU3R5bGUuY29uc3RydWN0b3IubmFtZSA9PT0gXCJHZW9UZXh0U3R5bGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXNfW21hdGNoZWROb2RlLmdlb1N0eWxlLm5hbWVdID0gcmF3RmVhdHVyZS5wcm9wZXJ0aWVzW21hdGNoZWROb2RlLmdlb1N0eWxlLm5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZE5vZGUuY2hpbGRyZW5HZW9TdHlsZXMgJiYgbWF0Y2hlZE5vZGUuY2hpbGRyZW5HZW9TdHlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGNoZWROb2RlLmNoaWxkcmVuR2VvU3R5bGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXNfW21hdGNoZWROb2RlLmNoaWxkcmVuR2VvU3R5bGVzW2ldLm5hbWVdID0gcmF3RmVhdHVyZS5wcm9wZXJ0aWVzW21hdGNoZWROb2RlLmNoaWxkcmVuR2VvU3R5bGVzW2ldLm5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZXh0ZW50XyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmV4dGVudF8gPSBwYmZMYXllciA/IFswLCAwLCBwYmZMYXllci5leHRlbnQsIHBiZkxheWVyLmV4dGVudF0gOiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBpbnN0cnVjdHMgPSBbXTtcclxuICAgICAgICAvLyB0aGUgdHJlc3MgaW5kZXggbWVhbnMgdGhlIGluZGV4IG9mIFN5bGVJZC5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluc3RydWN0c0NhY2hlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBpbnN0cnVjdHNJbk9uZVRyZWUgPSBpbnN0cnVjdHNDYWNoZVtpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdHNJbk9uZVRyZWUpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpbnN0cnVjdHNJbk9uZVRyZWUubWluLCBqaiA9IGluc3RydWN0c0luT25lVHJlZS5tYXg7IGogPD0gamo7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnN0cnVjdHNJbk9uZVpJbmRleCA9IGluc3RydWN0c0luT25lVHJlZVtqXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RzSW5PbmVaSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoaWxkcmVuSW5zdHJ1Y3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGggPSAwOyBoIDwgaW5zdHJ1Y3RzSW5PbmVaSW5kZXgubGVuZ3RoOyBoKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnN0cnVjdCA9IGluc3RydWN0c0luT25lWkluZGV4W2hdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RbMF0uc3R5bGVJZCA9IGluc3RydWN0WzBdLnN0eWxlSWQgPyBpbnN0cnVjdFswXS5zdHlsZUlkIDoge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdFsxXS5nZW9TdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0WzBdLnN0eWxlSWRbaW5zdHJ1Y3RbMV0uZ2VvU3R5bGUuaWRdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHMucHVzaChbaW5zdHJ1Y3RbMF0sIGluc3RydWN0WzFdLmdlb1N0eWxlLCBpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0WzFdLmNoaWxkcmVuR2VvU3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBpbnN0cnVjdFsxXS5jaGlsZHJlbkdlb1N0eWxlcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdFswXS5zdHlsZUlkW2luc3RydWN0WzFdLmNoaWxkcmVuR2VvU3R5bGVzW2tdLmlkXSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuSW5zdHJ1Y3RzLnB1c2goW2luc3RydWN0WzBdLCBpbnN0cnVjdFsxXS5jaGlsZHJlbkdlb1N0eWxlc1trXSwgaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShpbnN0cnVjdHMsIGNoaWxkcmVuSW5zdHJ1Y3RzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFtmZWF0dXJlcywgaW5zdHJ1Y3RzXTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcmVhZFJhd0ZlYXR1cmVfKHBiZiwgbGF5ZXIsIGkpIHtcclxuICAgICAgICBwYmYucG9zID0gbGF5ZXIuZmVhdHVyZXNbaV07XHJcbiAgICAgICAgbGV0IGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zO1xyXG5cclxuICAgICAgICBsZXQgZmVhdHVyZSA9IHtcclxuICAgICAgICAgICAgbGF5ZXI6IGxheWVyLFxyXG4gICAgICAgICAgICB0eXBlOiAwLFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcclxuICAgICAgICAgICAgcHJvcGVydGllc0luZGV4OiB7fVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcGJmLnJlYWRGaWVsZHMoKDxhbnk+b2wpLmZvcm1hdC5NVlQucGJmUmVhZGVyc18uZmVhdHVyZUNvbHVtblZhbHVlLCBmZWF0dXJlLCBlbmQpO1xyXG5cclxuICAgICAgICByZXR1cm4gZmVhdHVyZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZmVhdHVyZUNvbHVtblZhbHVlKHRhZzogYW55LCBmZWF0dXJlOiBhbnksIHBiZjogYW55KSB7XHJcbiAgICAgICAgaWYgKHRhZyA9PT0gMSkge1xyXG4gICAgICAgICAgICBmZWF0dXJlLmlkID0gcGJmLnJlYWRWYXJpbnQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gMikge1xyXG4gICAgICAgICAgICBsZXQgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XHJcbiAgICAgICAgICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQga2V5ID0gcGJmLnJlYWRWYXJpbnQoKTtcclxuICAgICAgICAgICAgICAgIGxldCB2YWx1ZSA9IHBiZi5yZWFkVmFyaW50KCk7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXNJbmRleFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBrZXkgPSBmZWF0dXJlLmxheWVyLmtleXNba2V5XTtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gZmVhdHVyZS5sYXllci52YWx1ZXNbdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGFnID09PSAzKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmUudHlwZSA9IHBiZi5yZWFkVmFyaW50KCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0YWcgPT09IDQpIHtcclxuICAgICAgICAgICAgZmVhdHVyZS5nZW9tZXRyeSA9IHBiZi5wb3M7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbig8YW55Pm9sKS5mb3JtYXQuTVZULnJlYWRSYXdGZWF0dXJlXyA9IEdlb01WVEZvcm1hdC5yZWFkUmF3RmVhdHVyZV87XHJcbig8YW55Pm9sKS5mb3JtYXQuTVZULnBiZlJlYWRlcnNfW1wiZmVhdHVyZUNvbHVtblZhbHVlXCJdID0gR2VvTVZURm9ybWF0LmZlYXR1cmVDb2x1bW5WYWx1ZTtcclxuIiwiZXhwb3J0IGNsYXNzIEdlb1ZlY3RvclRpbGUgZXh0ZW5kcyAob2wuVmVjdG9yVGlsZSBhcyB7IG5ldyh0aWxlQ29vcmQ6IG9sLlRpbGVDb29yZCwgc3RhdGU6IG9sLlRpbGUuU3RhdGUsIHNyYzogc3RyaW5nLCBmb3JtYXQ6IG9sLmZvcm1hdC5GZWF0dXJlLCB0aWxlTG9hZEZ1bmN0aW9uOiBvbC5UaWxlTG9hZEZ1bmN0aW9uVHlwZSk6IGFueTsgfSkge1xyXG5cclxuICAgIGluc3RydWN0czogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRpbGVDb29yZDogb2wuVGlsZUNvb3JkLCBzdGF0ZTogb2wuVGlsZS5TdGF0ZSwgc3JjOiBzdHJpbmcsIGZvcm1hdDogb2wuZm9ybWF0LkZlYXR1cmUsIHRpbGVMb2FkRnVuY3Rpb246IG9sLlRpbGVMb2FkRnVuY3Rpb25UeXBlKSB7XHJcbiAgICAgICAgc3VwZXIodGlsZUNvb3JkLCBzdGF0ZSwgc3JjLCBmb3JtYXQsIHRpbGVMb2FkRnVuY3Rpb24pO1xyXG4gICAgICAgIHRoaXMuZGlzcG9zZUludGVybmFsID0gdGhpcy5kaXNwb3NlSW50ZXJuYWxDdXN0b207XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRpc3Bvc2VJbnRlcm5hbEN1c3RvbSgpIHtcclxuICAgICAgICB0aGlzLmZlYXR1cmVzXyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZXBsYXlHcm91cHNfID0ge307XHJcbiAgICAgICAgLy8gdGhpcy5zdGF0ZSA9IG9sLlRpbGVTdGF0ZS5BQk9SVDtcclxuICAgICAgICB0aGlzLnN0YXRlID0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5JRExFO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlZCgpO1xyXG4gICAgICAgIGlmICh0aGlzW1wieGhyXCJdICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzW1wieGhyXCJdLmFib3J0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy53b3JrZXJJZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHZhciBkaXNwb3NlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIGZvcm1hdElkOiAoPGFueT5vbCkuZ2V0VWlkKHRoaXMuZ2V0Rm9ybWF0KCkpLFxyXG4gICAgICAgICAgICAgICAgbWF4RGF0YVpvb206IHRoaXMuZ2V0Rm9ybWF0KCkubWF4RGF0YVpvb20sXHJcbiAgICAgICAgICAgICAgICB0aWxlQ29vcmQ6IHRoaXMudGlsZUNvb3JkLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdFRpbGVDb29yZDogdGhpcy5yZXF1ZXN0VGlsZUNvb3JkXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0Rm9ybWF0KCkud29ya2VyTWFuYWdlci5wb3N0TWVzc2FnZSh0aGlzLnRpbGVDb29yZCArICg8YW55Pm9sKS5nZXRVaWQoZGlzcG9zZUluZm8pLCBcInZlY3RvclRpbGVEaXNwb3NlXCIsIGRpc3Bvc2VJbmZvLCBudWxsLCB0aGlzLndvcmtlcklkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICg8YW55Pm9sLlRpbGUucHJvdG90eXBlKS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb25Mb2FkKGRhdGFQcm9qZWN0aW9uLCBleHRlbnQpIHtcclxuICAgICAgICB0aGlzLnNldFByb2plY3Rpb24oZGF0YVByb2plY3Rpb24pO1xyXG4gICAgICAgIHRoaXMuc2V0RmVhdHVyZXMoKTtcclxuICAgICAgICB0aGlzLnNldEV4dGVudChleHRlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFJlbmRlckZlYXR1cmVJbnN0cnVjdHMoaW5zdHJ1Y3RzKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0cnVjdHMgPSBpbnN0cnVjdHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UmVuZGVyRmVhdHVyZUluc3RydWN0cyhpbnN0cnVjdHMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdHM7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBHZW9WZWN0b3JUaWxlU291cmNlIH0gZnJvbSBcIi4uL3NvdXJjZS9nZW9WZWN0b3JUaWxlU291cmNlXCI7XHJcbmltcG9ydCB7IEdlb1ZlY3RvclRpbGUgfSBmcm9tIFwiLi4vZ2VvVmVjdG9yVGlsZVwiO1xyXG5pbXBvcnQgeyBHZW9TdHlsZSB9IGZyb20gXCIuLi9zdHlsZS9nZW9TdHlsZVwiO1xyXG5pbXBvcnQgeyBHZW9NVlRGb3JtYXQgfSBmcm9tIFwiLi4vZm9ybWF0L2dlb012dFwiO1xyXG5pbXBvcnQgeyBTdHlsZUpzb25DYWNoZSB9IGZyb20gXCIuLi90cmVlL3N0eWxlSnNvbkNhY2hlXCI7XHJcbmltcG9ydCB7IFN0eWxlSnNvbkNhY2hlSXRlbSB9IGZyb20gXCIuLi90cmVlL3N0eWxlSnNvbkNhY2hlSXRlbVwiO1xyXG5pbXBvcnQgeyBHZW9WZWN0b3JUaWxlTGF5ZXJSZW5kZXIgfSBmcm9tIFwiLi4vcmVuZGVyL2dlb1ZlY3RvclRpbGVsYXllclJlbmRlclwiO1xyXG5pbXBvcnQgeyBUcmVlTm9kZSB9IGZyb20gXCIuLi90cmVlL1RyZWVOb2RlXCI7XHJcbmltcG9ydCB7IFRyZWUgfSBmcm9tIFwiLi4vdHJlZS90cmVlXCI7XHJcbmltcG9ydCB7IFdvcmtlck1hbmFnZXIgfSBmcm9tIFwiLi4vd29ya2VyL3dvcmtlck1hbmFnZXJcIjtcclxuaW1wb3J0IHsgV2ViZ2xNYW5hZ2VyIH0gZnJvbSBcIi4uL3dvcmtlci93ZWJnbE1hbmFnZXJcIjtcclxuaW1wb3J0IHsgVmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZSB9IGZyb20gXCIuLi93b3JrZXIvdmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFZlY3RvclRpbGVMYXllciBleHRlbmRzIChvbC5sYXllci5WZWN0b3JUaWxlIGFzIHsgbmV3KHA6IG9seC5sYXllci5WZWN0b3JUaWxlT3B0aW9ucyk6IGFueTsgfSkge1xyXG4gICAgbWF4RGF0YVpvb206IG51bWJlcjtcclxuICAgIG1pbmltYWxpc3Q6IGJvb2xlYW47XHJcbiAgICB0aHJlYWRNb2RlOiBWZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlO1xyXG4gICAgaXNNdWx0aXRocmVhZDogYm9vbGVhbjtcclxuICAgIHdvcmtlck1hbmFnZXI6IFdvcmtlck1hbmFnZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVKc29uOiBhbnksIG9wdF9vcHRpb25zPzogb2x4LmxheWVyLlZlY3RvclRpbGVPcHRpb25zKSB7XHJcbiAgICAgICAgLy8gZGVmYXVsdFxyXG4gICAgICAgIGlmIChvcHRfb3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9wdF9vcHRpb25zW1wiZGVjbHV0dGVyXCJdID0gb3B0X29wdGlvbnNbXCJkZWNsdXR0ZXJcIl0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRfb3B0aW9uc1tcImRlY2x1dHRlclwiXTtcclxuICAgICAgICAgICAgb3B0X29wdGlvbnNbXCJtaW5pbWFsaXN0XCJdID0gb3B0X29wdGlvbnNbXCJtaW5pbWFsaXN0XCJdID09PSB1bmRlZmluZWQgPyB0cnVlIDogb3B0X29wdGlvbnNbXCJtaW5pbWFsaXN0XCJdO1xyXG4gICAgICAgICAgICBvcHRfb3B0aW9uc1tcInJlbmRlck1vZGVcIl0gPSAndmVjdG9yJztcclxuICAgICAgICAgICAgc3VwZXIob3B0X29wdGlvbnMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge31cclxuICAgICAgICAgICAgb3B0aW9uc1tcImRlY2x1dHRlclwiXSA9IHRydWU7XHJcbiAgICAgICAgICAgIG9wdGlvbnNbXCJtaW5pbWFsaXN0XCJdID0gdHJ1ZTtcclxuICAgICAgICAgICAgb3B0X29wdGlvbnNbXCJyZW5kZXJNb2RlXCJdID0gJ3ZlY3Rvcic7XHJcbiAgICAgICAgICAgIHN1cGVyKDxhbnk+b3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob3B0X29wdGlvbnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyB0ZW1wIEVtaWxcclxuICAgICAgICAgICAgdmFyIHRlbXBJc011bHRpdGhyZWFkID0gb3B0X29wdGlvbnNbXCJtdWx0aXRocmVhZFwiXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdF9vcHRpb25zW1wibXVsdGl0aHJlYWRcIl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRocmVhZE1vZGUgPSBvcHRfb3B0aW9uc1tcInRocmVhZE1vZGVcIl0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRfb3B0aW9uc1tcInRocmVhZE1vZGVcIl07XHJcbiAgICAgICAgICAgIHRoaXMuaXNNdWx0aXRocmVhZCA9IHRoaXMudGhyZWFkTW9kZSAhPT0gVmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZS5TaW5nbGVUaHJlYWQ7XHJcbiAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZFdvcmtlckNvdW50ID0gb3B0X29wdGlvbnNbXCJiYWNrZ3JvdW5kV29ya2VyQ291bnRcIl07XHJcblxyXG4gICAgICAgICAgICAvLyB0ZW1wIEVtaWxcclxuICAgICAgICAgICAgaWYgKHRlbXBJc011bHRpdGhyZWFkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRocmVhZE1vZGUgPSBWZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlLkRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRXb3JrZXJDb3VudCA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLm1pbmltYWxpc3QgPSBvcHRfb3B0aW9uc1tcIm1pbmltYWxpc3RcIl0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRfb3B0aW9uc1tcIm1pbmltYWxpc3RcIl07XHJcbiAgICAgICAgICAgIHRoaXMubWF4RGF0YVpvb20gPSBvcHRfb3B0aW9uc1tcIm1heERhdGFab29tXCJdID09PSB1bmRlZmluZWQgPyAxNCA6IG9wdF9vcHRpb25zW1wibWF4RGF0YVpvb21cIl07XHJcbiAgICAgICAgICAgIHRoaXMucHJveHkgPSBvcHRfb3B0aW9uc1tcInByb3h5XCJdO1xyXG4gICAgICAgICAgICB0aGlzLmNsaWVudElkID0gb3B0X29wdGlvbnNbXCJjbGllbnRJZFwiXTtcclxuICAgICAgICAgICAgdGhpcy5jbGllbnRTZWNyZXQgPSBvcHRfb3B0aW9uc1tcImNsaWVudFNlY3JldFwiXTtcclxuICAgICAgICAgICAgdGhpcy5hcGlLZXkgPSBvcHRfb3B0aW9uc1tcImFwaUtleVwiXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmlzTXVsdGl0aHJlYWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm1pbmltYWxpc3QgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm1heERhdGFab29tID0gMTQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJHZW9WZWN0b3IoKTtcclxuICAgICAgICBpZiAodGhpcy5pc1N0eWxlSnNvblVybChzdHlsZUpzb24pKSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZFN0eWxlSnNvbkFzeW4oc3R5bGVKc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZFN0eWxlSnNvbihzdHlsZUpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnR5cGUgPSAoPGFueT5vbCkuTGF5ZXJUeXBlLk1BUFNVSVRFX1ZFQ1RPUlRJTEU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gY3JlYXRlIHdlYndvcmtlciBmb3Igd2ViZ2wgICAgICAgIFxyXG4gICAgICAgIGlmKCEoPGFueT53aW5kb3cpLndlYmdsTWFuYWdlcil7XHJcbiAgICAgICAgICAgICg8YW55PndpbmRvdykud2ViZ2xNYW5hZ2VyID0gbmV3IFdlYmdsTWFuYWdlcigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsb2FkU3R5bGVKc29uQXN5bihzdHlsZUpzb25VcmwpIHtcclxuICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgeGhyLm9wZW4oXCJHRVRcIiwgc3R5bGVKc29uVXJsKTtcclxuXHJcbiAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudDogYW55KSB7XHJcbiAgICAgICAgICAgIGlmICgheGhyLnN0YXR1cyB8fCB4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlO1xyXG4gICAgICAgICAgICAgICAgc291cmNlID0geGhyLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVKc29uID0gSlNPTi5wYXJzZShzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkU3R5bGVKc29uKEpTT04ucGFyc2Uoc291cmNlKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZFN0eWxlSnNvbihpbnB1dFN0eWxlSnNvbjogYW55KSB7XHJcbiAgICAgICAgdmFyIHN0eWxlSnNvbiA9IHRoaXMuc3R5bGVKc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShpbnB1dFN0eWxlSnNvbikpO1xyXG4gICAgICAgIHRoaXMudmVyc2lvbiA9IHN0eWxlSnNvbltcInZlcnNpb25cIl07XHJcbiAgICAgICAgdGhpcy5vd25lciA9IHN0eWxlSnNvbltcIm93bmVyXCJdO1xyXG4gICAgICAgIHRoaXMuZGF0ZVRpbWUgPSBzdHlsZUpzb25bXCJkYXRlVGltZVwiXTtcclxuICAgICAgICB0aGlzLnZhcmlhYmxlcyA9IHRoaXMuZ2V0VmFyaWFibGVzKHN0eWxlSnNvbltcInZhcmlhYmxlc1wiXSk7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kID0gc3R5bGVKc29uW1wiYmFja2dyb3VuZFwiXTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXBsYWNlVmFyaWFibGVzKHN0eWxlSnNvbiwgdGhpcy52YXJpYWJsZXMpO1xyXG5cclxuICAgICAgICB0aGlzLmdlb1NvdXJjZXMgPSB7fTtcclxuICAgICAgICBpZiAoc3R5bGVKc29uW1wibGF5ZXJzXCJdICYmIHN0eWxlSnNvbltcImxheWVyc1wiXS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBsYXllckpzb24gPSBzdHlsZUpzb25bXCJsYXllcnNcIl1bMF07XHJcbiAgICAgICAgICAgIHZhciBzb3VyY2VJZCA9IGxheWVySnNvbltcInNvdXJjZVwiXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEdlb1NvdXJjZShzb3VyY2VJZCk7XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U291cmNlKHNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5iYWNrZ3JvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJhY2tncm91bmRDb2xvciA9IEdlb1N0eWxlLnRvUkdCQUNvbG9yKHRoaXMuYmFja2dyb3VuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhY2tncm91bmRDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW1wiYmFja2dyb3VuZFwiXSA9IGJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHN0eWxlSnNvbnMgPSBzdHlsZUpzb25bXCJzdHlsZXNcIl07XHJcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGVJZHMgPSBsYXllckpzb25bXCJzdHlsZXNcIl07XHJcbiAgICAgICAgICAgICAgICBsZXQgbWluWm9vbSA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4Wm9vbSA9IDIyO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxheWVyTmFtZSA9IHNvdXJjZS5nZXRHZW9Gb3JtYXQoKS5nZXRMYXllck5hbWUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGVKc29uQ2FjaGUgPSBuZXcgU3R5bGVKc29uQ2FjaGUoKTtcclxuICAgICAgICAgICAgICAgIGxldCBzdHlsZUlkSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgc3R5bGVJZCBvZiBzdHlsZUlkcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdHlsZUpzb247XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHN0eWxlSnNvbnMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZUpzb25zW2luZGV4XS5pZCA9PT0gc3R5bGVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVKc29uID0gc3R5bGVKc29uc1tpbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlSnNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZUpzb25DYWNoZS5zdHlsZUpzb25bc3R5bGVJZF0gPSBzdHlsZUpzb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpdGVtID0gbmV3IFN0eWxlSnNvbkNhY2hlSXRlbShzdHlsZUpzb24sIG1pblpvb20sIG1heFpvb20sIGxheWVyTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB6b29tID0gaXRlbS5taW5ab29tOyB6b29tIDw9IGl0ZW0ubWF4Wm9vbTsgem9vbSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHJlZU5vZGUgPSBuZXcgVHJlZU5vZGU8U3R5bGVKc29uQ2FjaGVJdGVtPihpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2hpbGRyZW5Ob2RlKHRyZWVOb2RlLCBpdGVtLCB6b29tKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlSnNvbkNhY2hlLmFkZCh6b29tLCBpdGVtLmRhdGFMYXllck5hbWUsIG5ldyBUcmVlKHRyZWVOb2RlLCBzdHlsZUlkSW5kZXgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVJZEluZGV4ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGdlb0Zvcm1hdCA9IHNvdXJjZS5nZXRHZW9Gb3JtYXQoKTtcclxuICAgICAgICAgICAgICAgIGdlb0Zvcm1hdFtcInN0eWxlSnNvbkNhY2hlXCJdID0gc3R5bGVKc29uQ2FjaGU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNdWx0aXRocmVhZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLndvcmtlck1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0SWQ6ICg8YW55Pm9sKS5nZXRVaWQoZ2VvRm9ybWF0KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlSnNvbjogc3R5bGVKc29uQ2FjaGUuc3R5bGVKc29uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvVGV4dFN0eWxlSW5mb3M6IHN0eWxlSnNvbkNhY2hlLmdlb1RleHRTdHlsZUluZm9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53b3JrZXJNYW5hZ2VyLndvcmtlckNvdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud29ya2VyTWFuYWdlci5wb3N0TWVzc2FnZSgoPGFueT5vbCkuZ2V0VWlkKG1lc3NhZ2VEYXRhKSwgXCJpbml0U3R5bGVKU09OXCIsIG1lc3NhZ2VEYXRhLCB1bmRlZmluZWQsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEdlb1NvdXJjZShzb3VyY2VJZCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdlb1NvdXJjZXMgJiYgdGhpcy5nZW9Tb3VyY2VzW3NvdXJjZUlkXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZW9Tb3VyY2VzW3NvdXJjZUlkXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnN0eWxlSnNvbltcInNvdXJjZXNcIl0pIHtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZUpzb25bJ3NvdXJjZXMnXS5mb3JFYWNoKHNvdXJjZUpzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZUlkID09PSBzb3VyY2VKc29uWydpZCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzb3VyY2VKc29uWyd1cmxzJ10gJiYgc291cmNlSnNvblsndXJsJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlSnNvblsndXJscyddID0gW3NvdXJjZUpzb25bJ3VybCddXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHNvdXJjZUpzb25bJ3VybCddO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VKc29uWyd1cmxzJ10gPSBzb3VyY2VKc29uWyd1cmxzJ10ubWFwKHVybCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZignaHR0cCcpID09PSAtMSAmJiB1cmwuaW5kZXhPZignaHR0cHMnKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBob3N0ID0gbG9jYXRpb24uaG9zdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm90b2NvbCA9IGxvY2F0aW9uLnByb3RvY29sO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVybC5pbmRleE9mKCcvJykgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBwcm90b2NvbCArICcvLycgKyBob3N0ICsgJy8nICsgdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodXJsLmluZGV4T2YoJy8nKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHByb3RvY29sICsgJy8vJyArIGhvc3QgKyB1cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXBpS2V5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZignYXBpS2V5JykgPT09IC0xICYmIHRoaXMuYXBpS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSB1cmwgKyAnP2FwaUtleT0nICsgdGhpcy5hcGlLZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJveHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucHJveHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IHRoaXMucHJveHkgKyBlbmNvZGVVUklDb21wb25lbnQodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZW9Tb3VyY2VzW3NvdXJjZUpzb25bXCJpZFwiXV0gPSB0aGlzLmNyZWF0ZVZlY3RvclRpbGVTb3VyY2Uoc291cmNlSnNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VvU291cmNlc1tzb3VyY2VJZF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlVmVjdG9yVGlsZVNvdXJjZShzb3VyY2VKc29uKSB7XHJcbiAgICAgICAgaWYgKHNvdXJjZUpzb25bXCJ0eXBlXCJdID09PSBcIk1WVFwiKSB7XHJcbiAgICAgICAgICAgIHZhciBmb3JtYXQgPSB0aGlzLmdldFZlY3RvclNvdXJjZUZvcm1hdCgpO1xyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gbmV3IEdlb1ZlY3RvclRpbGVTb3VyY2Uoe1xyXG4gICAgICAgICAgICAgICAgdGlsZUNsYXNzOiA8YW55Pkdlb1ZlY3RvclRpbGUsXHJcbiAgICAgICAgICAgICAgICB1cmxzOiBzb3VyY2VKc29uW1widXJsc1wiXSxcclxuICAgICAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxyXG4gICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0OiB0aGlzLmNsaWVudFNlY3JldCxcclxuICAgICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgcHJvamVjdGlvbjogXCJFUFNHOjM4NTdcIixcclxuICAgICAgICAgICAgICAgIHRpbGVHcmlkOiB0aGlzLmNyZWF0ZVZlY3RvclRpbGVHcmlkKCksXHJcbiAgICAgICAgICAgICAgICBjYWNoZVNpemU6IDEwMjQsXHJcbiAgICAgICAgICAgICAgICBtdWx0aXRocmVhZDogdGhpcy5pc011bHRpdGhyZWFkLFxyXG4gICAgICAgICAgICAgICAgbWluaW1hbGlzdDogdGhpcy5taW5pbWFsaXN0LFxyXG4gICAgICAgICAgICAgICAgbWF4RGF0YVpvb206IHRoaXMubWF4RGF0YVpvb21cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZvcm1hdFsnc291cmNlJ10gPSBzb3VyY2U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgZ2V0VmVjdG9yU291cmNlRm9ybWF0KCkge1xyXG4gICAgICAgIGxldCBmb3JtYXQgPSBuZXcgR2VvTVZURm9ybWF0KHVuZGVmaW5lZCwgeyBtdWx0aXRocmVhZDogdGhpcy5pc011bHRpdGhyZWFkLCBtaW5pbWFsaXN0OiB0aGlzLm1pbmltYWxpc3QgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNNdWx0aXRocmVhZCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMud29ya2VyTWFuYWdlciB8fCAhdGhpcy53b3JrZXJNYW5hZ2VyLmluaXRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXJNYW5hZ2VyID0gbmV3IFdvcmtlck1hbmFnZXIodGhpcy50aHJlYWRNb2RlLCB0aGlzLmJhY2tncm91bmRXb3JrZXJDb3VudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtlck1hbmFnZXIuaW5pdFdvcmtlcnMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy53b3JrZXJNYW5hZ2VyLmluaXRlZCkge1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0W1wid29ya2VyTWFuYWdlclwiXSA9IHRoaXMud29ya2VyTWFuYWdlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZm9ybWF0O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjcmVhdGVWZWN0b3JUaWxlR3JpZCgpOiBvbC50aWxlZ3JpZC5UaWxlR3JpZCB7XHJcbiAgICAgICAgcmV0dXJuIG9sLnRpbGVncmlkLmNyZWF0ZVhZWih7IHRpbGVTaXplOiA1MTIsIG1heFpvb206IDIyIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZhcmlhYmxlcyh2YXJpYWJsZXNKc29uOiBhbnkpIHtcclxuICAgICAgICBsZXQgdmFyaWFibGVzID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgdmFyaWFibGVzTmFtZSBpbiB2YXJpYWJsZXNKc29uKSB7XHJcbiAgICAgICAgICAgIGlmICh2YXJpYWJsZXNOYW1lLmluZGV4T2YoXCIsXCIpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhcmlhYmxlTmFtZXMgPSB2YXJpYWJsZXNOYW1lLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmFyaWFibGVOYW1lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlc1t2YXJpYWJsZU5hbWVzW2ldXSA9IHZhcmlhYmxlc0pzb25bdmFyaWFibGVzTmFtZV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXNbdmFyaWFibGVzTmFtZV0gPSB2YXJpYWJsZXNKc29uW3ZhcmlhYmxlc05hbWVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmFyaWFibGVzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcGxhY2VWYXJpYWJsZXMoc3R5bGVKc29uOiBhbnksIHZhcmlhYmxlczogYW55KSB7XHJcbiAgICAgICAgZm9yIChsZXQgcHJvcGVydHlOYW1lIGluIHN0eWxlSnNvbikge1xyXG4gICAgICAgICAgICBsZXQgcHJvcGVydHkgPSBzdHlsZUpzb25bcHJvcGVydHlOYW1lXTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0eSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXBsYWNlVmFyaWFibGVzKHByb3BlcnR5LCB2YXJpYWJsZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwcm9wZXJ0eSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleVdvcmRJbmRleCA9IHByb3BlcnR5LmluZGV4T2YoXCJAXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleVdvcmRJbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmVzID0gcHJvcGVydHkuc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wV29yZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFdvcmQgPSBsaW5lc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wV29yZC5pbmRleE9mKFwiQFwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBXb3JkID0gdmFyaWFibGVzW3RlbXBXb3JkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh0ZW1wV29yZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVKc29uW3Byb3BlcnR5TmFtZV0gPSByZXN1bHRzLmpvaW4oXCIgXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVKc29uW3Byb3BlcnR5TmFtZV0gPSB2YXJpYWJsZXNbbGluZXNbMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDaGlsZHJlbk5vZGUoY3VycmVudE5vZGU6IFRyZWVOb2RlPFN0eWxlSnNvbkNhY2hlSXRlbT4sIGl0ZW06IFN0eWxlSnNvbkNhY2hlSXRlbSwgem9vbTogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0uc3ViU3R5bGVDYWNoZUl0ZW1zICYmIGl0ZW0uc3ViU3R5bGVDYWNoZUl0ZW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gaXRlbS5zdWJTdHlsZUNhY2hlSXRlbXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN1YlN0eWxlSXRlbSA9IGl0ZW0uc3ViU3R5bGVDYWNoZUl0ZW1zW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHpvb20gPj0gc3ViU3R5bGVJdGVtLm1pblpvb20gJiYgem9vbSA8PSBzdWJTdHlsZUl0ZW0ubWF4Wm9vbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBub2RlID0gbmV3IFRyZWVOb2RlPFN0eWxlSnNvbkNhY2hlSXRlbT4oc3ViU3R5bGVJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5jaGlsZHJlbi5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQ2hpbGRyZW5Ob2RlKG5vZGUsIHN1YlN0eWxlSXRlbSwgem9vbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaXNTdHlsZUpzb25Vcmwoc3R5bGVKc29uKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHN0eWxlSnNvbikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0eWxlSnNvbiAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJHZW9WZWN0b3IoKSB7XHJcbiAgICAgICAgKDxhbnk+b2wpLkxheWVyVHlwZVtcIkdFT1ZFQ1RPUlRJTEVcIl0gPSBcIkdFT1ZFQ1RPUlRJTEVcIjtcclxuICAgICAgICAvLyBUT0RPOiBjaGVjayB0aGUgcGx1Z2luIGhhZCBiZWVuIHJlZ2lzdGVkLlxyXG4gICAgICAgICg8YW55Pm9sKS5wbHVnaW5zLnJlZ2lzdGVyKCg8YW55Pm9sKS5QbHVnaW5UeXBlLkxBWUVSX1JFTkRFUkVSLCBHZW9WZWN0b3JUaWxlTGF5ZXJSZW5kZXIpO1xyXG4gICAgICAgIC8vICg8YW55Pm9sLlZlY3RvclRpbGUpLkV2ZW50ID0gZnVuY3Rpb24gKHR5cGUsIHhocikge1xyXG4gICAgICAgIC8vICAgICBvbC5ldmVudHMuRXZlbnQuY2FsbCh0aGlzLCB0eXBlKTtcclxuXHJcbiAgICAgICAgLy8gICAgIHRoaXMueGhyID0geGhyO1xyXG4gICAgICAgIC8vIH07XHJcbiAgICAgICAgLy8gb2wuaW5oZXJpdHMoKDxhbnk+b2wuVmVjdG9yVGlsZSksICg8YW55Pm9sLmV2ZW50cykuRXZlbnQpO1xyXG5cclxuICAgICAgICAoPGFueT5vbCkuVmVjdG9ySW1hZ2VUaWxlLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRoaXMudGlsZUtleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZVRpbGVLZXkgPSB0aGlzLnRpbGVLZXlzW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZVRpbGUgPSB0aGlzLmdldFRpbGUoc291cmNlVGlsZUtleSk7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2VUaWxlLmNvbnN1bWVycy0tO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZVRpbGUuY29uc3VtZXJzID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5zb3VyY2VUaWxlc19bc291cmNlVGlsZUtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGlsZS5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlc18gPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRMaXN0ZW5lcktleXNfLmZvckVhY2goKDxhbnk+b2wpLmV2ZW50cy51bmxpc3RlbkJ5S2V5KTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pbnRlcmltVGlsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcmltVGlsZS5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9ICg8YW55Pm9sKS5UaWxlU3RhdGUuQUJPUlQ7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlZCgpO1xyXG4gICAgICAgICAgICAvLyBmb3IgdGhlIGRpc3Bvc2VJbnRlcm5hbFxyXG4gICAgICAgICAgICB0aGlzLnRpbGVLZXlzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuc291cmNlVGlsZUxpc3RlbmVyS2V5c18uZm9yRWFjaCgoPGFueT5vbCkuZXZlbnRzLnVubGlzdGVuQnlLZXkpO1xyXG4gICAgICAgICAgICB0aGlzLnNvdXJjZVRpbGVMaXN0ZW5lcktleXNfLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgICg8YW55Pm9sKS5UaWxlLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAoPGFueT5vbCkuVGlsZVF1ZXVlLnByb3RvdHlwZS5oYW5kbGVUaWxlQ2hhbmdlID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGxldCB0aWxlID0gLyoqIEB0eXBlIHtvbC5UaWxlfSAqLyAoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgbGV0IHN0YXRlID0gdGlsZS5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuTE9BREVEIHx8IHN0YXRlID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkVSUk9SIHx8XHJcbiAgICAgICAgICAgICAgICBzdGF0ZSA9PT0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5FTVBUWSB8fCBzdGF0ZSA9PT0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5BQk9SVCB8fFxyXG4gICAgICAgICAgICAgICAgc3RhdGUgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuQ0FOQ0VMKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuQUJPUlQgfHwgc3RhdGUgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuRVJST1IpIHtcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5vbCkuZXZlbnRzLnVubGlzdGVuKHRpbGUsICg8YW55Pm9sKS5ldmVudHMuRXZlbnRUeXBlLkNIQU5HRSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUaWxlQ2hhbmdlLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdGlsZUtleSA9IHRpbGUuZ2V0S2V5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGlsZUtleSBpbiB0aGlzLnRpbGVzTG9hZGluZ0tleXNfKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGlsZXNMb2FkaW5nS2V5c19bdGlsZUtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgLS10aGlzLnRpbGVzTG9hZGluZ187XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBlbnF1ZXVlIHJlY29yZHMsIGlmIHRoZSB0aWxlIGhhcyBiZWVuIGRpc3Bvc2UgYmVmb3JlIGxvYWRcclxuICAgICAgICAgICAgICAgIGlmICh0aWxlS2V5IGluIHRoaXMucXVldWVkRWxlbWVudHNfKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMucXVldWVkRWxlbWVudHNfW3RpbGVLZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50aWxlQ2hhbmdlQ2FsbGJhY2tfKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyByZW1vdmUgcXVpY2tab29tIHdoZW4gYW5pbWF0aW9uIGNvbXBsZXRlXHJcbiAgICAgICAgKDxhbnk+b2wpLlZpZXcucHJvdG90eXBlLnVwZGF0ZUFuaW1hdGlvbnNfID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy51cGRhdGVBbmltYXRpb25LZXlfICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5Xyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmdldEFuaW1hdGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHZhciBtb3JlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmFuaW1hdGlvbnNfLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWVzID0gdGhpcy5hbmltYXRpb25zX1tpXTtcclxuICAgICAgICAgICAgICAgIHZhciBzZXJpZXNDb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgamogPSBzZXJpZXMubGVuZ3RoOyBqIDwgamo7ICsraikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSBzZXJpZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsYXBzZWQgPSBub3cgLSBhbmltYXRpb24uc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZyYWN0aW9uID0gYW5pbWF0aW9uLmR1cmF0aW9uID4gMCA/IGVsYXBzZWQgLyBhbmltYXRpb24uZHVyYXRpb24gOiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcmFjdGlvbiA+PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYWN0aW9uID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXJpZXNDb21wbGV0ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBhbmltYXRpb24uZWFzaW5nKGZyYWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZUNlbnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeDAgPSBhbmltYXRpb24uc291cmNlQ2VudGVyWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeTAgPSBhbmltYXRpb24uc291cmNlQ2VudGVyWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeDEgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeTEgPSBhbmltYXRpb24udGFyZ2V0Q2VudGVyWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IHgwICsgcHJvZ3Jlc3MgKiAoeDEgLSB4MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0geTAgKyBwcm9ncmVzcyAqICh5MSAtIHkwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQoKDxhbnk+b2wpLlZpZXdQcm9wZXJ0eS5DRU5URVIsIFt4LCB5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiAmJiBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHByb2dyZXNzID09PSAxID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5zb3VyY2VSZXNvbHV0aW9uICsgcHJvZ3Jlc3MgKiAoYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24gLSBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uYW5jaG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldCgoPGFueT5vbCkuVmlld1Byb3BlcnR5LkNFTlRFUixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUNlbnRlclpvb20ocmVzb2x1dGlvbiwgYW5pbWF0aW9uLmFuY2hvcikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KCg8YW55Pm9sKS5WaWV3UHJvcGVydHkuUkVTT0xVVElPTiwgcmVzb2x1dGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uc291cmNlUm90YXRpb24gIT09IHVuZGVmaW5lZCAmJiBhbmltYXRpb24udGFyZ2V0Um90YXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm90YXRpb24gPSBwcm9ncmVzcyA9PT0gMSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPGFueT5vbCkubWF0aC5tb2R1bG8oYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICsgTWF0aC5QSSwgMiAqIE1hdGguUEkpIC0gTWF0aC5QSSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uc291cmNlUm90YXRpb24gKyBwcm9ncmVzcyAqIChhbmltYXRpb24udGFyZ2V0Um90YXRpb24gLSBhbmltYXRpb24uc291cmNlUm90YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQoKDxhbnk+b2wpLlZpZXdQcm9wZXJ0eS5DRU5URVIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVDZW50ZXJSb3RhdGUocm90YXRpb24sIGFuaW1hdGlvbi5hbmNob3IpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldCgoPGFueT5vbCkuVmlld1Byb3BlcnR5LlJPVEFUSU9OLCByb3RhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG1vcmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghYW5pbWF0aW9uLmNvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzZXJpZXNDb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc19baV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0SGludCgoPGFueT5vbCkuVmlld0hpbnQuQU5JTUFUSU5HLCAtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gc2VyaWVzWzBdLmNhbGxiYWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gcHJ1bmUgY29tcGxldGVkIHNlcmllc1xyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNfID0gdGhpcy5hbmltYXRpb25zXy5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICAgICAgICAgIGlmIChtb3JlICYmIHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVBbmltYXRpb25zXyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBHZXQgcXVpY2tab29tIHpvb20gaW4vb3V0XHJcbiAgICAgICAgKDxhbnk+b2wpLlZpZXcucHJvdG90eXBlLmFuaW1hdGUgPSBmdW5jdGlvbiAodmFyX2FyZ3MpIHtcclxuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbkNvdW50ID0gYXJndW1lbnRzLmxlbmd0aDtcclxuICAgICAgICAgICAgdmFyIGNhbGxiYWNrO1xyXG4gICAgICAgICAgICBpZiAoYW5pbWF0aW9uQ291bnQgPiAxICYmIHR5cGVvZiBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sgPSBhcmd1bWVudHNbYW5pbWF0aW9uQ291bnQgLSAxXTtcclxuICAgICAgICAgICAgICAgIC0tYW5pbWF0aW9uQ291bnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzRGVmKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlmIHZpZXcgcHJvcGVydGllcyBhcmUgbm90IHlldCBzZXQsIHNob3J0Y3V0IHRvIHRoZSBmaW5hbCBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV07XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuY2VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDZW50ZXIoc3RhdGUuY2VudGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS56b29tICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFpvb20oc3RhdGUuem9vbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUucm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Um90YXRpb24oc3RhdGUucm90YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgdmFyIGNlbnRlciA9IHRoaXMuZ2V0Q2VudGVyKCkuc2xpY2UoKTtcclxuICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSB0aGlzLmdldFJlc29sdXRpb24oKTtcclxuICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gdGhpcy5nZXRSb3RhdGlvbigpO1xyXG4gICAgICAgICAgICB2YXIgc2VyaWVzID0gW107XHJcbiAgICAgICAgICAgIHZhciBxdWlja1pvb20gPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbmltYXRpb25Db3VudDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IC8qKiBAdHlwZSB7b2x4LkFuaW1hdGlvbk9wdGlvbnN9ICovIChhcmd1bWVudHNbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb24gPSAvKiogQHR5cGUge29sLlZpZXdBbmltYXRpb259ICovICh7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBhbmNob3I6IG9wdGlvbnMuYW5jaG9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmR1cmF0aW9uIDogMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IG9wdGlvbnMuZWFzaW5nIHx8IG9sLmVhc2luZy5pbkFuZE91dFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uW1wic291cmNlQ2VudGVyXCJdID0gY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbltcInRhcmdldENlbnRlclwiXSA9IG9wdGlvbnMuY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlciA9IGFuaW1hdGlvbltcInRhcmdldENlbnRlclwiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy56b29tICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25bXCJzb3VyY2VSZXNvbHV0aW9uXCJdID0gcmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25bXCJ0YXJnZXRSZXNvbHV0aW9uXCJdID0gdGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1heFJlc29sdXRpb25fLCBvcHRpb25zLnpvb20gLSB0aGlzLm1pblpvb21fLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uW1widGFyZ2V0UmVzb2x1dGlvblwiXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWlja1pvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVpY2tab29tID0gTWF0aC5hYnMoYW5pbWF0aW9uW1wic291cmNlUmVzb2x1dGlvblwiXSAtIGFuaW1hdGlvbltcInRhcmdldFJlc29sdXRpb25cIl0pICogMiA+PSBhbmltYXRpb25bXCJzb3VyY2VSZXNvbHV0aW9uXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXNvbHV0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uW1wic291cmNlUmVzb2x1dGlvblwiXSA9IHJlc29sdXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uW1widGFyZ2V0UmVzb2x1dGlvblwiXSA9IG9wdGlvbnMucmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uID0gYW5pbWF0aW9uW1widGFyZ2V0UmVzb2x1dGlvblwiXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFxdWlja1pvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVpY2tab29tID0gTWF0aC5hYnMoYW5pbWF0aW9uW1wic291cmNlUmVzb2x1dGlvblwiXSAtIGFuaW1hdGlvbltcInRhcmdldFJlc29sdXRpb25cIl0pICogMiA+PSBhbmltYXRpb25bXCJzb3VyY2VSZXNvbHV0aW9uXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yb3RhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uW1wic291cmNlUm90YXRpb25cIl0gPSByb3RhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSAoPGFueT5vbCkubWF0aC5tb2R1bG8ob3B0aW9ucy5yb3RhdGlvbiAtIHJvdGF0aW9uICsgTWF0aC5QSSwgMiAqIE1hdGguUEkpIC0gTWF0aC5QSTtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25bXCJ0YXJnZXRSb3RhdGlvblwiXSA9IHJvdGF0aW9uICsgZGVsdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgcm90YXRpb24gPSBhbmltYXRpb25bXCJ0YXJnZXRSb3RhdGlvblwiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uW1wiY2FsbGJhY2tcIl0gPSBjYWxsYmFjaztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBhbmltYXRpb24gaXMgYSBuby1vcFxyXG4gICAgICAgICAgICAgICAgaWYgKCg8YW55Pm9sKS5WaWV3LmlzTm9vcEFuaW1hdGlvbihhbmltYXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLmNvbXBsZXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBzdGlsbCBwdXNoIGl0IG9udG8gdGhlIHNlcmllcyBmb3IgY2FsbGJhY2sgaGFuZGxpbmdcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgKz0gYW5pbWF0aW9uLmR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc2VyaWVzLnB1c2goYW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNfLnB1c2goc2VyaWVzKTtcclxuICAgICAgICAgICAgdGhpc1tcInF1aWNrWm9vbVwiXSA9IHF1aWNrWm9vbTtcclxuICAgICAgICAgICAgdGhpcy5zZXRIaW50KCg8YW55Pm9sKS5WaWV3SGludC5BTklNQVRJTkcsIDEpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFuaW1hdGlvbnNfKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gYWRkIHF1aWNrWm9vbSBpbnRvIGZyYW1lU3RhdGVcclxuICAgICAgICAoPGFueT5vbCkuUGx1Z2dhYmxlTWFwLnByb3RvdHlwZS5yZW5kZXJGcmFtZV8gPSBmdW5jdGlvbiAodGltZSkge1xyXG4gICAgICAgICAgICB2YXIgaSwgaWksIHZpZXdTdGF0ZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzaXplID0gdGhpcy5nZXRTaXplKCk7XHJcbiAgICAgICAgICAgIHZhciB2aWV3ID0gdGhpcy5nZXRWaWV3KCk7XHJcbiAgICAgICAgICAgIHZhciBleHRlbnQgPSBvbC5leHRlbnQuY3JlYXRlRW1wdHkoKTtcclxuICAgICAgICAgICAgdmFyIHByZXZpb3VzRnJhbWVTdGF0ZSA9IHRoaXMuZnJhbWVTdGF0ZV87XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P29seC5GcmFtZVN0YXRlfSAqL1xyXG4gICAgICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChzaXplICE9PSB1bmRlZmluZWQgJiYgKDxhbnk+b2wpLnNpemUuaGFzQXJlYShzaXplKSAmJiB2aWV3ICYmIHZpZXcuaXNEZWYoKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZpZXdIaW50cyA9IHZpZXcuZ2V0SGludHModGhpcy5mcmFtZVN0YXRlXyA/IHRoaXMuZnJhbWVTdGF0ZV8udmlld0hpbnRzIDogdW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgICAgIHZhciBxdWlja1pvb20gPSB2aWV3W1wicXVpY2tab29tXCJdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxheWVyU3RhdGVzQXJyYXkgPSB0aGlzLmdldExheWVyR3JvdXAoKS5nZXRMYXllclN0YXRlc0FycmF5KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZXMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gbGF5ZXJTdGF0ZXNBcnJheS5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZXNbKDxhbnk+b2wpLmdldFVpZChsYXllclN0YXRlc0FycmF5W2ldLmxheWVyKV0gPSBsYXllclN0YXRlc0FycmF5W2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmlld1N0YXRlID0gdmlldy5nZXRTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXI7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGl4ZWxSZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb24gLyB0aGlzLnBpeGVsUmF0aW9fO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyWzBdID0gTWF0aC5yb3VuZChjZW50ZXJbMF0gLyBwaXhlbFJlc29sdXRpb24pICogcGl4ZWxSZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgY2VudGVyWzFdID0gTWF0aC5yb3VuZChjZW50ZXJbMV0gLyBwaXhlbFJlc29sdXRpb24pICogcGl4ZWxSZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgZnJhbWVTdGF0ZSA9IC8qKiBAdHlwZSB7b2x4LkZyYW1lU3RhdGV9ICovICh7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm06IHRoaXMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1fLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVudDogZXh0ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzOiAhdGhpcy5mb2N1c18gPyBjZW50ZXIgOiB0aGlzLmZvY3VzXyxcclxuICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5mcmFtZUluZGV4XysrLFxyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGVzOiBsYXllclN0YXRlcyxcclxuICAgICAgICAgICAgICAgICAgICBsYXllclN0YXRlc0FycmF5OiBsYXllclN0YXRlc0FycmF5LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZ29zOiAoPGFueT5vbCkub2JqLmFzc2lnbih7fSwgdGhpcy5sb2dvc18pLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpeGVsUmF0aW86IHRoaXMucGl4ZWxSYXRpb18sXHJcbiAgICAgICAgICAgICAgICAgICAgcGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm06IHRoaXMucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm1fLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc3RSZW5kZXJGdW5jdGlvbnM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IHNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcHBlZEZlYXR1cmVVaWRzOiB0aGlzLnNraXBwZWRGZWF0dXJlVWlkc18sXHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZVF1ZXVlOiB0aGlzLnRpbGVRdWV1ZV8sXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZTogdGltZSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VkVGlsZXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIHZpZXdTdGF0ZTogdmlld1N0YXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZpZXdIaW50czogdmlld0hpbnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1aWNrWm9vbTogcXVpY2tab29tLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRSZXNvbHV0aW9uOiB2aWV3U3RhdGUucmVzb2x1dGlvbixcclxuICAgICAgICAgICAgICAgICAgICB3YW50ZWRUaWxlczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDogdGhpcy5yZW5kZXJlcl8uY29udGV4dF9cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgZnJhbWVTdGF0ZS5leHRlbnQgPSAoPGFueT5vbCkuZXh0ZW50LmdldEZvclZpZXdBbmRTaXplKHZpZXdTdGF0ZS5jZW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmlld1N0YXRlLnJlc29sdXRpb24sIHZpZXdTdGF0ZS5yb3RhdGlvbiwgZnJhbWVTdGF0ZS5zaXplLCBleHRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZyYW1lU3RhdGVfID0gZnJhbWVTdGF0ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8ucmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lU3RhdGUuYW5pbWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RSZW5kZXJGdW5jdGlvbnNfLCBmcmFtZVN0YXRlLnBvc3RSZW5kZXJGdW5jdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0ZyYW1lU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZVN0YXJ0ID0gIXRoaXMucHJldmlvdXNFeHRlbnRfIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICghb2wuZXh0ZW50LmlzRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhb2wuZXh0ZW50LmVxdWFscyhmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobW92ZVN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBvbC5NYXBFdmVudCgoPGFueT5vbCkuTWFwRXZlbnRUeXBlLk1PVkVTVEFSVCwgdGhpcywgcHJldmlvdXNGcmFtZVN0YXRlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNFeHRlbnRfID0gKDxhbnk+b2wpLmV4dGVudC5jcmVhdGVPclVwZGF0ZUVtcHR5KHRoaXMucHJldmlvdXNFeHRlbnRfKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGlkbGUgPSB0aGlzLnByZXZpb3VzRXh0ZW50XyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFmcmFtZVN0YXRlLnZpZXdIaW50c1soPGFueT5vbCkuVmlld0hpbnQuQU5JTUFUSU5HXSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICFmcmFtZVN0YXRlLnZpZXdIaW50c1soPGFueT5vbCkuVmlld0hpbnQuSU5URVJBQ1RJTkddICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIW9sLmV4dGVudC5lcXVhbHMoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaWRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IG9sLk1hcEV2ZW50KCg8YW55Pm9sKS5NYXBFdmVudFR5cGUuTU9WRUVORCwgdGhpcywgZnJhbWVTdGF0ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm9sKS5leHRlbnQuY2xvbmUoZnJhbWVTdGF0ZS5leHRlbnQsIHRoaXMucHJldmlvdXNFeHRlbnRfKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxyXG4gICAgICAgICAgICAgICAgbmV3IG9sLk1hcEV2ZW50KCg8YW55Pm9sKS5NYXBFdmVudFR5cGUuUE9TVFJFTkRFUiwgdGhpcywgZnJhbWVTdGF0ZSkpO1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLmhhbmRsZVBvc3RSZW5kZXIuYmluZCh0aGlzKSwgMCk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHJlZmluZSBkcmF3SW1hZ2UgcGVyZm9ybWFuY2VcclxuICAgICAgICAoPGFueT5vbCkucmVuZGVyZXIuY2FudmFzLlRpbGVMYXllci5wcm90b3R5cGUuZHJhd1RpbGVJbWFnZSA9IGZ1bmN0aW9uICh0aWxlLCBmcmFtZVN0YXRlLCBsYXllclN0YXRlLCB4LCB5LCB3LCBoLCBndXR0ZXIsIHRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIGltYWdlID0gdGlsZS5nZXRJbWFnZSh0aGlzLmdldExheWVyKCkpO1xyXG4gICAgICAgICAgICBpZiAoIWltYWdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHVpZCA9ICg8YW55Pm9sKS5nZXRVaWQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBhbHBoYSA9IHRyYW5zaXRpb24gPyB0aWxlLmdldEFscGhhKHVpZCwgZnJhbWVTdGF0ZS50aW1lKSA6IDE7XHJcbiAgICAgICAgICAgIGlmIChhbHBoYSA9PT0gMSAmJiAhdGhpcy5nZXRMYXllcigpLmdldFNvdXJjZSgpLmdldE9wYXF1ZShmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNsZWFyUmVjdCh4LCB5LCB3LCBoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgYWxwaGFDaGFuZ2VkID0gYWxwaGEgIT09IHRoaXMuY29udGV4dC5nbG9iYWxBbHBoYTtcclxuICAgICAgICAgICAgaWYgKGFscGhhQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnNhdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5nbG9iYWxBbHBoYSA9IGFscGhhO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIGd1dHRlciwgZ3V0dGVyLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2Uud2lkdGggLSAyICogZ3V0dGVyLCBpbWFnZS5oZWlnaHQgLSAyICogZ3V0dGVyLCB4LCB5LCB3LCBoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhbHBoYUNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGFscGhhICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBmcmFtZVN0YXRlLmFuaW1hdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRpbGUuZW5kVHJhbnNpdGlvbih1aWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gb3ZlcndyaXRlXHJcbiAgICAgICAgKDxhbnk+b2wucmVuZGVyKS53ZWJnbC5SZXBsYXkucHJvdG90eXBlLnJlcGxheSA9IGZ1bmN0aW9uIChcclxuICAgICAgICAgICAgY29udGV4dCwgdHJhbnNmb3JtLCB2aWV3Um90YXRpb24sIHNraXBwZWRGZWF0dXJlc0hhc2gpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3Um90YXRpb25fID0gdmlld1JvdGF0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLndlYmdsUmVwbGF5Xyhjb250ZXh0LCB0cmFuc2Zvcm0sXHJcbiAgICAgICAgICAgICAgICBza2lwcGVkRmVhdHVyZXNIYXNoLCB0aGlzLmluc3RydWN0aW9ucywgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHdlYmdsIHJlbmRlclxyXG4gICAgICAgICg8YW55Pm9sKS5yZW5kZXIud2ViZ2wuUmVwbGF5LnByb3RvdHlwZS53ZWJnbFJlcGxheV8gPSBmdW5jdGlvbiAoXHJcbiAgICAgICAgICAgIGNvbnRleHQsIHRyYW5zZm9ybSwgc2tpcHBlZEZlYXR1cmVzSGFzaCxcclxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLCBmZWF0dXJlQ2FsbGJhY2ssIG9wdF9oaXRFeHRlbnRcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBjb250ZXh0LmZyYW1lU3RhdGU7XHJcbiAgICAgICAgICAgIHZhciBsYXllclN0YXRlID0gY29udGV4dC5sYXllclN0YXRlO1xyXG4gICAgICAgICAgICB2YXIgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XHJcbiAgICAgICAgICAgIHZhciBjZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xyXG4gICAgICAgICAgICB2YXIgc2l6ZSA9IGZyYW1lU3RhdGUuc2l6ZTtcclxuICAgICAgICAgICAgdmFyIHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gdmlld1N0YXRlLnJlc29sdXRpb247XHJcbiAgICAgICAgICAgIHZhciBvcGFjaXR5ID0gbGF5ZXJTdGF0ZS5vcGFjaXR5O1xyXG4gICAgICAgICAgICB2YXIgcm90YXRpb24gPSB2aWV3U3RhdGUucm90YXRpb247XHJcbiAgICAgICAgICAgIHZhciBvbmVCeU9uZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgICAgIHZhciBnbCA9IGNvbnRleHQuZ2V0R0woKTtcclxuICAgICAgICAgICAgdmFyIHRtcFN0ZW5jaWwsIHRtcFN0ZW5jaWxGdW5jLCB0bXBTdGVuY2lsTWFza1ZhbCwgdG1wU3RlbmNpbFJlZiwgdG1wU3RlbmNpbE1hc2ssXHJcbiAgICAgICAgICAgICAgICB0bXBTdGVuY2lsT3BGYWlsLCB0bXBTdGVuY2lsT3BQYXNzLCB0bXBTdGVuY2lsT3BaRmFpbDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgKDxhbnk+b2wucmVuZGVyKS53ZWJnbC5MaW5lU3RyaW5nUmVwbGF5IHx8IHRoaXMubGluZVN0cmluZ1JlcGxheSkge1xyXG4gICAgICAgICAgICAgICAgdG1wU3RlbmNpbCA9IGdsLmlzRW5hYmxlZChnbC5TVEVOQ0lMX1RFU1QpO1xyXG4gICAgICAgICAgICAgICAgdG1wU3RlbmNpbEZ1bmMgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuU1RFTkNJTF9GVU5DKTtcclxuICAgICAgICAgICAgICAgIHRtcFN0ZW5jaWxNYXNrVmFsID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlNURU5DSUxfVkFMVUVfTUFTSyk7XHJcbiAgICAgICAgICAgICAgICB0bXBTdGVuY2lsUmVmID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlNURU5DSUxfUkVGKTtcclxuICAgICAgICAgICAgICAgIHRtcFN0ZW5jaWxNYXNrID0gZ2wuZ2V0UGFyYW1ldGVyKGdsLlNURU5DSUxfV1JJVEVNQVNLKTtcclxuICAgICAgICAgICAgICAgIHRtcFN0ZW5jaWxPcEZhaWwgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuU1RFTkNJTF9GQUlMKTtcclxuICAgICAgICAgICAgICAgIHRtcFN0ZW5jaWxPcFBhc3MgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuU1RFTkNJTF9QQVNTX0RFUFRIX1BBU1MpO1xyXG4gICAgICAgICAgICAgICAgdG1wU3RlbmNpbE9wWkZhaWwgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuU1RFTkNJTF9QQVNTX0RFUFRIX0ZBSUwpO1xyXG5cclxuICAgICAgICAgICAgICAgIGdsLmVuYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xyXG4gICAgICAgICAgICAgICAgZ2wuY2xlYXIoZ2wuU1RFTkNJTF9CVUZGRVJfQklUKTtcclxuICAgICAgICAgICAgICAgIGdsLnN0ZW5jaWxNYXNrKDI1NSk7XHJcbiAgICAgICAgICAgICAgICBnbC5zdGVuY2lsRnVuYyhnbC5BTFdBWVMsIDEsIDI1NSk7XHJcbiAgICAgICAgICAgICAgICBnbC5zdGVuY2lsT3AoZ2wuS0VFUCwgZ2wuS0VFUCwgZ2wuUkVQTEFDRSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5saW5lU3RyaW5nUmVwbGF5LnJlcGxheShjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGNlbnRlciwgcmVzb2x1dGlvbiwgcm90YXRpb24sIHNpemUsIHBpeGVsUmF0aW8sXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgb3BhY2l0eSwgc2tpcHBlZEZlYXR1cmVzSGFzaCxcclxuICAgICAgICAgICAgICAgIC8vICAgICBmZWF0dXJlQ2FsbGJhY2ssIG9uZUJ5T25lLCBvcHRfaGl0RXh0ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBnbC5zdGVuY2lsTWFzaygwKTtcclxuICAgICAgICAgICAgICAgIC8vIEZJWE1FIEVyaWNcclxuICAgICAgICAgICAgICAgIC8vIGdsLnN0ZW5jaWxGdW5jKGNvbnRleHQuTk9URVFVQUwsIDEsIDI1NSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHZhciB3ZWJnbENvbnRleHQgPSBjb250ZXh0LndlYmdsQ29udGV4dDtcclxuICAgICAgICAgICAgY29udGV4dC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0aWNlc0J1ZmZlcik7XHJcbiAgICAgICAgICAgIGNvbnRleHQuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5pbmRpY2VzQnVmZmVyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbnMgPSB0aGlzLnNldFVwUHJvZ3JhbShnbCwgY29udGV4dCwgc2l6ZSwgcGl4ZWxSYXRpbyk7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgdGhlIFwidW5pZm9ybVwiIHZhbHVlc1xyXG4gICAgICAgICAgICB2YXIgcHJvamVjdGlvbk1hdHJpeCA9ICg8YW55Pm9sKS50cmFuc2Zvcm0ucmVzZXQodGhpcy5wcm9qZWN0aW9uTWF0cml4Xyk7XHJcbiAgICAgICAgICAgICg8YW55Pm9sKS50cmFuc2Zvcm0uc2NhbGUocHJvamVjdGlvbk1hdHJpeCwgMiAvIChyZXNvbHV0aW9uICogc2l6ZVswXSksIDIgLyAocmVzb2x1dGlvbiAqIHNpemVbMV0pKTtcclxuICAgICAgICAgICAgKDxhbnk+b2wpLnRyYW5zZm9ybS5yb3RhdGUocHJvamVjdGlvbk1hdHJpeCwgLXJvdGF0aW9uKTtcclxuICAgICAgICAgICAgKDxhbnk+b2wpLnRyYW5zZm9ybS50cmFuc2xhdGUocHJvamVjdGlvbk1hdHJpeCwgLShjZW50ZXJbMF0gLSB0aGlzLm9yaWdpblswXSksIC0oY2VudGVyWzFdIC0gdGhpcy5vcmlnaW5bMV0pKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvZmZzZXRTY2FsZU1hdHJpeCA9ICg8YW55Pm9sKS50cmFuc2Zvcm0ucmVzZXQodGhpcy5vZmZzZXRTY2FsZU1hdHJpeF8pO1xyXG4gICAgICAgICAgICAoPGFueT5vbCkudHJhbnNmb3JtLnNjYWxlKG9mZnNldFNjYWxlTWF0cml4LCAyIC8gc2l6ZVswXSwgMiAvIHNpemVbMV0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9mZnNldFJvdGF0ZU1hdHJpeCA9ICg8YW55Pm9sKS50cmFuc2Zvcm0ucmVzZXQodGhpcy5vZmZzZXRSb3RhdGVNYXRyaXhfKTtcclxuICAgICAgICAgICAgaWYgKHJvdGF0aW9uICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAoPGFueT5vbCkudHJhbnNmb3JtLnJvdGF0ZShvZmZzZXRSb3RhdGVNYXRyaXgsIC1yb3RhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb25zLnVfcHJvamVjdGlvbk1hdHJpeCwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAoPGFueT5vbCkudmVjLk1hdDQuZnJvbVRyYW5zZm9ybSh0aGlzLnRtcE1hdDRfLCBwcm9qZWN0aW9uTWF0cml4KSk7XHJcbiAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb25zLnVfb2Zmc2V0U2NhbGVNYXRyaXgsIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgKDxhbnk+b2wpLnZlYy5NYXQ0LmZyb21UcmFuc2Zvcm0odGhpcy50bXBNYXQ0Xywgb2Zmc2V0U2NhbGVNYXRyaXgpKTtcclxuICAgICAgICAgICAgZ2wudW5pZm9ybU1hdHJpeDRmdihsb2NhdGlvbnMudV9vZmZzZXRSb3RhdGVNYXRyaXgsIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgKDxhbnk+b2wpLnZlYy5NYXQ0LmZyb21UcmFuc2Zvcm0odGhpcy50bXBNYXQ0Xywgb2Zmc2V0Um90YXRlTWF0cml4KSk7XHJcbiAgICAgICAgICAgIGdsLnVuaWZvcm0xZihsb2NhdGlvbnMudV9vcGFjaXR5LCBvcGFjaXR5KTtcclxuXHJcbiAgICAgICAgICAgIC8vIGZpeCBmb3IgV2ViR0wgbm90IHRvIHVucHJlbXVsdGlwbHlcclxuICAgICAgICAgICAgaWYodGhpcyBpbnN0YW5jZW9mICg8YW55Pm9sLnJlbmRlcikud2ViZ2wuUG9seWdvblJlcGxheSl7XHJcbiAgICAgICAgICAgICAgICBnbC5waXhlbFN0b3JlaShnbC5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgLy8gZ2wuYmxlbmRGdW5jKGdsLlNSQ19BTFBIQSwgZ2wuT05FX01JTlVTX1NSQ19BTFBIQSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGRyYXchXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlQ2FsbGJhY2sgPT09IHVuZGVmaW5lZCkgeyAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JlcGxheShnbCwgY29udGV4dCwgc2tpcHBlZEZlYXR1cmVzSGFzaCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gZHJhdyBmZWF0dXJlIGJ5IGZlYXR1cmUgZm9yIHRoZSBoaXQtZGV0ZWN0aW9uXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLmRyYXdIaXREZXRlY3Rpb25SZXBsYXkoY29udGV4dCwgY29udGV4dCwgc2tpcHBlZEZlYXR1cmVzSGFzaCxcclxuICAgICAgICAgICAgICAgIGZlYXR1cmVDYWxsYmFjaywgb25lQnlPbmUsIG9wdF9oaXRFeHRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBkaXNhYmxlIHRoZSB2ZXJ0ZXggYXR0cmliIGFycmF5c1xyXG4gICAgICAgICAgICB0aGlzLnNodXREb3duUHJvZ3JhbShnbCwgbG9jYXRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzIGluc3RhbmNlb2YgKDxhbnk+b2wucmVuZGVyKS53ZWJnbC5MaW5lU3RyaW5nUmVwbGF5IHx8IHRoaXMubGluZVN0cmluZ1JlcGxheSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0bXBTdGVuY2lsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuZGlzYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZ2wuY2xlYXIoZ2wuU1RFTkNJTF9CVUZGRVJfQklUKTtcclxuICAgICAgICAgICAgICAgIGdsLnN0ZW5jaWxGdW5jKC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbEZ1bmMpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbFJlZiksIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbE1hc2tWYWwpKTtcclxuICAgICAgICAgICAgICAgIGdsLnN0ZW5jaWxNYXNrKC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbE1hc2spKTtcclxuICAgICAgICAgICAgICAgIGdsLnN0ZW5jaWxPcCgvKiogQHR5cGUge251bWJlcn0gKi8gKHRtcFN0ZW5jaWxPcEZhaWwpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbE9wWkZhaWwpLCAvKiogQHR5cGUge251bWJlcn0gKi8gKHRtcFN0ZW5jaWxPcFBhc3MpKTtcclxuICAgICAgICAgICAgICAgIC8vIGdsLnN0ZW5jaWxNYXNrKDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07ICAgICAgIFxyXG5cclxuICAgICAgICAoPGFueT5vbCkucmVuZGVyZXIuY2FudmFzLlZlY3RvclRpbGVMYXllci5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSBmdW5jdGlvbiAoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSwgaGl0VG9sZXJhbmNlLCBjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJlc29sdXRpb247XHJcbiAgICAgICAgICAgIHZhciByb3RhdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnJvdGF0aW9uO1xyXG4gICAgICAgICAgICBoaXRUb2xlcmFuY2UgPSBoaXRUb2xlcmFuY2UgPT0gdW5kZWZpbmVkID8gMCA6IGhpdFRvbGVyYW5jZTtcclxuICAgICAgICAgICAgdmFyIGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xyXG4gICAgICAgICAgICAvKiogQHR5cGUge09iamVjdC48c3RyaW5nLCBib29sZWFuPn0gKi9cclxuICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0ge307XHJcblxyXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5LjxvbC5WZWN0b3JJbWFnZVRpbGU+fSAqL1xyXG4gICAgICAgICAgICB2YXIgcmVuZGVyZWRUaWxlcyA9IHRoaXMucmVuZGVyZWRUaWxlcztcclxuXHJcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSAvKiogQHR5cGUge29sLnNvdXJjZS5WZWN0b3JUaWxlfSAqLyAobGF5ZXIuZ2V0U291cmNlKCkpO1xyXG4gICAgICAgICAgICB2YXIgdGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pO1xyXG4gICAgICAgICAgICB2YXIgYnVmZmVyZWRFeHRlbnQsIGZvdW5kO1xyXG4gICAgICAgICAgICB2YXIgaSwgaWksIHJlcGxheUdyb3VwO1xyXG4gICAgICAgICAgICB2YXIgdGlsZSwgdGlsZUNvb3JkLCB0aWxlRXh0ZW50O1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHJlbmRlcmVkVGlsZXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdGlsZSA9IHJlbmRlcmVkVGlsZXNbaV07XHJcbiAgICAgICAgICAgICAgICB0aWxlQ29vcmQgPSB0aWxlLndyYXBwZWRUaWxlQ29vcmQ7XHJcbiAgICAgICAgICAgICAgICB0aWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZCwgdGhpcy50bXBFeHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyZWRFeHRlbnQgPSBvbC5leHRlbnQuYnVmZmVyKHRpbGVFeHRlbnQsIGhpdFRvbGVyYW5jZSAqIHJlc29sdXRpb24sIGJ1ZmZlcmVkRXh0ZW50KTtcclxuICAgICAgICAgICAgICAgIGlmICghb2wuZXh0ZW50LmNvbnRhaW5zQ29vcmRpbmF0ZShidWZmZXJlZEV4dGVudCwgY29vcmRpbmF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAwLCB0dCA9IHRpbGUudGlsZUtleXMubGVuZ3RoOyB0IDwgdHQ7ICsrdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzb3VyY2VUaWxlID0gdGlsZS5nZXRUaWxlKHRpbGUudGlsZUtleXNbdF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VUaWxlLmdldFN0YXRlKCkgPT0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5FUlJPUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwbGF5R3JvdXAgPSBzb3VyY2VUaWxlLmdldFJlcGxheUdyb3VwKGxheWVyLCB0aWxlQ29vcmQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBmb3VuZCB8fCByZXBsYXlHcm91cC5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZSwgcmVzb2x1dGlvbiwgcm90YXRpb24sIGhpdFRvbGVyYW5jZSwge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge29sLkZlYXR1cmV8b2wucmVuZGVyLkZlYXR1cmV9IGZlYXR1cmUgRmVhdHVyZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICogQHJldHVybiB7P30gQ2FsbGJhY2sgcmVzdWx0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAoPGFueT5vbCkuZ2V0VWlkKGZlYXR1cmUpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gZmVhdHVyZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXNba2V5XSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgZmVhdHVyZSwgbGF5ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZm91bmQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBWZWN0b3JUaWxlTGF5ZXIgfSBmcm9tIFwiLi9sYXllci92ZWN0b3JUaWxlTGF5ZXJcIjtcclxuaW1wb3J0IHsgVmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZSB9IGZyb20gXCIuL3dvcmtlci92ZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlXCI7XHJcbmltcG9ydCB7IHdlYmdsQ2FjdWxhdGUgfSBmcm9tIFwiLi93b3JrZXIvd2ViZ2xcIjtcclxuXHJcbig8YW55Pm9sKS5tYXBzdWl0ZSA9IHt9O1xyXG5cclxuKDxhbnk+b2wpLm1hcHN1aXRlW1wiVmVjdG9yVGlsZUxheWVyXCJdID0gVmVjdG9yVGlsZUxheWVyO1xyXG4oPGFueT5vbCkubWFwc3VpdGVbXCJWZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlXCJdID0gVmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZTtcclxuXHJcbig8YW55PndpbmRvdylbXCJvbFwiXSA9IG9sO1xyXG4oPGFueT53aW5kb3cpW1wid2ViZ2xDYWN1bGF0ZVwiXSA9IHdlYmdsQ2FjdWxhdGU7IiwiaW1wb3J0IHsgUmVwbGF5R3JvdXBDdXN0b20gfSBmcm9tIFwiLi93ZWJnbC9yZXBsYXlHcm91cEN1c3RvbVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb1ZlY3RvclRpbGVMYXllclJlbmRlciBleHRlbmRzICgoPGFueT5vbCkucmVuZGVyZXIuY2FudmFzLlZlY3RvclRpbGVMYXllciBhcyB7IG5ldyhwOiBvbC5sYXllci5WZWN0b3JUaWxlKTogYW55OyB9KSB7XHJcbiAgICBjb25zdHJ1Y3RvcihsYXllcjogb2wubGF5ZXIuVmVjdG9yVGlsZSkge1xyXG4gICAgICAgIHN1cGVyKGxheWVyKTtcclxuICAgICAgICB0aGlzLlZFQ1RPUl9SRVBMQVlTID0gdGhpcy5WRUNUT1JfUkVQTEFZU19DVVNUT007XHJcbiAgICAgICAgdGhpcy5wcmVwYXJlRnJhbWUgPSB0aGlzLnByZXBhcmVGcmFtZUN1c3RvbTtcclxuICAgICAgICB0aGlzLnJlbmRlclRpbGVJbWFnZV8gPSB0aGlzLnJlbmRlclRpbGVJbWFnZUN1c3RvbTtcclxuICAgIH1cclxuXHJcbiAgICBWRUNUT1JfUkVQTEFZU19DVVNUT00gPSB7XHJcbiAgICAgICAgXCJpbWFnZVwiOiBbKDxhbnk+b2wucmVuZGVyKS5SZXBsYXlUeXBlLkRFRkFVTFRdLFxyXG4gICAgICAgIFwiaHlicmlkXCI6IFsoPGFueT5vbC5yZW5kZXIpLlJlcGxheVR5cGUuSU1BR0UsICg8YW55Pm9sLnJlbmRlcikuUmVwbGF5VHlwZS5URVhULCAoPGFueT5vbC5yZW5kZXIpLlJlcGxheVR5cGUuREVGQVVMVF0sXHJcbiAgICAgICAgXCJ2ZWN0b3JcIjogKDxhbnk+b2wpLnJlbmRlci5yZXBsYXkuT1JERVJcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIHRpbGVMYXllclByZXBhcmVGcmFtZUN1c3RvbShmcmFtZVN0YXRlOiBhbnksIGxheWVyU3RhdGU6IGFueSkge1xyXG4gICAgICAgIGxldCBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xyXG4gICAgICAgIGxldCBzaXplID0gZnJhbWVTdGF0ZS5zaXplO1xyXG4gICAgICAgIGxldCB2aWV3U3RhdGUgPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZTtcclxuICAgICAgICBsZXQgcHJvamVjdGlvbiA9IHZpZXdTdGF0ZS5wcm9qZWN0aW9uO1xyXG4gICAgICAgIGxldCB2aWV3UmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xyXG4gICAgICAgIGxldCB2aWV3Q2VudGVyID0gdmlld1N0YXRlLmNlbnRlcjtcclxuXHJcbiAgICAgICAgbGV0IHRpbGVMYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcclxuICAgICAgICBsZXQgdGlsZVNvdXJjZSA9IC8qKiBAdHlwZSB7b2wuc291cmNlLlRpbGV9ICovICh0aWxlTGF5ZXIuZ2V0U291cmNlKCkpO1xyXG4gICAgICAgIGxldCBzb3VyY2VSZXZpc2lvbiA9IHRpbGVTb3VyY2UuZ2V0UmV2aXNpb24oKTtcclxuICAgICAgICBsZXQgdGlsZUdyaWQgPSB0aWxlU291cmNlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihwcm9qZWN0aW9uKTtcclxuICAgICAgICBsZXQgeiA9IHRpbGVHcmlkLmdldFpGb3JSZXNvbHV0aW9uKHZpZXdSZXNvbHV0aW9uLCB0aGlzLnpEaXJlY3Rpb24pO1xyXG4gICAgICAgIGxldCB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XHJcbiAgICAgICAgbGV0IG92ZXJzYW1wbGluZyA9IE1hdGgucm91bmQodmlld1Jlc29sdXRpb24gLyB0aWxlUmVzb2x1dGlvbikgfHwgMTtcclxuICAgICAgICAvLyBsZXQgZXh0ZW50ID0gZnJhbWVTdGF0ZS5leHRlbnQ7XHJcbiAgICAgICAgLy8gdXBkYXRlIGZvciB3ZWJnbFxyXG4gICAgICAgIGxldCBleHRlbnQgPSAoPGFueT5vbC5leHRlbnQpLmJ1ZmZlcihmcmFtZVN0YXRlLmV4dGVudCxcclxuICAgICAgICAgICAgdGlsZUxheWVyLmdldFJlbmRlckJ1ZmZlcigpICogdmlld1Jlc29sdXRpb24pO1xyXG5cclxuICAgICAgICBpZiAobGF5ZXJTdGF0ZS5leHRlbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBleHRlbnQgPSBvbC5leHRlbnQuZ2V0SW50ZXJzZWN0aW9uKGV4dGVudCwgbGF5ZXJTdGF0ZS5leHRlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2wuZXh0ZW50LmlzRW1wdHkoZXh0ZW50KSkge1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZmFsc2UgdG8gcHJldmVudCB0aGUgcmVuZGVyaW5nIG9mIHRoZSBsYXllci5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcclxuXHJcbiAgICAgICAgLy8gQWRqdXN0IHRpbGUgY2FjaGUgc2l6ZSBhY2NvcmRpbmcgdG8gdGlsZSBSYW5nZSwgVE9ETzogYWRkIGEgcHJvcGVydHkgZm9yIHRoYXRcclxuICAgICAgICBsZXQgeE9mZnNldCA9ICh0aWxlUmFuZ2UubWF4WCAtIHRpbGVSYW5nZS5taW5YKTtcclxuICAgICAgICBsZXQgeU9mZnNldCA9ICh0aWxlUmFuZ2UubWF4WSAtIHRpbGVSYW5nZS5taW5ZKTtcclxuICAgICAgICB4T2Zmc2V0ID0geE9mZnNldCA8PSAwID8gMSA6IHhPZmZzZXQgKiAyICsgMztcclxuICAgICAgICB5T2Zmc2V0ID0geU9mZnNldCA8PSAwID8gMSA6IHlPZmZzZXQgKiAyICsgMztcclxuICAgICAgICBsZXQgY2FjaGVTaXplID0geE9mZnNldCAqIHlPZmZzZXQ7XHJcbiAgICAgICAgdGlsZVNvdXJjZS50aWxlQ2FjaGUuaGlnaFdhdGVyTWFyayA9IGNhY2hlU2l6ZSA8PSAxNSA/IDE1IDogY2FjaGVTaXplO1xyXG5cclxuICAgICAgICAvLyBBZGp1c3QgdmVjdG9yVGlsZURhdGEgY2FjaGUgc2l6ZSBhY2NvcmRpbmcgdG8gdGhlIHRpbGUgUmFuZ2UgaW4gZGF0YSBtYXggem9vbS4gaXQgd2lsbCBwYXNzIFxyXG4gICAgICAgIHZhciBkYXRhVGlsZVJhbmQgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgdGlsZVNvdXJjZS5tYXhEYXRhWm9vbSk7XHJcbiAgICAgICAgdmFyIG9mZnNldFggPSBkYXRhVGlsZVJhbmQubWF4WCAtIGRhdGFUaWxlUmFuZC5taW5YO1xyXG4gICAgICAgIHZhciBvZmZzZXRZID0gZGF0YVRpbGVSYW5kLm1heFkgLSBkYXRhVGlsZVJhbmQubWluWTtcclxuXHJcbiAgICAgICAgb2Zmc2V0WCA9IG9mZnNldFggPD0gMCA/IDEgOiBvZmZzZXRYICsgMztcclxuICAgICAgICBvZmZzZXRZID0gb2Zmc2V0WSA8PSAwID8gMSA6IG9mZnNldFkgKyAzO1xyXG4gICAgICAgIHZhciB2ZWN0b3JUaWxlRGF0YUNhaGNlU2l6ZSA9IG9mZnNldFggKiBvZmZzZXRZO1xyXG4gICAgICAgIHRpbGVTb3VyY2VbXCJ2ZWN0b3JUaWxlRGF0YUNhaGNlU2l6ZVwiXSA9IHZlY3RvclRpbGVEYXRhQ2FoY2VTaXplO1xyXG4gICAgICAgIHRpbGVTb3VyY2UuZ2V0R2VvRm9ybWF0KClbXCJ2ZWN0b3JUaWxlRGF0YUNhaGNlU2l6ZVwiXSA9IHZlY3RvclRpbGVEYXRhQ2FoY2VTaXplO1xyXG5cclxuICAgICAgICBsZXQgaW1hZ2VFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VFeHRlbnQoeiwgdGlsZVJhbmdlKTtcclxuXHJcbiAgICAgICAgbGV0IHRpbGVQaXhlbFJhdGlvID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge09iamVjdC48bnVtYmVyLCBPYmplY3QuPHN0cmluZywgb2wuVGlsZT4+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxldCB0aWxlc1RvRHJhd0J5WiA9IHt9O1xyXG4gICAgICAgIHRpbGVzVG9EcmF3QnlaW3pdID0ge307XHJcblxyXG4gICAgICAgIGxldCBmaW5kTG9hZGVkVGlsZXMgPSB0aGlzLmNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIoXHJcbiAgICAgICAgICAgIHRpbGVTb3VyY2UsIHByb2plY3Rpb24sIHRpbGVzVG9EcmF3QnlaKTtcclxuXHJcbiAgICAgICAgbGV0IHRtcEV4dGVudCA9IHRoaXMudG1wRXh0ZW50O1xyXG4gICAgICAgIGxldCB0bXBUaWxlUmFuZ2UgPSB0aGlzLnRtcFRpbGVSYW5nZV87XHJcbiAgICAgICAgbGV0IG5ld1RpbGVzID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHRpbGUsIHgsIHk7XHJcbiAgICAgICAgZm9yICh4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xyXG4gICAgICAgICAgICBmb3IgKHkgPSB0aWxlUmFuZ2UubWluWTsgeSA8PSB0aWxlUmFuZ2UubWF4WTsgKyt5KSB7XHJcbiAgICAgICAgICAgICAgICB0aWxlID0gdGlsZVNvdXJjZS5nZXRUaWxlKHosIHgsIHksIHBpeGVsUmF0aW8sIHByb2plY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgLy8gRklYTUUgRXJpY1xyXG4gICAgICAgICAgICAgICAgdGlsZS50aWxlUmFuZ2UgPSB0aWxlUmFuZ2U7XHJcbiAgICAgICAgICAgICAgICB0aWxlLnBpeGVsUmF0aW8gPSBwaXhlbFJhdGlvO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PT0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5FUlJPUikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGlsZUxheWVyLmdldFVzZUludGVyaW1UaWxlc09uRXJyb3IoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHVzZUludGVyaW1UaWxlc09uRXJyb3IgaXMgZmFsc2UsIHdlIGNvbnNpZGVyIHRoZSBlcnJvciB0aWxlIGFzIGxvYWRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZS5zZXRTdGF0ZSgoPGFueT5vbCkuVGlsZVN0YXRlLkxPQURFRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVsb2FkZWQgdGlsZXMgZm9yIGxvd2VyIHJlc29sdXRpb25zIG1pZ2h0IGhhdmUgZmluaXNoZWQgbG9hZGluZy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGlsZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0RyYXdhYmxlVGlsZV8odGlsZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aWxlID0gdGlsZS5nZXRJbnRlcmltVGlsZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNEcmF3YWJsZVRpbGVfKHRpbGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHVpZCA9ICg8YW55Pm9sKS5nZXRVaWQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0U3RhdGUoKSA9PT0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5MT0FERUQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZXNUb0RyYXdCeVpbel1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW5UcmFuc2l0aW9uID0gdGlsZS5pblRyYW5zaXRpb24odWlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuZXdUaWxlcyAmJiAoaW5UcmFuc2l0aW9uIHx8IHRoaXMucmVuZGVyZWRUaWxlcy5pbmRleE9mKHRpbGUpID09PSAtMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1RpbGVzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRBbHBoYSh1aWQsIGZyYW1lU3RhdGUudGltZSkgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3QgbG9vayBmb3IgYWx0IHRpbGVzIGlmIGFscGhhIGlzIDFcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZFRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVDb29yZENoaWxkVGlsZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbGUudGlsZUNvb3JkLCB0bXBUaWxlUmFuZ2UsIHRtcEV4dGVudCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY292ZXJlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkVGlsZVJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY292ZXJlZCA9IGZpbmRMb2FkZWRUaWxlcyh6ICsgMSwgY2hpbGRUaWxlUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCFjb3ZlcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZS50aWxlQ29vcmQsIGZpbmRMb2FkZWRUaWxlcywgbnVsbCwgdG1wVGlsZVJhbmdlLCB0bXBFeHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHJlbmRlcmVkUmVzb2x1dGlvbiA9IHRpbGVSZXNvbHV0aW9uICogcGl4ZWxSYXRpbyAvIHRpbGVQaXhlbFJhdGlvICogb3ZlcnNhbXBsaW5nO1xyXG4gICAgICAgIGxldCBoaW50cyA9IGZyYW1lU3RhdGUudmlld0hpbnRzO1xyXG4gICAgICAgIGxldCBhbmltYXRpbmdPckludGVyYWN0aW5nID0gaGludHNbKDxhbnk+b2wpLlZpZXdIaW50LkFOSU1BVElOR10gfHwgaGludHNbKDxhbnk+b2wpLlZpZXdIaW50LklOVEVSQUNUSU5HXTtcclxuICAgICAgICBpZiAoISh0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbiAmJiBEYXRlLm5vdygpIC0gZnJhbWVTdGF0ZS50aW1lID4gMTYgJiYgYW5pbWF0aW5nT3JJbnRlcmFjdGluZykgJiYgKFxyXG4gICAgICAgICAgICBuZXdUaWxlcyB8fFxyXG4gICAgICAgICAgICAhKHRoaXMucmVuZGVyZWRFeHRlbnRfICYmIG9sLmV4dGVudC5jb250YWluc0V4dGVudCh0aGlzLnJlbmRlcmVkRXh0ZW50XywgZXh0ZW50KSkgfHxcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFJldmlzaW9uICE9PSBzb3VyY2VSZXZpc2lvbiB8fFxyXG4gICAgICAgICAgICBvdmVyc2FtcGxpbmcgIT09IHRoaXMub3ZlcnNhbXBsaW5nXyB8fFxyXG4gICAgICAgICAgICAhYW5pbWF0aW5nT3JJbnRlcmFjdGluZyAmJiByZW5kZXJlZFJlc29sdXRpb24gIT09IHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uXHJcbiAgICAgICAgKSkge1xyXG5cclxuICAgICAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgICAgIGlmIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGlsZVBpeGVsU2l6ZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZVBpeGVsU2l6ZSh6LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGxldCB3aWR0aCA9IE1hdGgucm91bmQodGlsZVJhbmdlLmdldFdpZHRoKCkgKiB0aWxlUGl4ZWxTaXplWzBdIC8gb3ZlcnNhbXBsaW5nKTtcclxuICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBNYXRoLnJvdW5kKHRpbGVSYW5nZS5nZXRIZWlnaHQoKSAqIHRpbGVQaXhlbFNpemVbMV0gLyBvdmVyc2FtcGxpbmcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNhbnZhcy53aWR0aCAhPT0gd2lkdGggfHwgY2FudmFzLmhlaWdodCAhPT0gaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdmVyc2FtcGxpbmdfID0gb3ZlcnNhbXBsaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVkRXh0ZW50XyAmJiAhb2wuZXh0ZW50LmVxdWFscyhpbWFnZUV4dGVudCwgdGhpcy5yZW5kZXJlZEV4dGVudF8pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvdmVyc2FtcGxpbmcgPSB0aGlzLm92ZXJzYW1wbGluZ187XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5LjxudW1iZXI+fSAqL1xyXG4gICAgICAgICAgICBsZXQgenMgPSBPYmplY3Qua2V5cyh0aWxlc1RvRHJhd0J5WikubWFwKE51bWJlcik7XHJcbiAgICAgICAgICAgIHpzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhID09PSB6KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGIgPT09IHopIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhID4gYiA/IDEgOiBhIDwgYiA/IC0xIDogMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50UmVzb2x1dGlvbiwgY3VycmVudFNjYWxlLCBjdXJyZW50VGlsZVBpeGVsU2l6ZSwgY3VycmVudFosIGksIGlpO1xyXG4gICAgICAgICAgICBsZXQgdGlsZUV4dGVudCwgdGlsZUd1dHRlciwgdGlsZXNUb0RyYXcsIHcsIGg7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0genMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFogPSB6c1tpXTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaWxlUGl4ZWxTaXplID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxTaXplKGN1cnJlbnRaLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihjdXJyZW50Wik7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2NhbGUgPSBjdXJyZW50UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgdGlsZUd1dHRlciA9IHRpbGVQaXhlbFJhdGlvICogdGlsZVNvdXJjZS5nZXRHdXR0ZXIocHJvamVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aWxlc1RvRHJhdyA9IHRpbGVzVG9EcmF3QnlaW2N1cnJlbnRaXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHRpbGVDb29yZEtleSBpbiB0aWxlc1RvRHJhdykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbGUgPSB0aWxlc1RvRHJhd1t0aWxlQ29vcmRLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbGVFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZS5nZXRUaWxlQ29vcmQoKSwgdG1wRXh0ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB4ID0gKHRpbGVFeHRlbnRbMF0gLSBpbWFnZUV4dGVudFswXSkgLyB0aWxlUmVzb2x1dGlvbiAqIHRpbGVQaXhlbFJhdGlvIC8gb3ZlcnNhbXBsaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIHkgPSAoaW1hZ2VFeHRlbnRbM10gLSB0aWxlRXh0ZW50WzNdKSAvIHRpbGVSZXNvbHV0aW9uICogdGlsZVBpeGVsUmF0aW8gLyBvdmVyc2FtcGxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgdyA9IGN1cnJlbnRUaWxlUGl4ZWxTaXplWzBdICogY3VycmVudFNjYWxlIC8gb3ZlcnNhbXBsaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIGggPSBjdXJyZW50VGlsZVBpeGVsU2l6ZVsxXSAqIGN1cnJlbnRTY2FsZSAvIG92ZXJzYW1wbGluZztcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdUaWxlSW1hZ2UodGlsZSwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSwgeCwgeSwgdywgaCwgdGlsZUd1dHRlciwgeiA9PT0gY3VycmVudFopO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5wdXNoKHRpbGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkUmV2aXNpb24gPSBzb3VyY2VSZXZpc2lvbjtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFJlc29sdXRpb24gPSB0aWxlUmVzb2x1dGlvbiAqIHBpeGVsUmF0aW8gLyB0aWxlUGl4ZWxSYXRpbyAqIG92ZXJzYW1wbGluZztcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZEV4dGVudF8gPSBpbWFnZUV4dGVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzY2FsZSA9IHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uIC8gdmlld1Jlc29sdXRpb247XHJcbiAgICAgICAgbGV0IHRyYW5zZm9ybSA9ICg8YW55Pm9sKS50cmFuc2Zvcm0uY29tcG9zZSh0aGlzLmltYWdlVHJhbnNmb3JtXywgcGl4ZWxSYXRpbyAqIHNpemVbMF0gLyAyLCBwaXhlbFJhdGlvICogc2l6ZVsxXSAvIDIsIHNjYWxlLCBzY2FsZSwgMCwgKHRoaXMucmVuZGVyZWRFeHRlbnRfWzBdIC0gdmlld0NlbnRlclswXSkgLyB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbiAqIHBpeGVsUmF0aW8sICh2aWV3Q2VudGVyWzFdIC0gdGhpcy5yZW5kZXJlZEV4dGVudF9bM10pIC8gdGhpcy5yZW5kZXJlZFJlc29sdXRpb24gKiBwaXhlbFJhdGlvKTtcclxuICAgICAgICAoPGFueT5vbCkudHJhbnNmb3JtLmNvbXBvc2UodGhpcy5jb29yZGluYXRlVG9DYW52YXNQaXhlbFRyYW5zZm9ybSwgcGl4ZWxSYXRpbyAqIHNpemVbMF0gLyAyIC0gdHJhbnNmb3JtWzRdLCBwaXhlbFJhdGlvICogc2l6ZVsxXSAvIDIgLSB0cmFuc2Zvcm1bNV0sIHBpeGVsUmF0aW8gLyB2aWV3UmVzb2x1dGlvbiwgLXBpeGVsUmF0aW8gLyB2aWV3UmVzb2x1dGlvbiwgMCwgLXZpZXdDZW50ZXJbMF0sIC12aWV3Q2VudGVyWzFdKTtcclxuXHJcbiAgICAgICAgdGhpcy51cGRhdGVVc2VkVGlsZXMoZnJhbWVTdGF0ZS51c2VkVGlsZXMsIHRpbGVTb3VyY2UsIHosIHRpbGVSYW5nZSk7XHJcbiAgICAgICAgdGhpcy5tYW5hZ2VUaWxlUHlyYW1pZChmcmFtZVN0YXRlLCB0aWxlU291cmNlLCB0aWxlR3JpZCwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbiwgZXh0ZW50LCB6LCB0aWxlTGF5ZXIuZ2V0UHJlbG9hZCgpKTtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlRXhwaXJlQ2FjaGUoZnJhbWVTdGF0ZSwgdGlsZVNvdXJjZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVMb2dvcyhmcmFtZVN0YXRlLCB0aWxlU291cmNlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZWRUaWxlcy5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwcmVwYXJlRnJhbWVDdXN0b20oZnJhbWVTdGF0ZTogYW55LCBsYXllclN0YXRlOiBhbnkpIHtcclxuICAgICAgICBsZXQgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XHJcbiAgICAgICAgbGV0IGxheWVyUmV2aXNpb24gPSBsYXllci5nZXRSZXZpc2lvbigpO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlcmVkTGF5ZXJSZXZpc2lvbl8gIT09IGxheWVyUmV2aXNpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFRpbGVzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIGxldCByZW5kZXJNb2RlID0gbGF5ZXIuZ2V0UmVuZGVyTW9kZSgpO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29udGV4dCAmJiByZW5kZXJNb2RlICE9PSAoPGFueT5vbC5sYXllcikuVmVjdG9yVGlsZVJlbmRlclR5cGUuVkVDVE9SKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQgPSAoPGFueT5vbCkuZG9tLmNyZWF0ZUNhbnZhc0NvbnRleHQyRCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRleHQgJiYgcmVuZGVyTW9kZSA9PT0gKDxhbnk+b2wubGF5ZXIpLlZlY3RvclRpbGVSZW5kZXJUeXBlLlZFQ1RPUikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlbmRlcmVkTGF5ZXJSZXZpc2lvbl8gPSBsYXllclJldmlzaW9uO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVMYXllclByZXBhcmVGcmFtZUN1c3RvbS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBwb3N0Q29tcG9zZShjb250ZXh0OiBhbnksIGZyYW1lU3RhdGU6IGFueSwgbGF5ZXJTdGF0ZTogYW55KSB7XHJcbiAgICAgICAgbGV0IGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xyXG4gICAgICAgIGxldCBkZWNsdXR0ZXJSZXBsYXlzID0gbGF5ZXIuZ2V0RGVjbHV0dGVyKCkgPyB7fSA6IG51bGw7XHJcbiAgICAgICAgbGV0IHNvdXJjZSA9IC8qKiBAdHlwZSB7b2wuc291cmNlLlZlY3RvclRpbGV9ICovIChsYXllci5nZXRTb3VyY2UoKSk7XHJcbiAgICAgICAgbGV0IHJlbmRlck1vZGUgPSBsYXllci5nZXRSZW5kZXJNb2RlKCk7XHJcbiAgICAgICAgbGV0IHJlcGxheVR5cGVzID0gdGhpcy5WRUNUT1JfUkVQTEFZU19DVVNUT01bcmVuZGVyTW9kZV07XHJcbiAgICAgICAgbGV0IHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XHJcbiAgICAgICAgbGV0IHJvdGF0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucm90YXRpb247XHJcbiAgICAgICAgbGV0IHNpemUgPSBmcmFtZVN0YXRlLnNpemU7XHJcbiAgICAgICAgbGV0IG9mZnNldFgsIG9mZnNldFk7XHJcbiAgICAgICAgaWYgKHJvdGF0aW9uKSB7XHJcbiAgICAgICAgICAgIG9mZnNldFggPSBNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiBzaXplWzBdIC8gMik7XHJcbiAgICAgICAgICAgIG9mZnNldFkgPSBNYXRoLnJvdW5kKHBpeGVsUmF0aW8gKiBzaXplWzFdIC8gMik7XHJcbiAgICAgICAgICAgIC8vICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLnJvdGF0ZUF0T2Zmc2V0KGNvbnRleHQsIC1yb3RhdGlvbiwgb2Zmc2V0WCwgb2Zmc2V0WSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkZWNsdXR0ZXJSZXBsYXlzKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuZGVjbHV0dGVyVHJlZV8uY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRpbGVzID0gdGhpcy5yZW5kZXJlZFRpbGVzO1xyXG4gICAgICAgIGxldCB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbik7XHJcbiAgICAgICAgLy8gbGV0IGNsaXBzID0gW107XHJcbiAgICAgICAgbGV0IHpzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRpbGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcbiAgICAgICAgICAgIGxldCB0aWxlID0gLyoqIEB0eXBlIHtvbC5WZWN0b3JJbWFnZVRpbGV9ICovICh0aWxlc1tpXSk7XHJcbiAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuQUJPUlQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB0aWxlQ29vcmQgPSB0aWxlLnRpbGVDb29yZDtcclxuICAgICAgICAgICAgbGV0IHdvcmxkT2Zmc2V0ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGVDb29yZClbMF0gLVxyXG4gICAgICAgICAgICAgICAgdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHRpbGUud3JhcHBlZFRpbGVDb29yZClbMF07XHJcbiAgICAgICAgICAgIGxldCB0cmFuc2Zvcm0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwLCB0dCA9IHRpbGUudGlsZUtleXMubGVuZ3RoOyB0IDwgdHQ7ICsrdCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZVRpbGUgPSB0aWxlLmdldFRpbGUodGlsZS50aWxlS2V5c1t0XSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlVGlsZS5nZXRTdGF0ZSgpID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkVSUk9SKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcmV1c2UgcmVwbGF5R3JvdXAgb2Ygc291cmNlIFRpbGUgdG8gcmVkdWNlIHRoZSBtZW1vcnkuXHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgcmVwbGF5R3JvdXAgPSBzb3VyY2VUaWxlLmdldFJlcGxheUdyb3VwKGxheWVyLCB0aWxlQ29vcmQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGF5R3JvdXAgPSBzb3VyY2VUaWxlLmdldFJlcGxheUdyb3VwKGxheWVyLCBzb3VyY2VUaWxlLnRpbGVDb29yZC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZW5kZXJNb2RlICE9PSAoPGFueT5vbC5sYXllcikuVmVjdG9yVGlsZVJlbmRlclR5cGUuVkVDVE9SICYmICFyZXBsYXlHcm91cC5oYXNSZXBsYXlzKHJlcGxheVR5cGVzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0cmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0gPSB0aGlzLmdldFRyYW5zZm9ybShmcmFtZVN0YXRlLCB3b3JsZE9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgY3VycmVudFogPSBzb3VyY2VUaWxlLnRpbGVDb29yZFswXTtcclxuICAgICAgICAgICAgICAgIC8vIGxldCBjdXJyZW50Q2xpcCA9IHJlcGxheUdyb3VwLmdldENsaXBDb29yZHModHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnRleHQuc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5nbG9iYWxBbHBoYSA9IGxheWVyU3RhdGUub3BhY2l0eTtcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGNsaXAgbWFzayBmb3IgcmVnaW9ucyBpbiB0aGlzIGxvdyByZXNvbHV0aW9uIHRpbGUgdGhhdCBhcmVcclxuICAgICAgICAgICAgICAgIC8vIGFscmVhZHkgZmlsbGVkIGJ5IGEgaGlnaGVyIHJlc29sdXRpb24gdGlsZVxyXG4gICAgICAgICAgICAgICAgLy8gZm9yIChsZXQgaiA9IDAsIGpqID0gY2xpcHMubGVuZ3RoOyBqIDwgamo7ICsraikge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGxldCBjbGlwID0gY2xpcHNbal07XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGN1cnJlbnRaIDwgenNbal0pIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy8gY291bnRlci1jbG9ja3dpc2UgKG91dGVyIHJpbmcpIGZvciBjdXJyZW50IHRpbGVcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29udGV4dC5tb3ZlVG8oY3VycmVudENsaXBbMF0sIGN1cnJlbnRDbGlwWzFdKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29udGV4dC5saW5lVG8oY3VycmVudENsaXBbMl0sIGN1cnJlbnRDbGlwWzNdKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29udGV4dC5saW5lVG8oY3VycmVudENsaXBbNF0sIGN1cnJlbnRDbGlwWzVdKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29udGV4dC5saW5lVG8oY3VycmVudENsaXBbNl0sIGN1cnJlbnRDbGlwWzddKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgLy8gY2xvY2t3aXNlIChpbm5lciByaW5nKSBmb3IgaGlnaGVyIHJlc29sdXRpb24gdGlsZVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb250ZXh0Lm1vdmVUbyhjbGlwWzZdLCBjbGlwWzddKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFs0XSwgY2xpcFs1XSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbMl0sIGNsaXBbM10pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzBdLCBjbGlwWzFdKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29udGV4dC5jbGlwKCk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZnJhbWVTdGF0ZSA9IGZyYW1lU3RhdGU7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxheWVyU3RhdGUgPSBsYXllclN0YXRlO1xyXG4gICAgICAgICAgICAgICAgcmVwbGF5R3JvdXAucmVwbGF5KGNvbnRleHQsIHRyYW5zZm9ybSwgcm90YXRpb24sIHt9LCByZXBsYXlUeXBlcywgZGVjbHV0dGVyUmVwbGF5cyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGNvbnRleHQucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gY2xpcHMucHVzaChjdXJyZW50Q2xpcCk7XHJcbiAgICAgICAgICAgICAgICAvLyB6cy5wdXNoKGN1cnJlbnRaKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoZGVjbHV0dGVyUmVwbGF5cykge1xyXG4gICAgICAgICAgICB2YXIgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcclxuICAgICAgICAgICAgdmFyIGFuaW1hdGluZ09ySW50ZXJhY3RpbmcgPSBoaW50c1soPGFueT5vbCkuVmlld0hpbnQuQU5JTUFUSU5HXSB8fCBoaW50c1soPGFueT5vbCkuVmlld0hpbnQuSU5URVJBQ1RJTkddO1xyXG4gICAgICAgICAgICAvLyBkZWxldGUgY29udGV4dFtcInF1aWNrWm9vbVwiXVxyXG4gICAgICAgICAgICBpZiAoYW5pbWF0aW5nT3JJbnRlcmFjdGluZykge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dFtcInF1aWNrWm9vbVwiXSA9IGZyYW1lU3RhdGVbXCJxdWlja1pvb21cIl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29udGV4dFtcImN1cnJlbnRSZXNvbHV0aW9uXCJdID0gZnJhbWVTdGF0ZVtcImN1cnJlbnRSZXNvbHV0aW9uXCJdO1xyXG4gICAgICAgICAgICAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5SZXBsYXlHcm91cC5yZXBsYXlEZWNsdXR0ZXIoZGVjbHV0dGVyUmVwbGF5cywgY29udGV4dCwgcm90YXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocm90YXRpb24pIHtcclxuICAgICAgICAvLyAgICAgKDxhbnk+b2wucmVuZGVyLmNhbnZhcykucm90YXRlQXRPZmZzZXQoY29udGV4dCwgcm90YXRpb24sXHJcbiAgICAgICAgLy8gLyoqIEB0eXBlIHtudW1iZXJ9ICovKG9mZnNldFgpLCAvKiogQHR5cGUge251bWJlcn0gKi8ob2Zmc2V0WSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAoPGFueT5vbCkucmVuZGVyZXIuY2FudmFzLlRpbGVMYXllci5wcm90b3R5cGUucG9zdENvbXBvc2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY3JlYXRlUmVwbGF5R3JvdXBfKHRpbGU6IG9sLlZlY3RvclRpbGUsIGZyYW1lU3RhdGU6IG9seC5GcmFtZVN0YXRlLCB4LCB5KSB7XHJcbiAgICAgICAgbGV0IGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xyXG4gICAgICAgIGxldCBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xyXG4gICAgICAgIGxldCBwcm9qZWN0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbjtcclxuICAgICAgICBsZXQgcmV2aXNpb24gPSBsYXllci5nZXRSZXZpc2lvbigpO1xyXG4gICAgICAgIGxldCByZW5kZXJPcmRlciA9IC8qKiBAdHlwZSB7b2wuUmVuZGVyT3JkZXJGdW5jdGlvbn0gKi9cclxuICAgICAgICAgICAgKGxheWVyLmdldFJlbmRlck9yZGVyKCkpIHx8IG51bGw7XHJcblxyXG4gICAgICAgIGxldCByZXBsYXlTdGF0ZSA9ICg8YW55PnRpbGUpLmdldFJlcGxheVN0YXRlKGxheWVyKTtcclxuICAgICAgICBpZiAoIXJlcGxheVN0YXRlLmRpcnR5ICYmIHJlcGxheVN0YXRlLnJlbmRlcmVkUmV2aXNpb24gPT09IHJldmlzaW9uICYmXHJcbiAgICAgICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkUmVuZGVyT3JkZXIgPT09IHJlbmRlck9yZGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzb3VyY2UgPSAvKiogQHR5cGUge29sLnNvdXJjZS5WZWN0b3JUaWxlfSAqLyAobGF5ZXIuZ2V0U291cmNlKCkpO1xyXG4gICAgICAgIGxldCBzb3VyY2VUaWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZCgpO1xyXG4gICAgICAgIGxldCB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XHJcbiAgICAgICAgbGV0IHJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKCg8YW55PnRpbGUpLnRpbGVDb29yZFswXSk7XHJcbiAgICAgICAgbGV0IHRpbGVFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQoKDxhbnk+dGlsZSkud3JhcHBlZFRpbGVDb29yZCk7XHJcblxyXG4gICAgICAgIC8vIGxldCB6SW5kZXhLZXlzID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHR0ID0gKDxhbnk+dGlsZSkudGlsZUtleXMubGVuZ3RoOyB0IDwgdHQ7ICsrdCkge1xyXG4gICAgICAgICAgICBsZXQgc291cmNlVGlsZSA9ICg8YW55PnRpbGUpLmdldFRpbGUoKDxhbnk+dGlsZSkudGlsZUtleXNbdF0pO1xyXG4gICAgICAgICAgICBpZiAoc291cmNlVGlsZS5nZXRTdGF0ZSgpID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkVSUk9SKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgc291cmNlVGlsZUNvb3JkID0gc291cmNlVGlsZS5yZXF1ZXN0VGlsZUNvb3JkO1xyXG4gICAgICAgICAgICBsZXQgc291cmNlVGlsZUV4dGVudCA9IHNvdXJjZVRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudChzb3VyY2VUaWxlQ29vcmQpO1xyXG4gICAgICAgICAgICBsZXQgc2hhcmVkRXh0ZW50ID0gb2wuZXh0ZW50LmdldEludGVyc2VjdGlvbih0aWxlRXh0ZW50LCBzb3VyY2VUaWxlRXh0ZW50KTtcclxuICAgICAgICAgICAgLy8gbGV0IGJ1ZmZlcmVkRXh0ZW50ID0gb2wuZXh0ZW50LmVxdWFscyhzb3VyY2VUaWxlRXh0ZW50LCBzaGFyZWRFeHRlbnQpID8gbnVsbCA6XHJcbiAgICAgICAgICAgIC8vICAgICBvbC5leHRlbnQuYnVmZmVyKHNoYXJlZEV4dGVudCwgbGF5ZXIuZ2V0UmVuZGVyQnVmZmVyKCkgKiByZXNvbHV0aW9uKTtcclxuICAgICAgICAgICAgbGV0IHRpbGVQcm9qZWN0aW9uID0gc291cmNlVGlsZS5nZXRQcm9qZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIGxldCByZXByb2plY3QgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXBsYXlTdGF0ZS5kaXJ0eSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8gcmV1c2UgcmVwbGF5R3JvdXAgb2Ygc291cmNlIFRpbGUgdG8gcmVkdWNlIHRoZSBtZW1vcnkuXHJcbiAgICAgICAgICAgIGxldCBkaXN0UmVwbGF5R3JvdXAgPSBzb3VyY2VUaWxlLmdldFJlcGxheUdyb3VwKGxheWVyLCAoPGFueT50aWxlKS53cmFwcGVkVGlsZUNvb3JkLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBpZiAoZGlzdFJlcGxheUdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayByZXBsYXlHcm91cCBoYXMgIHJlcGxheXNcclxuICAgICAgICAgICAgICAgIGxldCByZXBsYXlzWmluZGV4Q291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RSZXBsYXlHcm91cC5yZXBsYXlzQnlaSW5kZXhfKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgemluZGV4IGluIGRpc3RSZXBsYXlHcm91cC5yZXBsYXlzQnlaSW5kZXhfKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxheXNaaW5kZXhDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLmlzTXVsdGl0aHJlYWQgJiYgcmVwbGF5c1ppbmRleENvdW50ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlcGxheXMgZGlkIG5vdCBjcmVhdGVkLCBpdCB3aWxsIGNyZWF0ZSBhZnRlciB3ZWIgd29ya2VyIGNhbGwgYmFja1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VUaWxlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc291cmNlVGlsZVtcInJldXNlVmVjdG9ySW1hZ2VUaWxlXCJdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVRpbGVbXCJyZXVzZVZlY3RvckltYWdlVGlsZVwiXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlVGlsZVtcInJldXNlVmVjdG9ySW1hZ2VUaWxlXCJdLnB1c2godGlsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFJldmlzaW9uID0gcmV2aXNpb247XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3RhdGUucmVuZGVyZWRSZW5kZXJPcmRlciA9IHJlbmRlck9yZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZUxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVwbGF5R3JvdXAgPSBuZXcgUmVwbGF5R3JvdXBDdXN0b20oXHJcbiAgICAgICAgICAgICAgICAgICAgMCwgc2hhcmVkRXh0ZW50LCBsYXllci5nZXRSZW5kZXJCdWZmZXIoKSwgdGhpcy5kZWNsdXR0ZXJUcmVlXyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgcmVwbGF5R3JvdXAgPSBuZXcgUmVwbGF5R3JvdXBDdXN0b20oMCwgc2hhcmVkRXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzb3VyY2UuZ2V0T3ZlcmxhcHMoKSwgdGhpcy5kZWNsdXR0ZXJUcmVlXywgbGF5ZXIuZ2V0UmVuZGVyQnVmZmVyKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZWRUb2xlcmFuY2UgPSAoPGFueT5vbCkucmVuZGVyZXIudmVjdG9yLmdldFNxdWFyZWRUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RyYXRlZ3lUcmVlID0gKDxhbnk+b2wpLmV4dC5yYnVzaCg5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7b2wuRmVhdHVyZXxvbC5yZW5kZXIuRmVhdHVyZX0gZmVhdHVyZSBGZWF0dXJlLlxyXG4gICAgICAgICAgICAgICAgICogQHRoaXMge29sLnJlbmRlcmVyLmNhbnZhcy5WZWN0b3JUaWxlTGF5ZXJ9XHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIGxldCByZW5kZXJGZWF0dXJlID0gZnVuY3Rpb24gKGZlYXR1cmUsIGdlb1N0eWxlcywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdHlsZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdlb1N0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvU3R5bGVzICYmIGdlb1N0eWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBnZW9TdHlsZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW9TdHlsZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9sNFN0eWxlcyA9IGdlb1N0eWxlc1tpXS5nZXRTdHlsZXMoZmVhdHVyZSwgcmVzb2x1dGlvbiwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoc3R5bGVzLCBvbDRTdHlsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlRnVuY3Rpb24gPSBmZWF0dXJlLmdldFN0eWxlRnVuY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcyA9IHN0eWxlRnVuY3Rpb24uY2FsbCgvKiogQHR5cGUge29sLkZlYXR1cmV9ICovKGZlYXR1cmUpLCByZXNvbHV0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlRnVuY3Rpb24gPSBsYXllci5nZXRTdHlsZUZ1bmN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcyA9IHN0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpcnR5ID0gdGhpcy5yZW5kZXJGZWF0dXJlKGZlYXR1cmUsIHNxdWFyZWRUb2xlcmFuY2UsIHN0eWxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxheUdyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXJ0eV8gPSB0aGlzLmRpcnR5XyB8fCBkaXJ0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3RhdGUuZGlydHkgPSByZXBsYXlTdGF0ZS5kaXJ0eSB8fCBkaXJ0eTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpbnN0cnVjdHM7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlVGlsZS5mZWF0dXJlc0FuZEluc3RydWN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RydWN0cyA9IHNvdXJjZVRpbGUuZmVhdHVyZXNBbmRJbnN0cnVjdHNbXCJpbnN0cnVjdHNcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMgPSBzb3VyY2VUaWxlLmZlYXR1cmVzQW5kSW5zdHJ1Y3RzW1wiZmVhdHVyZXNcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5pc011bHRpdGhyZWFkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IHJlbmRlciA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGVQcm9qZWN0aW9uLmdldFVuaXRzKCkgPT09ICg8YW55Pm9sLnByb2opLlVuaXRzLlRJTEVfUElYRUxTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVQcm9qZWN0aW9uLnNldFdvcmxkRXh0ZW50KHNvdXJjZVRpbGVFeHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbi5zZXRFeHRlbnQoc291cmNlVGlsZS5nZXRFeHRlbnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlUHJvamVjdGlvbkluZm8gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIGluIHRpbGVQcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGlsZVByb2plY3Rpb25bbmFtZV0gIT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVByb2plY3Rpb25JbmZvW25hbWVdID0gdGlsZVByb2plY3Rpb25bbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb2plY3RJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBwcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvamVjdGlvbltuYW1lXSAhPT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SW5mb1tuYW1lXSA9IHByb2plY3Rpb25bbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZW9TdHlsZXMgPSBzb3VyY2UuZ2V0R2VvRm9ybWF0KCkuc3R5bGVKc29uQ2FjaGUuZ2VvU3R5bGVzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZXMgJiYgaW5zdHJ1Y3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdHJ1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ2VvU3R5bGVJZCA9IGluc3RydWN0c1tpXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnZW9TdHlsZSA9IGdlb1N0eWxlc1tnZW9TdHlsZUlkXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZUluZm8gPSBmZWF0dXJlc1tpbnN0cnVjdHNbaV1bMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZlYXR1cmUgPSBuZXcgKDxhbnk+b2wucmVuZGVyKS5GZWF0dXJlKGZlYXR1cmVJbmZvLnR5cGVfLCBmZWF0dXJlSW5mby5mbGF0Q29vcmRpbmF0ZXNfLCBmZWF0dXJlSW5mby5lbmRzXywgZmVhdHVyZUluZm8ucHJvcGVydGllc18pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlSW5mb1tcInByb2plY3RlZFwiXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGVQcm9qZWN0aW9uLmdldFVuaXRzKCkgPT09ICg8YW55Pm9sLnByb2opLlVuaXRzLlRJTEVfUElYRUxTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb2plY3RlZCB0aWxlIGV4dGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbi5zZXRXb3JsZEV4dGVudChzb3VyY2VUaWxlRXh0ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGlsZSBleHRlbnQgaW4gdGlsZSBwaXhlbCBzcGFjZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbi5zZXRFeHRlbnQoc291cmNlVGlsZS5nZXRFeHRlbnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS50cmFuc2Zvcm0odGlsZVByb2plY3Rpb24sIHByb2plY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZXh0ZW50XyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZUluZm9bXCJwcm9qZWN0ZWRcIl0gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVbXCJ0ZW1wVHJlZVppbmRleFwiXSA9IGluc3RydWN0c1tpXVsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVbXCJzdHlsZUlkXCJdID0gZ2VvU3R5bGVJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckZlYXR1cmUuY2FsbCh0aGlzLCBmZWF0dXJlLCBbZ2VvU3R5bGVdLCB7IHN0cmF0ZWd5VHJlZTogc3RyYXRlZ3lUcmVlLCBmcmFtZVN0YXRlOiBmcmFtZVN0YXRlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlRGF0YSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgWzAsIHRpbGVFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHNvdXJjZS5nZXRPdmVybGFwcygpLCB0aGlzLmRlY2x1dHRlclRyZWVfLCBsYXllci5nZXRSZW5kZXJCdWZmZXIoKSwgc291cmNlLmdldEdlb0Zvcm1hdCgpLm1pbmltYWxpc3RdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VUaWxlLnJlcXVlc3RUaWxlQ29vcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVRpbGUudGlsZUNvb3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbkluZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RJbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmVkVG9sZXJhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKDxhbnk+b2wpLmdldFVpZChzb3VyY2UuZ2V0R2VvRm9ybWF0KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVN0YXRlW1wiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1cIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRHZW9Gb3JtYXQoKS5tYXhEYXRhWm9vbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlW1widmVjdG9yVGlsZURhdGFDYWhjZVNpemVcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHlcclxuICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZW5kZXJhID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbGFiY2sgPSBmdW5jdGlvbiAobWVzc2FnZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGxheXNCeVpJbmRleF8gPSBtZXNzYWdlRGF0YVtcInJlcGxheXNcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IG1lc3NhZ2VEYXRhW1wiZmVhdHVyZXNcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0cnVjdHMgPSBtZXNzYWdlRGF0YVtcImluc3RydWN0c1wiXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlcyAmJiBpbnN0cnVjdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdHJ1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdlb1N0eWxlSWQgPSBpbnN0cnVjdHNbaV1bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdlb1N0eWxlID0gZ2VvU3R5bGVzW2dlb1N0eWxlSWRdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZUluZm8gPSBmZWF0dXJlc1tpbnN0cnVjdHNbaV1bMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlID0gbmV3ICg8YW55Pm9sLnJlbmRlcikuRmVhdHVyZShmZWF0dXJlSW5mby50eXBlXywgZmVhdHVyZUluZm8uZmxhdENvb3JkaW5hdGVzXywgZmVhdHVyZUluZm8uZW5kc18sIGZlYXR1cmVJbmZvLnByb3BlcnRpZXNfKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlW1widGVtcFRyZWVaaW5kZXhcIl0gPSBpbnN0cnVjdHNbaV1bMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVtcInN0eWxlSWRcIl0gPSBnZW9TdHlsZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckZlYXR1cmUuY2FsbChyZW5kZXJhLCBmZWF0dXJlLCBbZ2VvU3R5bGVdLCB7IHN0cmF0ZWd5VHJlZTogc3RyYXRlZ3lUcmVlLCBmcmFtZVN0YXRlOiBmcmFtZVN0YXRlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXBsYXlHcm91cC5nZXRSZXBsYXlzTWVyZ2VkKHJlcGxheXNCeVpJbmRleF8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgemluZGV4IGluIHJlcGxheXNCeVpJbmRleF8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHJlcGxheVR5cGUgaW4gcmVwbGF5c0J5WkluZGV4X1t6aW5kZXhdKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBtZXJnZSB3b3JrZXIgdG8gbWFpbiB3aXRoIHJlcGxheXNCeVpJbmRleF9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVwbGF5ID0gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5KHppbmRleCwgcmVwbGF5VHlwZSk7ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB3b3JrZXJSZXBsYXkgPSByZXBsYXlzQnlaSW5kZXhfW3ppbmRleF1bcmVwbGF5VHlwZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gd29ya2VyUmVwbGF5KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoa2V5ICE9PSAnbGluZVN0cmluZ1JlcGxheScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5W2tleV0gPSB3b3JrZXJSZXBsYXlba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih3b3JrZXJSZXBsYXlbJ2xpbmVTdHJpbmdSZXBsYXknXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgbGluZVN0cmluZ0tleSBpbiB3b3JrZXJSZXBsYXlbJ2xpbmVTdHJpbmdSZXBsYXknXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYXlbJ2xpbmVTdHJpbmdSZXBsYXknXVtsaW5lU3RyaW5nS2V5XSA9IHdvcmtlclJlcGxheVsnbGluZVN0cmluZ1JlcGxheSddW2xpbmVTdHJpbmdLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZvciAobGV0IHIgaW4gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5cygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB6SW5kZXhLZXlzW3JdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5R3JvdXAuZmluaXNoKGZyYW1lU3RhdGVbJ2NvbnRleHQnXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFRpbGVMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VUaWxlLnN0YXRlID0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5MT0FERUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VUaWxlW1wicmV1c2VWZWN0b3JJbWFnZVRpbGVcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlVGlsZVtcInJldXNlVmVjdG9ySW1hZ2VUaWxlXCJdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldXNlZFZlY3RvckltYWdlVGlsZSA9IHNvdXJjZVRpbGVbXCJyZXVzZVZlY3RvckltYWdlVGlsZVwiXVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc291cmNlVGlsZVtcInJldXNlVmVjdG9ySW1hZ2VUaWxlXCJdW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2ZWN0b3JJbWFnZVRpbGVSZXBsYXlTdGF0ZSA9IHJldXNlZFZlY3RvckltYWdlVGlsZS5nZXRSZXBsYXlTdGF0ZShsYXllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjdG9ySW1hZ2VUaWxlUmVwbGF5U3RhdGUucmVuZGVyZWRSZXZpc2lvbiA9IHJldmlzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlY3RvckltYWdlVGlsZVJlcGxheVN0YXRlLnJlbmRlcmVkUmVuZGVyT3JkZXIgPSByZW5kZXJPcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWN0b3JJbWFnZVRpbGVSZXBsYXlTdGF0ZS5yZW5kZXJlZFRpbGVMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldXNlZFZlY3RvckltYWdlVGlsZS5zZXRTdGF0ZSgoPGFueT5vbCkuVGlsZVN0YXRlLkxPQURFRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICg8YW55PnRpbGUpLnNldFN0YXRlKCg8YW55Pm9sKS5UaWxlU3RhdGUuTE9BREVEKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyByZXVzZSByZXBsYXlHcm91cCBvZiBzb3VyY2UgVGlsZSB0byByZWR1Y2UgdGhlIG1lbW9yeS5cclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUaWxlLnNldFJlcGxheUdyb3VwKGxheWVyLCBzb3VyY2VUaWxlLnRpbGVDb29yZC50b1N0cmluZygpLCByZXBsYXlHcm91cCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2UuZ2V0R2VvRm9ybWF0KCkud29ya2VyTWFuYWdlci5wb3N0TWVzc2FnZShzb3VyY2VUaWxlLnRpbGVDb29yZCArICg8YW55Pm9sKS5nZXRVaWQoY2FsbGFiY2spLCBcImNyZWF0ZVJlcGxheVwiLCBtZXNzYWdlRGF0YSwgY2FsbGFiY2ssIHNvdXJjZVRpbGUud29ya2VySWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkUmV2aXNpb24gPSByZXZpc2lvbjtcclxuICAgICAgICAgICAgICAgICAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFRpbGVMb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdHMgJiYgaW5zdHJ1Y3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnN0cnVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlSW5kZXggPSBpbnN0cnVjdHNbaV1bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZSA9IGZlYXR1cmVzW2ZlYXR1cmVJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZVtcInByb2plY3RlZFwiXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcHJvamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGlsZVByb2plY3Rpb24uZ2V0VW5pdHMoKSA9PT0gKDxhbnk+b2wucHJvaikuVW5pdHMuVElMRV9QSVhFTFMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb2plY3RlZCB0aWxlIGV4dGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVByb2plY3Rpb24uc2V0V29ybGRFeHRlbnQoc291cmNlVGlsZUV4dGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aWxlIGV4dGVudCBpbiB0aWxlIHBpeGVsIHNwYWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbi5zZXRFeHRlbnQoc291cmNlVGlsZS5nZXRFeHRlbnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5nZXRHZW9tZXRyeSgpLnRyYW5zZm9ybSh0aWxlUHJvamVjdGlvbiwgcHJvamVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZXh0ZW50XyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZ2V0RXh0ZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVbXCJwcm9qZWN0ZWRcIl0gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVtcInRlbXBUcmVlWmluZGV4XCJdID0gaW5zdHJ1Y3RzW2ldWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyRmVhdHVyZS5jYWxsKHRoaXMsIGZlYXR1cmUsIFtpbnN0cnVjdHNbaV1bMV1dLCB7IHN0cmF0ZWd5VHJlZTogc3RyYXRlZ3lUcmVlLCBmcmFtZVN0YXRlOiBmcmFtZVN0YXRlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxheUdyb3VwLmZpbmlzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciAobGV0IHIgaW4gcmVwbGF5R3JvdXAuZ2V0UmVwbGF5cygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHpJbmRleEtleXNbcl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VUaWxlLnNldFJlcGxheUdyb3VwKGxheWVyLCBzb3VyY2VUaWxlLnRpbGVDb29yZC50b1N0cmluZygpLCByZXBsYXlHcm91cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3RhdGUucmVuZGVyZWRSZXZpc2lvbiA9IHJldmlzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkUmVuZGVyT3JkZXIgPSByZW5kZXJPcmRlcjtcclxuICAgICAgICAgICAgICAgICAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFRpbGVMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXJUaWxlSW1hZ2VDdXN0b20odGlsZSwgZnJhbWVTdGF0ZSwgbGF5ZXJTdGF0ZSkge1xyXG4gICAgICAgIGxldCBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcclxuICAgICAgICBsZXQgcmVwbGF5U3RhdGUgPSB0aWxlLmdldFJlcGxheVN0YXRlKGxheWVyKTtcclxuICAgICAgICBsZXQgcmV2aXNpb24gPSBsYXllci5nZXRSZXZpc2lvbigpO1xyXG4gICAgICAgIGxldCByZXBsYXlzID0gKDxhbnk+b2wpLnJlbmRlcmVyLmNhbnZhcy5WZWN0b3JUaWxlTGF5ZXIuSU1BR0VfUkVQTEFZU1tsYXllci5nZXRSZW5kZXJNb2RlKCldO1xyXG4gICAgICAgIGlmIChyZXBsYXlzICYmIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZUxvYWRlZCAmJiByZXBsYXlTdGF0ZS5yZW5kZXJlZFRpbGVSZXZpc2lvbiAhPT0gcmV2aXNpb24pIHtcclxuICAgICAgICAgICAgcmVwbGF5U3RhdGUucmVuZGVyZWRUaWxlUmV2aXNpb24gPSByZXZpc2lvbjtcclxuICAgICAgICAgICAgbGV0IHRpbGVDb29yZCA9IHRpbGUud3JhcHBlZFRpbGVDb29yZDtcclxuICAgICAgICAgICAgbGV0IHogPSB0aWxlQ29vcmRbMF07XHJcbiAgICAgICAgICAgIGxldCBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xyXG4gICAgICAgICAgICBsZXQgc291cmNlID0gLyoqIEB0eXBlIHtvbC5zb3VyY2UuVmVjdG9yVGlsZX0gKi8gKGxheWVyLmdldFNvdXJjZSgpKTtcclxuICAgICAgICAgICAgbGV0IHRpbGVHcmlkID0gc291cmNlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKTtcclxuICAgICAgICAgICAgbGV0IHJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xyXG4gICAgICAgICAgICBsZXQgY29udGV4dCA9IHRpbGUuZ2V0Q29udGV4dChsYXllcik7XHJcbiAgICAgICAgICAgIGxldCBzaXplID0gc291cmNlLmdldFRpbGVQaXhlbFNpemUoeiwgcGl4ZWxSYXRpbywgZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbik7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY2FudmFzLndpZHRoID0gc2l6ZVswXTtcclxuICAgICAgICAgICAgY29udGV4dC5jYW52YXMuaGVpZ2h0ID0gc2l6ZVsxXTtcclxuICAgICAgICAgICAgbGV0IHRpbGVFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkKTtcclxuICAgICAgICAgICAgaWYgKGxheWVyLmJhY2tncm91bmQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQucmVjdCgwLCAwLCBzaXplWzBdLCBzaXplWzFdKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gbGF5ZXIuYmFja2dyb3VuZDtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IHRpbGUudGlsZUtleXMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZVRpbGUgPSB0aWxlLmdldFRpbGUodGlsZS50aWxlS2V5c1tpXSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlVGlsZS5nZXRTdGF0ZSgpID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkVSUk9SKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgcGl4ZWxTY2FsZSA9IHBpeGVsUmF0aW8gLyByZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRyYW5zZm9ybSA9ICg8YW55Pm9sKS50cmFuc2Zvcm0ucmVzZXQodGhpcy50bXBUcmFuc2Zvcm1fKTtcclxuICAgICAgICAgICAgICAgICg8YW55Pm9sKS50cmFuc2Zvcm0uc2NhbGUodHJhbnNmb3JtLCBwaXhlbFNjYWxlLCAtcGl4ZWxTY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAoPGFueT5vbCkudHJhbnNmb3JtLnRyYW5zbGF0ZSh0cmFuc2Zvcm0sIC10aWxlRXh0ZW50WzBdLCAtdGlsZUV4dGVudFszXSk7XHJcbiAgICAgICAgICAgICAgICAvLyByZXVzZSByZXBsYXlHcm91cCBvZiBzb3VyY2UgVGlsZSB0byByZWR1Y2UgdGhlIG1lbW9yeS5cclxuICAgICAgICAgICAgICAgIGxldCByZXBsYXlHcm91cCA9IHNvdXJjZVRpbGUuZ2V0UmVwbGF5R3JvdXAobGF5ZXIsIHRpbGVDb29yZCk7XHJcbiAgICAgICAgICAgICAgICByZXBsYXlHcm91cC5yZXBsYXkoY29udGV4dCwgdHJhbnNmb3JtLCAwLCB7fSwgcmVwbGF5cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBoYW5kbGVzKHR5cGU6IHN0cmluZywgbGF5ZXI6IG9sLmxheWVyLkxheWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHR5cGUgPT09ICg8YW55Pm9sKS5yZW5kZXJlci5UeXBlLkNBTlZBUyAmJiAoPGFueT5sYXllcikuZ2V0VHlwZSgpID09PSAoPGFueT5vbCkuTGF5ZXJUeXBlLk1BUFNVSVRFX1ZFQ1RPUlRJTEU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGUobWFwUmVuZGVyZXI6IGFueSwgbGF5ZXI6IG9sLmxheWVyLlRpbGUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEdlb1ZlY3RvclRpbGVMYXllclJlbmRlcig8YW55PmxheWVyKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwb3NlSW50ZXJuYWwoKSB7XHJcbiAgICAgICAgKDxhbnk+b2wpLmV2ZW50cy51bmxpc3RlbigoPGFueT5vbC5yZW5kZXIpLmNhbnZhcy5sYWJlbENhY2hlLCAoPGFueT5vbCkuZXZlbnRzLkV2ZW50VHlwZS5DTEVBUiwgdGhpcy5oYW5kbGVGb250c0NoYW5nZWRfLCB0aGlzKTtcclxuICAgICAgICB2YXIgd29ya2VyTWFuYWdlciA9IHRoaXMuZ2V0TGF5ZXIoKS5nZXRTb3VyY2UoKS5nZXRHZW9Gb3JtYXQoKS53b3JrZXJNYW5hZ2VyO1xyXG4gICAgICAgIHdvcmtlck1hbmFnZXIuY2xvc2UoKTtcclxuICAgICAgICAoPGFueT5vbCkucmVuZGVyZXIuY2FudmFzLlRpbGVMYXllci5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XHJcbiAgICB9O1xyXG59IiwiLy8gaW1wb3J0IHsgVGV4dFJlcGxheUN1c3RvbSB9IGZyb20gXCIuL3RleHRSZXBsYXlDdXN0b21cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBSZXBsYXlHcm91cEN1c3RvbSBleHRlbmRzICgoPGFueT5vbCkucmVuZGVyLndlYmdsLlJlcGxheUdyb3VwIGFzIHsgbmV3KHRvbGVyYW5jZTogbnVtYmVyLCBtYXhFeHRlbnQ6IGFueSwgb3B0X3JlbmRlckJ1ZmZlcjogbnVtYmVyKSB9KSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IodG9sZXJhbmNlOiBudW1iZXIsIG1heEV4dGVudDogYW55LCBvcHRfcmVuZGVyQnVmZmVyOiBudW1iZXIsIGRlY2x1dHRlclRyZWU6IGFueSkge1xyXG4gICAgICAgIHN1cGVyKHRvbGVyYW5jZSwgbWF4RXh0ZW50LCBvcHRfcmVuZGVyQnVmZmVyKTtcclxuICAgICAgICB0aGlzLmdldFJlcGxheSA9IHRoaXMuZ2V0UmVwbGF5Q3VzdG9tO1xyXG4gICAgICAgIHRoaXMuQkFUQ0hfQ09OU1RSVUNUT1JTXyA9IHRoaXMuQkFUQ0hfQ09OU1RSVUNUT1JTX0NVU1RPTTtcclxuICAgICAgICB0aGlzLnJlcGxheSA9IHRoaXMucmVwbGF5Q3VzdG9tO1xyXG4gICAgICAgIHRoaXMuZGVjbHV0dGVyVHJlZSA9IGRlY2x1dHRlclRyZWU7XHJcbiAgICAgICAgLy8gdGhpcy5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IHRoaXMuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGVDdXN0b207XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlQ3VzdG9tKGNvb3JkaW5hdGU6IGFueSwgcmVzb2x1dGlvbjogbnVtYmVyLCByb3RhdGlvbjogbnVtYmVyLCBoaXRUb2xlcmFuY2U6IG51bWJlciwgc2tpcHBlZEZlYXR1cmVzSGFzaDogYW55LCBjYWxsYmFjazogYW55LCBkZWNsdXR0ZXJSZXBsYXlzOiBhbnkpIHtcclxuICAgICAgICBoaXRUb2xlcmFuY2UgPSBNYXRoLnJvdW5kKGhpdFRvbGVyYW5jZSk7XHJcbiAgICAgICAgbGV0IGNvbnRleHRTaXplID0gaGl0VG9sZXJhbmNlICogMiArIDE7XHJcbiAgICAgICAgbGV0IHRyYW5zZm9ybSA9ICg8YW55Pm9sKS50cmFuc2Zvcm0uY29tcG9zZSh0aGlzLmhpdERldGVjdGlvblRyYW5zZm9ybV8sXHJcbiAgICAgICAgICAgIGhpdFRvbGVyYW5jZSArIDAuNSwgaGl0VG9sZXJhbmNlICsgMC41LFxyXG4gICAgICAgICAgICAxIC8gcmVzb2x1dGlvbiwgLTEgLyByZXNvbHV0aW9uLFxyXG4gICAgICAgICAgICAtcm90YXRpb24sXHJcbiAgICAgICAgICAgIC1jb29yZGluYXRlWzBdLCAtY29vcmRpbmF0ZVsxXSk7XHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSB0aGlzLmhpdERldGVjdGlvbkNvbnRleHRfO1xyXG5cclxuICAgICAgICBpZiAoY29udGV4dC5jYW52YXMud2lkdGggIT09IGNvbnRleHRTaXplIHx8IGNvbnRleHQuY2FudmFzLmhlaWdodCAhPT0gY29udGV4dFNpemUpIHtcclxuICAgICAgICAgICAgY29udGV4dC5jYW52YXMud2lkdGggPSBjb250ZXh0U2l6ZTtcclxuICAgICAgICAgICAgY29udGV4dC5jYW52YXMuaGVpZ2h0ID0gY29udGV4dFNpemU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgY29udGV4dFNpemUsIGNvbnRleHRTaXplKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtvbC5FeHRlbnR9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbGV0IGhpdEV4dGVudDtcclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJCdWZmZXJfICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaGl0RXh0ZW50ID0gb2wuZXh0ZW50LmNyZWF0ZUVtcHR5KCk7XHJcbiAgICAgICAgICAgICg8YW55Pm9sLmV4dGVudCkuZXh0ZW5kQ29vcmRpbmF0ZShoaXRFeHRlbnQsIGNvb3JkaW5hdGUpO1xyXG4gICAgICAgICAgICBvbC5leHRlbnQuYnVmZmVyKGhpdEV4dGVudCwgcmVzb2x1dGlvbiAqICh0aGlzLnJlbmRlckJ1ZmZlcl8gKyBoaXRUb2xlcmFuY2UpLCBoaXRFeHRlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG1hc2sgPSAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5SZXBsYXlHcm91cC5nZXRDaXJjbGVBcnJheV8oaGl0VG9sZXJhbmNlKTtcclxuICAgICAgICBsZXQgZGVjbHV0dGVyZWRGZWF0dXJlcztcclxuICAgICAgICAvLyBpZiAodGhpcy5kZWNsdXR0ZXJUcmVlXykge1xyXG4gICAgICAgIC8vICAgICBkZWNsdXR0ZXJlZEZlYXR1cmVzID0gdGhpcy5kZWNsdXR0ZXJUcmVlXy5hbGwoKS5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gZW50cnkudmFsdWU7XHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIHtvbC5GZWF0dXJlfG9sLnJlbmRlci5GZWF0dXJlfSBmZWF0dXJlIEZlYXR1cmUuXHJcbiAgICAgICAgICogQHJldHVybiB7P30gQ2FsbGJhY2sgcmVzdWx0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGhpdERldGVjdGlvbkNhbGxiYWNrKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgbGV0IGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNvbnRleHRTaXplLCBjb250ZXh0U2l6ZSkuZGF0YTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250ZXh0U2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbnRleHRTaXplOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWFza1tpXVtqXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VEYXRhWyhqICogY29udGV4dFNpemUgKyBpKSAqIDQgKyAzXSA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRlY2x1dHRlcmVkRmVhdHVyZXMgfHwgZGVjbHV0dGVyZWRGZWF0dXJlcy5pbmRleE9mKGZlYXR1cmUpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNhbGxiYWNrKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNvbnRleHRTaXplLCBjb250ZXh0U2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGF5SGl0RGV0ZWN0aW9uXyhjb250ZXh0LCB0cmFuc2Zvcm0sIHJvdGF0aW9uLFxyXG4gICAgICAgICAgICBza2lwcGVkRmVhdHVyZXNIYXNoLCBoaXREZXRlY3Rpb25DYWxsYmFjaywgaGl0RXh0ZW50LCBkZWNsdXR0ZXJSZXBsYXlzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcHVibGljIHJlcGxheUN1c3RvbShjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHRyYW5zZm9ybTogYW55LCB2aWV3Um90YXRpb246IG51bWJlciwgc2tpcHBlZEZlYXR1cmVzSGFzaDogYW55LCBvcHRfcmVwbGF5VHlwZXM6IGFueSwgb3B0X2RlY2x1dHRlclJlcGxheXM6IGFueSkge1xyXG4gICAgICAgIC8qKiBAdHlwZSB7QXJyYXkuPG51bWJlcj59ICovXHJcbiAgICAgICAgbGV0IHpzID0gT2JqZWN0LmtleXModGhpcy5yZXBsYXlzQnlaSW5kZXhfKS5tYXAoTnVtYmVyKTtcclxuICAgICAgICB6cy5zb3J0KCg8YW55Pm9sKS5hcnJheS5udW1iZXJTYWZlQ29tcGFyZUZ1bmN0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gc2V0dXAgY2xpcHBpbmcgc28gdGhhdCB0aGUgcGFydHMgb2Ygb3Zlci1zaW1wbGlmaWVkIGdlb21ldHJpZXMgYXJlIG5vdFxyXG4gICAgICAgIC8vIHZpc2libGUgb3V0c2lkZSB0aGUgY3VycmVudCBleHRlbnQgd2hlbiBwYW5uaW5nXHJcbiAgICAgICAgLy8gY29udGV4dC5zYXZlKCk7XHJcbiAgICAgICAgLy8gdGhpcy5jbGlwKGNvbnRleHQsIHRyYW5zZm9ybSk7XHJcblxyXG4gICAgICAgIGxldCByZXBsYXlUeXBlcyA9IG9wdF9yZXBsYXlUeXBlcyA/IG9wdF9yZXBsYXlUeXBlcyA6ICg8YW55Pm9sLnJlbmRlcikucmVwbGF5Lk9SREVSO1xyXG4gICAgICAgIGxldCBpLCBpaSwgaiwgamosIHJlcGxheXMsIHJlcGxheTtcclxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHpzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcclxuICAgICAgICAgICAgbGV0IHpJbmRleEtleSA9IHpzW2ldLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHJlcGxheXMgPSB0aGlzLnJlcGxheXNCeVpJbmRleF9bekluZGV4S2V5XTtcclxuICAgICAgICAgICAgZm9yIChqID0gMCwgamogPSByZXBsYXlUeXBlcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGF5VHlwZSA9IHJlcGxheVR5cGVzW2pdO1xyXG4gICAgICAgICAgICAgICAgcmVwbGF5ID0gcmVwbGF5c1tyZXBsYXlUeXBlXTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXBsYXkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRfZGVjbHV0dGVyUmVwbGF5cyAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAocmVwbGF5VHlwZSA9PT0gKDxhbnk+b2wucmVuZGVyKS5SZXBsYXlUeXBlLklNQUdFIHx8IHJlcGxheVR5cGUgPT09ICg8YW55Pm9sLnJlbmRlcikuUmVwbGF5VHlwZS5URVhUKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVjbHV0dGVyID0gb3B0X2RlY2x1dHRlclJlcGxheXNbekluZGV4S2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWNsdXR0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdF9kZWNsdXR0ZXJSZXBsYXlzW3pJbmRleEtleV0gPSBbcmVwbGF5LCB0cmFuc2Zvcm0uc2xpY2UoMCldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbHV0dGVyLnB1c2gocmVwbGF5LCB0cmFuc2Zvcm0uc2xpY2UoMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5LnJlcGxheShjb250ZXh0LCB0cmFuc2Zvcm0sIHZpZXdSb3RhdGlvbiwgc2tpcHBlZEZlYXR1cmVzSGFzaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBjb250ZXh0LnJlc3RvcmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UmVwbGF5Q3VzdG9tKHpJbmRleDogYW55LCByZXBsYXlUeXBlOiBhbnkpIHtcclxuICAgICAgICBsZXQgekluZGV4S2V5ID0gekluZGV4ICE9PSB1bmRlZmluZWQgPyB6SW5kZXgudG9TdHJpbmcoKSA6IFwiMFwiO1xyXG4gICAgICAgIGxldCByZXBsYXlzID0gdGhpcy5yZXBsYXlzQnlaSW5kZXhfW3pJbmRleEtleV07XHJcbiAgICAgICAgaWYgKHJlcGxheXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXBsYXlzID0ge307XHJcbiAgICAgICAgICAgIHRoaXMucmVwbGF5c0J5WkluZGV4X1t6SW5kZXhLZXldID0gcmVwbGF5cztcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlcGxheSA9IHJlcGxheXNbcmVwbGF5VHlwZV07XHJcbiAgICAgICAgaWYgKHJlcGxheSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxldCBDb25zdHJ1Y3RvciA9IHRoaXMuQkFUQ0hfQ09OU1RSVUNUT1JTX1tyZXBsYXlUeXBlXTtcclxuICAgICAgICAgICAgcmVwbGF5ID0gbmV3IENvbnN0cnVjdG9yKHRoaXMudG9sZXJhbmNlXywgdGhpcy5tYXhFeHRlbnRfLCB0aGlzLmRlY2x1dHRlclRyZWUpO1xyXG5cclxuICAgICAgICAgICAgcmVwbGF5c1tyZXBsYXlUeXBlXSA9IHJlcGxheTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXBsYXk7XHJcbiAgICB9XHJcblxyXG4gICAgQkFUQ0hfQ09OU1RSVUNUT1JTX0NVU1RPTSA9IHtcclxuICAgICAgICBcIkNpcmNsZVwiOiAoPGFueT5vbC5yZW5kZXIpLndlYmdsLlBvbHlnb25SZXBsYXksXHJcbiAgICAgICAgXCJEZWZhdWx0XCI6ICg8YW55Pm9sLnJlbmRlcikud2ViZ2wuUmVwbGF5LFxyXG4gICAgICAgIFwiSW1hZ2VcIjogKDxhbnk+b2wucmVuZGVyKS53ZWJnbC5JbWFnZVJlcGxheSxcclxuICAgICAgICBcIkxpbmVTdHJpbmdcIjogKDxhbnk+b2wucmVuZGVyKS53ZWJnbC5MaW5lU3RyaW5nUmVwbGF5LFxyXG4gICAgICAgIFwiUG9seWdvblwiOiAoPGFueT5vbC5yZW5kZXIpLndlYmdsLlBvbHlnb25SZXBsYXksXHJcbiAgICAgICAgXCJUZXh0XCI6ICg8YW55Pm9sLnJlbmRlcikud2ViZ2wuVGV4dFJlcGxheVxyXG4gICAgfTtcclxufSIsIlxyXG5leHBvcnQgY2xhc3MgR2VvVmVjdG9yVGlsZVNvdXJjZSBleHRlbmRzIChvbC5zb3VyY2UuVmVjdG9yVGlsZSBhcyB7IG5ldyhwOiBvbHguc291cmNlLlZlY3RvclRpbGVPcHRpb25zKTogYW55OyB9KSB7XHJcbiAgICBnZW9Gb3JtYXQ6IGFueTtcclxuICAgIGlzTXVsdGl0aHJlYWQ6IGJvb2xlYW47XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5tYXhEYXRhWm9vbSA9IG9wdGlvbnMubWF4RGF0YVpvb207XHJcbiAgICAgICAgaWYgKG9wdGlvbnNbXCJ0aWxlVXJsRnVuY3Rpb25cIl0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRpbGVVcmxGdW5jdGlvbih0aGlzLmdldEdlb1RpbGVVcmxGdW5jdGlvbigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IG9wdGlvbnMuY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5jbGllbnRTZWNyZXQgPSBvcHRpb25zLmNsaWVudFNlY3JldDtcclxuICAgICAgICB0aGlzLmdlb0Zvcm1hdCA9IG9wdGlvbnMuZm9ybWF0O1xyXG4gICAgICAgIHRoaXMudGlsZUxvYWRGdW5jdGlvbiA9IHRoaXMudmVjdG9yVGlsZUxvYWRGdW5jdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaXNNdWx0aXRocmVhZCA9IG9wdGlvbnNbXCJtdWx0aXRocmVhZFwiXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdGlvbnNbXCJtdWx0aXRocmVhZFwiXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRHZW9Gb3JtYXQoKTogYW55IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZW9Gb3JtYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEdlb1RpbGVVcmxGdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgelJlZ0V4ID0gL1xce3pcXH0vZztcclxuICAgICAgICBsZXQgeFJlZ0V4ID0gL1xce3hcXH0vZztcclxuICAgICAgICBsZXQgeVJlZ0V4ID0gL1xce3lcXH0vZztcclxuICAgICAgICBsZXQgZGFzaFlSZWdFeCA9IC9cXHsteVxcfS9nO1xyXG4gICAgICAgIGxldCB1cmxzID0gdGhpcy51cmxzO1xyXG4gICAgICAgIGxldCB0aWxlR3JpZCA9IHRoaXMudGlsZUdyaWQ7XHJcbiAgICAgICAgbGV0IG1heERhdGFab29tID0gdGhpcy5tYXhEYXRhWm9vbTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aWxlQ29vcmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdENvb3JkID0gW3RpbGVDb29yZFswXSwgdGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl1dO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1heERhdGFab29tICYmIHJlcXVlc3RDb29yZFswXSA+IG1heERhdGFab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlcXVlc3RDb29yZFswXSAhPT0gbWF4RGF0YVpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdENvb3JkWzBdIC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb29yZFsxXSA9IE1hdGguZmxvb3IocmVxdWVzdENvb3JkWzFdIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb29yZFsyXSA9IE1hdGguZmxvb3IocmVxdWVzdENvb3JkWzJdIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGggPSAoPGFueT5vbCkudGlsZWNvb3JkLmhhc2godGlsZUNvb3JkKTtcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9ICg8YW55Pm9sKS5tYXRoLm1vZHVsbyhoLCB1cmxzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSB1cmxzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKHpSZWdFeCwgcmVxdWVzdENvb3JkWzBdLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoeFJlZ0V4LCByZXF1ZXN0Q29vcmRbMV0udG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSh5UmVnRXgsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHkgPSAtcmVxdWVzdENvb3JkWzJdIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKGRhc2hZUmVnRXgsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHogPSByZXF1ZXN0Q29vcmRbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICg8YW55Pm9sKS5hc3NlcnRzLmFzc2VydChyYW5nZSwgNTUpOyAvLyBUaGUgey15fSBwbGFjZWhvbGRlciByZXF1aXJlcyBhIHRpbGUgZ3JpZCB3aXRoIGV4dGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IHJhbmdlLmdldEhlaWdodCgpICsgcmVxdWVzdENvb3JkWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdmVjdG9yVGlsZUxvYWRGdW5jdGlvbih0aWxlOiBvbC5WZWN0b3JUaWxlLCB1cmw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBsb2FkZXIgPSB0aGlzLmxvYWRGZWF0dXJlc1hocihcclxuICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICB0aWxlLmdldEZvcm1hdCgpLFxyXG4gICAgICAgICAgICAoPGFueT50aWxlKS5vbkxvYWQuYmluZCh0aWxlKSxcclxuICAgICAgICAgICAgKDxhbnk+dGlsZSkub25FcnJvci5iaW5kKHRpbGUpLFxyXG4gICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aWxlLnNldExvYWRlcihsb2FkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRJREFuZFNlY3JldChzZWxmKSB7XHJcbiAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIGxldCB1cmwgPSAnaHR0cHM6Ly9naXNzZXJ2ZXIudGhpbmtnZW8uY29tL2FwaS92MS9hdXRoL3Rva2VuJztcclxuICAgICAgICBsZXQgY29udGVudCA9ICdBcGlLZXk9JyArIHNlbGYuY2xpZW50SWQgKyAnJkFwaVNlY3JldD0nICsgc2VsZi5jbGllbnRTZWNyZXQ7XHJcblxyXG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIGZhbHNlKTtcclxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xyXG4gICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQ6IGFueSkge1xyXG4gICAgICAgICAgICBpZiAoIXhoci5zdGF0dXMgfHwgeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRva2VuID0gSlNPTi5wYXJzZSg8YW55Pnhoci5yZXNwb25zZVRleHQpLmRhdGEuYWNjZXNzX3Rva2VuO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50b2tlbiA9IHRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICB4aHIuc2VuZChjb250ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9hZEZlYXR1cmVzWGhyKHVybDogc3RyaW5nLCBmb3JtYXQ6IGFueSwgc3VjY2VzczogYW55LCBmYWlsdXJlOiBhbnksIHNlbGY6IGFueSkge1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZXh0ZW50OiBhbnksIHJlc29sdXRpb246IGFueSwgcHJvamVjdGlvbjogYW55KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlVGlsZSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4RGF0YVpvb20gPSBmb3JtYXQubWF4RGF0YVpvb207XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdFRpbGVDb29yZCA9IFt0aGlzLnRpbGVDb29yZFswXSwgdGhpcy50aWxlQ29vcmRbMV0sIHRoaXMudGlsZUNvb3JkWzJdXTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXhEYXRhWm9vbSAmJiByZXF1ZXN0VGlsZUNvb3JkWzBdID4gbWF4RGF0YVpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVxdWVzdFRpbGVDb29yZFswXSAhPT0gbWF4RGF0YVpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFRpbGVDb29yZFswXSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VGlsZUNvb3JkWzFdID0gTWF0aC5mbG9vcihyZXF1ZXN0VGlsZUNvb3JkWzFdIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUaWxlQ29vcmRbMl0gPSBNYXRoLmZsb29yKHJlcXVlc3RUaWxlQ29vcmRbMl0gLyAyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RUaWxlQ29vcmQgPSByZXF1ZXN0VGlsZUNvb3JkO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB0aWxlR3JpZD1zZWxmLmdldFRpbGVHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGlsZUV4dGVudD0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHNvdXJjZVRpbGUudGlsZUNvb3JkKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oc291cmNlVGlsZS50aWxlQ29vcmRbMF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjYWxsYmFjayA9IGZ1bmN0aW9uICh0aWxlLCBjYWxsYmFja0Z1bmN0aW9uLCBzb3VyY2VQcm9qZWN0aW9uLCBsYXN0RXh0ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tGdW5jdGlvbi5jYWxsKHRpbGUsIHNvdXJjZVByb2plY3Rpb24sIGxhc3RFeHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgaGFzUmVxdWVzdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaGFzUmVxdWVzdGVkID0gZm9ybWF0LnJlZ2lzdGVyVGlsZUxvYWRFdmVudCh0aGlzLCBzdWNjZXNzLCBmYWlsdXJlLCBjYWxsYmFjayk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXNSZXF1ZXN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDbGllbnQgSUQgYW5kIENsaWVudCBTZWNyZXQgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ2FwaUtleScpID09PSAtMSAmJiBzZWxmLmNsaWVudElkICYmIHNlbGYuY2xpZW50U2VjcmV0ICYmICFzZWxmLnRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0SURBbmRTZWNyZXQoc2VsZik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0LmlzTXVsdGl0aHJlYWQgJiYgZm9ybWF0Lndvcmtlck1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcXVlc3RJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0eXBlb2YgdXJsID09PSBcImZ1bmN0aW9uXCIgPyAoPGFueT51cmwpKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikgOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBmb3JtYXQuZ2V0VHlwZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZUNvb3JkOiB0aGlzLnRpbGVDb29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb29yZDogcmVxdWVzdFRpbGVDb29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYWxpc3Q6IGZvcm1hdC5taW5pbWFsaXN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4RGF0YVpvb206IGZvcm1hdC5tYXhEYXRhWm9vbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdElkOiAoPGFueT5vbCkuZ2V0VWlkKGZvcm1hdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllck5hbWU6IGZvcm1hdC5sYXllck5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogc2VsZi50b2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlY3RvclRpbGVEYXRhQ2FoY2VTaXplOiBmb3JtYXRbXCJ2ZWN0b3JUaWxlRGF0YUNhaGNlU2l6ZVwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZTogc291cmNlVGlsZS50aWxlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aWxlQ29vcmRXaXRoU291cmNlQ29vcmQ6IHNvdXJjZVRpbGUudGlsZUNvb3JkV2l0aFNvdXJjZUNvb3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjdG9ySW1hZ2VUaWxlQ29vcmQ6IHNvdXJjZVRpbGUudmVjdG9ySW1hZ2VUaWxlQ29vcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlRXh0ZW50OnRpbGVFeHRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUmVzb2x1dGlvbjp0aWxlUmVzb2x1dGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTaXplOiB0aGlzLmZvcm1hdF8uc291cmNlLnRpbGVHcmlkLnRpbGVTaXplXyAqIHNvdXJjZVRpbGUucGl4ZWxSYXRpb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxvYWRlZENhbGxiYWNrID0gZnVuY3Rpb24gKGRhdGEsIG1ldGhvZEluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXF1ZXN0S2V5ID0gZGF0YS5yZXF1ZXN0S2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVMb2FkRXZlbnRJbmZvcyA9IGZvcm1hdC5yZWdpc3RlcmVkTG9hZEV2ZW50c1tyZXF1ZXN0S2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmb3JtYXQucmVnaXN0ZXJlZExvYWRFdmVudHNbcmVxdWVzdEtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbGVMb2FkRXZlbnRJbmZvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb2FkRXZlbnRJbmZvID0gdGlsZUxvYWRFdmVudEluZm9zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFdmVudEluZm8udGlsZS53b3JrZXJJZCA9IG1ldGhvZEluZm8ud29ya2VySWQ7IC8vIEN1cnJlbnRseSwgd2UganVzdCBvbmUgd2ViIHdvcmtlciBmb3Igb25lIGxheWVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCB0aWxlS2V5ID0gXCJcIiArIGxvYWRFdmVudEluZm8udGlsZS50aWxlQ29vcmRbMV0gKyBcIixcIiArIGxvYWRFdmVudEluZm8udGlsZS50aWxlQ29vcmRbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUUgRXJpY1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gXCJjYW5jZWxcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRXZlbnRJbmZvLnRpbGUuc2V0U3RhdGUoKDxhbnk+b2wpLlRpbGVTdGF0ZS5DQU5DRUwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5zdGF0dXMgPT09IFwic3VjY2VlZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFdmVudEluZm8uY2FsbGJhY2sobG9hZEV2ZW50SW5mby50aWxlLCBsb2FkRXZlbnRJbmZvLnN1Y2Nlc3NGdW5jdGlvbiwgZm9ybWF0LnJlYWRQcm9qZWN0aW9uKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEV2ZW50SW5mby5jYWxsYmFjayhsb2FkRXZlbnRJbmZvLnRpbGUsIGxvYWRFdmVudEluZm8uZmFpbHVyZUZ1bmN0aW9uLCBmb3JtYXQucmVhZFByb2plY3Rpb24oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQud29ya2VyTWFuYWdlci5wb3N0TWVzc2FnZSh0aGlzLnRpbGVDb29yZCArICg8YW55Pm9sKS5nZXRVaWQobG9hZGVkQ2FsbGJhY2spLCBcInJlcXVlc3RcIiwgcmVxdWVzdEluZm8sIGxvYWRlZENhbGxiYWNrLCB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aWxlQ29vcmQgPSB0aGlzLnRpbGVDb29yZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGUgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdXJsID09PSBcImZ1bmN0aW9uXCIgPyAoPGFueT51cmwpKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikgOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHNlbGYudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0LmdldFR5cGUoKSA9PT0gKDxhbnk+b2wpLmZvcm1hdC5Gb3JtYXRUeXBlLkFSUkFZX0JVRkZFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXhoci5zdGF0dXMgfHwgeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0eXBlID0gZm9ybWF0LmdldFR5cGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge0RvY3VtZW50fE5vZGV8T2JqZWN0fHN0cmluZ3x1bmRlZmluZWR9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNvdXJjZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gKDxhbnk+b2wpLmZvcm1hdC5Gb3JtYXRUeXBlLkpTT04gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9PT0gKDxhbnk+b2wpLmZvcm1hdC5Gb3JtYXRUeXBlLlRFWFQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0geGhyLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICg8YW55Pm9sKS5mb3JtYXQuRm9ybWF0VHlwZS5YTUwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0geGhyLnJlc3BvbnNlWE1MO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0gKDxhbnk+b2wpLnhtbC5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gKDxhbnk+b2wpLmZvcm1hdC5Gb3JtYXRUeXBlLkFSUkFZX0JVRkZFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSAvKiogQHR5cGUge0FycmF5QnVmZmVyfSAqLyAoeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZEZlYXR1cmVcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZm9ybWF0LnJlYWRGZWF0dXJlc0FuZENyZWF0ZUluc3RydWN0c05ldyhzb3VyY2UsIHJlcXVlc3RUaWxlQ29vcmQsIHRpbGVDb29yZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxsIExvYWQgRXZlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcXVlc3RLZXkgPSB0aWxlLnJlcXVlc3RUaWxlQ29vcmQuam9pbihcIixcIikgKyBcIixcIiArIHRpbGUudGlsZUNvb3JkWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGlsZUxvYWRFdmVudEluZm9zID0gZm9ybWF0LnJlZ2lzdGVyZWRMb2FkRXZlbnRzW3JlcXVlc3RLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgZm9ybWF0LnJlZ2lzdGVyZWRMb2FkRXZlbnRzW3JlcXVlc3RLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbGVMb2FkRXZlbnRJbmZvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxvYWRFdmVudEluZm8gPSB0aWxlTG9hZEV2ZW50SW5mb3NbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVLZXkgPSBcIlwiICsgbG9hZEV2ZW50SW5mby50aWxlLnRpbGVDb29yZFsxXSArIFwiLFwiICsgbG9hZEV2ZW50SW5mby50aWxlLnRpbGVDb29yZFsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFdmVudEluZm8udGlsZS5mZWF0dXJlc0FuZEluc3RydWN0cyA9IHsgZmVhdHVyZXM6IGRhdGFbMF0sIGluc3RydWN0czogZGF0YVsxXVt0aWxlS2V5XSB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRXZlbnRJbmZvLmNhbGxiYWNrKGxvYWRFdmVudEluZm8udGlsZSwgbG9hZEV2ZW50SW5mby5zdWNjZXNzRnVuY3Rpb24sIGZvcm1hdC5yZWFkUHJvamVjdGlvbigpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWlsdXJlLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tcInhoclwiXSA9IHhocjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0LnNvdXJjZS5kaXNwYXRjaEV2ZW50KG5ldyAoPGFueT5vbC5WZWN0b3JUaWxlKS5FdmVudChcInNlbmRpbmdUaWxlUmVxdWVzdFwiLCB4aHIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVGV4dExhYmVsaW5nU3RyYXRlZ3kgfSBmcm9tIFwiLi90ZXh0TGFiZWxpbmdTdHJhdGVneVwiO1xyXG5pbXBvcnQgeyBHZW9UZXh0U3R5bGUgfSBmcm9tIFwiLi9nZW9UZXh0U3R5bGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneSBleHRlbmRzIFRleHRMYWJlbGluZ1N0cmF0ZWd5IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5tYXJrTG9jYXRpb25Db3JlID0gdGhpcy5tYXJrTG9jYXRpb25Db3JlQ3VzdG9tO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBtYXJrTG9jYXRpb25Db3JlQ3VzdG9tKGZsYXRDb29yZGluYXRlczogYW55LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgcmVzb2x1dGlvbjogYW55LCBnZW9tZXRyeVR5cGU6IGFueSwgdGV4dFN0eWxlOiBHZW9UZXh0U3R5bGUsIGdyaWQ6IGFueSwgZnJhbWVTdGF0ZTogb2x4LkZyYW1lU3RhdGUpIHtcclxuICAgICAgICBzd2l0Y2ggKGdlb21ldHJ5VHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5QT0lOVDpcclxuICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLkNJUkNMRTpcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzT3ZlcmxhcHBpbmcoZmxhdENvb3JkaW5hdGVzLCB3aWR0aCwgaGVpZ2h0LCB0ZXh0U3R5bGUubWFyZ2luLCB0ZXh0U3R5bGUubWluRGlzdGFuY2UsIHRleHRTdHlsZS5taW5QYWRkaW5nLCB0ZXh0U3R5bGUuc3BhY2luZywgZ3JpZCwgZnJhbWVTdGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLm1vdmVQb2ludExhYmVsKGZsYXRDb29yZGluYXRlcywgd2lkdGgsIGhlaWdodCwgcmVzb2x1dGlvbiwgdGV4dFN0eWxlLCBncmlkLCBmcmFtZVN0YXRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5MSU5FX1NUUklORzpcclxuICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLlBPTFlHT046XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc092ZXJsYXBwaW5nKGZsYXRDb29yZGluYXRlcywgd2lkdGgsIGhlaWdodCwgdGV4dFN0eWxlLm1hcmdpbiwgdGV4dFN0eWxlLm1pbkRpc3RhbmNlLCB0ZXh0U3R5bGUubWluUGFkZGluZywgdGV4dFN0eWxlLnNwYWNpbmcsIGdyaWQsIGZyYW1lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZsYXRDb29yZGluYXRlcztcclxuICAgIH1cclxuXHJcbiAgICBtb3ZlUG9pbnRMYWJlbChmbGF0Q29vcmRpbmF0ZXM6IGFueSwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHJlc29sdXRpb246IGFueSwgdGV4dFN0eWxlOiBHZW9UZXh0U3R5bGUsIGdyaWQ6IGFueSwgZnJhbWVTdGF0ZTogb2x4LkZyYW1lU3RhdGUpIHtcclxuICAgICAgICBsZXQgZ3JpZFNpemUgPSA1MDtcclxuICAgICAgICBsZXQgZGlzdGFuY2UgPSBncmlkU2l6ZSAqIHJlc29sdXRpb247XHJcblxyXG4gICAgICAgIGlmICh0ZXh0U3R5bGUucGxhY2VtZW50cykge1xyXG4gICAgICAgICAgICBsZXQgcGxhY2VtZW50cyA9IHRleHRTdHlsZS5wbGFjZW1lbnRzLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgcGxhY2VtZW50IG9mIHBsYWNlbWVudHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXdGbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLmdldE1vdmVkUG9zaXRpb24oZmxhdENvb3JkaW5hdGVzLCBwbGFjZW1lbnQsIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc092ZXJsYXBwaW5nKG5ld0ZsYXRDb29yZGluYXRlcywgd2lkdGgsIGhlaWdodCwgdGV4dFN0eWxlLm1hcmdpbiwgdGV4dFN0eWxlLm1pbkRpc3RhbmNlLCB0ZXh0U3R5bGUubWluUGFkZGluZywgdGV4dFN0eWxlLnNwYWNpbmcsIGdyaWQsIGZyYW1lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0ZsYXRDb29yZGluYXRlcztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRNb3ZlZFBvc2l0aW9uKGZsYXRDb29yZGluYXRlczogYW55LCBwbGFjZW1lbnQ6IHN0cmluZywgZGlzdGFuY2U6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBuZXdGbGF0Q29vcmRpbmF0ZXM6IGFueTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChwbGFjZW1lbnQpIHtcclxuICAgICAgICAgICAgY2FzZSBcIlVSXCI6XHJcbiAgICAgICAgICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLm1vdmVUb1VSKGZsYXRDb29yZGluYXRlcywgZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJVXCI6XHJcbiAgICAgICAgICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLm1vdmVUb1UoZmxhdENvb3JkaW5hdGVzLCBkaXN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlVMXCI6XHJcbiAgICAgICAgICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLm1vdmVUb1VMKGZsYXRDb29yZGluYXRlcywgZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJCXCI6XHJcbiAgICAgICAgICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLm1vdmVUb0IoZmxhdENvb3JkaW5hdGVzLCBkaXN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkJSXCI6XHJcbiAgICAgICAgICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLm1vdmVUb0JSKGZsYXRDb29yZGluYXRlcywgZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJCTFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzID0gdGhpcy5tb3ZlVG9CTChmbGF0Q29vcmRpbmF0ZXMsIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiTFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzID0gdGhpcy5tb3ZlVG9MKGZsYXRDb29yZGluYXRlcywgZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJSXCI6XHJcbiAgICAgICAgICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMgPSB0aGlzLm1vdmVUb1IoZmxhdENvb3JkaW5hdGVzLCBkaXN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvVVIoZmxhdENvb3JkaW5hdGVzOiBhbnksIGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdICsgZGlzdGFuY2UpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1sxXSArIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMl0pO1xyXG4gICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvVShmbGF0Q29vcmRpbmF0ZXM6IGFueSwgZGlzdGFuY2U6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBuZXdGbGF0Q29vcmRpbmF0ZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0pO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1sxXSArIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMl0pO1xyXG4gICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvVUwoZmxhdENvb3JkaW5hdGVzOiBhbnksIGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdIC0gZGlzdGFuY2UpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1sxXSArIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMl0pO1xyXG4gICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvQihmbGF0Q29vcmRpbmF0ZXM6IGFueSwgZGlzdGFuY2U6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBuZXdGbGF0Q29vcmRpbmF0ZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0pO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1sxXSAtIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMl0pO1xyXG4gICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvQlIoZmxhdENvb3JkaW5hdGVzOiBhbnksIGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdICsgZGlzdGFuY2UpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1sxXSAtIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMl0pO1xyXG4gICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvQkwoZmxhdENvb3JkaW5hdGVzOiBhbnksIGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdIC0gZGlzdGFuY2UpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1sxXSAtIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMl0pO1xyXG4gICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvTChmbGF0Q29vcmRpbmF0ZXM6IGFueSwgZGlzdGFuY2U6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBuZXdGbGF0Q29vcmRpbmF0ZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0gLSBkaXN0YW5jZSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzFdKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMl0pO1xyXG4gICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVRvUihmbGF0Q29vcmRpbmF0ZXM6IGFueSwgZGlzdGFuY2U6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBuZXdGbGF0Q29vcmRpbmF0ZXMgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMF0gKyBkaXN0YW5jZSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzFdKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMl0pO1xyXG4gICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBHZW9TdHlsZSB9IGZyb20gXCIuL2dlb1N0eWxlXCI7XHJcbmltcG9ydCB7IEdlb0JydXNoIH0gZnJvbSBcIi4uL3N0eWxlL2dlb0JydXNoXCI7XHJcbmltcG9ydCB7IEdlb0JydXNoVHlwZSB9IGZyb20gXCIuL2dlb0JydXNoVHlwZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb0FyZWFTdHlsZSBleHRlbmRzIEdlb1N0eWxlIHtcclxuXHJcbiAgICBzdGF0aWMgYXJlYVN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICBmaWxsOiBuZXcgb2wuc3R5bGUuRmlsbCh7fSksXHJcbiAgICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHt9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgc3RhdGljIGFyZWFTaGFkb3dTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe30pLFxyXG4gICAgfSk7XHJcblxyXG4gICAgYnJ1c2hUeXBlOiBzdHJpbmc7XHJcbiAgICByb3RhdGVBbmdsZTogbnVtYmVyO1xyXG4gICAgZHg6IG51bWJlcjtcclxuICAgIGR5OiBudW1iZXI7XHJcbiAgICBmaWxsOiBzdHJpbmc7XHJcbiAgICBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nO1xyXG4gICAgZ2FtbWE6IHN0cmluZztcclxuICAgIGdlb21ldHJ5VHJhbnNmb3JtOiBzdHJpbmc7XHJcbiAgICBoYXRjaFN0eWxlOiBzdHJpbmc7XHJcbiAgICBvcGFjaXR5OiBudW1iZXI7XHJcbiAgICBvdXRsaW5lQ29sb3I6IHN0cmluZztcclxuICAgIG91dGxpbmVEYXNoQXJyYXk6IGFueTtcclxuICAgIG91dGxpbmVPcGFjaXR5OiBudW1iZXI7XHJcbiAgICBvdXRsaW5lV2lkdGg6IG51bWJlcjtcclxuICAgIGxpbmVhckdyYWRpZW50OiBzdHJpbmc7XHJcbiAgICByYWRpYWxHcmFkaWVudDogc3RyaW5nO1xyXG4gICAgdGV4dHVyZUZpbGU6IHN0cmluZztcclxuICAgIHNoYWRvd0NvbG9yOiBzdHJpbmc7XHJcbiAgICBzaGFkb3dEeDogbnVtYmVyO1xyXG4gICAgc2hhZG93RHk6IG51bWJlcjtcclxuXHJcbiAgICBicnVzaE9wdGlvbnM6IGFueTtcclxuICAgIGdlb0JydXNoOiBzdHJpbmc7XHJcbiAgICBjb252ZXJ0ZWRPdXRsaW5lQ29sb3I6IHN0cmluZztcclxuICAgIGNvbnZlcnRlZE91dGxpbmVEYXNoQXJyYXk6IG51bWJlcltdO1xyXG4gICAgY29udmVydGVkU2hhZG93Q29sb3I6IHN0cmluZztcclxuICAgIGdlb21ldHJ5VHJhbnNmb3JtVmFsdWU6IGFueTtcclxuICAgIHNoYWRvd1RyYW5zbGF0ZTogc3RyaW5nO1xyXG4gICAgc2hhZG93VHJhbnNsYXRlVmFsdWVCeVJlc29sdXRpb246IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzdHlsZUpzb24/OiBhbnkpIHtcclxuICAgICAgICBzdXBlcihzdHlsZUpzb24pO1xyXG4gICAgICAgIGlmIChzdHlsZUpzb24pIHtcclxuICAgICAgICAgICAgdGhpcy5icnVzaFR5cGUgPSBzdHlsZUpzb25bXCJwb2x5Z29uLWJydXNoLXR5cGVcIl07XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRlQW5nbGUgPSBzdHlsZUpzb25bXCJwb2x5Z29uLXJvdGF0ZS1hbmdsZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5keCA9IHN0eWxlSnNvbltcInBvbHlnb24tZHhcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZHkgPSBzdHlsZUpzb25bXCJwb2x5Z29uLWR5XCJdO1xyXG4gICAgICAgICAgICB0aGlzLmZpbGwgPSBzdHlsZUpzb25bXCJwb2x5Z29uLWZpbGxcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZm9yZWdyb3VuZEZpbGwgPSBzdHlsZUpzb25bXCJwb2x5Z29uLWZvcmVncm91bmQtZmlsbFwiXTtcclxuICAgICAgICAgICAgdGhpcy5nYW1tYSA9IHN0eWxlSnNvbltcInBvbHlnb24tZ2FtbWFcIl0gPyBzdHlsZUpzb25bXCJwb2x5Z29uLWdhbW1hXCJdIDogdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeVRyYW5zZm9ybSA9IHN0eWxlSnNvbltcInBvbHlnb24tZ2VvbWV0cnktdHJhbnNmb3JtXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmhhdGNoU3R5bGUgPSBzdHlsZUpzb25bXCJwb2x5Z29uLWhhdGNoLXN0eWxlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm9wYWNpdHkgPSBzdHlsZUpzb25bXCJwb2x5Z29uLW9wYWNpdHlcIl07XHJcbiAgICAgICAgICAgIHRoaXMub3V0bGluZUNvbG9yID0gc3R5bGVKc29uW1wicG9seWdvbi1vdXRsaW5lLWNvbG9yXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm91dGxpbmVEYXNoQXJyYXkgPSBzdHlsZUpzb25bXCJwb2x5Z29uLW91dGxpbmUtZGFzaGFycmF5XCJdO1xyXG4gICAgICAgICAgICB0aGlzLm91dGxpbmVPcGFjaXR5ID0gc3R5bGVKc29uW1wicG9seWdvbi1vdXRsaW5lLW9wYWNpdHlcIl07XHJcbiAgICAgICAgICAgIHRoaXMub3V0bGluZVdpZHRoID0gc3R5bGVKc29uW1wicG9seWdvbi1vdXRsaW5lLXdpZHRoXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVhckdyYWRpZW50ID0gc3R5bGVKc29uW1wicG9seWdvbi1saW5lYXItZ3JhZGllbnRcIl07XHJcbiAgICAgICAgICAgIHRoaXMucmFkaWFsR3JhZGllbnQgPSBzdHlsZUpzb25bXCJwb2x5Z29uLXJhZGlhbC1ncmFkaWVudFwiXTtcclxuICAgICAgICAgICAgdGhpcy50ZXh0dXJlRmlsZSA9IHN0eWxlSnNvbltcInBvbHlnb24tdGV4dHVyZS1maWxlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnNoYWRvd0NvbG9yID0gc3R5bGVKc29uW1wicG9seWdvbi1zaGFkb3ctY29sb3JcIl07XHJcbiAgICAgICAgICAgIHRoaXMuc2hhZG93RHggPSBzdHlsZUpzb25bXCJwb2x5Z29uLXNoYWRvdy1keFwiXTtcclxuICAgICAgICAgICAgdGhpcy5zaGFkb3dEeSA9IHN0eWxlSnNvbltcInBvbHlnb24tc2hhZG93LWR5XCJdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ29yZSgpIHtcclxuICAgICAgICB0aGlzLmJydXNoVHlwZSA9IHRoaXMuYnJ1c2hUeXBlIHx8IFwic29saWRcIjtcclxuICAgICAgICB0aGlzLmJydXNoT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgZmlsbENvbG9yOiB0aGlzLmZpbGwsXHJcbiAgICAgICAgICAgIGZpbGxPcGFjaXR5OiB0aGlzLm9wYWNpdHksXHJcbiAgICAgICAgICAgIGxpbmVhckdyYWRpZW50OiB0aGlzLmxpbmVhckdyYWRpZW50LFxyXG4gICAgICAgICAgICByYWRpYWxHcmFkaWVudDogdGhpcy5yYWRpYWxHcmFkaWVudCxcclxuICAgICAgICAgICAgdGV4dHVyZUZpbGU6IHRoaXMudGV4dHVyZUZpbGUsXHJcbiAgICAgICAgICAgIGZvcmVncm91bmRGaWxsOiB0aGlzLmZvcmVncm91bmRGaWxsLFxyXG4gICAgICAgICAgICBoYXRjaFN0eWxlOiB0aGlzLmhhdGNoU3R5bGVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5VHJhbnNmb3JtVmFsdWUgPSB0aGlzLmdldFRyYW5zZm9ybVZhbHVlcyh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmJydXNoVHlwZSA9PT0gXCJzb2xpZFwiIHx8IHRoaXMuYnJ1c2hUeXBlID09PSBcImhhdGNoXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5nZW9CcnVzaCA9IEdlb0JydXNoLmNyZWF0ZUJydXNoQnlUeXBlKHRoaXMuYnJ1c2hUeXBlLCBudWxsLCBudWxsLCB0aGlzLmJydXNoT3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vdXRsaW5lQ29sb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZWRPdXRsaW5lQ29sb3IgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLm91dGxpbmVDb2xvciwgdGhpcy5vdXRsaW5lT3BhY2l0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm91dGxpbmVEYXNoQXJyYXkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZWRPdXRsaW5lRGFzaEFycmF5ID0gdGhpcy5vdXRsaW5lRGFzaEFycmF5LnNwbGl0KFwiLFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2hhZG93Q29sb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZWRTaGFkb3dDb2xvciA9IEdlb1N0eWxlLnRvUkdCQUNvbG9yKHRoaXMuc2hhZG93Q29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNoYWRvd1RyYW5zbGF0ZVZhbHVlQnlSZXNvbHV0aW9uID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHJhbnNmb3JtVmFsdWVzKHRyYW5zZm9ybTogc3RyaW5nKTogYW55IHtcclxuICAgICAgICAvLyBnZXQgdHJhbnNmb3JtIHZhbHVlcyB3aGljaCBsb29rIGxpa2UgdHJhbnNmb3JtKHZhbHVlMSwgdmFsdWUyKVxyXG4gICAgICAgIGxldCBzdGFydCA9IHRyYW5zZm9ybS5pbmRleE9mKFwiKFwiKTtcclxuICAgICAgICBsZXQgZW5kID0gdHJhbnNmb3JtLmluZGV4T2YoXCIpXCIpO1xyXG4gICAgICAgIGxldCB2YWx1ZVN0cmluZyA9IHRyYW5zZm9ybS5zdWJzdHJpbmcoc3RhcnQgKyAxLCBlbmQpO1xyXG5cclxuICAgICAgICBsZXQgdmFsdWVzID0gW107XHJcbiAgICAgICAgaWYgKHZhbHVlU3RyaW5nLmluY2x1ZGVzKFwiLFwiKSkge1xyXG4gICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZVN0cmluZy5zcGxpdChcIixcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWVTdHJpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBHZXRUcmFuc2Zvcm1lZENvb3JkaW5hdGVzKGZlYXR1cmUpIHtcclxuICAgICAgICBsZXQgdG1wRmxhdENvb3JkaW5hdGVzID0gZmVhdHVyZS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICBsZXQgdG1wQ29vcmRpbmF0ZXM6IG9sLkNvb3JkaW5hdGVbXVtdID0gW1tdXTtcclxuICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG1wRmxhdENvb3JkaW5hdGVzLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIHRtcENvb3JkaW5hdGVzW2luZGV4XSB8fCAodG1wQ29vcmRpbmF0ZXNbaW5kZXhdID0gW10pO1xyXG4gICAgICAgICAgICB0bXBDb29yZGluYXRlc1tpbmRleF0ucHVzaChbdG1wRmxhdENvb3JkaW5hdGVzW2ldLCB0bXBGbGF0Q29vcmRpbmF0ZXNbaSArIDFdXSk7XHJcbiAgICAgICAgICAgIGlmICh0bXBDb29yZGluYXRlc1tpbmRleF0ubGVuZ3RoID4gMyAmJiB0bXBDb29yZGluYXRlc1tpbmRleF1bMF1bMF0gPT09IHRtcEZsYXRDb29yZGluYXRlc1tpXSAmJiB0bXBDb29yZGluYXRlc1tpbmRleF1bMF1bMV0gPT09IHRtcEZsYXRDb29yZGluYXRlc1tpICsgMV0pIHtcclxuICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGdlb21ldHJ5ID0gbmV3IG9sLmdlb20uUG9seWdvbih0bXBDb29yZGluYXRlcywgXCJYWVwiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0uaW5kZXhPZihcInRyYW5zbGF0ZVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICBnZW9tZXRyeS50cmFuc2xhdGUoK3RoaXMuZ2VvbWV0cnlUcmFuc2Zvcm1WYWx1ZVswXS50cmltKCksICt0aGlzLmdlb21ldHJ5VHJhbnNmb3JtVmFsdWVbMV0udHJpbSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwic2NhbGVcIikgPT09IDApIHtcclxuICAgICAgICAgICAgZ2VvbWV0cnkuc2NhbGUoK3RoaXMuZ2VvbWV0cnlUcmFuc2Zvcm1WYWx1ZVswXS50cmltKCksICt0aGlzLmdlb21ldHJ5VHJhbnNmb3JtVmFsdWVbMV0udHJpbSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwicm90YXRlXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGxldCBjZW50ZXIgPSBvbC5leHRlbnQuZ2V0Q2VudGVyKGdlb21ldHJ5LmdldEV4dGVudCgpKTtcclxuICAgICAgICAgICAgbGV0IGFuZ2xlID0gK3RoaXMuZ2VvbWV0cnlUcmFuc2Zvcm1WYWx1ZVswXS50cmltKCkgKiBNYXRoLlBJIC8gMTgwO1xyXG4gICAgICAgICAgICBnZW9tZXRyeS5yb3RhdGUoYW5nbGUsIGNlbnRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0uaW5kZXhPZihcInNrZXdcIikgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5za2V3R2VvbWV0cnkoZ2VvbWV0cnksICt0aGlzLmdlb21ldHJ5VHJhbnNmb3JtVmFsdWVbMF0udHJpbSgpLCArdGhpcy5nZW9tZXRyeVRyYW5zZm9ybVZhbHVlWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKDxhbnk+Z2VvbWV0cnkpLmZsYXRDb29yZGluYXRlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb252ZXJ0ZWRTdHlsZUNvcmUoZmVhdHVyZTogYW55LCByZXNvbHV0aW9uOiBudW1iZXIsIG9wdGlvbnMpOiBvbC5zdHlsZS5TdHlsZVtdIHtcclxuICAgICAgICBsZXQgbGVuZ3RoID0gMDtcclxuICAgICAgICB0aGlzLnN0eWxlcyA9IFtdO1xyXG4gICAgICAgIGlmICh0aGlzLmZpbGwgfHwgKHRoaXMub3V0bGluZUNvbG9yICYmIHRoaXMub3V0bGluZVdpZHRoKSB8fCB0aGlzLmxpbmVhckdyYWRpZW50IHx8IHRoaXMucmFkaWFsR3JhZGllbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUuZmxhdENvb3JkaW5hdGVzXyA9IHRoaXMuR2V0VHJhbnNmb3JtZWRDb29yZGluYXRlcyhmZWF0dXJlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hhZG93RHggfHwgdGhpcy5zaGFkb3dEeSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNoYWRvd1RyYW5zbGF0ZVZhbHVlID0gdGhpcy5zaGFkb3dUcmFuc2xhdGVWYWx1ZUJ5UmVzb2x1dGlvbltyZXNvbHV0aW9uXTtcclxuICAgICAgICAgICAgICAgIGlmIChzaGFkb3dUcmFuc2xhdGVWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRtcFJlc29sdXRpb24gPSBNYXRoLnJvdW5kKHJlc29sdXRpb24gKiAxMDAwMDAwMDApIC8gMTAwMDAwMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93VHJhbnNsYXRlID0gKGB0cmFuc2xhdGUoJHsodGhpcy5zaGFkb3dEeCA/IHRoaXMuc2hhZG93RHggOiAwKSAqIHRtcFJlc29sdXRpb259LCR7KHRoaXMuc2hhZG93RHkgPyB0aGlzLnNoYWRvd0R5IDogMCkgKiB0bXBSZXNvbHV0aW9ufSlgKTtcclxuICAgICAgICAgICAgICAgICAgICBzaGFkb3dUcmFuc2xhdGVWYWx1ZSA9IHRoaXMuZ2V0VHJhbnNmb3JtVmFsdWVzKHRoaXMuc2hhZG93VHJhbnNsYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd1RyYW5zbGF0ZVZhbHVlQnlSZXNvbHV0aW9uW3Jlc29sdXRpb25dID0gc2hhZG93VHJhbnNsYXRlVmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRtcEZsYXRDb29yZGluYXRlcyA9IGZlYXR1cmUuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gKDxhbnk+b2wuZ2VvbSkuZmxhdC50cmFuc2Zvcm0udHJhbnNsYXRlKHRtcEZsYXRDb29yZGluYXRlcywgMCwgdG1wRmxhdENvb3JkaW5hdGVzLmxlbmd0aCwgMiwgK3NoYWRvd1RyYW5zbGF0ZVZhbHVlWzBdLnRyaW0oKSwgK3NoYWRvd1RyYW5zbGF0ZVZhbHVlWzFdLnRyaW0oKSwgdW5kZWZpbmVkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgdG1wQ29vcmRpbmF0ZXM6IG9sLkNvb3JkaW5hdGVbXVtdID0gW1tdXTtcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5ld0ZsYXRDb29yZGluYXRlcy5sZW5ndGg7IGkgKz0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcENvb3JkaW5hdGVzW2luZGV4XSB8fCAodG1wQ29vcmRpbmF0ZXNbaW5kZXhdID0gW10pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcENvb3JkaW5hdGVzW2luZGV4XS5wdXNoKFtuZXdGbGF0Q29vcmRpbmF0ZXNbaV0sIG5ld0ZsYXRDb29yZGluYXRlc1tpICsgMV1dKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodG1wQ29vcmRpbmF0ZXNbaW5kZXhdLmxlbmd0aCA+IDMgJiYgdG1wQ29vcmRpbmF0ZXNbaW5kZXhdWzBdWzBdID09PSBuZXdGbGF0Q29vcmRpbmF0ZXNbaV0gJiYgdG1wQ29vcmRpbmF0ZXNbaW5kZXhdWzBdWzFdID09PSBuZXdGbGF0Q29vcmRpbmF0ZXNbaSArIDFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gbmV3IG9sLmdlb20uUG9seWdvbih0bXBDb29yZGluYXRlcywgXCJYWVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBHZW9BcmVhU3R5bGUuYXJlYVNoYWRvd1N0eWxlLmdldEZpbGwoKS5zZXRDb2xvcih0aGlzLmNvbnZlcnRlZFNoYWRvd0NvbG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICBHZW9BcmVhU3R5bGUuYXJlYVNoYWRvd1N0eWxlLnNldEdlb21ldHJ5KGdlb21ldHJ5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzW2xlbmd0aCsrXSA9IEdlb0FyZWFTdHlsZS5hcmVhU2hhZG93U3R5bGU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VvQnJ1c2ggPSBHZW9CcnVzaC5jcmVhdGVCcnVzaEJ5VHlwZSh0aGlzLmJydXNoVHlwZSwgZmVhdHVyZSwgcmVzb2x1dGlvbiwgdGhpcy5icnVzaE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgR2VvQXJlYVN0eWxlLmFyZWFTdHlsZS5nZXRGaWxsKCkuc2V0Q29sb3IodGhpcy5nZW9CcnVzaCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHN0cm9rZSB0byBoYW5kbGUgb3V0bGluZUNvbG9yLCBvdXRsaW5lRGFzaEFycmF5LCBvdXRsaW5lT3BhY2l0eSBhbmQgb3V0bGluZVdpZHRoXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm91dGxpbmVDb2xvciB8fCB0aGlzLm91dGxpbmVEYXNoQXJyYXkgfHwgdGhpcy5vdXRsaW5lV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuZXdTdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCk7XHJcbiAgICAgICAgICAgICAgICBuZXdTdHJva2Uuc2V0Q29sb3IodGhpcy5jb252ZXJ0ZWRPdXRsaW5lQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgbmV3U3Ryb2tlLnNldExpbmVEYXNoKHRoaXMuY29udmVydGVkT3V0bGluZURhc2hBcnJheSk7XHJcbiAgICAgICAgICAgICAgICBuZXdTdHJva2Uuc2V0V2lkdGgodGhpcy5vdXRsaW5lV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgR2VvQXJlYVN0eWxlLmFyZWFTdHlsZS5zZXRTdHJva2UobmV3U3Ryb2tlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIEdlb0FyZWFTdHlsZS5hcmVhU3R5bGUuc2V0U3Ryb2tlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEdlb0FyZWFTdHlsZS5hcmVhU3R5bGUuc2V0R2VvbWV0cnkoZmVhdHVyZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVzW2xlbmd0aCsrXSA9IEdlb0FyZWFTdHlsZS5hcmVhU3R5bGU7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5nYW1tYSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubGF5ZXIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdHlsZUdhbW1hID0gdGhpcy5nYW1tYTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMubGF5ZXIub24oXCJwcmVjb21wb3NlXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldnQuY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBzdHlsZUdhbW1hO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5jb250ZXh0LndlYmtpdEltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHN0eWxlR2FtbWE7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LmNvbnRleHQubW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gc3R5bGVHYW1tYTtcclxuICAgICAgICAgICAgICAgICAgICBldnQuY29udGV4dC5tc0ltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHN0eWxlR2FtbWE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVzO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQnJ1c2hUeXBlT3B0aW9ucyB9IGZyb20gXCIuL2JydXNoVHlwZU9wdGlvbnNcIjtcclxuaW1wb3J0IHsgR2VvU3R5bGUgfSBmcm9tIFwiLi9nZW9TdHlsZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb0JydXNoIHtcclxuICAgIHN0YXRpYyBnZW9CcnVzaEZ1bmN0aW9ucyA9IHtcclxuICAgICAgICBzb2xpZDogR2VvQnJ1c2guY3JlYXRlR2VvU29saWRCcnVzaCxcclxuICAgICAgICByYWRpYWxncmFkaWVudDogR2VvQnJ1c2guY3JlYXRlUmFkaWFsR3JhZGllbnRDb2xvcixcclxuICAgICAgICBsaW5lYXJncmFkaWVudDogR2VvQnJ1c2guY3JlYXRlTGluZWFyR3JhZGllbnRDb2xvcixcclxuICAgICAgICBoYXRjaDogR2VvQnJ1c2guY3JlYXRlUGF0dGVybkNvbG9yLFxyXG4gICAgICAgIHRleHR1cmU6IEdlb0JydXNoLmNyZWF0ZUltYWdlQ2FudmFzUGF0dGVyblxyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgZ2VvUGF0dGVybkZ1bmN0aW9ucyA9IHtcclxuICAgICAgICBDcm9zczogR2VvQnJ1c2guZ2V0Q3Jvc3NQYXR0ZXJuLFxyXG4gICAgICAgIEhvcml6b250YWw6IEdlb0JydXNoLmdldEhvcml6b250YWxQYXR0ZXJuLFxyXG4gICAgICAgIFZlcnRpY2FsOiBHZW9CcnVzaC5nZXRWZXJ0aWNhbFBhdHRlcm4sXHJcbiAgICAgICAgRm9yd2FyZERpYWdvbmFsOiBHZW9CcnVzaC5nZXRGb3J3YXJkRGlhZ29uYWxQYXR0ZXJuLFxyXG4gICAgICAgIEJhY2t3YXJkRGlhZ29uYWw6IEdlb0JydXNoLmdldEJhY2t3YXJkRGlhZ29uYWxQYXR0ZXJuLFxyXG4gICAgICAgIExhcmdlR3JpZDogR2VvQnJ1c2guZ2V0TGFyZ2VHcmlkUGF0dGVybixcclxuICAgICAgICBEaWFnb25hbENyb3NzOiBHZW9CcnVzaC5nZXREaWFnb25hbENyb3NzUGF0dGVybixcclxuICAgICAgICBQZXJjZW50MDU6IEdlb0JydXNoLmdldFBlcmNlbnQwNVBhdHRlcm4sXHJcbiAgICAgICAgUGVyY2VudDEwOiBHZW9CcnVzaC5nZXRQZXJjZW50MTBQYXR0ZXJuLFxyXG4gICAgICAgIFBlcmNlbnQyMDogR2VvQnJ1c2guZ2V0UGVyY2VudDIwUGF0dGVybixcclxuICAgICAgICBQZXJjZW50MjU6IEdlb0JydXNoLmdldFBlcmNlbnQyNVBhdHRlcm4sXHJcbiAgICAgICAgUGVyY2VudDMwOiBHZW9CcnVzaC5nZXRQZXJjZW50MzBQYXR0ZXJuLFxyXG4gICAgICAgIFBlcmNlbnQ0MDogR2VvQnJ1c2guZ2V0UGVyY2VudDQwUGF0dGVybixcclxuICAgICAgICBQZXJjZW50NTA6IEdlb0JydXNoLmdldFBlcmNlbnQ1MFBhdHRlcm4sXHJcbiAgICAgICAgUGVyY2VudDYwOiBHZW9CcnVzaC5nZXRQZXJjZW50NjBQYXR0ZXJuLFxyXG4gICAgICAgIFBlcmNlbnQ3MDogR2VvQnJ1c2guZ2V0UGVyY2VudDcwUGF0dGVybixcclxuICAgICAgICBQZXJjZW50NzU6IEdlb0JydXNoLmdldFBlcmNlbnQ3NVBhdHRlcm4sXHJcbiAgICAgICAgUGVyY2VudDgwOiBHZW9CcnVzaC5nZXRQZXJjZW50ODBQYXR0ZXJuLFxyXG4gICAgICAgIFBlcmNlbnQ5MDogR2VvQnJ1c2guZ2V0UGVyY2VudDkwUGF0dGVybixcclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZUJydXNoQnlUeXBlKGJydXNoVHlwZTogYW55LCBmZWF0dXJlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgYnJ1c2hUeXBlT3B0aW9ucz86IEJydXNoVHlwZU9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgZ2VvQnJ1c2hGdW5jdGlvbiA9IHRoaXMuZ2VvQnJ1c2hGdW5jdGlvbnNbYnJ1c2hUeXBlXTtcclxuICAgICAgICBpZiAodHlwZW9mIGdlb0JydXNoRnVuY3Rpb24gPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2VvQnJ1c2hGdW5jdGlvbihmZWF0dXJlLCByZXNvbHV0aW9uLCBicnVzaFR5cGVPcHRpb25zKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJlZ2lzdGVyR2VvQnJ1c2hGdW5jdGlvbihrZXk6IHN0cmluZywgZ2VvQnJ1c2hGdW5jdGlvbjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5nZW9CcnVzaEZ1bmN0aW9uc1trZXldID0gZ2VvQnJ1c2hGdW5jdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlR2VvU29saWRCcnVzaChmZWF0dXJlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgZ2VvQnJ1c2hPcHRpb25zOiBCcnVzaFR5cGVPcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKGdlb0JydXNoT3B0aW9ucy5maWxsQ29sb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdlb1N0eWxlLnRvUkdCQUNvbG9yKGdlb0JydXNoT3B0aW9ucy5maWxsQ29sb3IsIGdlb0JydXNoT3B0aW9ucy5maWxsT3BhY2l0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVSYWRpYWxHcmFkaWVudENvbG9yKGZlYXR1cmU6IGFueSwgcmVzb2x1dGlvbjogbnVtYmVyLCBnZW9CcnVzaE9wdGlvbnM6IEJydXNoVHlwZU9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgZXh0ZW50ID0gZmVhdHVyZS5nZXRFeHRlbnQoKTtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogdHJ5IHRvIGNyZWF0ZSBpdCB3aGVuIGNyZWF0aW5nIHRoZSBHZW9TdHlsZS5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IGNoZWNrIGlmIHRoZXJlIGlzIGEgZGlmZmVyZW5jZSBieSBzcmlkLlxyXG4gICAgICAgIGxldCB3aWR0aCA9IG9sLmV4dGVudC5nZXRXaWR0aChleHRlbnQpIC8gcmVzb2x1dGlvbiAqIG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IG9sLmV4dGVudC5nZXRIZWlnaHQoZXh0ZW50KSAvIHJlc29sdXRpb24gKiBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG4gICAgICAgIC8vIFRPRE86IHRoZSAoeDAseTApIGlzIHRoZSBjZW50ZXIgb2YgZmVhdHVyZSBleHRlbnQsIG9wdGltaXplIGl0XHJcbiAgICAgICAgbGV0IHgwID0gd2lkdGggLyAyO1xyXG4gICAgICAgIGxldCB5MCA9IGhlaWdodCAvIDI7XHJcbiAgICAgICAgbGV0IHIxID0geDA7XHJcbiAgICAgICAgbGV0IGdyZCA9IGNvbnRleHQuY3JlYXRlUmFkaWFsR3JhZGllbnQoeDAsIHkwLCAwLCB4MCwgeTAsIHIxKTtcclxuXHJcbiAgICAgICAgbGV0IGdyYWRpZW50Q29sb3JzID0gZ2VvQnJ1c2hPcHRpb25zLnJhZGlhbEdyYWRpZW50LnNwbGl0KFwiLFwiKTtcclxuICAgICAgICBmb3IgKGxldCBncmFkaWVudENvbG9yIG9mIGdyYWRpZW50Q29sb3JzKSB7XHJcbiAgICAgICAgICAgIGdyYWRpZW50Q29sb3IgPSBncmFkaWVudENvbG9yLnRyaW0oKTtcclxuICAgICAgICAgICAgbGV0IGNvbG9yU3RvcCA9IGdyYWRpZW50Q29sb3Iuc3Vic3RyKDEsIGdyYWRpZW50Q29sb3IubGVuZ3RoIC0gMik7XHJcbiAgICAgICAgICAgIGxldCBjcyA9IGNvbG9yU3RvcC5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoTnVtYmVyKGNzWzBdLnRyaW0oKSksIEdlb1N0eWxlLnRvUkdCQUNvbG9yKGNzWzFdLnRyaW0oKSwgZ2VvQnJ1c2hPcHRpb25zLmZpbGxPcGFjaXR5KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZ3JkO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVMaW5lYXJHcmFkaWVudENvbG9yKGZlYXR1cmU6IGFueSwgcmVzb2x1dGlvbjogbnVtYmVyLCBnZW9CcnVzaE9wdGlvbnM6IEJydXNoVHlwZU9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgZXh0ZW50ID0gZmVhdHVyZS5nZXRFeHRlbnQoKTtcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgLy8gVE9ETzogdGhlIGRpcmVjdGlvbiBBbmdsZSBieSB4MCx5MCx4MSx5MS4gdGhpcy5kaXJlY3Rpb25BbmdsZVxyXG4gICAgICAgIGxldCBncmQgPSBjb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIG9sLmV4dGVudC5nZXRXaWR0aChleHRlbnQpIC8gcmVzb2x1dGlvbiAqIG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU8sIG9sLmV4dGVudC5nZXRIZWlnaHQoZXh0ZW50KSAvIHJlc29sdXRpb24gKiBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPKTtcclxuXHJcbiAgICAgICAgbGV0IGdyYWRpZW50Q29sb3JzID0gZ2VvQnJ1c2hPcHRpb25zLmxpbmVhckdyYWRpZW50LnNwbGl0KFwiLFwiKTtcclxuICAgICAgICBmb3IgKGxldCBncmFkaWVudENvbG9yIG9mIGdyYWRpZW50Q29sb3JzKSB7XHJcbiAgICAgICAgICAgIGdyYWRpZW50Q29sb3IgPSBncmFkaWVudENvbG9yLnRyaW0oKTtcclxuICAgICAgICAgICAgbGV0IGNvbG9yU3RvcCA9IGdyYWRpZW50Q29sb3Iuc3Vic3RyKDEsIGdyYWRpZW50Q29sb3IubGVuZ3RoIC0gMik7XHJcbiAgICAgICAgICAgIGxldCBjcyA9IGNvbG9yU3RvcC5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgICAgIGdyZC5hZGRDb2xvclN0b3AoTnVtYmVyKGNzWzBdLnRyaW0oKSksIEdlb1N0eWxlLnRvUkdCQUNvbG9yKGNzWzFdLnRyaW0oKSwgZ2VvQnJ1c2hPcHRpb25zLmZpbGxPcGFjaXR5KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZ3JkO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVJbWFnZUNhbnZhc1BhdHRlcm4oZmVhdHVyZTogYW55LCByZXNvbHV0aW9uOiBudW1iZXIsIGdlb0JydXNoT3B0aW9uczogQnJ1c2hUeXBlT3B0aW9ucykge1xyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBsZXQgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICBpbWFnZUVsZW1lbnQuc3JjID0gZ2VvQnJ1c2hPcHRpb25zLnRleHR1cmVGaWxlO1xyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oaW1hZ2VFbGVtZW50LCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlUGF0dGVybkNvbG9yKGZlYXR1cmU6IGFueSwgcmVzb2x1dGlvbjogbnVtYmVyLCBnZW9CcnVzaE9wdGlvbnM6IEJydXNoVHlwZU9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgY3JlYXRlUGF0dGVybkZ1bmN0aW9uID0gR2VvQnJ1c2guZ2VvUGF0dGVybkZ1bmN0aW9uc1tnZW9CcnVzaE9wdGlvbnMuaGF0Y2hTdHlsZV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjcmVhdGVQYXR0ZXJuRnVuY3Rpb24gPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlUGF0dGVybkZ1bmN0aW9uKGdlb0JydXNoT3B0aW9ucy5maWxsQ29sb3IsIGdlb0JydXNoT3B0aW9ucy5mb3JlZ3JvdW5kRmlsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gR2VvU3R5bGUudG9SR0JBQ29sb3IoXHJcbiAgICAgICAgICAgICAgICBnZW9CcnVzaE9wdGlvbnMuZmlsbENvbG9yLFxyXG4gICAgICAgICAgICAgICAgZ2VvQnJ1c2hPcHRpb25zLmZpbGxPcGFjaXR5XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRDcm9zc1BhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA2O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogMiAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogMiAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gaG9yaXpvbiBsaW5lXHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIGNhbnZhcy5oZWlnaHQgLyAyLCBjYW52YXMud2lkdGgsIDEpO1xyXG5cclxuICAgICAgICAvLyB2ZXJ0aWNhbCBsaW5lXHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdChjYW52YXMud2lkdGggLyAyLCAwLCAxLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRIb3Jpem9udGFsUGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDY7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqIDIgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqIDIgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIGhvcml6b24gbGluZVxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCBjYW52YXMuaGVpZ2h0IC8gMiwgY2FudmFzLndpZHRoLCAxKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRWZXJ0aWNhbFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA2O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAyICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAyICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyB2ZXJ0aWNhbCBsaW5lXHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KGNhbnZhcy53aWR0aCAvIDIsIDAsIDEsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEZvcndhcmREaWFnb25hbFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA2O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAyICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAyICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyB2ZXJ0aWNhbCBsaW5lXHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKDAsIDApO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuXHJcbiAgICAgICAgLy8gY29udGV4dC5maWxsU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICAvLyBjb250ZXh0Lm1vdmVUbygtMSwgLTEpO1xyXG4gICAgICAgIC8vIGNvbnRleHQubGluZVRvKDEsIC0xKTtcclxuICAgICAgICAvLyBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKyAxLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICAvLyBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKyAxLCBjYW52YXMuaGVpZ2h0ICsgMSk7XHJcbiAgICAgICAgLy8gY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0ICsgMSk7XHJcbiAgICAgICAgLy8gY29udGV4dC5saW5lVG8oLTEsIDApO1xyXG4gICAgICAgIC8vIGNvbnRleHQubGluZVRvKC0xLCAtMSk7XHJcbiAgICAgICAgLy8gY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAvLyBjb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRCYWNrd2FyZERpYWdvbmFsUGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDY7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqIDIgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqIDIgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIHZlcnRpY2FsIGxpbmVcclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oY2FudmFzLndpZHRoLCAwKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbygwLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBlcmNlbnQwNVBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA1O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAoMiAqIDAuOTUgKyAxKSAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogKDIgKiAwLjk1ICsgMSkgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIHBlcmNlbnRhZ2UgcmVnaW9uXHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuNDUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNTUsIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuNTUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNDUsIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuNDUpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0UGVyY2VudDEwUGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDU7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqICgyICogMC45ICsgMSkgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqICgyICogMC45ICsgMSkgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIHBlcmNlbnRhZ2UgcmVnaW9uXHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuNCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC42LCBjYW52YXMuaGVpZ2h0ICogMC41KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjYpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNCwgY2FudmFzLmhlaWdodCAqIDAuNSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC41LCBjYW52YXMuaGVpZ2h0ICogMC40KTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBlcmNlbnQyMFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA1O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAoMiAqIDAuOCArIDEpICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAoMiAqIDAuOCArIDEpICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjMpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNywgY2FudmFzLmhlaWdodCAqIDAuNSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC41LCBjYW52YXMuaGVpZ2h0ICogMC43KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjMsIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuMyk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQZXJjZW50MjVQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNTtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogMC40ICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAwLjQgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIHBlcmNlbnRhZ2UgcmVnaW9uXHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmVsbGlwc2UoXHJcbiAgICAgICAgICAgIGNhbnZhcy53aWR0aCAqIDAuMjUsXHJcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgKiAwLjI1LFxyXG4gICAgICAgICAgICAwLjgsXHJcbiAgICAgICAgICAgIDAuOCxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgMiAqIE1hdGguUElcclxuICAgICAgICApO1xyXG4gICAgICAgIC8vIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgY29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0UGVyY2VudDMwUGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDU7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqICgyICogMC43ICsgMSkgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqICgyICogMC43ICsgMSkgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIHBlcmNlbnRhZ2UgcmVnaW9uXHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuMik7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC44LCBjYW52YXMuaGVpZ2h0ICogMC41KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjgpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuMiwgY2FudmFzLmhlaWdodCAqIDAuNSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC41LCBjYW52YXMuaGVpZ2h0ICogMC4yKTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBlcmNlbnQ0MFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA1O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAoMiAqIDAuNCArIDEpICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAoMiAqIDAuNCArIDEpICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjEpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuOSwgY2FudmFzLmhlaWdodCAqIDAuNSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC41LCBjYW52YXMuaGVpZ2h0ICogMC45KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjEsIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuMSk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQZXJjZW50NTBQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNTtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogKDIgKiAwLjUgKyAxKSAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogKDIgKiAwLjUgKyAxKSAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gcGVyY2VudGFnZSByZWdpb25cclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oY2FudmFzLndpZHRoICogMC41LCAwKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oMCwgY2FudmFzLmhlaWdodCAqIDAuNSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC41LCAwKTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBlcmNlbnQ2MFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA1O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAoMiAqIDAuNCArIDEpICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAoMiAqIDAuNCArIDEpICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjYW52YXMud2lkdGggKiAwLjQsIDApO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNiwgMCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0ICogMC40KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKiAwLjYpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNiwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC40LCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbygwLCBjYW52YXMuaGVpZ2h0ICogMC42KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbygwLCBjYW52YXMuaGVpZ2h0ICogMC40KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjQsIDApO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0UGVyY2VudDcwUGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDU7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqICgyICogMC4zICsgMSkgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqICgyICogMC4zICsgMSkgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIHBlcmNlbnRhZ2UgcmVnaW9uXHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKGNhbnZhcy53aWR0aCAqIDAuMywgMCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC43LCAwKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKiAwLjMpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCAqIDAuNyk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC43LCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjMsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKDAsIGNhbnZhcy5oZWlnaHQgKiAwLjcpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKDAsIGNhbnZhcy5oZWlnaHQgKiAwLjMpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuMywgMCk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQZXJjZW50NzVQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNTtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogKDIgKiAwLjI1ICsgMSkgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqICgyICogMC4yNSArIDEpICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjYW52YXMud2lkdGggKiAwLjI1LCAwKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjc1LCAwKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKiAwLjI1KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKiAwLjc1KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjc1LCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjI1LCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbygwLCBjYW52YXMuaGVpZ2h0ICogMC43NSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oMCwgY2FudmFzLmhlaWdodCAqIDAuMjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuMjUsIDApO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0UGVyY2VudDgwUGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDU7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqIDAuOCAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogMC44ICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5lbGxpcHNlKGNhbnZhcy53aWR0aCAqIDAuMSwgY2FudmFzLmhlaWdodCAqIDAuMSwgMC44LCAwLjgsIDAsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICAvLyBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBlcmNlbnQ5MFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA1O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAoMiAqIDAuMSArIDEpICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAoMiAqIDAuMSArIDEpICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5lbGxpcHNlKGNhbnZhcy53aWR0aCAqIDAuMSwgY2FudmFzLmhlaWdodCAqIDAuMSwgMC40LCAwLjQsIDAsIDAsIDIgKiBNYXRoLlBJKTtcclxuICAgICAgICAvLyBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldExhcmdlR3JpZFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA2O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAyICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAyICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBncmlkIHJlY3RcclxuICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2VSZWN0KFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICAwLFxyXG4gICAgICAgICAgICBjYW52YXMud2lkdGgsXHJcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHRcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldERpYWdvbmFsQ3Jvc3NQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNjtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogMiAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogMiAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gbGVmdCB0byByaWdodCBkaWFnb25hbCBsaW5lXHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKDAsIDApO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuXHJcbiAgICAgICAgLy8gcmlnaHQgdG8gbGVmdCBkaWFnb25hbCBsaW5lXHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKGNhbnZhcy53aWR0aCwgMCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oMCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgR2VvU3R5bGUgfSBmcm9tIFwiLi9nZW9TdHlsZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb0xpbmVTdHlsZSBleHRlbmRzIEdlb1N0eWxlIHtcclxuICAgIGdlb21ldHJ5TGluZUNhcHMgPSBbXHJcbiAgICAgICAgXCJ0cmlhbmdsZVwiLFxyXG4gICAgICAgIFwic3F1YXJlYW5jaG9yXCIsXHJcbiAgICAgICAgXCJyb3VuZGFuY2hvclwiLFxyXG4gICAgICAgIFwiZGlhbW9uZGFuY2hvclwiLFxyXG4gICAgICAgIFwiYXJyb3dhbmNob3JcIlxyXG4gICAgXTtcclxuICAgIG9sTGluZUNhcHNNYXAgPSB7XHJcbiAgICAgICAgYnV0dDogXCJidXR0XCIsXHJcbiAgICAgICAgZmxhdDogXCJzcXVhcmVcIixcclxuICAgICAgICBzcXVhcmU6IFwic3F1YXJlXCIsXHJcbiAgICAgICAgcm91bmQ6IFwicm91bmRcIixcclxuICAgICAgICBub2FuY2hvcjogXCJzcXVhcmVcIixcclxuICAgICAgICBhbmNob3JtYXNrOiBcInNxdWFyZVwiLFxyXG4gICAgICAgIGN1c3RvbTogXCJzcXVhcmVcIlxyXG4gICAgfTtcclxuXHJcbiAgICBsaW5lQ2FwOiBzdHJpbmc7XHJcbiAgICBjb2xvcjogc3RyaW5nO1xyXG4gICAgZGFzaEFycmF5OiBhbnk7XHJcbiAgICBnYW1tYTogc3RyaW5nO1xyXG4gICAgZ2VvbWV0cnlUcmFuc2Zvcm06IHN0cmluZztcclxuICAgIGxpbmVKb2luOiBzdHJpbmc7XHJcbiAgICBtaXRlckxpbWl0OiBudW1iZXI7XHJcbiAgICBvZmZzZXQ6IHN0cmluZztcclxuICAgIG9wYWNpdHk6IG51bWJlcjtcclxuICAgIHdpZHRoOiBudW1iZXI7XHJcbiAgICBvbmV3YXlTeW1ib2w6IGFueTtcclxuXHJcbiAgICBsaW5lQ2FwSW5uZXI6IHN0cmluZztcclxuICAgIGNvbG9ySW5uZXI6IHN0cmluZztcclxuICAgIGRhc2hBcnJheUlubmVyOiBhbnk7XHJcbiAgICBsaW5lSm9pbklubmVyOiBzdHJpbmc7XHJcbiAgICBtaXRlckxpbWl0SW5uZXI6IG51bWJlcjtcclxuICAgIHdpZHRoSW5uZXI6IG51bWJlcjtcclxuXHJcbiAgICBsaW5lQ2FwQ2VudGVyOiBzdHJpbmc7XHJcbiAgICBjb2xvckNlbnRlcjogc3RyaW5nO1xyXG4gICAgZGFzaEFycmF5Q2VudGVyOiBhbnk7XHJcbiAgICBsaW5lSm9pbkNlbnRlcjogc3RyaW5nO1xyXG4gICAgbWl0ZXJMaW1pdENlbnRlcjogbnVtYmVyO1xyXG4gICAgd2lkdGhDZW50ZXI6IG51bWJlcjtcclxuXHJcbiAgICBvbENvbG9yOiBzdHJpbmc7XHJcbiAgICBjb252ZXJ0ZWREYXNoQXJyYXk6IG51bWJlcltdID0gbmV3IEFycmF5PG51bWJlcj4oKTtcclxuXHJcbiAgICBvbElubmVyQ29sb3I6IHN0cmluZztcclxuICAgIGNvbnZlcnRlZElubmVyRGFzaEFycmF5OiBudW1iZXJbXSA9IG5ldyBBcnJheTxudW1iZXI+KCk7XHJcblxyXG4gICAgb2xDZW50ZXJDb2xvcjogc3RyaW5nO1xyXG4gICAgY29udmVydGVkQ2VudGVyRGFzaEFycmF5OiBudW1iZXJbXSA9IG5ldyBBcnJheTxudW1iZXI+KCk7XHJcblxyXG4gICAgbGluZVN0cm9rZTogYW55O1xyXG4gICAgbGluZVN0eWxlOiBhbnk7XHJcblxyXG4gICAgbGluZUNhcEZpbGw6IGFueTtcclxuICAgIGxpbmVDYXBTdHlsZTogYW55O1xyXG5cclxuICAgIGxpbmVJbm5lclN0cm9rZTogYW55O1xyXG4gICAgbGluZUlubmVyU3R5bGU6IGFueTtcclxuXHJcbiAgICBsaW5lQ2FwSW5uZXJGaWxsOiBhbnk7XHJcbiAgICBsaW5lQ2FwSW5uZXJTdHlsZTogYW55O1xyXG5cclxuICAgIGxpbmVDZW50ZXJTdHJva2U6IGFueTtcclxuICAgIGxpbmVDZW50ZXJTdHlsZTogYW55O1xyXG5cclxuICAgIGxpbmVDYXBDZW50ZXJGaWxsOiBhbnk7XHJcbiAgICBsaW5lQ2FwQ2VudGVyU3R5bGU6IGFueTtcclxuXHJcbiAgICBvbmV3YXlJY29uOiBhbnk7XHJcbiAgICBvbmV3YXlTdHlsZTogYW55O1xyXG5cclxuICAgIHN0YXRpYyBvbmV3YXlJbWc6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzdHlsZUpzb24/OiBhbnkpIHtcclxuICAgICAgICBzdXBlcihzdHlsZUpzb24pO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmVTdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCk7XHJcbiAgICAgICAgdGhpcy5saW5lU3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoeyBzdHJva2U6IHRoaXMubGluZVN0cm9rZSB9KTtcclxuICAgICAgICB0aGlzLmxpbmVDYXBGaWxsID0gbmV3IG9sLnN0eWxlLkZpbGwoKTtcclxuICAgICAgICB0aGlzLmxpbmVDYXBTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7IGZpbGw6IHRoaXMubGluZUNhcEZpbGwgfSk7XHJcblxyXG4gICAgICAgIHRoaXMubGluZUlubmVyU3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSgpO1xyXG4gICAgICAgIHRoaXMubGluZUlubmVyU3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoeyBzdHJva2U6IHRoaXMubGluZUlubmVyU3Ryb2tlIH0pO1xyXG4gICAgICAgIHRoaXMubGluZUNhcElubmVyRmlsbCA9IG5ldyBvbC5zdHlsZS5GaWxsKCk7XHJcbiAgICAgICAgdGhpcy5saW5lQ2FwSW5uZXJTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgICAgIGZpbGw6IHRoaXMubGluZUNhcElubmVyRmlsbFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmVDZW50ZXJTdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCk7XHJcbiAgICAgICAgdGhpcy5saW5lQ2VudGVyU3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgICAgICAgICBzdHJva2U6IHRoaXMubGluZUNlbnRlclN0cm9rZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubGluZUNhcENlbnRlckZpbGwgPSBuZXcgb2wuc3R5bGUuRmlsbCgpO1xyXG4gICAgICAgIHRoaXMubGluZUNhcENlbnRlclN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICAgICAgZmlsbDogdGhpcy5saW5lQ2FwQ2VudGVyRmlsbFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoc3R5bGVKc29uKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGluZUNhcCA9IHN0eWxlSnNvbltcImxpbmUtY2FwXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmNvbG9yID0gc3R5bGVKc29uW1wibGluZS1jb2xvclwiXTtcclxuICAgICAgICAgICAgdGhpcy5kYXNoQXJyYXkgPSBzdHlsZUpzb25bXCJsaW5lLWRhc2hhcnJheVwiXTtcclxuICAgICAgICAgICAgdGhpcy5nYW1tYSA9IHN0eWxlSnNvbltcImxpbmUtZ2FtbWFcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0gPSBzdHlsZUpzb25bXCJsaW5lLWdlb21ldHJ5LXRyYW5zZm9ybVwiXTtcclxuICAgICAgICAgICAgdGhpcy5saW5lSm9pbiA9IHN0eWxlSnNvbltcImxpbmUtam9pblwiXTtcclxuICAgICAgICAgICAgdGhpcy5taXRlckxpbWl0ID0gc3R5bGVKc29uW1wibGluZS1taXRlcmxpbWl0XCJdO1xyXG4gICAgICAgICAgICB0aGlzLm9mZnNldCA9IHN0eWxlSnNvbltcImxpbmUtb2Zmc2V0XCJdO1xyXG4gICAgICAgICAgICB0aGlzLm9wYWNpdHkgPSBzdHlsZUpzb25bXCJsaW5lLW9wYWNpdHlcIl07XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSBzdHlsZUpzb25bXCJsaW5lLXdpZHRoXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVDYXBJbm5lciA9IHN0eWxlSnNvbltcImxpbmUtY2FwLWlubmVyXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmNvbG9ySW5uZXIgPSBzdHlsZUpzb25bXCJsaW5lLWNvbG9yLWlubmVyXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmRhc2hBcnJheUlubmVyID0gc3R5bGVKc29uW1wibGluZS1kYXNoYXJyYXktaW5uZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMubGluZUpvaW5Jbm5lciA9IHN0eWxlSnNvbltcImxpbmUtam9pbi1pbm5lclwiXTtcclxuICAgICAgICAgICAgdGhpcy5taXRlckxpbWl0SW5uZXIgPSBzdHlsZUpzb25bXCJsaW5lLW1pdGVybGltaXQtaW5uZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGhJbm5lciA9IHN0eWxlSnNvbltcImxpbmUtd2lkdGgtaW5uZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMubGluZUNhcENlbnRlciA9IHN0eWxlSnNvbltcImxpbmUtY2FwLWNlbnRlclwiXTtcclxuICAgICAgICAgICAgdGhpcy5jb2xvckNlbnRlciA9IHN0eWxlSnNvbltcImxpbmUtY29sb3ItY2VudGVyXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmRhc2hBcnJheUNlbnRlciA9IHN0eWxlSnNvbltcImxpbmUtZGFzaGFycmF5LWNlbnRlclwiXTtcclxuICAgICAgICAgICAgdGhpcy5saW5lSm9pbkNlbnRlciA9IHN0eWxlSnNvbltcImxpbmUtam9pbi1jZW50ZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMubWl0ZXJMaW1pdENlbnRlciA9IHN0eWxlSnNvbltcImxpbmUtbWl0ZXJsaW1pdC1jZW50ZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMud2lkdGhDZW50ZXIgPSBzdHlsZUpzb25bXCJsaW5lLXdpZHRoLWNlbnRlclwiXTtcclxuICAgICAgICAgICAgdGhpcy5vbmV3YXlTeW1ib2wgPSBzdHlsZUpzb25bXCJsaW5lLW9uZXdheS1zeW1ib2xcIl07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBpbml0aWFsaXplQ29yZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5jb2xvcikge1xyXG4gICAgICAgICAgICB0aGlzLm9sQ29sb3IgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLmNvbG9yLCB0aGlzLm9wYWNpdHkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5saW5lU3Ryb2tlLnNldENvbG9yKHRoaXMub2xDb2xvcik7XHJcbiAgICAgICAgICAgIHRoaXMubGluZUNhcEZpbGwuc2V0Q29sb3IodGhpcy5vbENvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGFzaEFycmF5KSB7XHJcbiAgICAgICAgICAgIGxldCB0bXBBcnJheSA9IHRoaXMuZGFzaEFycmF5LnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgYSBvZiB0bXBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZWREYXNoQXJyYXkucHVzaChwYXJzZUZsb2F0KGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRHJhd2luZyBpbm5lclxyXG4gICAgICAgIGlmICh0aGlzLmNvbG9ySW5uZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5vbElubmVyQ29sb3IgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLmNvbG9ySW5uZXIsIHRoaXMub3BhY2l0eSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxpbmVJbm5lclN0cm9rZS5zZXRDb2xvcih0aGlzLm9sSW5uZXJDb2xvcik7XHJcbiAgICAgICAgICAgIHRoaXMubGluZUNhcElubmVyRmlsbC5zZXRDb2xvcih0aGlzLm9sSW5uZXJDb2xvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRhc2hBcnJheUlubmVyKSB7XHJcbiAgICAgICAgICAgIGxldCB0bXBBcnJheSA9IHRoaXMuZGFzaEFycmF5SW5uZXIuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBhIG9mIHRtcEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRlZElubmVyRGFzaEFycmF5LnB1c2gocGFyc2VGbG9hdChhKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERyYXdpbmcgY2VudGVyXHJcbiAgICAgICAgaWYgKHRoaXMuY29sb3JDZW50ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5vbENlbnRlckNvbG9yID0gR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5jb2xvckNlbnRlciwgdGhpcy5vcGFjaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5saW5lQ2VudGVyU3Ryb2tlLnNldENvbG9yKHRoaXMub2xDZW50ZXJDb2xvcik7XHJcbiAgICAgICAgICAgIHRoaXMubGluZUNhcENlbnRlckZpbGwuc2V0Q29sb3IodGhpcy5vbENlbnRlckNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGFzaEFycmF5Q2VudGVyKSB7XHJcbiAgICAgICAgICAgIGxldCB0bXBBcnJheSA9IHRoaXMuZGFzaEFycmF5Q2VudGVyLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgYSBvZiB0bXBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZWRDZW50ZXJEYXNoQXJyYXkucHVzaChwYXJzZUZsb2F0KGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMub25ld2F5U3ltYm9sKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25ld2F5SWNvbiA9IG5ldyBvbC5zdHlsZS5JY29uKHtcclxuICAgICAgICAgICAgICAgIHNyYzogdGhpcy5vbmV3YXlTeW1ib2wsXHJcbiAgICAgICAgICAgICAgICBpbWdTaXplOiBbMTgsIDVdLFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yOiBbMC41LCAwLjVdLFxyXG4gICAgICAgICAgICAgICAgcm90YXRlV2l0aFZpZXc6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAgICAgdGhpcy5vbmV3YXlTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgICAgICAgICBpbWFnZTogdGhpcy5vbmV3YXlJY29uXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRUcmFuc2Zvcm1WYWx1ZXModHJhbnNmb3JtOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIC8vIGdldCB0cmFuc2Zvcm0gdmFsdWVzIHdoaWNoIGxvb2sgbGlrZSB0cmFuc2Zvcm0odmFsdWUxLCB2YWx1ZTIpXHJcbiAgICAgICAgbGV0IHN0YXJ0ID0gdHJhbnNmb3JtLmluZGV4T2YoXCIoXCIpO1xyXG4gICAgICAgIGxldCBlbmQgPSB0cmFuc2Zvcm0uaW5kZXhPZihcIilcIik7XHJcbiAgICAgICAgbGV0IHZhbHVlU3RyaW5nID0gdHJhbnNmb3JtLnN1YnN0cmluZyhzdGFydCArIDEsIGVuZCk7XHJcblxyXG4gICAgICAgIGxldCB2YWx1ZXMgPSBbXTtcclxuICAgICAgICBpZiAodmFsdWVTdHJpbmcuaW5jbHVkZXMoXCIsXCIpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlU3RyaW5nLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YWx1ZXMucHVzaCh2YWx1ZVN0cmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmFsdWVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENvbnZlcnRlZFN0eWxlQ29yZShmZWF0dXJlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgb3B0aW9uczogYW55KTogb2wuc3R5bGUuU3R5bGVbXSB7XHJcbiAgICAgICAgbGV0IGxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuY29sb3IgJiYgdGhpcy53aWR0aCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vbExpbmVDYXBzTWFwW3RoaXMubGluZUNhcF0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZVN0cm9rZS5zZXRMaW5lQ2FwKHRoaXMub2xMaW5lQ2Fwc01hcFt0aGlzLmxpbmVDYXBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lU3Ryb2tlLnNldENvbG9yKHRoaXMub2xDb2xvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVDYXBGaWxsLnNldENvbG9yKHRoaXMub2xDb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZGFzaEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVTdHJva2Uuc2V0TGluZURhc2godGhpcy5jb252ZXJ0ZWREYXNoQXJyYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmVKb2luKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVTdHJva2Uuc2V0TGluZUpvaW4odGhpcy5saW5lSm9pbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubWl0ZXJMaW1pdCAhPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lU3Ryb2tlLnNldE1pdGVyTGltaXQodGhpcy5taXRlckxpbWl0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lU3Ryb2tlLnNldFdpZHRoKHRoaXMud2lkdGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgaW5uZXJcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sb3JJbm5lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lSW5uZXJTdHJva2Uuc2V0Q29sb3IodGhpcy5vbElubmVyQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQ2FwSW5uZXJGaWxsLnNldENvbG9yKHRoaXMub2xJbm5lckNvbG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXNoQXJyYXlJbm5lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lSW5uZXJTdHJva2Uuc2V0TGluZURhc2godGhpcy5jb252ZXJ0ZWRJbm5lckRhc2hBcnJheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubGluZUpvaW5Jbm5lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lSW5uZXJTdHJva2Uuc2V0TGluZUpvaW4odGhpcy5saW5lSm9pbklubmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5taXRlckxpbWl0SW5uZXIgIT09IDQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUlubmVyU3Ryb2tlLnNldE1pdGVyTGltaXQodGhpcy5taXRlckxpbWl0SW5uZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndpZHRoSW5uZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUlubmVyU3Ryb2tlLnNldFdpZHRoKHRoaXMud2lkdGhJbm5lcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFNldCBjZW50ZXJcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sb3JDZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUNlbnRlclN0cm9rZS5zZXRDb2xvcih0aGlzLm9sQ2VudGVyQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQ2FwQ2VudGVyRmlsbC5zZXRDb2xvcih0aGlzLm9sQ2VudGVyQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQ2VudGVyU3Ryb2tlLnNldExpbmVDYXAoXCJidXR0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhc2hBcnJheUNlbnRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQ2VudGVyU3Ryb2tlLnNldExpbmVEYXNoKHRoaXMuY29udmVydGVkQ2VudGVyRGFzaEFycmF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5saW5lSm9pbkNlbnRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQ2VudGVyU3Ryb2tlLnNldExpbmVKb2luKHRoaXMubGluZUpvaW5DZW50ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1pdGVyTGltaXRDZW50ZXIgIT09IDQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUNlbnRlclN0cm9rZS5zZXRNaXRlckxpbWl0KHRoaXMubWl0ZXJMaW1pdENlbnRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMud2lkdGhDZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUNlbnRlclN0cm9rZS5zZXRXaWR0aCh0aGlzLndpZHRoQ2VudGVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGdlb21ldHJ5RnVuY3Rpb24gPSAoZmVhdHVyZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZ2VvbWV0cnkgPSB0aGlzLmdldEdlb21ldHJ5KGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZXMgPSB0aGlzLmdldFRyYW5zZm9ybVZhbHVlcyh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJ0cmFuc2xhdGVcIikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LnRyYW5zbGF0ZSgrdmFsdWVzWzBdLnRyaW0oKSwgK3ZhbHVlc1sxXS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0uaW5kZXhPZihcInNjYWxlXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5zY2FsZSgrdmFsdWVzWzBdLnRyaW0oKSwgK3ZhbHVlc1sxXS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0uaW5kZXhPZihcInJvdGF0ZVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNlbnRlciA9IG9sLmV4dGVudC5nZXRDZW50ZXIoZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFuZ2xlID0gK3ZhbHVlc1swXS50cmltKCkgKiBNYXRoLlBJIC8gMTgwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkucm90YXRlKGFuZ2xlLCBjZW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0uaW5kZXhPZihcInNrZXdcIikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2tld0dlb21ldHJ5KGdlb21ldHJ5LCArdmFsdWVzWzBdLnRyaW0oKSwgK3ZhbHVlc1sxXS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGluZVN0eWxlLnNldEdlb21ldHJ5KGdlb21ldHJ5RnVuY3Rpb24pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdHlsZXNbbGVuZ3RoKytdID0gdGhpcy5saW5lU3R5bGU7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5nYW1tYSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMubGF5ZXIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdHlsZUdhbW1hID0gdGhpcy5nYW1tYTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMubGF5ZXIub24oXCJwcmVjb21wb3NlXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldnQuY29udGV4dC5pbWFnZVNtb290aGluZ0VuYWJsZWQgPSBzdHlsZUdhbW1hO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5jb250ZXh0LndlYmtpdEltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHN0eWxlR2FtbWE7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LmNvbnRleHQubW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gc3R5bGVHYW1tYTtcclxuICAgICAgICAgICAgICAgICAgICBldnQuY29udGV4dC5tc0ltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHN0eWxlR2FtbWE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlMaW5lQ2Fwcy5pbmNsdWRlcyh0aGlzLmxpbmVDYXApKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZ2VvbWV0cnlGdW5jdGlvbiA9IChmZWF0dXJlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeShmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2VvTGluZVN0eWxlLmNyZWF0ZUFuY2hvcmVkR2VvbWV0cnkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVDYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb25cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVDYXBTdHlsZS5zZXRHZW9tZXRyeShnZW9tZXRyeUZ1bmN0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzW2xlbmd0aCsrXSA9IHRoaXMubGluZUNhcFN0eWxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3aW5nIGlubmVyXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbG9ySW5uZXIgJiYgdGhpcy53aWR0aElubmVyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZ2VvbWV0cnlGdW5jdGlvbiA9IChmZWF0dXJlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeShmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVzID0gdGhpcy5nZXRUcmFuc2Zvcm1WYWx1ZXModGhpcy5nZW9tZXRyeVRyYW5zZm9ybSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwidHJhbnNsYXRlXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS50cmFuc2xhdGUoK3ZhbHVlc1swXS50cmltKCksICt2YWx1ZXNbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJzY2FsZVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuc2NhbGUoK3ZhbHVlc1swXS50cmltKCksICt2YWx1ZXNbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJyb3RhdGVcIikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZW50ZXIgPSBvbC5leHRlbnQuZ2V0Q2VudGVyKGdlb21ldHJ5LmdldEV4dGVudCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmdsZSA9ICt2YWx1ZXNbMF0udHJpbSgpICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LnJvdGF0ZShhbmdsZSwgY2VudGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJza2V3XCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNrZXdHZW9tZXRyeShnZW9tZXRyeSwgK3ZhbHVlc1swXS50cmltKCksICt2YWx1ZXNbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUlubmVyU3R5bGUuc2V0R2VvbWV0cnkoZ2VvbWV0cnlGdW5jdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlc1tsZW5ndGgrK10gPSB0aGlzLmxpbmVJbm5lclN0eWxlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlb21ldHJ5TGluZUNhcHMuaW5jbHVkZXModGhpcy5saW5lQ2FwSW5uZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5RnVuY3Rpb24gPSAoZmVhdHVyZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ2VvbWV0cnkgPSB0aGlzLmdldEdlb21ldHJ5KGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gR2VvTGluZVN0eWxlLmNyZWF0ZUFuY2hvcmVkR2VvbWV0cnkoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGluZUNhcElubmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aWR0aElubmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lQ2FwSW5uZXJTdHlsZS5zZXRHZW9tZXRyeShnZW9tZXRyeUZ1bmN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlc1tsZW5ndGgrK10gPSB0aGlzLmxpbmVDYXBJbm5lclN0eWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3aW5nIGNlbnRlclxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xvckNlbnRlciAmJiB0aGlzLndpZHRoQ2VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZ2VvbWV0cnlGdW5jdGlvbiA9IChmZWF0dXJlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeShmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVzID0gdGhpcy5nZXRUcmFuc2Zvcm1WYWx1ZXModGhpcy5nZW9tZXRyeVRyYW5zZm9ybSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwidHJhbnNsYXRlXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS50cmFuc2xhdGUoK3ZhbHVlc1swXS50cmltKCksICt2YWx1ZXNbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJzY2FsZVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuc2NhbGUoK3ZhbHVlc1swXS50cmltKCksICt2YWx1ZXNbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJyb3RhdGVcIikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZW50ZXIgPSBvbC5leHRlbnQuZ2V0Q2VudGVyKGdlb21ldHJ5LmdldEV4dGVudCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmdsZSA9ICt2YWx1ZXNbMF0udHJpbSgpICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LnJvdGF0ZShhbmdsZSwgY2VudGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJza2V3XCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNrZXdHZW9tZXRyeShnZW9tZXRyeSwgK3ZhbHVlc1swXS50cmltKCksICt2YWx1ZXNbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVDZW50ZXJTdHlsZS5zZXRHZW9tZXRyeShnZW9tZXRyeUZ1bmN0aW9uKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzW2xlbmd0aCsrXSA9IHRoaXMubGluZUNlbnRlclN0eWxlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlb21ldHJ5TGluZUNhcHMuaW5jbHVkZXModGhpcy5saW5lQ2FwQ2VudGVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZW9tZXRyeUZ1bmN0aW9uID0gKGZlYXR1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeShmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdlb0xpbmVTdHlsZS5jcmVhdGVBbmNob3JlZEdlb21ldHJ5KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVDYXBDZW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpZHRoQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lQ2FwQ2VudGVyU3R5bGUuc2V0R2VvbWV0cnkoZ2VvbWV0cnlGdW5jdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZXNbbGVuZ3RoKytdID0gdGhpcy5saW5lQ2FwQ2VudGVyU3R5bGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9uZXdheVN5bWJvbCkge1xyXG4gICAgICAgICAgICBsZXQgZmxhdENvb3JkaW5hdGVzID0gZmVhdHVyZS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgbGV0IGxvbmdlc3QgPSAwO1xyXG4gICAgICAgICAgICBsZXQgbG9uZ2VzdEluZGV4O1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIC0gNDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZFggPSBNYXRoLmFicyhmbGF0Q29vcmRpbmF0ZXNbaV0gLSBmbGF0Q29vcmRpbmF0ZXNbaSArIDJdKTtcclxuICAgICAgICAgICAgICAgIGxldCBkWSA9IE1hdGguYWJzKGZsYXRDb29yZGluYXRlc1tpICsgMV0gLSBmbGF0Q29vcmRpbmF0ZXNbaSArIDNdKTtcclxuICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IGRYICsgZFk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlzdGFuY2UgPiBsb25nZXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9uZ2VzdCA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdlc3RJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBzdGFydCA9IFtmbGF0Q29vcmRpbmF0ZXNbbG9uZ2VzdEluZGV4XSwgZmxhdENvb3JkaW5hdGVzW2xvbmdlc3RJbmRleCArIDFdXTtcclxuICAgICAgICAgICAgbGV0IGVuZCA9IFtmbGF0Q29vcmRpbmF0ZXNbbG9uZ2VzdEluZGV4ICsgMl0sIGZsYXRDb29yZGluYXRlc1tsb25nZXN0SW5kZXggKyAzXV07XHJcbiAgICAgICAgICAgIGxldCBkeCA9IGVuZFswXSAtIHN0YXJ0WzBdO1xyXG4gICAgICAgICAgICBsZXQgZHkgPSBlbmRbMV0gLSBzdGFydFsxXTtcclxuICAgICAgICAgICAgbGV0IHJvdGF0aW9uID0gTWF0aC5hdGFuMihkeSwgZHgpO1xyXG4gICAgICAgICAgICBsZXQgY2VudGVyUG9pbnQ6IFtudW1iZXIsIG51bWJlcl0gPSBbKHN0YXJ0WzBdICsgZW5kWzBdKSAqIDAuNSwgKHN0YXJ0WzFdICsgZW5kWzFdKSAqIDAuNV07XHJcbiAgICAgICAgICAgIGxldCBnZW9tZXRyeSA9IG5ldyBvbC5nZW9tLlBvaW50KGNlbnRlclBvaW50LCBcIlhZXCIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vbmV3YXlJY29uLnJvdGF0aW9uXyA9IC1yb3RhdGlvbjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub25ld2F5U3R5bGUuc2V0R2VvbWV0cnkoZ2VvbWV0cnkpO1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlc1tsZW5ndGgrK10gPSB0aGlzLm9uZXdheVN0eWxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3R5bGVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEdlb21ldHJ5KGZlYXR1cmU6IGFueSkge1xyXG4gICAgICAgIGxldCB0bXBGbGF0Q29vcmRpbmF0ZXMgPSBmZWF0dXJlLmdldEZsYXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgIGxldCB0bXBDb29yZGluYXRlczogb2wuQ29vcmRpbmF0ZVtdID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0bXBGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgdG1wQ29vcmRpbmF0ZXMucHVzaChbdG1wRmxhdENvb3JkaW5hdGVzW2ldLCB0bXBGbGF0Q29vcmRpbmF0ZXNbaSArIDFdXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgb2wuZ2VvbS5MaW5lU3RyaW5nKHRtcENvb3JkaW5hdGVzKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlQW5jaG9yZWRHZW9tZXRyeShnZW9tZXRyeTogb2wuZ2VvbS5HZW9tZXRyeSwgbGluZUNhcDogc3RyaW5nLCBsaW5lV2lkdGg6IG51bWJlciwgcmVzb2x1dGlvbjogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IHNlZ21lbnRzID0gR2VvTGluZVN0eWxlLmdldFRlcm1pbmFsU2VnbWVudHMoZ2VvbWV0cnkpO1xyXG4gICAgICAgIGxldCBsaW5lYXJSaW5nOiBvbC5nZW9tLkxpbmVhclJpbmcgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IG11bHRpUG9seWdvbiA9IG5ldyBvbC5nZW9tLk11bHRpUG9seWdvbihbXSk7XHJcbiAgICAgICAgZm9yIChsZXQgc2VnbWVudCBvZiBzZWdtZW50cykge1xyXG4gICAgICAgICAgICBsZXQgZmlyc3QgPSBzZWdtZW50WzBdO1xyXG4gICAgICAgICAgICBsZXQgbGFzdCA9IHNlZ21lbnRbMV07XHJcbiAgICAgICAgICAgIGxldCBkZWx0YSA9IGxpbmVXaWR0aCAqIHJlc29sdXRpb24gLyAyO1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNsYXRlRGVsdGEgPSAobGluZVdpZHRoIC0gMSkgKiByZXNvbHV0aW9uIC8gMjtcclxuICAgICAgICAgICAgc3dpdGNoIChsaW5lQ2FwKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidHJpYW5nbGVcIjpcclxuICAgICAgICAgICAgICAgICAgICBsaW5lYXJSaW5nID0gbmV3IG9sLmdlb20uTGluZWFyUmluZyhbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdLCBsYXN0WzFdICsgZGVsdGFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSArIGRlbHRhLCBsYXN0WzFdXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2xhc3RbMF0sIGxhc3RbMV0gLSBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdLCBsYXN0WzFdICsgZGVsdGFdXHJcbiAgICAgICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic3F1YXJlYW5jaG9yXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgKj0gMS41O1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcgPSBuZXcgb2wuZ2VvbS5MaW5lYXJSaW5nKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2xhc3RbMF0gLSBkZWx0YSwgbGFzdFsxXSArIGRlbHRhXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2xhc3RbMF0gKyBkZWx0YSwgbGFzdFsxXSArIGRlbHRhXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2xhc3RbMF0gKyBkZWx0YSwgbGFzdFsxXSAtIGRlbHRhXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2xhc3RbMF0gLSBkZWx0YSwgbGFzdFsxXSAtIGRlbHRhXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2xhc3RbMF0gLSBkZWx0YSwgbGFzdFsxXSArIGRlbHRhXVxyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJvdW5kYW5jaG9yXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgKj0gMjtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmFkaXVzRGVsdGEgPSBNYXRoLlBJIC8gMTg7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvb3JkaW5hdGVzOiBvbC5Db29yZGluYXRlW10gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmFkaXVzID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXMucHVzaChbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmNvcyhyYWRpdXMpICogZGVsdGEgKyBsYXN0WzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5zaW4ocmFkaXVzKSAqIGRlbHRhICsgbGFzdFsxXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFkaXVzICs9IHJhZGl1c0RlbHRhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKGNvb3JkaW5hdGVzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lYXJSaW5nID0gbmV3IG9sLmdlb20uTGluZWFyUmluZyhjb29yZGluYXRlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGlhbW9uZGFuY2hvclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhICo9IDEuNTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lYXJSaW5nID0gbmV3IG9sLmdlb20uTGluZWFyUmluZyhbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdIC0gZGVsdGEsIGxhc3RbMV0gKyBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdICsgZGVsdGEsIGxhc3RbMV0gKyBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdICsgZGVsdGEsIGxhc3RbMV0gLSBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdIC0gZGVsdGEsIGxhc3RbMV0gLSBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdIC0gZGVsdGEsIGxhc3RbMV0gKyBkZWx0YV1cclxuICAgICAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lYXJSaW5nLnJvdGF0ZShNYXRoLlBJIC8gNCwgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiYXJyb3dhbmNob3JcIjpcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YSAqPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcgPSBuZXcgb2wuZ2VvbS5MaW5lYXJSaW5nKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2xhc3RbMF0sIGxhc3RbMV0gKyBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdICsgZGVsdGEgKiBNYXRoLmNvcyhNYXRoLlBJIC8gNikgKiAyLCBsYXN0WzFdXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2xhc3RbMF0sIGxhc3RbMV0gLSBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdLCBsYXN0WzFdICsgZGVsdGFdXHJcbiAgICAgICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZpcnN0WzBdID09PSBsYXN0WzBdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RbMV0gPiBsYXN0WzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy5yb3RhdGUoLU1hdGguUEkgLyAyLCBsYXN0KTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lYXJSaW5nLnRyYW5zbGF0ZSgwLCAtdHJhbnNsYXRlRGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lYXJSaW5nLnJvdGF0ZShNYXRoLlBJIC8gMiwgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy50cmFuc2xhdGUoMCwgdHJhbnNsYXRlRGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGZpcnN0WzFdID09PSBsYXN0WzFdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdFswXSA8IGZpcnN0WzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy5yb3RhdGUoTWF0aC5QSSwgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy50cmFuc2xhdGUoLXRyYW5zbGF0ZURlbHRhLCAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy50cmFuc2xhdGUodHJhbnNsYXRlRGVsdGEsIDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGR4ID0gbGFzdFswXSAtIGZpcnN0WzBdO1xyXG4gICAgICAgICAgICAgICAgbGV0IGR5ID0gbGFzdFsxXSAtIGZpcnN0WzFdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJhZGlhbnMgPSBNYXRoLmF0YW4oZHkgLyBkeCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFzdFswXSA+IGZpcnN0WzBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy5yb3RhdGUocmFkaWFucywgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguY29zKHJhZGlhbnMpICogdHJhbnNsYXRlRGVsdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguc2luKHJhZGlhbnMpICogdHJhbnNsYXRlRGVsdGFcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lYXJSaW5nLnJvdGF0ZShyYWRpYW5zICsgTWF0aC5QSSwgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy50cmFuc2xhdGUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC1NYXRoLmNvcyhyYWRpYW5zKSAqIHRyYW5zbGF0ZURlbHRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAtTWF0aC5zaW4ocmFkaWFucykgKiB0cmFuc2xhdGVEZWx0YVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBwb2x5Z29uID0gbmV3IG9sLmdlb20uUG9seWdvbihbXSk7XHJcbiAgICAgICAgICAgIHBvbHlnb24uYXBwZW5kTGluZWFyUmluZyhsaW5lYXJSaW5nKTtcclxuICAgICAgICAgICAgbXVsdGlQb2x5Z29uLmFwcGVuZFBvbHlnb24ocG9seWdvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtdWx0aVBvbHlnb247XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFRlcm1pbmFsU2VnbWVudHMoZ2VvbWV0cnk6IG9sLmdlb20uR2VvbWV0cnkpIHtcclxuICAgICAgICBsZXQgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcclxuICAgICAgICBsZXQgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIGxldCBnZW9tZXRyeVR5cGUgPSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGU7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgZ2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxyXG4gICAgICAgICAgICAgICAgbGV0IGNvb3JkcyA9ICg8YW55Pmdlb21ldHJ5KS5nZXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0YXJ0ID0gW2Nvb3Jkc1sxXSwgY29vcmRzWzBdXTtcclxuICAgICAgICAgICAgICAgIGxldCBlbmQgPSBbY29vcmRzW2Nvb3Jkcy5sZW5ndGggLSAyXSwgY29vcmRzW2Nvb3Jkcy5sZW5ndGggLSAxXV07XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goc3RhcnQpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGVuZCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBnZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZXMgPSAoPGFueT5nZW9tZXRyeSkuZ2V0TGluZVN0cmluZ3MoKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHRzLCBHZW9MaW5lU3R5bGUuZ2V0VGVybWluYWxTZWdtZW50cyhsaW5lKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBnZW9tZXRyeVR5cGUuR0VPTUVUUllfQ09MTEVDVElPTjpcclxuICAgICAgICAgICAgICAgIGxldCBnZW9tZXRyaWVzID0gKDxhbnk+Z2VvbWV0cnkpLmdldEdlb21ldHJpZXMoKTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGdlb20gb2YgZ2VvbWV0cmllcykge1xyXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHJlc3VsdHMsIEdlb0xpbmVTdHlsZS5nZXRUZXJtaW5hbFNlZ21lbnRzKGdlb20pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdlb1N0eWxlIH0gZnJvbSBcIi4vZ2VvU3R5bGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9Qb2ludFN0eWxlIGV4dGVuZHMgR2VvU3R5bGUge1xyXG4gICAgc3RhdGljIGxpbmVhckdyYWRpZW50RGljdGlvbmFyeTogeyBbaW5kZXg6IHN0cmluZ106IGFueSB9ID0ge307XHJcbiAgICBzdGF0aWMgcmFkaWFsR3JhZGllbnREaWN0aW9uYXJ5OiB7IFtpbmRleDogc3RyaW5nXTogYW55IH0gPSB7fTtcclxuXHJcbiAgICBicnVzaE9wdGlvbnM6IGFueTtcclxuXHJcbiAgICBicnVzaFR5cGU6IHN0cmluZztcclxuICAgIGdseXBoOiBzdHJpbmc7XHJcbiAgICBmaWxsOiBzdHJpbmc7XHJcbiAgICBsaW5lYXJHcmFkaWVudDogc3RyaW5nO1xyXG4gICAgcmFkaWFsR3JhZGllbnQ6IHN0cmluZztcclxuICAgIGdseXBoTmFtZTogc3RyaW5nO1xyXG4gICAgZ2x5cGhNYXNrQ29sb3I6IHN0cmluZztcclxuICAgIGdseXBoTWFza01hcmdpbjogc3RyaW5nO1xyXG4gICAgZ2x5cGhNYXNrT3V0bGluZUNvbG9yOiBzdHJpbmdcclxuICAgIGdseXBoTWFza091dGxpbmVXaWR0aDogbnVtYmVyO1xyXG4gICAgZ2x5cGhNYXNrVHlwZTogc3RyaW5nXHJcbiAgICBvdXRsaW5lQ29sb3I6IHN0cmluZztcclxuICAgIG91dGxpbmVXaWR0aDogbnVtYmVyO1xyXG4gICAgc2l6ZTogbnVtYmVyO1xyXG4gICAgYW5nbGU6IG51bWJlcjtcclxuICAgIGR4OiBudW1iZXI7XHJcbiAgICBkeTogbnVtYmVyO1xyXG4gICAgcG9pbnRGaWxlOiBzdHJpbmc7XHJcbiAgICBvcGFjaXR5OiBudW1iZXI7XHJcbiAgICBzeW1ib2xUeXBlOiBzdHJpbmc7XHJcbiAgICB0cmFuc2Zvcm06IHN0cmluZztcclxuICAgIHBvaW50VHlwZTogc3RyaW5nO1xyXG4gICAgaW1hZ2VTdHlsZTogb2wuc3R5bGUuSW1hZ2U7XHJcblxyXG4gICAgLy8gc3RhdGljIGdseXBoQ2FjaGU6IGFueSA9IHt9O1xyXG5cclxuICAgIGNvbnZlcnRlZEdseXBoT3V0TGluZUNvbG9yOiBzdHJpbmc7XHJcbiAgICBjb252ZXJ0ZWRHbHlwaEZpbGw6IGFueTtcclxuXHJcbiAgICBzdHlsZTogb2wuc3R5bGUuU3R5bGU7XHJcbiAgICB0ZXh0U3R5bGU6IG9sLnN0eWxlLlRleHQ7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVKc29uPzogYW55KSB7XHJcbiAgICAgICAgc3VwZXIoc3R5bGVKc29uKTtcclxuICAgICAgICBpZiAoc3R5bGVKc29uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2x5cGggPSBzdHlsZUpzb25bXCJwb2ludC1nbHlwaFwiXTtcclxuICAgICAgICAgICAgdGhpcy5saW5lYXJHcmFkaWVudCA9IHN0eWxlSnNvbltcInBvaW50LWxpbmVhci1ncmFkaWVudFwiXTtcclxuICAgICAgICAgICAgdGhpcy5yYWRpYWxHcmFkaWVudCA9IHN0eWxlSnNvbltcInBvaW50LXJhZGlhbC1ncmFkaWVudFwiXTtcclxuICAgICAgICAgICAgdGhpcy5maWxsID0gc3R5bGVKc29uW1wicG9pbnQtZmlsbFwiXTtcclxuICAgICAgICAgICAgdGhpcy5nbHlwaE5hbWUgPSBzdHlsZUpzb25bXCJwb2ludC1nbHlwaC1uYW1lXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmdseXBoTWFza0NvbG9yID0gc3R5bGVKc29uW1wicG9pbnQtZ2x5cGgtbWFzay1jb2xvclwiXTtcclxuICAgICAgICAgICAgdGhpcy5nbHlwaE1hc2tNYXJnaW4gPSBzdHlsZUpzb25bXCJwb2ludC1nbHlwaC1tYXNrLW1hcmdpblwiXTtcclxuICAgICAgICAgICAgdGhpcy5nbHlwaE1hc2tPdXRsaW5lQ29sb3IgPSBzdHlsZUpzb25bXCJwb2ludC1nbHlwaC1tYXNrLW91dGxpbmUtY29sb3JcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZ2x5cGhNYXNrT3V0bGluZVdpZHRoID0gc3R5bGVKc29uW1wicG9pbnQtZ2x5cGgtbWFzay1vdXRsaW5lLXdpZHRoXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmdseXBoTWFza1R5cGUgPSBzdHlsZUpzb25bXCJwb2ludC1nbHlwaC1tYXNrLXR5cGVcIl07XHJcbiAgICAgICAgICAgIHRoaXMub3V0bGluZUNvbG9yID0gc3R5bGVKc29uW1wicG9pbnQtb3V0bGluZS1jb2xvclwiXTtcclxuICAgICAgICAgICAgdGhpcy5vdXRsaW5lV2lkdGggPSBzdHlsZUpzb25bXCJwb2ludC1vdXRsaW5lLXdpZHRoXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnNpemUgPSBzdHlsZUpzb25bXCJwb2ludC1zaXplXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmFuZ2xlID0gc3R5bGVKc29uW1wicG9pbnQtcm90YXRlLWFuZ2xlXCJdID8gc3R5bGVKc29uW1wicG9pbnQtcm90YXRlLWFuZ2xlXCJdIDogMDtcclxuICAgICAgICAgICAgdGhpcy5keCA9IHN0eWxlSnNvbltcInBvaW50LWR4XCJdO1xyXG4gICAgICAgICAgICB0aGlzLmR5ID0gc3R5bGVKc29uW1wicG9pbnQtZHlcIl07XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRGaWxlID0gc3R5bGVKc29uW1wicG9pbnQtZmlsZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5vcGFjaXR5ID0gc3R5bGVKc29uW1wicG9pbnQtb3BhY2l0eVwiXTtcclxuICAgICAgICAgICAgdGhpcy5zeW1ib2xUeXBlID0gc3R5bGVKc29uW1wicG9pbnQtc3ltYm9sLXR5cGVcIl07XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gc3R5bGVKc29uW1wicG9pbnQtdHJhbnNmb3JtXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50VHlwZSA9IHN0eWxlSnNvbltcInBvaW50LXR5cGVcIl07XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vdXRsaW5lQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udmVydGVkR2x5cGhPdXRMaW5lQ29sb3IgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLm91dGxpbmVDb2xvciwgdGhpcy5vcGFjaXR5KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZmlsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGwgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLmZpbGwsIHRoaXMub3BhY2l0eSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmVhckdyYWRpZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoR2VvUG9pbnRTdHlsZS5saW5lYXJHcmFkaWVudERpY3Rpb25hcnkuaGFzT3duUHJvcGVydHkodGhpcy5saW5lYXJHcmFkaWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbCA9IEdlb1BvaW50U3R5bGUubGluZWFyR3JhZGllbnREaWN0aW9uYXJ5W3RoaXMubGluZWFyR3JhZGllbnRdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbCA9IEdlb1N0eWxlLnRvT0xMaW5lYXJHcmFkaWVudCh0aGlzLmxpbmVhckdyYWRpZW50LCB0aGlzLm9wYWNpdHksIHRoaXMuc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgR2VvUG9pbnRTdHlsZS5saW5lYXJHcmFkaWVudERpY3Rpb25hcnlbdGhpcy5saW5lYXJHcmFkaWVudF0gPSB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucmFkaWFsR3JhZGllbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChHZW9Qb2ludFN0eWxlLnJhZGlhbEdyYWRpZW50RGljdGlvbmFyeS5oYXNPd25Qcm9wZXJ0eSh0aGlzLnJhZGlhbEdyYWRpZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udmVydGVkR2x5cGhGaWxsID0gR2VvUG9pbnRTdHlsZS5yYWRpYWxHcmFkaWVudERpY3Rpb25hcnlbdGhpcy5yYWRpYWxHcmFkaWVudF07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udmVydGVkR2x5cGhGaWxsID0gR2VvU3R5bGUudG9PTFJhZGlhbEdyYWRpZW50KHRoaXMucmFkaWFsR3JhZGllbnQsIHRoaXMub3BhY2l0eSwgdGhpcy5zaXplKTtcclxuICAgICAgICAgICAgICAgICAgICBHZW9Qb2ludFN0eWxlLnJhZGlhbEdyYWRpZW50RGljdGlvbmFyeVt0aGlzLnJhZGlhbEdyYWRpZW50XSA9IHRoaXMuY29udmVydGVkR2x5cGhGaWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUNvcmUoKSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSgpO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5wb2ludFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0U3ltYm9sU3R5bGUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiaW1hZ2VcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdEJpdG1hcFN0eWxlKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImdseXBoXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRHbHlwaFN0eWxlKCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBvaW50VHlwZSA9PT0gXCJnbHlwaFwiKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdseXBoICYmIHRoaXMuZ2x5cGhOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAoPGFueT50aGlzLnRleHRTdHlsZSkubGFiZWwgPSB0aGlzLmdldEdseXBoSW1hZ2UodGhpcy50ZXh0U3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5zZXRJbWFnZShudWxsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuc2V0VGV4dCh0aGlzLnRleHRTdHlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUuc2V0SW1hZ2UodGhpcy5pbWFnZVN0eWxlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udmVydGVkU3R5bGVDb3JlKGZlYXR1cmU6IGFueSwgcmVzb2x1dGlvbjogbnVtYmVyLCBvcHRpb25zOiBhbnkpOiBvbC5zdHlsZS5TdHlsZVtdIHtcclxuICAgICAgICBpZiAodGhpcy5wb2ludFR5cGUgPT09IFwiZ2x5cGhcIikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nbHlwaCAmJiB0aGlzLmdseXBoTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgKDxhbnk+dGhpcy50ZXh0U3R5bGUpLmxhYmVsUG9zaXRpb24gPSBmZWF0dXJlLmdldEZsYXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgZmVhdHVyZVppbmRleCA9IGZlYXR1cmVbXCJ0ZW1wVHJlZVppbmRleFwiXTtcclxuICAgICAgICBpZiAoZmVhdHVyZVppbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVaaW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnN0eWxlLnNldFpJbmRleChmZWF0dXJlWmluZGV4KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnN0eWxlc1swXSA9IHRoaXMuc3R5bGU7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRHbHlwaEltYWdlKHRleHRTdGF0ZTogYW55KSB7XHJcbiAgICAgICAgbGV0IGZvbnQgPSB0ZXh0U3RhdGUuZm9udF87XHJcbiAgICAgICAgbGV0IHN0cm9rZUNvbG9yO1xyXG4gICAgICAgIGxldCBvdXRsaW5lV2lkdGggPSAwO1xyXG4gICAgICAgIGxldCB0ZXh0U3Ryb2sgPSB0ZXh0U3RhdGUuZ2V0U3Ryb2tlKCk7XHJcbiAgICAgICAgaWYgKHRleHRTdHJvaykge1xyXG4gICAgICAgICAgICBzdHJva2VDb2xvciA9IHRleHRTdHJvay5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBvdXRsaW5lV2lkdGggPSB0ZXh0U3Ryb2suZ2V0V2lkdGgoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBzY2FsZSA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG5cclxuICAgICAgICAvLyBoZXJlXHJcbiAgICAgICAgbGV0IHdpZHRoID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuVGV4dFJlcGxheS5tZWFzdXJlVGV4dFdpZHRocyhmb250LCBbdGV4dFN0YXRlLnRleHRfXSwgW10pICsgb3V0bGluZVdpZHRoICogMjtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykubWVhc3VyZVRleHRIZWlnaHQoZm9udCkgKyBvdXRsaW5lV2lkdGggKiAyO1xyXG5cclxuICAgICAgICBsZXQgdG1wTWFza01hcmdpbiA9ICh0aGlzLmdseXBoTWFza01hcmdpbiA/IHRoaXMuZ2x5cGhNYXNrTWFyZ2luIDogXCIwXCIpLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgbGV0IHRtcE1hc2tIZWlnaHRNYXJnaW4gPSAwO1xyXG4gICAgICAgIGxldCB0bXBNYXNrV2lkdGhNYXJnaW4gPSAwO1xyXG4gICAgICAgIHN3aXRjaCAodG1wTWFza01hcmdpbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgdG1wTWFza0hlaWdodE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICogMjtcclxuICAgICAgICAgICAgICAgIHRtcE1hc2tXaWR0aE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICogMjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICB0bXBNYXNrSGVpZ2h0TWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgKiAyO1xyXG4gICAgICAgICAgICAgICAgdG1wTWFza1dpZHRoTWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblsxXSkgKiAyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIHRtcE1hc2tIZWlnaHRNYXJnaW4gPSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSArIHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMl0pO1xyXG4gICAgICAgICAgICAgICAgdG1wTWFza1dpZHRoTWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblsxXSkgKiAyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICAgIHRtcE1hc2tIZWlnaHRNYXJnaW4gPSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSArIHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMl0pO1xyXG4gICAgICAgICAgICAgICAgdG1wTWFza1dpZHRoTWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblsxXSkgKyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzNdKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCB0bXBNYXNrT3V0bGluZVdpZHRoID0gKHRoaXMuZ2x5cGhNYXNrT3V0bGluZVdpZHRoID8gdGhpcy5nbHlwaE1hc2tPdXRsaW5lV2lkdGggOiAwKSAqIDI7XHJcblxyXG4gICAgICAgIGxldCByZW5kZXJXaWR0aCA9IHdpZHRoICsgdG1wTWFza1dpZHRoTWFyZ2luO1xyXG4gICAgICAgIGxldCByZW5kZXJIZWlnaHQgPSBoZWlnaHQgKyB0bXBNYXNrV2lkdGhNYXJnaW47XHJcblxyXG4gICAgICAgIGxldCBjYW52YXNXaWR0aCA9IHdpZHRoICsgdG1wTWFza1dpZHRoTWFyZ2luICsgdG1wTWFza091dGxpbmVXaWR0aDtcclxuICAgICAgICBsZXQgY2FudmFzSGVpZ2h0ID0gaGVpZ2h0ICsgdG1wTWFza0hlaWdodE1hcmdpbiArIHRtcE1hc2tPdXRsaW5lV2lkdGg7XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gKDxhbnk+b2wpLmRvbS5jcmVhdGVDYW52YXNDb250ZXh0MkQoY2FudmFzV2lkdGggKiBzY2FsZSwgY2FudmFzSGVpZ2h0ICogc2NhbGUpO1xyXG5cclxuICAgICAgICBpZiAoc2NhbGUgIT09IDEpIHsgY29udGV4dC5zY2FsZShzY2FsZSwgc2NhbGUpOyB9XHJcblxyXG4gICAgICAgIHRoaXMuZHJhd01hc2soY29udGV4dCwgMCwgMCwgcmVuZGVyV2lkdGgsIHJlbmRlckhlaWdodCk7XHJcblxyXG4gICAgICAgIGNvbnRleHQuZm9udCA9IGZvbnQ7XHJcbiAgICAgICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSBcIm1pZGRsZVwiO1xyXG4gICAgICAgIGNvbnRleHQudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICBpZiAodGV4dFN0cm9rKSB7XHJcbiAgICAgICAgICAgIGlmIChzdHJva2VDb2xvciAmJiBvdXRsaW5lV2lkdGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlQ29sb3I7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IG91dGxpbmVXaWR0aCAqICgoPGFueT5vbC5oYXMpLlNBRkFSSSA/IHNjYWxlIDogMSk7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQodGV4dFN0YXRlLnRleHRfLCBjYW52YXNXaWR0aCAvIDIsIGNhbnZhc0hlaWdodCAvIDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGV4dEZpbGwgPSB0ZXh0U3RhdGUuZ2V0RmlsbCgpO1xyXG4gICAgICAgIGlmICh0ZXh0RmlsbCkge1xyXG4gICAgICAgICAgICBsZXQgY29sb3IgPSB0ZXh0RmlsbC5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBpZiAoY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxUZXh0KHRleHRTdGF0ZS50ZXh0XywgY2FudmFzV2lkdGggLyAyLCBjYW52YXNIZWlnaHQgLyAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY2FudmFzO1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdNYXNrKGNvbnRleHQ6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGZpbGwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHN0cm9rZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2x5cGhNYXNrQ29sb3IpIHtcclxuICAgICAgICAgICAgZmlsbCA9IG5ldyBvbC5zdHlsZS5GaWxsKCk7XHJcbiAgICAgICAgICAgIGZpbGwuc2V0Q29sb3IoR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5nbHlwaE1hc2tDb2xvciwgdGhpcy5vcGFjaXR5ID8gdGhpcy5vcGFjaXR5IDogMSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2x5cGhNYXNrT3V0bGluZUNvbG9yICYmIHRoaXMuZ2x5cGhNYXNrT3V0bGluZVdpZHRoKSB7XHJcbiAgICAgICAgICAgIHN0cm9rZSA9IG5ldyBvbC5zdHlsZS5TdHJva2UoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2x5cGhNYXNrT3V0bGluZUNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBzdHJva2Uuc2V0Q29sb3IoR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5nbHlwaE1hc2tPdXRsaW5lQ29sb3IsIHRoaXMub3BhY2l0eSA/IHRoaXMub3BhY2l0eSA6IDEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5nbHlwaE1hc2tPdXRsaW5lV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHN0cm9rZS5zZXRXaWR0aCh0aGlzLmdseXBoTWFza091dGxpbmVXaWR0aCA/IHRoaXMuZ2x5cGhNYXNrT3V0bGluZVdpZHRoIDogMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuZ2x5cGhNYXNrVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZGVmYXVsdFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiRGVmYXVsdFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwicmVjdGFuZ2xlXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJSZWN0YW5nbGVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JlY3RhbmdsZShjb250ZXh0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyb3VuZGVkQ29ybmVyc1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwiUm91bmRlZENvcm5lcnNcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JvdW5kUmVjdGFuZ2xlKGNvbnRleHQsIHgsIHksIHdpZHRoLCBoZWlnaHQsIGZpbGwsIHN0cm9rZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJvdW5kZWRFbmRzXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJSb3VuZGVkRW5kc1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Um91bmRlZEVuZHMoY29udGV4dCwgeCwgeSwgd2lkdGgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiY2lyY2xlXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJDaXJjbGVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0NpcmNsZShjb250ZXh0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdSZWN0YW5nbGUoY29udGV4dDogYW55LCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGZpbGw6IG9sLnN0eWxlLkZpbGwsIHN0cm9rZTogb2wuc3R5bGUuU3Ryb2tlKSB7XHJcbiAgICAgICAgaWYgKGZpbGwpIHtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlLmdldFdpZHRoKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2UuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2VSZWN0KHggKyBzdHJva2UuZ2V0V2lkdGgoKSwgeSArIHN0cm9rZS5nZXRXaWR0aCgpLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkcmF3Um91bmRSZWN0YW5nbGUoY29udGV4dDogYW55LCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGZpbGw6IG9sLnN0eWxlLkZpbGwsIHN0cm9rZTogb2wuc3R5bGUuU3Ryb2tlKSB7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9ICh3aWR0aCA8IGhlaWdodCA/IHdpZHRoIDogaGVpZ2h0KSAqIDAuMztcclxuICAgICAgICAvLyB3aWR0aCAqPSAwLjk7XHJcbiAgICAgICAgLy8gaGVpZ2h0ICo9IDAuODtcclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIHggPSB4ICsgKHN0cm9rZS5nZXRXaWR0aCgpID8gc3Ryb2tlLmdldFdpZHRoKCkgOiAwKTtcclxuICAgICAgICAgICAgeSA9IHkgKyAoc3Ryb2tlLmdldFdpZHRoKCkgPyBzdHJva2UuZ2V0V2lkdGgoKSA6IDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyh4ICsgcmFkaXVzLCB5KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyh4ICsgd2lkdGggLSByYWRpdXMsIHkpO1xyXG4gICAgICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh4ICsgd2lkdGgsIHksIHggKyB3aWR0aCwgeSArIHJhZGl1cyk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oeCArIHdpZHRoLCB5ICsgaGVpZ2h0IC0gcmFkaXVzKTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoLCB5ICsgaGVpZ2h0LCB4ICsgd2lkdGggLSByYWRpdXMsIHkgKyBoZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKHggKyByYWRpdXMsIHkgKyBoZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh4LCB5ICsgaGVpZ2h0LCB4LCB5ICsgaGVpZ2h0IC0gcmFkaXVzKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyh4LCB5ICsgcmFkaXVzKTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSwgeCArIHJhZGl1cywgeSk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgaWYgKGZpbGwpIHtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN0cm9rZSkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZS5nZXRXaWR0aCgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhd1JvdW5kZWRFbmRzKGNvbnRleHQ6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBmaWxsOiBvbC5zdHlsZS5GaWxsLCBzdHJva2U6IG9sLnN0eWxlLlN0cm9rZSkge1xyXG4gICAgICAgIGxldCByYWRpdXMgPSAod2lkdGggPCBoZWlnaHQgPyB3aWR0aCA6IGhlaWdodCkgKiAwLjI7XHJcbiAgICAgICAgLy8gd2lkdGggKj0gMC45O1xyXG4gICAgICAgIC8vIGhlaWdodCAqPSAwLjg7XHJcbiAgICAgICAgaWYgKHN0cm9rZSkge1xyXG4gICAgICAgICAgICB4ID0geCArIChzdHJva2UuZ2V0V2lkdGgoKSA/IHN0cm9rZS5nZXRXaWR0aCgpIDogMCk7XHJcbiAgICAgICAgICAgIHkgPSB5ICsgKHN0cm9rZS5nZXRXaWR0aCgpID8gc3Ryb2tlLmdldFdpZHRoKCkgOiAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oeCArIHJhZGl1cywgeSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oeCArIHdpZHRoIC0gcmFkaXVzLCB5KTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoLCB5ICsgaGVpZ2h0ICogMC41LCB4ICsgd2lkdGggLSByYWRpdXMsIHkgKyBoZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKHggKyByYWRpdXMsIHkgKyBoZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh4LCB5ICsgaGVpZ2h0ICogMC41LCB4ICsgcmFkaXVzLCB5KTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBpZiAoZmlsbCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGwuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBzdHJva2UuZ2V0V2lkdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZS5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRyYXdDaXJjbGUoY29udGV4dDogYW55LCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGZpbGw6IG9sLnN0eWxlLkZpbGwsIHN0cm9rZTogb2wuc3R5bGUuU3Ryb2tlKSB7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9ICh3aWR0aCA8IGhlaWdodCA/IHdpZHRoIDogaGVpZ2h0KSAqIDAuNVxyXG4gICAgICAgIC8vIHdpZHRoICo9IDAuOTtcclxuICAgICAgICAvLyBoZWlnaHQgKj0gMC44O1xyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgeCA9IHggKyAoc3Ryb2tlLmdldFdpZHRoKCkgPyBzdHJva2UuZ2V0V2lkdGgoKSA6IDApO1xyXG4gICAgICAgICAgICB5ID0geSArIChzdHJva2UuZ2V0V2lkdGgoKSA/IHN0cm9rZS5nZXRXaWR0aCgpIDogMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuYXJjKHggKyB3aWR0aCAqIDAuNSwgeSArIGhlaWdodCAqIDAuNSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGlmIChmaWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbC5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBzdHJva2UuZ2V0V2lkdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZS5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgcHJpdmF0ZSBpbml0U3ltYm9sU3R5bGUoKSB7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IHRoaXMuc2l6ZSAvIDI7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnN5bWJvbFR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImNpcmNsZVwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVN0eWxlID0gbmV3IG9sLnN0eWxlLkNpcmNsZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGwgIT09IHVuZGVmaW5lZCA/IG5ldyBvbC5zdHlsZS5GaWxsKCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IHRoaXMuY29udmVydGVkR2x5cGhPdXRMaW5lQ29sb3IgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm91dGxpbmVXaWR0aCA+IDAgPyBuZXcgb2wuc3R5bGUuU3Ryb2tlKCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbnZlcnRlZEdseXBoT3V0TGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5vdXRsaW5lV2lkdGhcclxuICAgICAgICAgICAgICAgICAgICB9KSkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiByYWRpdXNcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzcXVhcmVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VTdHlsZSA9IG5ldyBvbC5zdHlsZS5SZWd1bGFyU2hhcGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IHRoaXMuY29udmVydGVkR2x5cGhGaWxsICE9PSB1bmRlZmluZWQgPyBuZXcgb2wuc3R5bGUuRmlsbCgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGxcclxuICAgICAgICAgICAgICAgICAgICB9KSkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLmNvbnZlcnRlZEdseXBoT3V0TGluZUNvbG9yICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vdXRsaW5lV2lkdGggPiAwID8gbmV3IG9sLnN0eWxlLlN0cm9rZSgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMub3V0bGluZVdpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czogNCxcclxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IHJhZGl1cyxcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZTogTWF0aC5QSSAvIDQgKyB0aGlzLmFuZ2xlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwidHJpYW5nbGVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VTdHlsZSA9IG5ldyBvbC5zdHlsZS5SZWd1bGFyU2hhcGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IHRoaXMuY29udmVydGVkR2x5cGhGaWxsICE9PSB1bmRlZmluZWQgPyBuZXcgb2wuc3R5bGUuRmlsbCgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGxcclxuICAgICAgICAgICAgICAgICAgICB9KSkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLmNvbnZlcnRlZEdseXBoT3V0TGluZUNvbG9yICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vdXRsaW5lV2lkdGggPiAwID8gbmV3IG9sLnN0eWxlLlN0cm9rZSgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMub3V0bGluZVdpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czogMyxcclxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IHJhZGl1cyxcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZTogdGhpcy5hbmdsZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImNyb3NzXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlU3R5bGUgPSBuZXcgb2wuc3R5bGUuUmVndWxhclNoYXBlKHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbCAhPT0gdW5kZWZpbmVkID8gbmV3IG9sLnN0eWxlLkZpbGwoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydGVkR2x5cGhGaWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogdGhpcy5jb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvciAhPT0gdW5kZWZpbmVkICYmIHRoaXMub3V0bGluZVdpZHRoID4gMCA/IG5ldyBvbC5zdHlsZS5TdHJva2UoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydGVkR2x5cGhPdXRMaW5lQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLm91dGxpbmVXaWR0aFxyXG4gICAgICAgICAgICAgICAgICAgIH0pKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHM6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiByYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzMjogMCxcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZTogdGhpcy5hbmdsZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImRpYW1vbmRcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZGlhbW9uZDJcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic3RhclwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVN0eWxlID0gbmV3IG9sLnN0eWxlLlJlZ3VsYXJTaGFwZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGwgIT09IHVuZGVmaW5lZCA/IG5ldyBvbC5zdHlsZS5GaWxsKCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IHRoaXMuY29udmVydGVkR2x5cGhPdXRMaW5lQ29sb3IgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm91dGxpbmVXaWR0aCA+IDAgPyBuZXcgb2wuc3R5bGUuU3Ryb2tlKCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbnZlcnRlZEdseXBoT3V0TGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5vdXRsaW5lV2lkdGhcclxuICAgICAgICAgICAgICAgICAgICB9KSkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiA1LFxyXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogcmFkaXVzLFxyXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czI6IHJhZGl1cyAvIDIuNSxcclxuICAgICAgICAgICAgICAgICAgICBhbmdsZTogdGhpcy5hbmdsZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInN0YXIyXCI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0Qml0bWFwU3R5bGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9pbnRGaWxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VTdHlsZSA9IG5ldyBvbC5zdHlsZS5JY29uKCh7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiB0aGlzLm9wYWNpdHkgfHwgMSxcclxuICAgICAgICAgICAgICAgIHNyYzogdGhpcy5wb2ludEZpbGUsXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogdGhpcy5hbmdsZSAqIE1hdGguUEkgLyAxODAsXHJcbiAgICAgICAgICAgICAgICBvZmZzZXQ6IFt0aGlzLmR4LCAtdGhpcy5keV1cclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRHbHlwaFN0eWxlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmdseXBoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dFN0eWxlID0gbmV3IG9sLnN0eWxlLlRleHQoKHtcclxuICAgICAgICAgICAgICAgIGZvbnQ6IGAke3RoaXMuc2l6ZX1weCAke3RoaXMuZ2x5cGh9YCxcclxuICAgICAgICAgICAgICAgIG9mZnNldFg6IHRoaXMuZHgsXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRZOiB0aGlzLmR5LFxyXG4gICAgICAgICAgICAgICAgdGV4dDogdGhpcy5nbHlwaE5hbWUsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbCAhPT0gdW5kZWZpbmVkID8gbmV3IG9sLnN0eWxlLkZpbGwoKHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGxcclxuICAgICAgICAgICAgICAgIH0pKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHN0cm9rZTogdGhpcy5jb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvciAhPT0gdW5kZWZpbmVkICYmIHRoaXMub3V0bGluZVdpZHRoID4gMCA/IG5ldyBvbC5zdHlsZS5TdHJva2UoKHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5vdXRsaW5lV2lkdGhcclxuICAgICAgICAgICAgICAgIH0pKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIHJvdGF0aW9uOiB0aGlzLmFuZ2xlICogTWF0aC5QSSAvIDE4MFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXBwbHlUcmFuc0Zvcm0oc3R5bGU6IG9sLnN0eWxlLlN0eWxlKSB7XHJcbiAgICAgICAgbGV0IHRyYW5zZm9ybVJneCA9IC8oW2Etel0rKVxcKCguKj8pXFwpL2k7XHJcbiAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtICYmIHRyYW5zZm9ybVJneC50ZXN0KHRoaXMudHJhbnNmb3JtKSkge1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hlZFJlc3VsdHMgPSB0aGlzLnRyYW5zZm9ybS5tYXRjaCh0cmFuc2Zvcm1SZ3gpO1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNGb3JtVHlwZSA9IG1hdGNoZWRSZXN1bHRzLmxlbmd0aCA+IDIgPyBtYXRjaGVkUmVzdWx0c1sxXSA6IFwiXCI7XHJcbiAgICAgICAgICAgIGxldCB0cmFuc0Zvcm1WYWx1ZSA9IG1hdGNoZWRSZXN1bHRzLmxlbmd0aCA+IDIgPyBtYXRjaGVkUmVzdWx0c1syXSA6IFwiXCI7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHJhbnNGb3JtVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJvdGF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmdldEltYWdlKCkgJiYgc3R5bGUuZ2V0SW1hZ2UoKS5zZXRSb3RhdGlvbihwYXJzZUludCh0cmFuc0Zvcm1WYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmdldFRleHQoKSAmJiBzdHlsZS5nZXRUZXh0KCkuc2V0Um90YXRpb24ocGFyc2VJbnQodHJhbnNGb3JtVmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY2FsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzY2FsZSA9IHBhcnNlSW50KHRyYW5zRm9ybVZhbHVlLnNwbGl0KFwiLFwiKVswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZ2V0SW1hZ2UoKSAmJiBzdHlsZS5nZXRJbWFnZSgpLnNldFNjYWxlKHNjYWxlKTtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5nZXRUZXh0KCkgJiYgc3R5bGUuZ2V0VGV4dCgpLnNldFNjYWxlKHNjYWxlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGVcIjpcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgXCJub3Qgc3VwcG9ydCBcIiArIHRoaXMudHJhbnNmb3JtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiXHJcbmltcG9ydCB7IEdlb1N0eWxlIH0gZnJvbSBcIi4vZ2VvU3R5bGVcIjtcclxuaW1wb3J0IHsgR2VvQnJ1c2ggfSBmcm9tIFwiLi4vc3R5bGUvZ2VvQnJ1c2hcIjtcclxuXHJcbmltcG9ydCB7IFRleHRMYWJlbGluZ1N0cmF0ZWd5IH0gZnJvbSBcIi4vdGV4dExhYmVsaW5nU3RyYXRlZ3lcIjtcclxuaW1wb3J0IHsgRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3kgfSBmcm9tIFwiLi9kZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb1NoaWVsZFN0eWxlIGV4dGVuZHMgR2VvU3R5bGUge1xyXG4gICAgdGV4dEFsaWducyA9IFtcImxlZnRcIiwgXCJyaWdodFwiLCBcImNlbnRlclwiLCBcImVuZFwiLCBcInN0YXJ0XCJdO1xyXG4gICAgYWxpZ246IHN0cmluZztcclxuICAgIC8vIGF2b2lkRWRnZXM6IGJvb2xlYW47XHJcbiAgICBkYXRlRm9ybWF0OiBzdHJpbmc7XHJcbiAgICBkeDogbnVtYmVyO1xyXG4gICAgZHk6IG51bWJlcjtcclxuICAgIGZhY2VOYW1lOiBzdHJpbmc7XHJcbiAgICBmaWxsOiBzdHJpbmc7XHJcbiAgICBmb3JjZUhvcml6b250YWxGb3JMaW5lOiBib29sZWFuO1xyXG4gICAgaGFsb0ZpbGw6IHN0cmluZztcclxuICAgIGhhbG9SYWRpdXM6IG51bWJlcjtcclxuICAgIG1hcmdpbjogbnVtYmVyO1xyXG4gICAgbWF4Q2hhckFuZ2xlRGVsdGE6IHN0cmluZztcclxuICAgIG1pbkRpc3RhbmNlOiBudW1iZXI7XHJcbiAgICBtaW5QYWRkaW5nOiBudW1iZXI7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBmb250OiBzdHJpbmc7XHJcbiAgICBudW1lcmljRm9ybWF0OiBzdHJpbmc7XHJcbiAgICBhbmdsZTogbnVtYmVyO1xyXG4gICAgb3BhY2l0eTogbnVtYmVyO1xyXG4gICAgb3JpZW50YXRpb246IG51bWJlcjtcclxuICAgIHBsYWNlbWVudHM6IHN0cmluZztcclxuICAgIHBsYWNlbWVudFR5cGU6IHN0cmluZztcclxuICAgIHBvbHlnb25MYWJlbGluZ0xvY2F0aW9uTW9kZTogc3RyaW5nO1xyXG4gICAgcmF0aW86IHN0cmluZztcclxuICAgIHNpemU6IG51bWJlcjtcclxuICAgIHNwYWNpbmc6IG51bWJlcjtcclxuICAgIHNwbGluZVR5cGU6IHN0cmluZztcclxuICAgIHRleHRGb3JtYXQ6IHN0cmluZztcclxuICAgIHdyYXA6IHN0cmluZztcclxuICAgIHdyYXBXaWR0aDogbnVtYmVyO1xyXG4gICAgaWNvblR5cGU6IHN0cmluZztcclxuICAgIGljb25TaXplOiBudW1iZXI7XHJcbiAgICBpY29uU3JjOiBzdHJpbmc7XHJcbiAgICBpY29uQ29sb3I6IHN0cmluZztcclxuICAgIGljb25PdXRsaW5lQ29sb3I6IHN0cmluZztcclxuICAgIGljb25PdXRsaW5lV2lkdGg6IG51bWJlcjtcclxuICAgIGljb25TeW1ib2xUeXBlOiBzdHJpbmc7XHJcblxyXG4gICAgY29udmVydFN5bWJvbENvbG9yOiBzdHJpbmc7XHJcbiAgICBjb252ZXJ0U3ltYm9sT3V0bGluZUNvbG9yOiBzdHJpbmc7XHJcblxyXG4gICAgdGV4dFN0eWxlOiBhbnk7XHJcbiAgICBzdHlsZTogYW55O1xyXG4gICAgaW1hZ2U6IGFueTtcclxuICAgIGltYWdlQ2FjaGU6IGFueTtcclxuICAgIGxhYmVsSW5mb3M6IGFueTtcclxuXHJcbiAgICBjaGFyV2lkdGhzOiBhbnk7XHJcblxyXG4gICAgc3RhdGljIHBvaUNhY2hlID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVKc29uPzogYW55KSB7XHJcbiAgICAgICAgc3VwZXIoc3R5bGVKc29uKTtcclxuICAgICAgICB0aGlzLmltYWdlQ2FjaGUgPSBbXTtcclxuICAgICAgICB0aGlzLmxhYmVsSW5mb3MgPSAgbmV3ICg8YW55Pm9sKS5zdHJ1Y3RzLkxSVUNhY2hlKDUxMik7XHJcbiAgICAgICAgdGhpcy5jaGFyV2lkdGhzID0ge307XHJcblxyXG4gICAgICAgIGlmIChzdHlsZUpzb24pIHtcclxuICAgICAgICAgICAgdGhpcy5pY29uVHlwZSA9IHN0eWxlSnNvbltcInNoaWVsZC1pY29uLXR5cGVcIl07XHJcbiAgICAgICAgICAgIHRoaXMuaWNvblN5bWJvbFR5cGUgPSBzdHlsZUpzb25bXCJzaGllbGQtaWNvbi1zeW1ib2wtdHlwZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5pY29uU2l6ZSA9IHN0eWxlSnNvbltcInNoaWVsZC1pY29uLXNpemVcIl0gPyBzdHlsZUpzb25bXCJzaGllbGQtaWNvbi1zaXplXCJdIDogMDtcclxuICAgICAgICAgICAgdGhpcy5pY29uU3JjID0gc3R5bGVKc29uW1wic2hpZWxkLWljb24tc3JjXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmljb25Db2xvciA9IHN0eWxlSnNvbltcInNoaWVsZC1pY29uLWNvbG9yXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmljb25PdXRsaW5lQ29sb3IgPSBzdHlsZUpzb25bXCJzaGllbGQtaWNvbi1vdXRsaW5lLWNvbG9yXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmljb25PdXRsaW5lV2lkdGggPSBzdHlsZUpzb25bXCJzaGllbGQtaWNvbi1vdXRsaW5lLXdpZHRoXCJdID8gc3R5bGVKc29uW1wic2hpZWxkLWljb24tb3V0bGluZS13aWR0aFwiXSA6IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pY29uU3JjKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIUdlb1NoaWVsZFN0eWxlLnBvaUNhY2hlW3RoaXMuaWNvblNyY10pIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5pY29uU3JjO1xyXG4gICAgICAgICAgICAgICAgICAgIEdlb1NoaWVsZFN0eWxlLnBvaUNhY2hlW3RoaXMuaWNvblNyY10gPSBpbWFnZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHN0eWxlSnNvbltcInNoaWVsZC1uYW1lXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmZvbnQgPSBzdHlsZUpzb25bXCJzaGllbGQtZm9udFwiXTtcclxuICAgICAgICAgICAgdGhpcy5hbGlnbiA9IHN0eWxlSnNvbltcInNoaWVsZC1hbGlnblwiXTtcclxuICAgICAgICAgICAgdGhpcy5hbmdsZSA9IHN0eWxlSnNvbltcInNoaWVsZC1yb3RhdGUtYW5nbGVcIl0gPyBzdHlsZUpzb25bXCJzaGllbGQtcm90YXRlLWFuZ2xlXCJdIDogMDtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaXMuYXZvaWRFZGdlcyA9IHN0eWxlSnNvbltcInNoaWVsZC1hdm9pZC1lZGdlc1wiXTtcclxuICAgICAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gc3R5bGVKc29uW1wic2hpZWxkLWRhdGUtZm9ybWF0XCJdO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ET1xyXG4gICAgICAgICAgICB0aGlzLmR4ID0gc3R5bGVKc29uW1wic2hpZWxkLWR4XCJdID8gc3R5bGVKc29uW1wic2hpZWxkLWR4XCJdIDogMDtcclxuICAgICAgICAgICAgdGhpcy5keSA9IHN0eWxlSnNvbltcInNoaWVsZC1keVwiXSA/IHN0eWxlSnNvbltcInNoaWVsZC1keVwiXSA6IDA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZhY2VOYW1lID0gc3R5bGVKc29uW1wic2hpZWxkLWZhY2UtbmFtZVwiXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmlsbCA9IHN0eWxlSnNvbltcInNoaWVsZC1maWxsXCJdO1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpcy5mb3JjZUhvcml6b250YWxGb3JMaW5lID0gc3R5bGVKc29uW1wic2hpZWxkLWZvcmNlLWhvcml6b250YWwtZm9yLWxpbmVcIl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmhhbG9GaWxsID0gc3R5bGVKc29uW1wic2hpZWxkLWhhbG8tZmlsbFwiXSA/IHN0eWxlSnNvbltcInNoaWVsZC1oYWxvLWZpbGxcIl0gOiBcIlRyYW5zcGFyZW50XCI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmhhbG9SYWRpdXMgPSBzdHlsZUpzb25bXCJzaGllbGQtaGFsby1yYWRpdXNcIl0gPyBzdHlsZUpzb25bXCJzaGllbGQtaGFsby1yYWRpdXNcIl0gOiAwO1xyXG5cclxuICAgICAgICAgICAgLy8gdXNpbmcgaW4gc3RyYXRlZ3lcclxuICAgICAgICAgICAgdGhpcy5tYXJnaW4gPSBzdHlsZUpzb25bXCJzaGllbGQtbWFyZ2luXCJdO1xyXG5cclxuICAgICAgICAgICAgLy8gdGhpcy5tYXhDaGFyQW5nbGVEZWx0YSA9IHN0eWxlSnNvbltcInNoaWVsZC1tYXgtY2hhci1hbmdsZS1kZWx0YVwiXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHVzaW5nIGluIHN0cmF0ZWd5XHJcbiAgICAgICAgICAgIHRoaXMubWluRGlzdGFuY2UgPSBzdHlsZUpzb25bXCJzaGllbGQtbWluLWRpc3RhbmNlXCJdO1xyXG5cclxuICAgICAgICAgICAgLy8gdXNpbmcgaW4gc3RyYXRlZ3lcclxuICAgICAgICAgICAgdGhpcy5taW5QYWRkaW5nID0gc3R5bGVKc29uW1wic2hpZWxkLW1pbi1wYWRkaW5nXCJdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gc3R5bGVKc29uW1wic2hpZWxkLW5hbWVcIl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLm51bWVyaWNGb3JtYXQgPSBzdHlsZUpzb25bXCJzaGllbGQtbnVtZXJpYy1mb3JtYXRcIl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9wYWNpdHkgPSBzdHlsZUpzb25bXCJzaGllbGQtb3BhY2l0eVwiXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3JpZW50YXRpb24gPSBzdHlsZUpzb25bXCJzaGllbGQtb3JpZW50YXRpb25cIl07XHJcblxyXG4gICAgICAgICAgICAvLyB1c2luZyBpbiBzdHJhdGVneVxyXG4gICAgICAgICAgICB0aGlzLnBsYWNlbWVudHMgPSBzdHlsZUpzb25bXCJzaGllbGQtcGxhY2VtZW50c1wiXSA/IHN0eWxlSnNvbltcInNoaWVsZC1wbGFjZW1lbnRzXCJdIDogXCJVUixVLFVMLEIsQlIsQkwsTCxSXCI7XHJcblxyXG4gICAgICAgICAgICAvLyB1c2luZyBpbiBzdHJhdGVneVxyXG4gICAgICAgICAgICB0aGlzLnBsYWNlbWVudFR5cGUgPSBzdHlsZUpzb25bXCJzaGllbGQtcGxhY2VtZW50LXR5cGVcIl0gPyBzdHlsZUpzb25bXCJzaGllbGQtcGxhY2VtZW50LXR5cGVcIl0gOiBcImRlZmF1bHRcIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2l6ZSA9IHN0eWxlSnNvbltcInNoaWVsZC1zaXplXCJdO1xyXG5cclxuICAgICAgICAgICAgLy8gdXNpbmcgaW4gc3RyYXRlZ3lcclxuICAgICAgICAgICAgdGhpcy5zcGFjaW5nID0gc3R5bGVKc29uW1wic2hpZWxkLXNwYWNpbmdcIl0gIT09IHVuZGVmaW5lZCA/IHN0eWxlSnNvbltcInNoaWVsZC1zcGFjaW5nXCJdIDogMTA7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRleHRGb3JtYXQgPSBzdHlsZUpzb25bXCJzaGllbGQtdGV4dC1mb3JtYXRcIl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLndyYXAgPSBzdHlsZUpzb25bXCJzaGllbGQtd3JhcC1iZWZvcmVcIl0gPyB0cnVlIDogc3R5bGVKc29uW1wic2hpZWxkLXdyYXAtYmVmb3JlXCJdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy53cmFwV2lkdGggPSBzdHlsZUpzb25bXCJzaGllbGQtd3JhcC13aWR0aFwiXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUNvcmUoKSB7XHJcbiAgICAgICAgbGV0IGZvbnQ7XHJcbiAgICAgICAgbGV0IHNpemU7XHJcblxyXG4gICAgICAgIHRoaXMudGV4dFN0eWxlID0gbmV3IG9sLnN0eWxlLlRleHQoe1xyXG4gICAgICAgICAgICBzdHJva2U6IG5ldyBvbC5zdHlsZS5TdHJva2UoKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50ZXh0QWxpZ25zLmluZGV4T2YodGhpcy5hbGlnbikgPj0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRTdHlsZS5zZXRUZXh0QWxpZ24odGhpcy5hbGlnbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5mb250KSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dFN0eWxlLnNldEZvbnQodGhpcy5mb250ID8gdGhpcy5mb250IDogXCIxMHB4IHNhbnMtc2VyaWZcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5maWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGV4dFN0eWxlLmdldEZpbGwoKS5zZXRDb2xvcihHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLmZpbGwsIHRoaXMub3BhY2l0eSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5oYWxvRmlsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRTdHlsZS5nZXRTdHJva2UoKS5zZXRDb2xvcihHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLmhhbG9GaWxsLCB0aGlzLm9wYWNpdHkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGFsb1JhZGl1cykge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRTdHlsZS5nZXRTdHJva2UoKS5zZXRXaWR0aCh0aGlzLmhhbG9SYWRpdXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5vcmllbnRhdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRTdHlsZS5zZXRSb3RhdGlvbih0aGlzLm9yaWVudGF0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmljb25Db2xvcikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRTeW1ib2xDb2xvciA9IEdlb1N0eWxlLnRvUkdCQUNvbG9yKHRoaXMuaWNvbkNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbk91dGxpbmVDb2xvcikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRTeW1ib2xPdXRsaW5lQ29sb3IgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLmljb25PdXRsaW5lQ29sb3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5zdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dFN0eWxlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGxldCBjaGFycyA9IFwiYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWlwiO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFyV2lkdGhzW2NoYXJzW2ldXSA9ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLm1lYXN1cmVUZXh0V2lkdGgodGhpcy5mb250LCBjaGFyc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhcldpZHRoc1tcIiBcIl0gPSAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5tZWFzdXJlVGV4dFdpZHRoKHRoaXMuZm9udCwgXCIgXCIpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDk7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJXaWR0aHNbaV0gPSAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5tZWFzdXJlVGV4dFdpZHRoKHRoaXMuZm9udCwgaSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuaWNvblR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImltYWdlXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJJbWFnZVwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTaGlsZWRJbWFnZUljb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic3ltYm9sXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJTeW1ib2xcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2hpZWxkU3ltYm9sSWNvbigpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENvbnZlcnRlZFN0eWxlQ29yZShmZWF0dXJlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgb3B0aW9uczogYW55KTogb2wuc3R5bGUuU3R5bGVbXSB7XHJcbiAgICAgICAgbGV0IGZlYXR1cmVUZXh0ID0gXCJcIjtcclxuICAgICAgICBpZiAodGhpcy5uYW1lKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gZmVhdHVyZS5nZXQodGhpcy5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmVhdHVyZVRleHQgPSB0aGlzLmZvcm1hdFRleHQoZmVhdHVyZVRleHQpO1xyXG4gICAgICAgIGlmIChmZWF0dXJlVGV4dCA9PT0gdW5kZWZpbmVkIHx8IGZlYXR1cmVUZXh0ID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudGV4dFN0eWxlLnNldFRleHQoZmVhdHVyZVRleHQpO1xyXG5cclxuICAgICAgICBsZXQgbGFiZWxJbmZvID0gdGhpcy5nZXRMYWJlbEluZm8oZmVhdHVyZVRleHQpO1xyXG5cclxuICAgICAgICBsZXQgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5zZXRMYWJlbFBvc2l0aW9uKGZlYXR1cmUsIHJlc29sdXRpb24sIGxhYmVsSW5mbywgb3B0aW9ucy5zdHJhdGVneVRyZWUsIG9wdGlvbnMuZnJhbWVTdGF0ZSk7XHJcbiAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlcyA9PT0gdW5kZWZpbmVkIHx8IGZsYXRDb29yZGluYXRlcy5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdHlsZS5zZXRHZW9tZXRyeShuZXcgb2wuZ2VvbS5Qb2ludChmbGF0Q29vcmRpbmF0ZXMsIFwiWFlcIikpO1xyXG5cclxuICAgICAgICBsZXQgbGFiZWxpbWFnZSA9IHRoaXMuZ2V0SW1hZ2UobGFiZWxJbmZvKTtcclxuXHJcbiAgICAgICAgdGhpcy50ZXh0U3R5bGUubGFiZWwgPSBsYWJlbGltYWdlO1xyXG4gICAgICAgIHRoaXMudGV4dFN0eWxlLmxhYmVsUG9zaXRpb24gPSBmbGF0Q29vcmRpbmF0ZXM7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmltYWdlQ2FjaGVbZmVhdHVyZVRleHRdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbWFnZUNhY2hlW2ZlYXR1cmVUZXh0XSA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZlYXR1cmVaaW5kZXggPSBmZWF0dXJlW1widGVtcFRyZWVaaW5kZXhcIl07XHJcbiAgICAgICAgaWYgKGZlYXR1cmVaaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBmZWF0dXJlWmluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdHlsZS5zZXRaSW5kZXgoZmVhdHVyZVppbmRleCk7XHJcblxyXG4gICAgICAgIHJldHVybiBbdGhpcy5zdHlsZV07XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U2hpZWxkU3ltYm9sSWNvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5pY29uU3ltYm9sVHlwZSAhPT0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHRoaXMuaWNvblN5bWJvbFR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjaXJjbGVcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENpcmNsZUljb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzcXVhcmVcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNxdWFyZUljb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmlhbmdsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJpYW5nbGVJY29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3Jvc3NcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENyb3NzSWNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInN0YXJcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXJJY29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdHlsZS5zZXRJbWFnZSh0aGlzLmltYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3Rhckljb24oKSB7XHJcbiAgICAgICAgbGV0IGZpbGwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHN0cm9rZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgcmFkaXVzID0gdGhpcy5pY29uU2l6ZSAqIDAuNTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbkNvbG9yKSB7XHJcbiAgICAgICAgICAgIGZpbGwgPSBuZXcgb2wuc3R5bGUuRmlsbCgoeyBjb2xvcjogdGhpcy5jb252ZXJ0U3ltYm9sQ29sb3IgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pY29uT3V0bGluZUNvbG9yIHx8IHRoaXMuaWNvbk91dGxpbmVXaWR0aCkge1xyXG4gICAgICAgICAgICBzdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCh7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0U3ltYm9sT3V0bGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuaWNvbk91dGxpbmVXaWR0aFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmltYWdlID0gbmV3IG9sLnN0eWxlLlJlZ3VsYXJTaGFwZSh7XHJcbiAgICAgICAgICAgIGZpbGw6IGZpbGwsXHJcbiAgICAgICAgICAgIHN0cm9rZTogc3Ryb2tlLFxyXG4gICAgICAgICAgICBwb2ludHM6IDUsXHJcbiAgICAgICAgICAgIHJhZGl1czogcmFkaXVzLFxyXG4gICAgICAgICAgICByYWRpdXMyOiByYWRpdXMgLyAyLjUsXHJcbiAgICAgICAgICAgIGFuZ2xlOiB0aGlzLmFuZ2xlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q3Jvc3NJY29uKCkge1xyXG4gICAgICAgIGxldCBmaWxsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBzdHJva2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IHRoaXMuaWNvblNpemUgKiAwLjU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmljb25Db2xvcikge1xyXG4gICAgICAgICAgICBmaWxsID0gbmV3IG9sLnN0eWxlLkZpbGwoKHsgY29sb3I6IHRoaXMuY29udmVydFN5bWJvbENvbG9yIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbk91dGxpbmVDb2xvciB8fCB0aGlzLmljb25PdXRsaW5lV2lkdGgpIHtcclxuICAgICAgICAgICAgc3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSgoe1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydFN5bWJvbE91dGxpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmljb25PdXRsaW5lV2lkdGhcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBvbC5zdHlsZS5SZWd1bGFyU2hhcGUoe1xyXG4gICAgICAgICAgICBmaWxsOiBmaWxsLFxyXG4gICAgICAgICAgICBzdHJva2U6IHN0cm9rZSxcclxuICAgICAgICAgICAgcG9pbnRzOiA0LFxyXG4gICAgICAgICAgICByYWRpdXM6IHJhZGl1cyxcclxuICAgICAgICAgICAgcmFkaXVzMjogMCxcclxuICAgICAgICAgICAgYW5nbGU6IHRoaXMuYW5nbGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRUcmlhbmdsZUljb24oKSB7XHJcbiAgICAgICAgbGV0IGZpbGwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHN0cm9rZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgcmFkaXVzID0gdGhpcy5pY29uU2l6ZSAqIDAuNTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbkNvbG9yKSB7XHJcbiAgICAgICAgICAgIGZpbGwgPSBuZXcgb2wuc3R5bGUuRmlsbCgoeyBjb2xvcjogdGhpcy5jb252ZXJ0U3ltYm9sQ29sb3IgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pY29uT3V0bGluZUNvbG9yIHx8IHRoaXMuaWNvbk91dGxpbmVXaWR0aCkge1xyXG4gICAgICAgICAgICBzdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCh7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0U3ltYm9sT3V0bGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuaWNvbk91dGxpbmVXaWR0aFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmltYWdlID0gbmV3IG9sLnN0eWxlLlJlZ3VsYXJTaGFwZSh7XHJcbiAgICAgICAgICAgIGZpbGw6IGZpbGwsXHJcbiAgICAgICAgICAgIHN0cm9rZTogc3Ryb2tlLFxyXG4gICAgICAgICAgICBwb2ludHM6IDMsXHJcbiAgICAgICAgICAgIHJhZGl1czogcmFkaXVzLFxyXG4gICAgICAgICAgICBhbmdsZTogdGhpcy5hbmdsZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFNxdWFyZUljb24oKSB7XHJcbiAgICAgICAgbGV0IGZpbGwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHN0cm9rZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgcmFkaXVzID0gdGhpcy5pY29uU2l6ZSAqIDAuNTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbkNvbG9yKSB7XHJcbiAgICAgICAgICAgIGZpbGwgPSBuZXcgb2wuc3R5bGUuRmlsbCgoeyBjb2xvcjogdGhpcy5jb252ZXJ0U3ltYm9sQ29sb3IgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pY29uT3V0bGluZUNvbG9yIHx8IHRoaXMuaWNvbk91dGxpbmVXaWR0aCkge1xyXG4gICAgICAgICAgICBzdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCh7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0U3ltYm9sT3V0bGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuaWNvbk91dGxpbmVXaWR0aFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmltYWdlID0gbmV3IG9sLnN0eWxlLlJlZ3VsYXJTaGFwZSh7XHJcbiAgICAgICAgICAgIGZpbGw6IGZpbGwsXHJcbiAgICAgICAgICAgIHN0cm9rZTogc3Ryb2tlLFxyXG4gICAgICAgICAgICBwb2ludHM6IDQsXHJcbiAgICAgICAgICAgIHJhZGl1czogcmFkaXVzLFxyXG4gICAgICAgICAgICBhbmdsZTogTWF0aC5QSSAvIDQgKyB0aGlzLmFuZ2xlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2lyY2xlSWNvbigpIHtcclxuICAgICAgICBsZXQgZmlsbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgc3Ryb2tlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCByYWRpdXMgPSB0aGlzLmljb25TaXplICogMC41O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pY29uQ29sb3IpIHtcclxuICAgICAgICAgICAgZmlsbCA9IG5ldyBvbC5zdHlsZS5GaWxsKCh7IGNvbG9yOiB0aGlzLmNvbnZlcnRTeW1ib2xDb2xvciB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmljb25PdXRsaW5lQ29sb3IgfHwgdGhpcy5pY29uT3V0bGluZVdpZHRoKSB7XHJcbiAgICAgICAgICAgIHN0cm9rZSA9IG5ldyBvbC5zdHlsZS5TdHJva2UoKHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbnZlcnRTeW1ib2xPdXRsaW5lQ29sb3IsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5pY29uT3V0bGluZVdpZHRoXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcclxuICAgICAgICAgICAgZmlsbDogZmlsbCxcclxuICAgICAgICAgICAgc3Ryb2tlOiBzdHJva2UsXHJcbiAgICAgICAgICAgIHJhZGl1czogcmFkaXVzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U2hpbGVkSW1hZ2VJY29uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmljb25TcmMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZXQgcG9pSW1nID0gR2VvU2hpZWxkU3R5bGUucG9pQ2FjaGVbdGhpcy5pY29uU3JjXTtcclxuICAgICAgICAgICAgaWYgKHBvaUltZy5jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvaUltZy5uYXR1cmFsV2lkdGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlID0gbmV3IG9sLnN0eWxlLkljb24oe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWc6IHBvaUltZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1nU2l6ZTogW3BvaUltZy53aWR0aCwgcG9pSW1nLmhlaWdodF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uOiB0aGlzLmFuZ2xlICogTWF0aC5QSSAvIDE4MFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuc2V0SW1hZ2UodGhpcy5pbWFnZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TGFiZWxJbmZvKHRleHQ6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBrZXk9IHRleHQ7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxhYmVsSW5mb3MuY29udGFpbnNLZXkoa2V5KSkgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgZm9udCA9IHRoaXMuZm9ybWF0Rm9udCh0aGlzLnRleHRTdHlsZS5nZXRGb250KCkpO1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGhpcy53cmFwVGV4dCh0ZXh0LCBmb250KTtcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgZmlsbFN0YXRlID0gdGhpcy50ZXh0U3R5bGUuZ2V0RmlsbCgpO1xyXG4gICAgICAgICAgICBsZXQgc3Ryb2tlU3RhdGUgPSB0aGlzLnRleHRTdHlsZS5nZXRTdHJva2UoKTtcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgcGl4ZWxSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG4gICAgICAgICAgICBsZXQgc2NhbGUgPSB0aGlzLnRleHRTdHlsZS5nZXRTY2FsZSgpO1xyXG4gICAgICAgICAgICBzY2FsZSA9IChzY2FsZSA/IHNjYWxlIDogMSkgKiBwaXhlbFJhdGlvO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCBhbGlnbiA9ICg8YW55Pm9sLnJlbmRlcikucmVwbGF5LlRFWFRfQUxJR05bdGhpcy50ZXh0U3R5bGUuZ2V0VGV4dEFsaWduKCkgfHwgKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuZGVmYXVsdFRleHRBbGlnbl07XHJcbiAgICAgICAgICAgIGxldCBzdHJva2VXaWR0aCA9IHN0cm9rZVN0YXRlICYmIHN0cm9rZVN0YXRlLmdldFdpZHRoKCkgPyBzdHJva2VTdGF0ZS5nZXRXaWR0aCgpIDogMDtcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgICAgICBsZXQgbnVtTGluZXMgPSBsaW5lcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aHMgPSBbXTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBsZXQgd2lkdGggPSAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5UZXh0UmVwbGF5Lm1lYXN1cmVUZXh0V2lkdGhzKGZvbnQsIGxpbmVzLCB3aWR0aHMpO1xyXG4gICAgICAgICAgICBsZXQgd2lkdGggPSB0aGlzLmdldEVzdGltYXRlZFdpZHRoKGZvbnQsIGxpbmVzLCB3aWR0aHMpO1xyXG4gICAgICAgICAgICBsZXQgcmVuZGVyV2lkdGggPSB3aWR0aCArIHN0cm9rZVdpZHRoO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCBsaW5lSGVpZ2h0ID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykubWVhc3VyZVRleHRIZWlnaHQoZm9udCk7XHJcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSBsaW5lSGVpZ2h0ICogbnVtTGluZXM7XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuZHgpIHsgdGhpcy50ZXh0U3R5bGUuc2V0T2Zmc2V0WCh0aGlzLmR4ICsgaGVpZ2h0IC8gMik7IH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZHgpIHsgdGhpcy50ZXh0U3R5bGUuc2V0T2Zmc2V0WCh0aGlzLmR4KTsgfVxyXG4gICAgICAgICAgICAvLyBpZiAodGhpcy5keSkgeyB0aGlzLnRleHRTdHlsZS5zZXRPZmZzZXRZKHRoaXMuZHkgKyBoZWlnaHQgLyAyKTsgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5keSkgeyB0aGlzLnRleHRTdHlsZS5zZXRPZmZzZXRZKHRoaXMuZHkpOyB9XHJcbiAgICBcclxuICAgICAgICAgICAgbGV0IGxhYmVsV2lkdGggPSBNYXRoLmNlaWwocmVuZGVyV2lkdGggKiBzY2FsZSk7XHJcbiAgICAgICAgICAgIGxldCBsYWJlbEhlaWdodCA9IE1hdGguY2VpbCgoaGVpZ2h0ICsgc3Ryb2tlV2lkdGgpICogc2NhbGUpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCBsYWJlbEluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogbGFiZWxXaWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogbGFiZWxIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICBudW1MaW5lczogbnVtTGluZXMsXHJcbiAgICAgICAgICAgICAgICBsaW5lczogbGluZXMsXHJcbiAgICAgICAgICAgICAgICB3aWR0aHM6IHdpZHRocyxcclxuICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IGxpbmVIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBmb250OiBmb250XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMubGFiZWxJbmZvcy5zZXQoa2V5LGxhYmVsSW5mbyk7XHJcbiAgICAgICAgfSAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWxJbmZvcy5nZXQoa2V5KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRMYWJlbFBvc2l0aW9uKGdlb21ldHJ5OiBhbnksIHJlc29sdXRpb246IGFueSwgbGFiZWxJbmZvOiBhbnksIHN0cmF0ZWd5VHJlZTogYW55LCBmcmFtZVN0YXRlOiBvbHguRnJhbWVTdGF0ZSkge1xyXG4gICAgICAgIGxldCBnZW9tZXRyeVR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XHJcbiAgICAgICAgbGV0IGZsYXRDb29yZGluYXRlcztcclxuICAgICAgICBsZXQgaSwgaWk7XHJcblxyXG4gICAgICAgIGxldCBDb25zdHJ1Y3RvcjogYW55O1xyXG4gICAgICAgIGlmICh0aGlzLnBsYWNlbWVudFR5cGUgPT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgICAgICAgIENvbnN0cnVjdG9yID0gdGhpcy5CQVRDSF9DT05TVFJVQ1RPUlNfREVGQVVMVFtnZW9tZXRyeVR5cGVdO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGFjZW1lbnRUeXBlID09PSBcImRldGVjdFwiKSB7XHJcbiAgICAgICAgICAgIENvbnN0cnVjdG9yID0gdGhpcy5CQVRDSF9DT05TVFJVQ1RPUlNfREVURUNUW2dlb21ldHJ5VHlwZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdGV4dExhYmVsaW5nU3RyYXRlZ3kgPSBuZXcgQ29uc3RydWN0b3IoKTtcclxuXHJcbiAgICAgICAgbGV0IHdpZHRoID0gbGFiZWxJbmZvLndpZHRoO1xyXG4gICAgICAgIGxldCBoZWlnaHQgPSBsYWJlbEluZm8uaGVpZ2h0O1xyXG4gICAgICAgIHN3aXRjaCAoZ2VvbWV0cnlUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLlBPSU5UOlxyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5NVUxUSV9QT0lOVDpcclxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HOlxyXG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtvbC5nZW9tLkxpbmVTdHJpbmd9ICovIChnZW9tZXRyeSkuZ2V0RmxhdE1pZHBvaW50KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuQ0lSQ0xFOlxyXG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtvbC5nZW9tLkNpcmNsZX0gKi8gKGdlb21ldHJ5KS5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5NVUxUSV9MSU5FX1NUUklORzpcclxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7b2wuZ2VvbS5NdWx0aUxpbmVTdHJpbmd9ICovIChnZW9tZXRyeSkuZ2V0RmxhdE1pZHBvaW50cygpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLlBPTFlHT046XHJcbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge29sLmdlb20uUG9seWdvbn0gKi8gKGdlb21ldHJ5KS5nZXRGbGF0SW50ZXJpb3JQb2ludCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLk1VTFRJX1BPTFlHT046XHJcbiAgICAgICAgICAgICAgICBsZXQgaW50ZXJpb3JQb2ludHMgPSAvKiogQHR5cGUge29sLmdlb20uTXVsdGlQb2x5Z29ufSAqLyAoZ2VvbWV0cnkpLmdldEZsYXRJbnRlcmlvclBvaW50cygpO1xyXG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGludGVyaW9yUG9pbnRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy50ZXh0U3R5bGUub3ZlcmZsb3cgfHwgaW50ZXJpb3JQb2ludHNbaSArIDJdIC8gcmVzb2x1dGlvbiA+PSB3aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMucHVzaChpbnRlcmlvclBvaW50c1tpXSwgaW50ZXJpb3JQb2ludHNbaSArIDFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICB9XHJcbiAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGV4dExhYmVsaW5nU3RyYXRlZ3kubWFya0xvY2F0aW9uKGZsYXRDb29yZGluYXRlcywgd2lkdGgsIGhlaWdodCwgcmVzb2x1dGlvbiwgZ2VvbWV0cnlUeXBlLCB0aGlzLCBzdHJhdGVneVRyZWUsIGZyYW1lU3RhdGUpO1xyXG5cclxuICAgICAgICByZXR1cm4gZmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVzdGltYXRlZFdpZHRoKGZvbnQsIGxpbmVzLCB3aWR0aHMpIHtcclxuICAgICAgICBsZXQgbnVtTGluZXMgPSBsaW5lcy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gMDtcclxuICAgICAgICBsZXQgY3VycmVudFdpZHRoLCBpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRXaWR0aCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGluZXNbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGFyV2lkdGggPSB0aGlzLmNoYXJXaWR0aHNbbGluZXNbaV1bal1dO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXJXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaWR0aCArPSBjaGFyV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2lkdGggKz0gdGhpcy5jaGFyV2lkdGhzW1wiV1wiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aWR0aCA9IE1hdGgubWF4KHdpZHRoLCBjdXJyZW50V2lkdGgpO1xyXG4gICAgICAgICAgICB3aWR0aHMucHVzaChjdXJyZW50V2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gd2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW1hZ2UobGFiZWxJbmZvOiBhbnkpIHtcclxuICAgICAgICBpZiAobGFiZWxJbmZvLmxhYmVsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRleHQgPSAoPGFueT5vbCkuZG9tLmNyZWF0ZUNhbnZhc0NvbnRleHQyRChsYWJlbEluZm8ud2lkdGgsIGxhYmVsSW5mby5oZWlnaHQpO1xyXG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBjb250ZXh0LmNhbnZhcztcclxuICAgICAgICAgICAgaWYgKGxhYmVsSW5mby5zY2FsZSAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5zY2FsZShsYWJlbEluZm8uc2NhbGUsIGxhYmVsSW5mby5zY2FsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnRleHQuZm9udCA9IGxhYmVsSW5mby5mb250O1xyXG5cclxuICAgICAgICAgICAgbGV0IHN0cm9rZVN0YXRlID0gdGhpcy50ZXh0U3R5bGUuZ2V0U3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGxldCBzdHJva2VXaWR0aCA9IHN0cm9rZVN0YXRlICYmIHN0cm9rZVN0YXRlLmdldFdpZHRoKCkgPyBzdHJva2VTdGF0ZS5nZXRXaWR0aCgpIDogMDtcclxuXHJcbiAgICAgICAgICAgIGxldCBmaWxsU3RhdGUgPSB0aGlzLnRleHRTdHlsZS5nZXRGaWxsKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3Ryb2tlU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2VTdGF0ZS5nZXRDb2xvcigpID8gc3Ryb2tlU3RhdGUuZ2V0Q29sb3IoKSA6IFwiVHJhbnNwYXJlbnRcIjtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlV2lkdGggKiAoKDxhbnk+b2wuaGFzKS5TQUZBUkkgPyBsYWJlbEluZm8uc2NhbGUgOiAxKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZUNhcCA9IHN0cm9rZVN0YXRlLmdldExpbmVDYXAoKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZUpvaW4gPSBzdHJva2VTdGF0ZS5nZXRMaW5lSm9pbigpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5taXRlckxpbWl0ID0gc3Ryb2tlU3RhdGUuZ2V0TWl0ZXJMaW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmVEYXNoID0gc3Ryb2tlU3RhdGUuZ2V0TGluZURhc2goKTtcclxuICAgICAgICAgICAgICAgIGxpbmVEYXNoID0gbGluZURhc2ggPyBsaW5lRGFzaC5zbGljZSgpIDogKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuZGVmYXVsdExpbmVEYXNoO1xyXG4gICAgICAgICAgICAgICAgaWYgKCg8YW55Pm9sLmhhcykuQ0FOVkFTX0xJTkVfREFTSCAmJiBsaW5lRGFzaC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNldExpbmVEYXNoKHN0cm9rZVN0YXRlLmdldExpbmVEYXNoKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZURhc2hPZmZzZXQgPSAoPGFueT5zdHJva2VTdGF0ZSkuZ2V0TGluZURhc2hPZmZzZXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmlsbFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGxTdGF0ZS5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnRleHQudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIjtcclxuICAgICAgICAgICAgY29udGV4dC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICBsZXQgYWxpZ24gPSAoPGFueT5vbC5yZW5kZXIpLnJlcGxheS5URVhUX0FMSUdOW3RoaXMudGV4dFN0eWxlLmdldFRleHRBbGlnbigpIHx8ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLmRlZmF1bHRUZXh0QWxpZ25dO1xyXG4gICAgICAgICAgICBsZXQgbGVmdFJpZ2h0ID0gKDAuNSAtIGFsaWduKTtcclxuICAgICAgICAgICAgbGV0IHggPSBhbGlnbiAqIGxhYmVsLndpZHRoIC8gbGFiZWxJbmZvLnNjYWxlICsgbGVmdFJpZ2h0ICogc3Ryb2tlV2lkdGg7XHJcbiAgICAgICAgICAgIGxldCBpO1xyXG4gICAgICAgICAgICBpZiAoc3Ryb2tlU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsYWJlbEluZm8ubnVtTGluZXM7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dChsYWJlbEluZm8ubGluZXNbaV0sIHggKyBsZWZ0UmlnaHQgKiBsYWJlbEluZm8ud2lkdGhzW2ldLCAwLjUgKiAoc3Ryb2tlV2lkdGggKyBsYWJlbEluZm8ubGluZUhlaWdodCkgKyBpICogbGFiZWxJbmZvLmxpbmVIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmaWxsU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsYWJlbEluZm8ubnVtTGluZXM7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFRleHQobGFiZWxJbmZvLmxpbmVzW2ldLCB4ICsgbGVmdFJpZ2h0ICogbGFiZWxJbmZvLndpZHRoc1tpXSwgMC41ICogKHN0cm9rZVdpZHRoICsgbGFiZWxJbmZvLmxpbmVIZWlnaHQpICsgaSAqIGxhYmVsSW5mby5saW5lSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsYWJlbEluZm9bXCJsYWJlbFwiXSA9IGxhYmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGFiZWxJbmZvW1wibGFiZWxcIl07XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0VGV4dChmZWF0dXJlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAodGhpcy5udW1lcmljRm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gdGhpcy5nZXRUZXh0V2l0aE51bWVyaWNGb3JtYXQoZmVhdHVyZVRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kYXRlRm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gdGhpcy5nZXRUZXh0V2l0aERhdGVGb3JtYXQoZmVhdHVyZVRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy50ZXh0Rm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gdGhpcy5nZXRUZXh0V2l0aEZvcm1hdChmZWF0dXJlVGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmZWF0dXJlVGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VGV4dFdpdGhOdW1lcmljRm9ybWF0KGZlYXR1cmVUZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCB0bXBBcmd1bWVudHMgPSB0aGlzLm51bWVyaWNGb3JtYXQuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgIGxldCBudW1lcmljRm9ybWF0T3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IHRtcEFyZ3VtZW50IG9mIHRtcEFyZ3VtZW50cykge1xyXG4gICAgICAgICAgICBsZXQga2V5VmFsdWVQYWlyID0gdG1wQXJndW1lbnQuc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGtleVZhbHVlUGFpclswXS50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJsb2NhbGVNYXRjaGVyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLmxvY2FsZU1hdGNoZXIgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInN0eWxlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLnN0eWxlID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjdXJyZW5jeVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5jdXJyZW5jeSA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3VycmVuY3lEaXNwbGF5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLmN1cnJlbmN5RGlzcGxheSA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidXNlR3JvdXBpbmdcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykudXNlR3JvdXBpbmcgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1pbmltdW1JbnRlZ2VyRGlnaXRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLm1pbmltdW1JbnRlZ2VyRGlnaXRzID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtaW5pbXVtRnJhY3Rpb25EaWdpdHNcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykubWluaW11bUZyYWN0aW9uRGlnaXRzID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtYXhpbXVtRnJhY3Rpb25EaWdpdHNcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykubWF4aW11bUZyYWN0aW9uRGlnaXRzID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtaW5pbXVtU2lnbmlmaWNhbnREaWdpdHNcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykubWluaW11bVNpZ25pZmljYW50RGlnaXRzID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtYXhpbXVtU2lnbmlmaWNhbnREaWdpdHNcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykubWF4aW11bVNpZ25pZmljYW50RGlnaXRzID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbnVtZXJpYyA9IG5ldyBJbnRsLk51bWJlckZvcm1hdCh0bXBBcmd1bWVudHNbMF0sIG51bWVyaWNGb3JtYXRPcHRpb25zKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG51bWVyaWMuZm9ybWF0KE51bWJlcihmZWF0dXJlVGV4dCkpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldFRleHRXaXRoRGF0ZUZvcm1hdChmZWF0dXJlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gKDxhbnk+KG5ldyBEYXRlKGZlYXR1cmVUZXh0KSkpLmZvcm1hdCh0aGlzLmRhdGVGb3JtYXQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldFRleHRXaXRoRm9ybWF0KGZlYXR1cmVUZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAoPGFueT5TdHJpbmcpLmZvcm1hdChmZWF0dXJlVGV4dCwgdGhpcy50ZXh0Rm9ybWF0KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQb2ludEdlb21ldHJ5KGZlYXR1cmU6IG9sLkZlYXR1cmUpIHtcclxuICAgICAgICByZXR1cm4gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHdyYXBUZXh0KHRleHQ6IHN0cmluZywgZm9udDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgcmVzdWx0VGV4dDogc3RyaW5nO1xyXG5cclxuICAgICAgICBpZiAodGV4dCAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBsZXQgbGluZXMgPSBbdGV4dF07XHJcbiAgICAgICAgICAgIGxldCB3aWR0aHMgPSBbXTtcclxuICAgICAgICAgICAgLy8gbGV0IHdpZHRoID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuVGV4dFJlcGxheS5tZWFzdXJlVGV4dFdpZHRocyhmb250LCBsaW5lcywgd2lkdGhzKTtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gdGhpcy5nZXRFc3RpbWF0ZWRXaWR0aChmb250LCBsaW5lcywgd2lkdGhzKTtcclxuXHJcblxyXG4gICAgICAgICAgICBsZXQgd3JhcFdpZHRoID0gdGhpcy53cmFwV2lkdGg7XHJcbiAgICAgICAgICAgIGxldCB3cmFwQ2hhcmFjdGVyID0gXCIgXCI7XHJcbiAgICAgICAgICAgIGxldCBpc1dyYXBCZWZvcmUgPSB0aGlzLndyYXA7XHJcblxyXG4gICAgICAgICAgICBpZiAod3JhcFdpZHRoID4gMCAmJiB3aWR0aCA+IHdyYXBXaWR0aCAmJiB0ZXh0LmluY2x1ZGVzKHdyYXBDaGFyYWN0ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dExpbmVzID0gW107XHJcbiAgICAgICAgICAgICAgICBsaW5lcyA9IHRleHQuc3BsaXQod3JhcENoYXJhY3Rlcik7XHJcbiAgICAgICAgICAgICAgICBsZXQgd3JhcExpbmVzID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgd3JhcFdpZHRoU3VtID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCB0bXBXcmFwV2lkdGg6IG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNXcmFwQmVmb3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wTGluZSA9IFtsaW5lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG1wV3JhcFdpZHRoID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuVGV4dFJlcGxheS5tZWFzdXJlVGV4dFdpZHRocyhmb250LCB0bXBMaW5lLCB3aWR0aHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBXcmFwV2lkdGggPSB0aGlzLmdldEVzdGltYXRlZFdpZHRoKGZvbnQsIHRtcExpbmUsIHdpZHRocyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwV2lkdGhTdW0gKz0gdG1wV3JhcFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wV3JhcFdpZHRoID4gd3JhcFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwTGluZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFdpZHRoU3VtID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod3JhcExpbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3cmFwV2lkdGhTdW0gPiB3cmFwV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwTGluZXMucHVzaChcIlxcblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGluZXMucHVzaCh3cmFwTGluZXMuam9pbihcIlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFdpZHRoU3VtID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzLnB1c2goXCIgXCIgKyBsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3cmFwTGluZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGluZXMucHVzaCh3cmFwTGluZXMuam9pbihcIlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBMaW5lcy5wdXNoKFwiIFwiICsgbGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXBMaW5lID0gW2xpbmVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0bXBXcmFwV2lkdGggPSAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5UZXh0UmVwbGF5Lm1lYXN1cmVUZXh0V2lkdGhzKGZvbnQsIHRtcExpbmUsIHdpZHRocyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcFdyYXBXaWR0aCA9IHRoaXMuZ2V0RXN0aW1hdGVkV2lkdGgoZm9udCwgdG1wTGluZSwgd2lkdGhzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBXaWR0aFN1bSArPSB0bXBXcmFwV2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod3JhcFdpZHRoU3VtID4gd3JhcFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwTGluZXMucHVzaChcIlxcblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRMaW5lcy5wdXNoKHdyYXBMaW5lcy5qb2luKFwiXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFdpZHRoU3VtID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdyYXBMaW5lcy5sZW5ndGggPiAwKSB7IHRleHRMaW5lcy5wdXNoKHdyYXBMaW5lcy5qb2luKFwiXCIpKTsgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdFRleHQgPSB0ZXh0TGluZXMuam9pbihcIlwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRUZXh0Lmxhc3RJbmRleE9mKFwiXFxuXCIpID09PSByZXN1bHRUZXh0Lmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRUZXh0ID0gcmVzdWx0VGV4dC5zdWJzdHIoMCwgcmVzdWx0VGV4dC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFRleHQgPSB0ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0VGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBmb3JtYXRGb250KGZvbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHRtcEZvbnRzID0gZm9udC5zcGxpdChcIiBcIik7XHJcbiAgICAgICAgbGV0IGZvcm1hdGVkRm9udDogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgaWYgKHRtcEZvbnRzW3RtcEZvbnRzLmxlbmd0aCAtIDFdLmluY2x1ZGVzKFwiYm9sZFwiKSB8fCB0bXBGb250c1t0bXBGb250cy5sZW5ndGggLSAxXS5pbmNsdWRlcyhcIml0YWxpY1wiKSkge1xyXG4gICAgICAgICAgICBmb3JtYXRlZEZvbnQucHVzaChgJHt0bXBGb250c1t0bXBGb250cy5sZW5ndGggLSAxXX0gYCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG1wRm9udHMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtYXRlZEZvbnQucHVzaChgJHt0bXBGb250c1tpXX0gYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZm9udDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdGVkRm9udC5qb2luKFwiXCIpLnRyaW0oKTtcclxuICAgIH1cclxuXHJcbiAgICBCQVRDSF9DT05TVFJVQ1RPUlNfREVGQVVMVCA9IHtcclxuICAgICAgICBQb2ludDogVGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTXVsdGlQb2ludDogVGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTGluZVN0cmluZzogVGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgQ2lyY2xlOiBUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBNdWx0aUxpbmVTdHJpbmc6IFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIFBvbHlnb246IFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIE11bHRpUG9seWdvbjogVGV4dExhYmVsaW5nU3RyYXRlZ3lcclxuICAgIH07XHJcblxyXG4gICAgQkFUQ0hfQ09OU1RSVUNUT1JTX0RFVEVDVCA9IHtcclxuICAgICAgICBQb2ludDogRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTXVsdGlQb2ludDogRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTGluZVN0cmluZzogRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgQ2lyY2xlOiBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBNdWx0aUxpbmVTdHJpbmc6IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIFBvbHlnb246IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIE11bHRpUG9seWdvbjogRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3lcclxuICAgIH07XHJcbn0iLCJleHBvcnQgY2xhc3MgR2VvU3R5bGUge1xyXG4gICAgcHVibGljIGlkOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdWlkOmFueTtcclxuICAgIHB1YmxpYyB2aXNpYmxlOiB0cnVlO1xyXG4gICAgcHVibGljIHN0eWxlczogYW55W107XHJcblxyXG4gICAgcHVibGljIGluaXRpYWxpemVkOiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0eWxlSnNvbj86IG9iamVjdCkge1xyXG4gICAgICAgIHRoaXMuc3R5bGVzID0gW107XHJcbiAgICAgICAgaWYgKHN0eWxlSnNvbikge1xyXG4gICAgICAgICAgICB0aGlzLmlkID0gc3R5bGVKc29uW1wiaWRcIl07XHJcbiAgICAgICAgICAgIHRoaXMudWlkPSAoPGFueT5vbCkuZ2V0VWlkKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSBzdHlsZUpzb25bXCJ2aXNpYmxlXCJdID09PSB1bmRlZmluZWQgPyB0cnVlIDogc3R5bGVKc29uW1widmlzaWJsZVwiXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ29yZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUNvcmUoKSB7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U3R5bGVzKGZlYXR1cmU6IG9sLkZlYXR1cmUsIHJlc29sdXRpb246IG51bWJlciwgb3B0aW9uczogYW55KTogb2wuc3R5bGUuU3R5bGVbXSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSBbXTtcclxuICAgICAgICBpZiAodGhpcy52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSB0aGlzLmdldENvbnZlcnRlZFN0eWxlKGZlYXR1cmUsIHJlc29sdXRpb24sIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb252ZXJ0ZWRTdHlsZShmZWF0dXJlOiBvbC5GZWF0dXJlLCByZXNvbHV0aW9uOiBudW1iZXIsIG9wdGlvbnM6IGFueSk6IG9sLnN0eWxlLlN0eWxlW10ge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldENvbnZlcnRlZFN0eWxlQ29yZShmZWF0dXJlLCByZXNvbHV0aW9uLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb252ZXJ0ZWRTdHlsZUNvcmUoZmVhdHVyZTogb2wuRmVhdHVyZSwgcmVzb2x1dGlvbjogbnVtYmVyLCBvcHRpb25zOiBhbnkpOiBvbC5zdHlsZS5TdHlsZVtdIHtcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcblxyXG4gICAgc2tld0dlb21ldHJ5KGdlb21ldHJ5OiBhbnksIHhEZWc6IG51bWJlciwgeURlZzogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGNlbnRlciA9IG9sLmV4dGVudC5nZXRDZW50ZXIoZ2VvbWV0cnkuZ2V0RXh0ZW50KCkpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdlb21ldHJ5LmZsYXRDb29yZGluYXRlcy5sZW5ndGg7IGkgKz0gMikge1xyXG4gICAgICAgICAgICBsZXQgeCA9IGdlb21ldHJ5LmZsYXRDb29yZGluYXRlc1tpXTtcclxuICAgICAgICAgICAgbGV0IHkgPSBnZW9tZXRyeS5mbGF0Q29vcmRpbmF0ZXNbaSArIDFdO1xyXG4gICAgICAgICAgICBsZXQgcnggPSB0aGlzLnNrZXdYKHgsIHksIGNlbnRlclswXSwgY2VudGVyWzFdLCB4RGVnKTtcclxuICAgICAgICAgICAgbGV0IHJ5ID0gdGhpcy5za2V3WSh4LCB5LCBjZW50ZXJbMF0sIGNlbnRlclsxXSwgeURlZyk7XHJcbiAgICAgICAgICAgIGdlb21ldHJ5LmZsYXRDb29yZGluYXRlc1tpXSA9IHJ4O1xyXG4gICAgICAgICAgICBnZW9tZXRyeS5mbGF0Q29vcmRpbmF0ZXNbaSArIDFdID0gcnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNrZXdYKHg6IG51bWJlciwgeTogbnVtYmVyLCBjeDogbnVtYmVyLCBjeTogbnVtYmVyLCB4RGVnOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCByeCA9IHg7XHJcblxyXG4gICAgICAgIGlmICh4RGVnICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGxldCB4UmVzb2x1dGlvbiA9IE1hdGgudGFuKDEuMCAqIHhEZWcgKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgICAgICAgICAgbGV0IGRpc3RhbmNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHggPiBjeCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPiBjeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0geFJlc29sdXRpb24gKiBNYXRoLmFicyh5IC0gY3kpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IDAgLSB4UmVzb2x1dGlvbiAqIE1hdGguYWJzKHkgLSBjeSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA+IGN5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSB4UmVzb2x1dGlvbiAqIE1hdGguYWJzKHkgLSBjeSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gMCAtIHhSZXNvbHV0aW9uICogTWF0aC5hYnMoeSAtIGN5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcnggKz0gTWF0aC5yb3VuZChkaXN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcng7XHJcbiAgICB9XHJcblxyXG4gICAgc2tld1koeDogbnVtYmVyLCB5OiBudW1iZXIsIGN4OiBudW1iZXIsIGN5OiBudW1iZXIsIHlEZWc6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IHJ5ID0geTtcclxuXHJcbiAgICAgICAgaWYgKHlEZWcgIT09IDApIHtcclxuICAgICAgICAgICAgbGV0IHlSZXNvbHV0aW9uID0gTWF0aC50YW4oMS4wICogeURlZyAqIE1hdGguUEkgLyAxODApO1xyXG4gICAgICAgICAgICBsZXQgZGlzdGFuY2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoeSA+IGN5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA+IGN4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSB5UmVzb2x1dGlvbiAqIE1hdGguYWJzKHggLSBjeCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gMCAtIHlSZXNvbHV0aW9uICogTWF0aC5hYnMoeCAtIGN4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh4ID4gY3gpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IHlSZXNvbHV0aW9uICogTWF0aC5hYnMoeCAtIGN4KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSAwIC0geVJlc29sdXRpb24gKiBNYXRoLmFicyh4IC0gY3gpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByeSArPSBNYXRoLnJvdW5kKGRpc3RhbmNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByeTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdG9SR0JBQ29sb3IoY29sb3IsIG9wYWNpdHkgPSAxKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoY29sb3IuaW5kZXhPZihcIiNcIikgPT09IDApIHtcclxuICAgICAgICAgICAgbGV0IGFycmF5OiBudW1iZXJbXTtcclxuICAgICAgICAgICAgbGV0IHI6IG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IGc6IG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IGI6IG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IGE6IG51bWJlcjtcclxuICAgICAgICAgICAgaWYgKGNvbG9yLmxlbmd0aCA9PT0gNCkge1xyXG4gICAgICAgICAgICAgICAgciA9ICsoXCIweFwiICsgY29sb3Iuc3Vic3RyKDEsIDEpICsgY29sb3Iuc3Vic3RyKDEsIDEpKTtcclxuICAgICAgICAgICAgICAgIGcgPSArKFwiMHhcIiArIGNvbG9yLnN1YnN0cigyLCAxKSArIGNvbG9yLnN1YnN0cigyLCAxKSk7XHJcbiAgICAgICAgICAgICAgICBiID0gKyhcIjB4XCIgKyBjb2xvci5zdWJzdHIoMywgMSkgKyBjb2xvci5zdWJzdHIoMywgMSkpO1xyXG4gICAgICAgICAgICAgICAgYSA9IG9wYWNpdHk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByID0gKyhcIjB4XCIgKyBjb2xvci5zdWJzdHIoMSwgMikpO1xyXG4gICAgICAgICAgICAgICAgZyA9ICsoXCIweFwiICsgY29sb3Iuc3Vic3RyKDMsIDIpKTtcclxuICAgICAgICAgICAgICAgIGIgPSArKFwiMHhcIiArIGNvbG9yLnN1YnN0cig1LCAyKSk7XHJcbiAgICAgICAgICAgICAgICBhID0gb3BhY2l0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhcnJheSA9IFtyLCBnLCBiLCBhXTtcclxuICAgICAgICAgICAgaWYgKCFpc05hTihyKSAmJiAhaXNOYU4oZykgJiYgIWlzTmFOKGIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZ2JhKFwiICsgYXJyYXkuam9pbihcIixcIikgKyBcIilcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInJnYmEoMCwwLDAsMClcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29sb3IuaW5kZXhPZihcInJnYihcIikgPT09IDApIHtcclxuICAgICAgICAgICAgY29sb3IgPSBjb2xvci5yZXBsYWNlKFwicmdiKFwiLCBcInJnYmEoXCIpO1xyXG4gICAgICAgICAgICBjb2xvciA9IGNvbG9yLnN1YnN0cmluZygwLCBjb2xvci5sZW5ndGggLSAxKSArIFwiLFwiICsgb3BhY2l0eSArIFwiKVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY29sb3IuaW5kZXhPZihcImFyZ2IoXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbG9yID0gY29sb3IucmVwbGFjZShcImFyZ2IoXCIsIFwiXCIpLnJlcGxhY2UoXCIpXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICBsZXQgYXJyYXkgPSBjb2xvci5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgIGxldCBhID0gYXJyYXkuc2hpZnQoKTtcclxuICAgICAgICAgICAgYXJyYXkucHVzaChhKTtcclxuICAgICAgICAgICAgY29sb3IgPSBcInJnYmEoXCIgKyBhcnJheS5qb2luKFwiLFwiKSArIFwiKVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB0b09MTGluZWFyR3JhZGllbnQoY29sb3IsIG9wYWNpdHkgPSAxLCBzaXplKSB7XHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQucmVjdCgwLCAwLCBzaXplLCBzaXplKTtcclxuXHJcbiAgICAgICAgbGV0IGdyZCA9IGNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgc2l6ZSwgc2l6ZSk7XHJcbiAgICAgICAgbGV0IGNvbG9yU3RvcHMgPSBjb2xvci5zcGxpdChcIixcIik7XHJcbiAgICAgICAgZm9yIChsZXQgY29sb3JTdG9wIG9mIGNvbG9yU3RvcHMpIHtcclxuICAgICAgICAgICAgY29sb3JTdG9wID0gY29sb3JTdG9wLnRyaW0oKTtcclxuICAgICAgICAgICAgbGV0IHRtcENvbG9yU3RvcCA9IGNvbG9yU3RvcC5zdWJzdHIoMSwgY29sb3JTdG9wLmxlbmd0aCAtIDIpO1xyXG4gICAgICAgICAgICBsZXQgY3MgPSB0bXBDb2xvclN0b3Auc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKE51bWJlcihjc1swXS50cmltKCkpLCB0aGlzLnRvUkdCQUNvbG9yKGNzWzFdLnRyaW0oKSwgb3BhY2l0eSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGdyZDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdG9PTFJhZGlhbEdyYWRpZW50KGNvbG9yLCBvcGFjaXR5ID0gMSwgc2l6ZSkge1xyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LnJlY3QoMCwgMCwgc2l6ZSwgc2l6ZSk7XHJcblxyXG4gICAgICAgIGxldCBncmQgPSBjb250ZXh0LmNyZWF0ZVJhZGlhbEdyYWRpZW50KHNpemUgLyAyLCBzaXplIC8gMiwgMCwgc2l6ZSAvIDIsIHNpemUgLyAyLCBzaXplIC8gMik7XHJcbiAgICAgICAgbGV0IGNvbG9yU3RvcHMgPSBjb2xvci5zcGxpdChcIixcIik7XHJcbiAgICAgICAgZm9yIChsZXQgY29sb3JTdG9wIG9mIGNvbG9yU3RvcHMpIHtcclxuICAgICAgICAgICAgY29sb3JTdG9wID0gY29sb3JTdG9wLnRyaW0oKTtcclxuICAgICAgICAgICAgbGV0IHRtcENvbG9yU3RvcCA9IGNvbG9yU3RvcC5zdWJzdHIoMSwgY29sb3JTdG9wLmxlbmd0aCAtIDIpO1xyXG4gICAgICAgICAgICBsZXQgY3MgPSB0bXBDb2xvclN0b3Auc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKE51bWJlcihjc1swXS50cmltKCkpLCB0aGlzLnRvUkdCQUNvbG9yKGNzWzFdLnRyaW0oKSwgb3BhY2l0eSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGdyZDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBHZW9GaWx0ZXJJdGVtIH0gZnJvbSBcIi4uL2ZpbHRlci9nZW9GaWx0ZXJJdGVtXCI7XHJcbmltcG9ydCB7IEdlb1pvb21GaWx0ZXIgfSBmcm9tIFwiLi4vZmlsdGVyL2dlb1pvb21GaWx0ZXJcIjtcclxuaW1wb3J0IHsgR2VvU3RyaW5nQXR0cmlidXRlRmlsdGVyIH0gZnJvbSBcIi4uL2ZpbHRlci9nZW9TdHJpbmdBdHRyaWJ1dGVGaWx0ZXJcIjtcclxuaW1wb3J0IHsgR2VvUmVnZXhGaWx0ZXIgfSBmcm9tIFwiLi4vZmlsdGVyL2dlb1JlZ2V4RmlsdGVyXCI7XHJcbmltcG9ydCB7IEdlb051bWJlckF0dHJpYnV0ZUZpbHRlciB9IGZyb20gXCIuLi9maWx0ZXIvZ2VvTnVtYmVyQXR0cmlidXRlRmlsdGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2VvU3R5bGVQcm9wZXJ0eSB7XHJcbiAgICBwdWJsaWMgc3R5bGVKc29uVmFsdWU6IGFueTtcclxuICAgIHB1YmxpYyBkZWZhdWx0VmFsdWU6IGFueTtcclxuXHJcbiAgICBwdWJsaWMgdmFsdWU6IGFueTtcclxuICAgIHB1YmxpYyBjb25kaXRpb25zOiBhbnk7XHJcbiAgICBwdWJsaWMgdmFsdWVzOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVKc29uVmFsdWUsIGRlZmF1bHRWYWx1ZT8pIHtcclxuICAgICAgICB0aGlzLnN0eWxlSnNvblZhbHVlID0gc3R5bGVKc29uVmFsdWU7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0VmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3R5bGVKc29uVmFsdWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc3R5bGVKc29uVmFsdWUgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uZGl0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IG5hbWUgaW4gdGhpcy5zdHlsZUpzb25WYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJzID0gdGhpcy5jcmVhdGVGaWx0ZXIobmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25kaXRpb25zLnB1c2goZmlsdGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52YWx1ZXMucHVzaCh0aGlzLmluaXRpYWxpemVWYWx1ZSh0aGlzLnN0eWxlSnNvblZhbHVlW25hbWVdKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuaW5pdGlhbGl6ZVZhbHVlKHRoaXMuZGVmYXVsdFZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdGlhbGl6ZVZhbHVlKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc0NvbmRpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25zICYmIHRoaXMuY29uZGl0aW9ucy5sZW5ndGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRWYWx1ZShjb2x1bW5WYWx1ZT8pIHtcclxuICAgICAgICBpZiAodGhpcy5jb25kaXRpb25zICYmIHRoaXMuY29uZGl0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGlmIChjb2x1bW5WYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmNvbmRpdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyR3JvdXAgPSB0aGlzLmNvbmRpdGlvbnNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmaWx0ZXJHcm91cC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVycyA9IGZpbHRlckdyb3VwW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ3JvdXBNYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBmaWx0ZXJzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyID0gZmlsdGVyc1trXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByYXdGZWF0dXJlID0geyBwcm9wZXJ0aWVzOiBjb2x1bW5WYWx1ZSB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIubWF0Y2hPTEZlYXR1cmUocmF3RmVhdHVyZSwgMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cE1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXBNYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZUZpbHRlcihmaWx0ZXJTdHJpbmcpIHtcclxuICAgICAgICBsZXQgZmlsdGVyR3JvdXAgPSBbXTtcclxuICAgICAgICBpZiAoZmlsdGVyU3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGxldCBmaWx0ZXJTdHJpbmdzID0gZmlsdGVyU3RyaW5nLnNwbGl0KFwifFwiKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWx0ZXJTdHJpbmdzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyU3RyID0gZmlsdGVyU3RyaW5nc1tpXTtcclxuICAgICAgICAgICAgICAgIGxldCBleHByZXNzaW9uID0gXCIoXFxcXHcrPz1+Jy4rPycpfChcXFxcdys/Wzw+IT1dKidbXjtdKz8nKXwoXFxcXHcrP1s8PiE9XSpbXjtdKylcIjtcclxuICAgICAgICAgICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoZXhwcmVzc2lvbiwgXCJnXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdHMgPSBmaWx0ZXJTdHIubWF0Y2gocmVnZXgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJhbmdlRmlsdGVycyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbHRlcnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZ2VvWm9vbUZpbHRlcjogR2VvWm9vbUZpbHRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVySXRlbSA9IEdlb0ZpbHRlckl0ZW0uY3JlYXRlRmlsdGVySXRlbShyZXN1bHRzW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJJdGVtLnZhbHVlLmluZGV4T2YoXCJ+J1wiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKG5ldyBHZW9SZWdleEZpbHRlcihbZmlsdGVySXRlbV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXJJdGVtLmtleSA9PT0gXCJ6b29tXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW9ab29tRmlsdGVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9ab29tRmlsdGVyID0gbmV3IEdlb1pvb21GaWx0ZXIoW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvWm9vbUZpbHRlci5hZGRGaWx0ZXJJdGVtKGZpbHRlckl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbHRlckl0ZW0udmFsdWUuaW5jbHVkZXMoXCInXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2gobmV3IEdlb1N0cmluZ0F0dHJpYnV0ZUZpbHRlcihbZmlsdGVySXRlbV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlRmlsdGVyc1tmaWx0ZXJJdGVtLmtleV0gPSByYW5nZUZpbHRlcnNbZmlsdGVySXRlbS5rZXldIHx8IG5ldyBHZW9OdW1iZXJBdHRyaWJ1dGVGaWx0ZXIoW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VGaWx0ZXJzW2ZpbHRlckl0ZW0ua2V5XS5hZGRGaWx0ZXJJdGVtKGZpbHRlckl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiByYW5nZUZpbHRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2gocmFuZ2VGaWx0ZXJzW25hbWVdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZpbHRlckdyb3VwLnB1c2goZmlsdGVycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZpbHRlckdyb3VwO1xyXG4gICAgfVxyXG59XHJcbiIsIlxyXG5pbXBvcnQgeyBHZW9TdHlsZSB9IGZyb20gXCIuL2dlb1N0eWxlXCI7XHJcbmltcG9ydCB7IEdlb1N0eWxlUHJvcGVydHkgfSBmcm9tIFwiLi9nZW9TdHlsZVByb3BlcnR5XCI7XHJcbmltcG9ydCB7IEdlb0JydXNoIH0gZnJvbSBcIi4uL3N0eWxlL2dlb0JydXNoXCI7XHJcbmltcG9ydCB7IFRleHRMYWJlbGluZ1N0cmF0ZWd5IH0gZnJvbSBcIi4vdGV4dExhYmVsaW5nU3RyYXRlZ3lcIjtcclxuaW1wb3J0IHsgRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3kgfSBmcm9tIFwiLi9kZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb1RleHRTdHlsZSBleHRlbmRzIEdlb1N0eWxlIHtcclxuICAgIHN0YXRpYyBwbGFjZW1lbnRzTmFtZSA9IFwidGV4dC1wbGFjZW1lbnRzXCI7XHJcblxyXG4gICAgdGV4dEFsaWducyA9IFtcImxlZnRcIiwgXCJyaWdodFwiLCBcImNlbnRlclwiLCBcImVuZFwiLCBcInN0YXJ0XCJdO1xyXG4gICAgdGV4dEJhc2VsaW5lID0gW1wiYm90dG9tXCIsIFwidG9wXCIsIFwibWlkZGxlXCIsIFwiYWxwaGFiZXRpY1wiLCBcImhhbmdpbmdcIiwgXCJpZGVvZ3JhcGhpY1wiXTtcclxuICAgIHRleHRUcmFuc2Zvcm1zID0gW1wiZGVmYXVsdFwiLCBcInVwcGVyY2FzZVwiLCBcImxvd2VyY2FzZVwiXTtcclxuXHJcbiAgICBwcm9wZXJ0eVBsYWNlbWVudHM6IEdlb1N0eWxlUHJvcGVydHk7XHJcblxyXG4gICAgYWxpZ246IHN0cmluZztcclxuICAgIGJhc2VsaW5lOiBzdHJpbmc7XHJcbiAgICBhdm9pZEVkZ2U6IGJvb2xlYW47XHJcbiAgICBkYXRlRm9ybWF0OiBzdHJpbmc7XHJcbiAgICBkeDogbnVtYmVyO1xyXG4gICAgZHk6IG51bWJlcjtcclxuICAgIGZvbnQ6IHN0cmluZztcclxuICAgIGZpbGw6IHN0cmluZztcclxuICAgIGZvcmNlSG9yaXpvbnRhbEZvckxpbmU6IGJvb2xlYW47XHJcbiAgICBoYWxvRmlsbDogc3RyaW5nO1xyXG4gICAgaGFsb1JhZGl1czogbnVtYmVyO1xyXG4gICAgbWFyZ2luOiBudW1iZXI7XHJcbiAgICBtYXNrQ29sb3I6IHN0cmluZztcclxuICAgIG1hc2tNYXJnaW46IHN0cmluZztcclxuICAgIG1hc2tPdXRsaW5lQ29sb3I6IHN0cmluZztcclxuICAgIG1hc2tPdXRsaW5lV2lkdGg6IG51bWJlcjtcclxuICAgIG1hc2tUeXBlOiBzdHJpbmc7XHJcbiAgICBtYXhDaGFyQW5nbGU6IG51bWJlcjtcclxuICAgIG1pbkRpc3RhbmNlOiBudW1iZXI7XHJcbiAgICBtaW5QYWRkaW5nOiBudW1iZXI7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBudW1lcmljRm9ybWF0OiBzdHJpbmc7XHJcbiAgICBvcGFjaXR5OiBudW1iZXI7XHJcbiAgICByb3RhdGVBbmdsZTogbnVtYmVyO1xyXG4gICAgcGxhY2VtZW50czogc3RyaW5nO1xyXG4gICAgcGxhY2VtZW50VHlwZTogc3RyaW5nO1xyXG4gICAgcG9seWdvbkxhYmVsaW5nTG9jYXRpb246IHN0cmluZztcclxuICAgIHNwYWNpbmc6IG51bWJlcjtcclxuICAgIHNwbGluZVR5cGU6IHN0cmluZztcclxuICAgIHRleHRGb3JtYXQ6IHN0cmluZztcclxuICAgIHdyYXBCZWZvcmU6IHN0cmluZztcclxuICAgIHdyYXBXaWR0aDogbnVtYmVyO1xyXG4gICAgdGV4dFRyYW5zZm9ybTogc3RyaW5nO1xyXG4gICAgbGV0dGVyU3BhY2luZzogbnVtYmVyO1xyXG5cclxuICAgIGxhYmVsSW5mb3M6IGFueTtcclxuICAgIGRyYXduTWFzazogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIGNoYXJXaWR0aHM6IGFueTtcclxuXHJcbiAgICBmaWxsQ29sb3I6IGFueTtcclxuICAgIGhhbG9GaWxsQ29sb3I6IGFueTtcclxuXHJcbiAgICBzdHlsZTogb2wuc3R5bGUuU3R5bGU7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVKc29uPzogYW55KSB7XHJcbiAgICAgICAgc3VwZXIoc3R5bGVKc29uKTtcclxuICAgICAgICB0aGlzLmxhYmVsSW5mb3MgPSBuZXcgKDxhbnk+b2wpLnN0cnVjdHMuTFJVQ2FjaGUoNTEyKTtcclxuICAgICAgICB0aGlzLmNoYXJXaWR0aHMgPSB7fTtcclxuXHJcbiAgICAgICAgaWYgKHN0eWxlSnNvbikge1xyXG4gICAgICAgICAgICB0aGlzLmFsaWduID0gc3R5bGVKc29uW1widGV4dC1hbGlnblwiXTtcclxuICAgICAgICAgICAgdGhpcy5iYXNlbGluZSA9IHN0eWxlSnNvbltcInRleHQtYmFzZS1saW5lXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmR4ID0gc3R5bGVKc29uW1widGV4dC1keFwiXTtcclxuICAgICAgICAgICAgdGhpcy5keSA9IHN0eWxlSnNvbltcInRleHQtZHlcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZm9udCA9IHN0eWxlSnNvbltcInRleHQtZm9udFwiXTtcclxuICAgICAgICAgICAgdGhpcy5maWxsID0gc3R5bGVKc29uW1widGV4dC1maWxsXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmZvcmNlSG9yaXpvbnRhbEZvckxpbmUgPSBzdHlsZUpzb25bXCJ0ZXh0LWZvcmNlLWhvcml6b250YWwtZm9yLWxpbmVcIl07XHJcbiAgICAgICAgICAgIHRoaXMuaGFsb0ZpbGwgPSBzdHlsZUpzb25bXCJ0ZXh0LWhhbG8tZmlsbFwiXTtcclxuICAgICAgICAgICAgdGhpcy5oYWxvUmFkaXVzID0gc3R5bGVKc29uW1widGV4dC1oYWxvLXJhZGl1c1wiXTtcclxuICAgICAgICAgICAgdGhpcy5tYXJnaW4gPSBzdHlsZUpzb25bXCJ0ZXh0LW1hcmdpblwiXTtcclxuICAgICAgICAgICAgdGhpcy5tYXNrQ29sb3IgPSBzdHlsZUpzb25bXCJ0ZXh0LW1hc2stY29sb3JcIl07XHJcbiAgICAgICAgICAgIHRoaXMubWFza01hcmdpbiA9IHN0eWxlSnNvbltcInRleHQtbWFzay1tYXJnaW5cIl07XHJcbiAgICAgICAgICAgIHRoaXMubWFza091dGxpbmVDb2xvciA9IHN0eWxlSnNvbltcInRleHQtbWFzay1vdXRsaW5lLWNvbG9yXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm1hc2tPdXRsaW5lV2lkdGggPSBzdHlsZUpzb25bXCJ0ZXh0LW1hc2stb3V0bGluZS13aWR0aFwiXTtcclxuICAgICAgICAgICAgdGhpcy5tYXNrVHlwZSA9IHN0eWxlSnNvbltcInRleHQtbWFzay10eXBlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm1heENoYXJBbmdsZSA9IHN0eWxlSnNvbltcInRleHQtbWF4LWNoYXItYW5nbGVcIl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1pbkRpc3RhbmNlID0gc3R5bGVKc29uW1widGV4dC1taW4tZGlzdGFuY2VcIl07XHJcbiAgICAgICAgICAgIHRoaXMubWluUGFkZGluZyA9IHN0eWxlSnNvbltcInRleHQtbWluLXBhZGRpbmdcIl07XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHN0eWxlSnNvbltcInRleHQtbmFtZVwiXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eSA9IHN0eWxlSnNvbltcInRleHQtb3BhY2l0eVwiXTtcclxuICAgICAgICAgICAgdGhpcy5yb3RhdGVBbmdsZSA9IHN0eWxlSnNvbltcInRleHQtcm90YXRlLWFuZ2xlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnByb3BlcnR5UGxhY2VtZW50cyA9IG5ldyBHZW9TdHlsZVByb3BlcnR5KHN0eWxlSnNvbltHZW9UZXh0U3R5bGUucGxhY2VtZW50c05hbWVdLCBcIlUsQixMLFJcIik7XHJcbiAgICAgICAgICAgIHRoaXMucGxhY2VtZW50VHlwZSA9IHN0eWxlSnNvbltcInRleHQtcGxhY2VtZW50LXR5cGVcIl0gPyBzdHlsZUpzb25bXCJ0ZXh0LXBsYWNlbWVudC10eXBlXCJdIDogXCJkZWZhdWx0XCI7XHJcbiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IHN0eWxlSnNvbltcInRleHQtc3BhY2luZ1wiXSAhPT0gdW5kZWZpbmVkID8gc3R5bGVKc29uW1widGV4dC1zcGFjaW5nXCJdIDogMTA7XHJcbiAgICAgICAgICAgIHRoaXMud3JhcEJlZm9yZSA9IHN0eWxlSnNvbltcInRleHQtd3JhcC1iZWZvcmVcIl0gPyB0cnVlIDogc3R5bGVKc29uW1widGV4dC13cmFwLWJlZm9yZVwiXTtcclxuICAgICAgICAgICAgdGhpcy53cmFwV2lkdGggPSBzdHlsZUpzb25bXCJ0ZXh0LXdyYXAtd2lkdGhcIl07XHJcbiAgICAgICAgICAgIHRoaXMudGV4dEZvcm1hdCA9IHN0eWxlSnNvbltcInRleHQtdGV4dC1mb3JtYXRcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9IHN0eWxlSnNvbltcInRleHQtZGF0ZS1mb3JtYXRcIl07XHJcbiAgICAgICAgICAgIHRoaXMubnVtZXJpY0Zvcm1hdCA9IHN0eWxlSnNvbltcInRleHQtbnVtZXJpYy1mb3JtYXRcIl07XHJcbiAgICAgICAgICAgIHRoaXMudGV4dFRyYW5zZm9ybSA9IHN0eWxlSnNvbltcInRleHQtbGV0dGVyLWNhc2VcIl07XHJcbiAgICAgICAgICAgIHRoaXMubGV0dGVyU3BhY2luZyA9IHN0eWxlSnNvbltcInRleHQtbGV0dGVyLXNwYWNpbmdcIl07XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgICAgIHRoaXMuYXZvaWRFZGdlID0gc3R5bGVKc29uW1widGV4dC1hdm9pZC1lZGdlXCJdO1xyXG4gICAgICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgICAgIHRoaXMuc3BsaW5lVHlwZSA9IHN0eWxlSnNvbltcInRleHQtc3BsaW5lLXR5cGVcIl07XHJcbiAgICAgICAgICAgIC8vIFRPRE9cclxuICAgICAgICAgICAgdGhpcy5wb2x5Z29uTGFiZWxpbmdMb2NhdGlvbiA9IHN0eWxlSnNvbltcInRleHQtcG9seWdvbi1sYWJlbGluZy1sb2NhdGlvblwiXTtcclxuXHJcblxyXG4gICAgICAgICAgICBsZXQgY2hhcnMgPSBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIjtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyV2lkdGhzW2NoYXJzW2ldXSA9ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLm1lYXN1cmVUZXh0V2lkdGgodGhpcy5mb250LCBjaGFyc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jaGFyV2lkdGhzW1wiIFwiXSA9ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLm1lYXN1cmVUZXh0V2lkdGgodGhpcy5mb250LCBcIiBcIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyV2lkdGhzW2ldID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykubWVhc3VyZVRleHRXaWR0aCh0aGlzLmZvbnQsIGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDb3JlKCkge1xyXG4gICAgICAgIHRoaXMucHJvcGVydHlQbGFjZW1lbnRzLmluaXRpYWxpemUoKTtcclxuICAgICAgICB0aGlzLnBsYWNlbWVudHMgPSB0aGlzLnByb3BlcnR5UGxhY2VtZW50cy5nZXRWYWx1ZSgpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5maWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsbENvbG9yID0gR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5maWxsLCB0aGlzLm9wYWNpdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5oYWxvRmlsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbG9GaWxsQ29sb3IgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLmhhbG9GaWxsLCB0aGlzLm9wYWNpdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZmlsbCA9IG5ldyBvbC5zdHlsZS5GaWxsKCk7XHJcbiAgICAgICAgbGV0IHN0cm9rZSA9IG5ldyBvbC5zdHlsZS5TdHJva2UoKTtcclxuICAgICAgICBsZXQgdGV4dFN0eWxlID0gbmV3IG9sLnN0eWxlLlRleHQoe1xyXG4gICAgICAgICAgICBmaWxsOiBmaWxsLFxyXG4gICAgICAgICAgICBzdHJva2U6IHN0cm9rZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICAgICAgdGV4dDogdGV4dFN0eWxlXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnRleHRBbGlnbnMuaW5kZXhPZih0aGlzLmFsaWduKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRleHRTdHlsZS5zZXRUZXh0QWxpZ24odGhpcy5hbGlnbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnRleHRCYXNlbGluZS5pbmRleE9mKHRoaXMuYmFzZWxpbmUpID49IDApIHtcclxuICAgICAgICAgICAgdGV4dFN0eWxlLnNldFRleHRCYXNlbGluZSh0aGlzLmJhc2VsaW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZHgpIHtcclxuICAgICAgICAgICAgdGV4dFN0eWxlLnNldE9mZnNldFgodGhpcy5keCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmR5KSB7XHJcbiAgICAgICAgICAgIHRleHRTdHlsZS5zZXRPZmZzZXRZKHRoaXMuZHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5mb250KSB7XHJcbiAgICAgICAgICAgIHRleHRTdHlsZS5zZXRGb250KHRoaXMuZm9udCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmZpbGxDb2xvcikge1xyXG4gICAgICAgICAgICBmaWxsLnNldENvbG9yKHRoaXMuZmlsbENvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGFsb0ZpbGxDb2xvcikge1xyXG4gICAgICAgICAgICBzdHJva2Uuc2V0Q29sb3IodGhpcy5oYWxvRmlsbENvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGFsb1JhZGl1cykge1xyXG4gICAgICAgICAgICBzdHJva2Uuc2V0V2lkdGgodGhpcy5oYWxvUmFkaXVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGFsb0ZpbGxDb2xvciA9PT0gdW5kZWZpbmVkICYmIHRoaXMuaGFsb1JhZGl1cyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRleHRTdHlsZS5zZXRTdHJva2UodW5kZWZpbmVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnJvdGF0ZUFuZ2xlKSB7XHJcbiAgICAgICAgICAgIHRleHRTdHlsZS5zZXRSb3RhdGlvbih0aGlzLnJvdGF0ZUFuZ2xlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubWF4Q2hhckFuZ2xlID49IDApIHtcclxuICAgICAgICAgICAgKDxhbnk+dGV4dFN0eWxlKS5zZXRNYXhBbmdsZSh0aGlzLm1heENoYXJBbmdsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnRleHRUcmFuc2Zvcm1zLmluY2x1ZGVzKHRoaXMudGV4dFRyYW5zZm9ybSkpIHtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBpbnZhbGlkIGlucHV0cy5cclxuICAgICAgICAgICAgdGhpcy50ZXh0VHJhbnNmb3JtID0gdGhpcy50ZXh0VHJhbnNmb3Jtc1swXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udmVydGVkU3R5bGVDb3JlKGZlYXR1cmU6IGFueSwgcmVzb2x1dGlvbjogbnVtYmVyLCBvcHRpb25zOiBhbnkpOiBvbC5zdHlsZS5TdHlsZVtdIHtcclxuICAgICAgICBsZXQgdGV4dFN0eWxlcyA9IFtdO1xyXG4gICAgICAgIGxldCBmZWF0dXJlVGV4dCA9IFwiXCI7XHJcbiAgICAgICAgbGV0IGZlYXR1cmVQcm9wZXJ0aWVzID0gZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgZmVhdHVyZVRleHQgPSBmZWF0dXJlLmdldCh0aGlzLm5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQSB3b3JrYXJvdW5kIGZvciB0aGUgbGFuZ3VhZ2UsIHJlbW92ZSB0aGUgZGF0YSB1cGRhdGVcclxuICAgICAgICBpZiAoKGZlYXR1cmVUZXh0ID09PSB1bmRlZmluZWQgfHwgZmVhdHVyZVRleHQgPT09IFwiXCIpICYmIHRoaXMubmFtZS5pbmRleE9mKFwibmFtZV9cIikgPT09IDApIHtcclxuICAgICAgICAgICAgZmVhdHVyZVRleHQgPSBmZWF0dXJlLmdldChcIm5hbWVcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5udW1lcmljRm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gdGhpcy5nZXRUZXh0V2l0aE51bWVyaWNGb3JtYXQoZmVhdHVyZVRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kYXRlRm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gdGhpcy5nZXRUZXh0V2l0aERhdGVGb3JtYXQoZmVhdHVyZVRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy50ZXh0Rm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gdGhpcy5nZXRUZXh0V2l0aEZvcm1hdChmZWF0dXJlVGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZmVhdHVyZVRleHQgPT09IHVuZGVmaW5lZCB8fCBmZWF0dXJlVGV4dCA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGV4dFN0eWxlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZlYXR1cmVUZXh0ID0gdGhpcy5nZXRUZXh0VHJhbnNmb3JtKGZlYXR1cmVUZXh0KTtcclxuXHJcbiAgICAgICAgdGhpcy5wbGFjZW1lbnRzID0gdGhpcy5wcm9wZXJ0eVBsYWNlbWVudHMuZ2V0VmFsdWUoZmVhdHVyZVByb3BlcnRpZXMpO1xyXG5cclxuICAgICAgICB0aGlzLnN0eWxlLmdldFRleHQoKS5zZXRUZXh0KGZlYXR1cmVUZXh0KTtcclxuICAgICAgICBpZiAodGhpcy5zZXRMYWJlbFBvc2l0aW9uKGZlYXR1cmVUZXh0LCBmZWF0dXJlLCByZXNvbHV0aW9uLCB0aGlzLnN0eWxlLmdldFRleHQoKSwgb3B0aW9ucy5zdHJhdGVneVRyZWUsIG9wdGlvbnMuZnJhbWVTdGF0ZSkpIHtcclxuICAgICAgICAgICAgbGV0IGZlYXR1cmVaaW5kZXggPSBmZWF0dXJlW1widGVtcFRyZWVaaW5kZXhcIl07XHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlWmluZGV4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmVaaW5kZXggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUuc2V0WkluZGV4KGZlYXR1cmVaaW5kZXgpO1xyXG5cclxuICAgICAgICAgICAgdGV4dFN0eWxlcy5wdXNoKHRoaXMuc3R5bGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRleHRTdHlsZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TGFiZWxQb3NpdGlvbih0ZXh0OiBzdHJpbmcsIGdlb21ldHJ5OiBhbnksIHJlc29sdXRpb246IGFueSwgdGV4dFN0YXRlOiBvbC5zdHlsZS5UZXh0LCBzdHJhdGVneVRyZWU6IGFueSwgZnJhbWVTdGF0ZTogb2x4LkZyYW1lU3RhdGUpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgZmxhdENvb3JkaW5hdGVzO1xyXG5cclxuICAgICAgICBsZXQgZ2VvbWV0cnlUeXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xyXG4gICAgICAgIGlmICgoZ2VvbWV0cnlUeXBlID09PSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTElORV9TVFJJTkcgfHwgZ2VvbWV0cnlUeXBlID09PSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkcpICYmICF0aGlzLmZvcmNlSG9yaXpvbnRhbEZvckxpbmUpIHtcclxuICAgICAgICAgICAgbGV0IGdlb21ldHJ5VHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcclxuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgbGFiZWxJbmZvID0gdGhpcy5nZXRMYWJlbEluZm8odGV4dCwgdGV4dFN0YXRlKTtcclxuICAgICAgICAgICAgbGV0IGxhYmVsV2lkdGggPSBsYWJlbEluZm8ubGFiZWxXaWR0aDtcclxuICAgICAgICAgICAgbGV0IGxhYmVsSGVpZ2h0ID0gbGFiZWxJbmZvLmxhYmVsSGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgc2NhbGUgPSBsYWJlbEluZm8uc2NhbGU7XHJcbiAgICAgICAgICAgIGxldCBmb250ID0gbGFiZWxJbmZvLmZvbnQ7XHJcbiAgICAgICAgICAgIGxldCBzdHJva2VXaWR0aCA9IGxhYmVsSW5mby5zdHJva2VXaWR0aDtcclxuICAgICAgICAgICAgbGV0IG51bUxpbmVzID0gbGFiZWxJbmZvLm51bUxpbmVzO1xyXG4gICAgICAgICAgICBsZXQgbGluZXMgPSBsYWJlbEluZm8ubGluZXM7XHJcbiAgICAgICAgICAgIGxldCBsaW5lSGVpZ2h0ID0gbGFiZWxJbmZvLmxpbmVIZWlnaHQ7XHJcbiAgICAgICAgICAgIGxldCByZW5kZXJXaWR0aCA9IGxhYmVsSW5mby5yZW5kZXJXaWR0aDtcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IGxhYmVsSW5mby5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aHMgPSBsYWJlbEluZm8ud2lkdGhzO1xyXG5cclxuICAgICAgICAgICAgbGV0IENvbnN0cnVjdG9yOiBhbnk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsYWNlbWVudFR5cGUgPT09IFwiZGVmYXVsdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBDb25zdHJ1Y3RvciA9IHRoaXMuQkFUQ0hfQ09OU1RSVUNUT1JTX0RFRkFVTFRbZ2VvbWV0cnlUeXBlXTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnBsYWNlbWVudFR5cGUgPT09IFwiZGV0ZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIENvbnN0cnVjdG9yID0gdGhpcy5CQVRDSF9DT05TVFJVQ1RPUlNfREVURUNUW2dlb21ldHJ5VHlwZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHRleHRMYWJlbGluZ1N0cmF0ZWd5ID0gbmV3IENvbnN0cnVjdG9yKCk7XHJcbiAgICAgICAgICAgIGxldCB0bXBMYWJlbFdpZHRoID0gbGFiZWxXaWR0aCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG4gICAgICAgICAgICBsZXQgdG1wTGFiZWxIZWlnaHQgPSBsYWJlbEhlaWdodCAvIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChnZW9tZXRyeVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLlBPSU5UOlxyXG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gZ2VvbWV0cnkuZ2V0Q2VudGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5MSU5FX1NUUklORzpcclxuICAgICAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge29sLmdlb20uTGluZVN0cmluZ30gKi8gKGdlb21ldHJ5KS5nZXRGbGF0TWlkcG9pbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLkNJUkNMRTpcclxuICAgICAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge29sLmdlb20uQ2lyY2xlfSAqLyAoZ2VvbWV0cnkpLmdldENlbnRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtvbC5nZW9tLk11bHRpTGluZVN0cmluZ30gKi8gKGdlb21ldHJ5KS5nZXRGbGF0TWlkcG9pbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5QT0xZR09OOlxyXG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7b2wuZ2VvbS5Qb2x5Z29ufSAqLyAoZ2VvbWV0cnkpLmdldEZsYXRJbnRlcmlvclBvaW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnRlcmlvclBvaW50cyA9IC8qKiBAdHlwZSB7b2wuZ2VvbS5NdWx0aVBvbHlnb259ICovIChnZW9tZXRyeSkuZ2V0RmxhdE1pZHBvaW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRleHRMYWJlbGluZ1N0cmF0ZWd5Lm1hcmtMb2NhdGlvbihmbGF0Q29vcmRpbmF0ZXMsIHRtcExhYmVsV2lkdGgsIHRtcExhYmVsSGVpZ2h0LCByZXNvbHV0aW9uLCBnZW9tZXRyeVR5cGUsIHRoaXMsIHN0cmF0ZWd5VHJlZSwgZnJhbWVTdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIGZhbHNlOyB9XHJcblxyXG4gICAgICAgICAgICB2YXIgbGFiZWxJbWFnZSA9IHRoaXMuZ2V0SW1hZ2UodGV4dFN0YXRlLCBsYWJlbFdpZHRoLCBsYWJlbEhlaWdodCwgc2NhbGUsIGZvbnQsIHN0cm9rZVdpZHRoLCBudW1MaW5lcywgbGluZXMsIGxpbmVIZWlnaHQsIHJlbmRlcldpZHRoLCBoZWlnaHQsIHdpZHRocyk7XHJcblxyXG4gICAgICAgICAgICBpZiAobGFiZWxJbWFnZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICg8YW55PnRleHRTdGF0ZSkubGFiZWwgPSBsYWJlbEltYWdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAoPGFueT50ZXh0U3RhdGUpLmxhYmVsUG9zaXRpb24gPSBmbGF0Q29vcmRpbmF0ZXM7XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldExhYmVsSW5mbyh0ZXh0OiBzdHJpbmcsIHRleHRTdGF0ZTogb2wuc3R5bGUuVGV4dCkge1xyXG4gICAgICAgIHZhciBrZXkgPSB0ZXh0ICsgdGhpcy51aWQ7XHJcbiAgICAgICAgaWYgKCF0aGlzLmxhYmVsSW5mb3MuY29udGFpbnNLZXkoa2V5KSkge1xyXG4gICAgICAgICAgICBsZXQgZm9udCA9IHRleHRTdGF0ZS5nZXRGb250KCk7XHJcbiAgICAgICAgICAgIHRleHQgPSB0aGlzLndyYXBUZXh0KHRleHQsIGZvbnQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHN0cm9rZVN0YXRlID0gdGV4dFN0YXRlLmdldFN0cm9rZSgpO1xyXG4gICAgICAgICAgICBsZXQgc3Ryb2tlV2lkdGggPSBzdHJva2VTdGF0ZSAmJiBzdHJva2VTdGF0ZS5nZXRXaWR0aCgpID8gc3Ryb2tlU3RhdGUuZ2V0V2lkdGgoKSA6IDA7XHJcbiAgICAgICAgICAgIGxldCBsaW5lcyA9IHRleHQuc3BsaXQoXCJcXG5cIik7XHJcbiAgICAgICAgICAgIGxldCBudW1MaW5lcyA9IGxpbmVzLmxlbmd0aDtcclxuICAgICAgICAgICAgbGV0IHRleHRTY2FsZSA9IHRleHRTdGF0ZS5nZXRTY2FsZSgpO1xyXG4gICAgICAgICAgICB0ZXh0U2NhbGUgPSB0ZXh0U2NhbGUgPT09IHVuZGVmaW5lZCA/IDEgOiB0ZXh0U2NhbGU7XHJcbiAgICAgICAgICAgIGxldCBzY2FsZSA9IHRleHRTY2FsZSAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG4gICAgICAgICAgICBsZXQgd2lkdGhzID0gW107XHJcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IHRoaXMuZ2V0RXN0aW1hdGVkV2lkdGgoZm9udCwgbGluZXMsIHdpZHRocywgdGhpcy5sZXR0ZXJTcGFjaW5nKTtcclxuICAgICAgICAgICAgbGV0IGxpbmVIZWlnaHQgPSAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5tZWFzdXJlVGV4dEhlaWdodChmb250KTtcclxuICAgICAgICAgICAgbGV0IHRtcE1hc2tNYXJnaW4gPSAodGhpcy5tYXNrTWFyZ2luID8gdGhpcy5tYXNrTWFyZ2luIDogXCIwXCIpLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIGxldCB0bXBNYXNrSGVpZ2h0TWFyZ2luID0gMDtcclxuICAgICAgICAgICAgbGV0IHRtcE1hc2tXaWR0aE1hcmdpbiA9IDA7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodG1wTWFza01hcmdpbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICB0bXBNYXNrSGVpZ2h0TWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcE1hc2tXaWR0aE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICogMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICB0bXBNYXNrSGVpZ2h0TWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcE1hc2tXaWR0aE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMV0pICogMjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgICAgICB0bXBNYXNrSGVpZ2h0TWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgKyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzJdKTtcclxuICAgICAgICAgICAgICAgICAgICB0bXBNYXNrV2lkdGhNYXJnaW4gPSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzFdKSAqIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wTWFza0hlaWdodE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICsgcGFyc2VJbnQodG1wTWFza01hcmdpblsyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wTWFza1dpZHRoTWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblsxXSkgKyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzNdKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hc2tUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXNrVHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNpcmNsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wTWFza0hlaWdodE1hcmdpbiA9IHRtcE1hc2tIZWlnaHRNYXJnaW4gPiB0bXBNYXNrV2lkdGhNYXJnaW4gPyB0bXBNYXNrSGVpZ2h0TWFyZ2luIDogdG1wTWFza1dpZHRoTWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcE1hc2tXaWR0aE1hcmdpbiA9IHRtcE1hc2tIZWlnaHRNYXJnaW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IGxpbmVIZWlnaHQgKiBudW1MaW5lcyArIHN0cm9rZVdpZHRoICsgdG1wTWFza0hlaWdodE1hcmdpbjtcclxuICAgICAgICAgICAgbGV0IHJlbmRlcldpZHRoID0gd2lkdGggKyBzdHJva2VXaWR0aCArIHRtcE1hc2tXaWR0aE1hcmdpbjtcclxuICAgICAgICAgICAgbGV0IHRtcE1hc2tPdXRsaW5lV2lkdGggPSAodGhpcy5tYXNrT3V0bGluZVdpZHRoID8gdGhpcy5tYXNrT3V0bGluZVdpZHRoIDogMCk7XHJcbiAgICAgICAgICAgIGxldCBsYWJlbFdpZHRoID0gTWF0aC5jZWlsKChyZW5kZXJXaWR0aCArIHRtcE1hc2tPdXRsaW5lV2lkdGggKiAzKSAqIDEuMSAqIHNjYWxlKTtcclxuICAgICAgICAgICAgbGV0IGxhYmVsSGVpZ2h0ID0gTWF0aC5jZWlsKChoZWlnaHQgKyB0bXBNYXNrT3V0bGluZVdpZHRoICogMykgKiAxLjEgKiBzY2FsZSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbGFiZWxJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWxXaWR0aDogbGFiZWxXaWR0aCxcclxuICAgICAgICAgICAgICAgIGxhYmVsSGVpZ2h0OiBsYWJlbEhlaWdodCxcclxuICAgICAgICAgICAgICAgIHNjYWxlOiBzY2FsZSxcclxuICAgICAgICAgICAgICAgIGZvbnQ6IGZvbnQsXHJcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogc3Ryb2tlV2lkdGgsXHJcbiAgICAgICAgICAgICAgICBudW1MaW5lczogbnVtTGluZXMsXHJcbiAgICAgICAgICAgICAgICBsaW5lczogbGluZXMsXHJcbiAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiBsaW5lSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyV2lkdGg6IHJlbmRlcldpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB3aWR0aHM6IHdpZHRoc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsSW5mb3Muc2V0KGtleSwgbGFiZWxJbmZvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmxhYmVsSW5mb3MuZ2V0KGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RXN0aW1hdGVkV2lkdGgoZm9udCwgbGluZXMsIHdpZHRocywgbGV0dGVyU3BhY2luZykge1xyXG4gICAgICAgIGxldCBudW1MaW5lcyA9IGxpbmVzLmxlbmd0aDtcclxuICAgICAgICBsZXQgd2lkdGggPSAwO1xyXG4gICAgICAgIGxldCBjdXJyZW50V2lkdGgsIGk7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bUxpbmVzOyArK2kpIHtcclxuICAgICAgICAgICAgY3VycmVudFdpZHRoID0gMDtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBsaW5lc1tpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNoYXJXaWR0aCA9IHRoaXMuY2hhcldpZHRoc1tsaW5lc1tpXVtqXV07XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhcldpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFdpZHRoICs9IGNoYXJXaWR0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaWR0aCArPSB0aGlzLmNoYXJXaWR0aHNbXCJXXCJdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChsZXR0ZXJTcGFjaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50V2lkdGggPSBjdXJyZW50V2lkdGggKyAobGluZXNbaV0ubGVuZ3RoIC0gMSkgKiBsZXR0ZXJTcGFjaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdpZHRoID0gTWF0aC5tYXgod2lkdGgsIGN1cnJlbnRXaWR0aCk7XHJcbiAgICAgICAgICAgIHdpZHRocy5wdXNoKGN1cnJlbnRXaWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB3aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbWFnZSh0ZXh0U3RhdGU6IG9sLnN0eWxlLlRleHQsIGxhYmVsV2lkdGg6IG51bWJlciwgbGFiZWxIZWlnaHQ6IG51bWJlciwgc2NhbGU6IG51bWJlciwgZm9udDogc3RyaW5nLCBzdHJva2VXaWR0aDogbnVtYmVyLCBudW1MaW5lczogYW55LCBsaW5lczogYW55LCBsaW5lSGVpZ2h0OiBudW1iZXIsIHJlbmRlcldpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCB3aWR0aHM6IGFueSkge1xyXG4gICAgICAgIHZhciBsYWJlbENhY2hlID0gKDxhbnk+b2wpLnJlbmRlci5jYW52YXMubGFiZWxDYWNoZTtcclxuICAgICAgICB2YXIga2V5ID0gdGhpcy51aWQgIT09IHVuZGVmaW5lZCA/IHRoaXMudWlkIDogKDxhbnk+b2wpLmdldFVpZCh0aGlzKTtcclxuICAgICAgICBrZXkgKz0gbGluZXMudG9TdHJpbmcoKTtcclxuICAgICAgICBpZiAoIWxhYmVsQ2FjaGUuY29udGFpbnNLZXkoa2V5KSkge1xyXG4gICAgICAgICAgICBsZXQgZmlsbFN0YXRlID0gdGV4dFN0YXRlLmdldEZpbGwoKTtcclxuICAgICAgICAgICAgbGV0IHN0cm9rZVN0YXRlID0gdGV4dFN0YXRlLmdldFN0cm9rZSgpO1xyXG4gICAgICAgICAgICBsZXQgbGFiZWw7XHJcblxyXG4gICAgICAgICAgICBsZXQgYWxpZ24gPSAoPGFueT5vbC5yZW5kZXIpLnJlcGxheS5URVhUX0FMSUdOW3RleHRTdGF0ZS5nZXRUZXh0QWxpZ24oKSB8fCAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5kZWZhdWx0VGV4dEFsaWduXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb250ZXh0ID0gKDxhbnk+b2wpLmRvbS5jcmVhdGVDYW52YXNDb250ZXh0MkQobGFiZWxXaWR0aCwgbGFiZWxIZWlnaHQpO1xyXG4gICAgICAgICAgICBsYWJlbCA9IGNvbnRleHQuY2FudmFzO1xyXG4gICAgICAgICAgICBsYWJlbENhY2hlLnNldChrZXksIGxhYmVsKTtcclxuICAgICAgICAgICAgbGFiZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICAvLyBGb3IgbGV0dGVyU3BhY2luZyB3ZSBuZWVkIGFwcFxyXG4gICAgICAgICAgICBsZXQgYm9keTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGV0dGVyU3BhY2luZykge1xyXG4gICAgICAgICAgICAgICAgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXTtcclxuICAgICAgICAgICAgICAgIGlmIChib2R5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHkuYXBwZW5kQ2hpbGQobGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGFiZWwuc3R5bGUubGV0dGVyU3BhY2luZyA9IHRoaXMubGV0dGVyU3BhY2luZyArIFwicHhcIjtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBsYWJlbC5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChzY2FsZSAhPT0gMSkgeyBjb250ZXh0LnNjYWxlKHNjYWxlLCBzY2FsZSk7IH1cclxuICAgICAgICAgICAgY29udGV4dC5mb250ID0gZm9udDtcclxuICAgICAgICAgICAgaWYgKHN0cm9rZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3RhdGUuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlV2lkdGggKiAoKDxhbnk+b2wuaGFzKS5TQUZBUkkgPyBzY2FsZSA6IDEpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lQ2FwID0gc3Ryb2tlU3RhdGUuZ2V0TGluZUNhcCgpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lSm9pbiA9IHN0cm9rZVN0YXRlLmdldExpbmVKb2luKCk7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0Lm1pdGVyTGltaXQgPSBzdHJva2VTdGF0ZS5nZXRNaXRlckxpbWl0KCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZURhc2ggPSBzdHJva2VTdGF0ZS5nZXRMaW5lRGFzaCgpO1xyXG4gICAgICAgICAgICAgICAgbGluZURhc2ggPSBsaW5lRGFzaCA/IGxpbmVEYXNoLnNsaWNlKCkgOiAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5kZWZhdWx0TGluZURhc2g7XHJcbiAgICAgICAgICAgICAgICBpZiAoKDxhbnk+b2wuaGFzKS5DQU5WQVNfTElORV9EQVNIICYmIGxpbmVEYXNoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0TGluZURhc2goc3Ryb2tlU3RhdGUuZ2V0TGluZURhc2goKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lRGFzaE9mZnNldCA9ICg8YW55PnN0cm9rZVN0YXRlKS5nZXRMaW5lRGFzaE9mZnNldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRyYXdNYXNrKGNvbnRleHQsIDAsIDAsIHJlbmRlcldpZHRoLCBoZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubWFza1R5cGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hc2tUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2lyY2xlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2NhbGUgIT09IDEpIHsgY29udGV4dC5zY2FsZShzY2FsZSwgc2NhbGUpOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5mb250ID0gZm9udDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3Ryb2tlU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0YXRlLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlV2lkdGggKiAoKDxhbnk+b2wuaGFzKS5TQUZBUkkgPyBzY2FsZSA6IDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVDYXAgPSBzdHJva2VTdGF0ZS5nZXRMaW5lQ2FwKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZUpvaW4gPSBzdHJva2VTdGF0ZS5nZXRMaW5lSm9pbigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1pdGVyTGltaXQgPSBzdHJva2VTdGF0ZS5nZXRNaXRlckxpbWl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5lRGFzaCA9IHN0cm9rZVN0YXRlLmdldExpbmVEYXNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVEYXNoID0gbGluZURhc2ggPyBsaW5lRGFzaC5zbGljZSgpIDogKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuZGVmYXVsdExpbmVEYXNoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKDxhbnk+b2wuaGFzKS5DQU5WQVNfTElORV9EQVNIICYmIGxpbmVEYXNoLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zZXRMaW5lRGFzaChzdHJva2VTdGF0ZS5nZXRMaW5lRGFzaCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZURhc2hPZmZzZXQgPSAoPGFueT5zdHJva2VTdGF0ZSkuZ2V0TGluZURhc2hPZmZzZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29udGV4dC50ZXh0QmFzZWxpbmUgPSBcIm1pZGRsZVwiO1xyXG4gICAgICAgICAgICBjb250ZXh0LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgICAgIGxldCBsZWZ0UmlnaHQgPSAwLjUgLSBhbGlnbjtcclxuICAgICAgICAgICAgbGV0IHggPSBhbGlnbiAqIGxhYmVsLndpZHRoIC8gc2NhbGUgKyBsZWZ0UmlnaHQgKiBzdHJva2VXaWR0aDtcclxuICAgICAgICAgICAgbGV0IGk7XHJcbiAgICAgICAgICAgIGxldCB0bXBNYXNrTWFyZ2luID0gKHRoaXMubWFza01hcmdpbiA/IHRoaXMubWFza01hcmdpbiA6IFwiMFwiKS5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBsZXQgdG1wTWFza091dGxpbmVXaWR0aCA9IHRoaXMubWFza091dGxpbmVXaWR0aCA/IHRoaXMubWFza091dGxpbmVXaWR0aCA6IDA7XHJcbiAgICAgICAgICAgIGlmIChzdHJva2VTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0cm9rZVN0YXRlLmdldENvbG9yKCkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3RhdGUuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMuaGFsb1JhZGl1cyA/IHRoaXMuaGFsb1JhZGl1cyA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG51bUxpbmVzOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZHJhd25NYXNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQobGluZXNbaV0sIHggKyBsZWZ0UmlnaHQgKiB3aWR0aHNbaV0gKiAxLjIgLSBzdHJva2VXaWR0aCAqIDEuMiArIHRtcE1hc2tPdXRsaW5lV2lkdGggKiAwLjUgLyAxLjIgLSAodG1wTWFza01hcmdpblszXSA/IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMV0pIC0gcGFyc2VJbnQodG1wTWFza01hcmdpblszXSkgOiAwKSAqIDAuNSwgdGhpcy5tYXNrVHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNpcmNsZVwiID8gY29udGV4dC5jYW52YXMuaGVpZ2h0IC8gc2NhbGUgKiAwLjUgLSAodG1wTWFza01hcmdpblsyXSA/IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMl0pIC0gcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgOiAwKSA6IHN0cm9rZVdpZHRoICsgKGkgKyAxKSAqIGxpbmVIZWlnaHQgKiAwLjUgKyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSArIHRtcE1hc2tPdXRsaW5lV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VUZXh0KGxpbmVzW2ldLCB4ICsgbGVmdFJpZ2h0ICogd2lkdGhzW2ldICogMS4yIC0gKHRtcE1hc2tNYXJnaW5bM10gPyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzFdKSAtIHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bM10pIDogMCkgKiAwLjUsIDAuNSAqIChzdHJva2VXaWR0aCArIGxpbmVIZWlnaHQpICsgaSAqIGxpbmVIZWlnaHQgKiAxLjIgLSArIHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICsgKHRoaXMubWFza091dGxpbmVXaWR0aCA/IHRoaXMubWFza091dGxpbmVXaWR0aCA6IDApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmlsbFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsbFN0YXRlLmdldENvbG9yKCkgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGxTdGF0ZS5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyYXduTWFzaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsVGV4dChsaW5lc1tpXSwgeCArIGxlZnRSaWdodCAqIHdpZHRoc1tpXSAqIDEuMiAtIHN0cm9rZVdpZHRoICogMS4yICsgdG1wTWFza091dGxpbmVXaWR0aCAqIDAuNSAvIDEuMiAtICh0bXBNYXNrTWFyZ2luWzNdID8gcGFyc2VJbnQodG1wTWFza01hcmdpblsxXSkgLSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzNdKSA6IDApICogMC41LCB0aGlzLm1hc2tUeXBlLnRvTG93ZXJDYXNlKCkgPT09IFwiY2lyY2xlXCIgPyBjb250ZXh0LmNhbnZhcy5oZWlnaHQgLyBzY2FsZSAqIDAuNSAtICh0bXBNYXNrTWFyZ2luWzJdID8gcGFyc2VJbnQodG1wTWFza01hcmdpblsyXSkgLSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSA6IDApIDogc3Ryb2tlV2lkdGggKyAoaSArIDEpICogbGluZUhlaWdodCAqIDAuNSArIHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICsgdG1wTWFza091dGxpbmVXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxUZXh0KGxpbmVzW2ldLCB4ICsgbGVmdFJpZ2h0ICogd2lkdGhzW2ldICogMS4yIC0gKHRtcE1hc2tNYXJnaW5bM10gPyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzFdKSAtIHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bM10pIDogMCkgKiAwLjUsIDAuNSAqIChzdHJva2VXaWR0aCArIGxpbmVIZWlnaHQpICsgaSAqIGxpbmVIZWlnaHQgKiAxLjIgKyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSArICh0aGlzLm1hc2tPdXRsaW5lV2lkdGggPyB0aGlzLm1hc2tPdXRsaW5lV2lkdGggOiAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubGV0dGVyU3BhY2luZyAmJiBib2R5KSB7XHJcbiAgICAgICAgICAgICAgICBib2R5LnJlbW92ZUNoaWxkKGxhYmVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGxhYmVsQ2FjaGUuZ2V0KGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgd3JhcFRleHQodGV4dDogc3RyaW5nLCBmb250OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCByZXN1bHRUZXh0OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIGlmICh0ZXh0ICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGxldCBsaW5lcyA9IFt0ZXh0XTtcclxuICAgICAgICAgICAgbGV0IHdpZHRocyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgd2lkdGggPSB0aGlzLmdldEVzdGltYXRlZFdpZHRoKGZvbnQsIGxpbmVzLCB3aWR0aHMsIHRoaXMubGV0dGVyU3BhY2luZyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgd3JhcFdpZHRoID0gdGhpcy53cmFwV2lkdGg7XHJcbiAgICAgICAgICAgIGxldCB3cmFwQ2hhcmFjdGVyID0gXCIgXCI7XHJcbiAgICAgICAgICAgIGxldCBpc1dyYXBCZWZvcmUgPSB0aGlzLndyYXBCZWZvcmU7XHJcblxyXG4gICAgICAgICAgICBpZiAod3JhcFdpZHRoID4gMCAmJiB3aWR0aCA+IHdyYXBXaWR0aCAmJiB0ZXh0LmluY2x1ZGVzKHdyYXBDaGFyYWN0ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGV4dExpbmVzID0gW107XHJcbiAgICAgICAgICAgICAgICBsaW5lcyA9IHRleHQuc3BsaXQod3JhcENoYXJhY3Rlcik7XHJcbiAgICAgICAgICAgICAgICBsZXQgd3JhcExpbmVzID0gW107XHJcbiAgICAgICAgICAgICAgICBsZXQgd3JhcFdpZHRoU3VtID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCB0bXBXcmFwV2lkdGg6IG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaXNXcmFwQmVmb3JlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wTGluZSA9IFtsaW5lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wV3JhcFdpZHRoID0gdGhpcy5nZXRFc3RpbWF0ZWRXaWR0aChmb250LCB0bXBMaW5lLCB3aWR0aHMsIHRoaXMubGV0dGVyU3BhY2luZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwV2lkdGhTdW0gKz0gdG1wV3JhcFdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG1wV3JhcFdpZHRoID4gd3JhcFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwTGluZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFdpZHRoU3VtID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod3JhcExpbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3cmFwV2lkdGhTdW0gPiB3cmFwV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwTGluZXMucHVzaChcIlxcblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGluZXMucHVzaCh3cmFwTGluZXMuam9pbihcIlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFdpZHRoU3VtID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzLnB1c2goXCIgXCIgKyBsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3cmFwTGluZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGluZXMucHVzaCh3cmFwTGluZXMuam9pbihcIlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBMaW5lcy5wdXNoKFwiIFwiICsgbGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXBMaW5lID0gW2xpbmVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBXcmFwV2lkdGggPSB0aGlzLmdldEVzdGltYXRlZFdpZHRoKGZvbnQsIHRtcExpbmUsIHdpZHRocywgdGhpcy5sZXR0ZXJTcGFjaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFdpZHRoU3VtICs9IHRtcFdyYXBXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3cmFwV2lkdGhTdW0gPiB3cmFwV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBMaW5lcy5wdXNoKFwiXFxuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dExpbmVzLnB1c2god3JhcExpbmVzLmpvaW4oXCJcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwV2lkdGhTdW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod3JhcExpbmVzLmxlbmd0aCA+IDApIHsgdGV4dExpbmVzLnB1c2god3JhcExpbmVzLmpvaW4oXCJcIikpOyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0VGV4dCA9IHRleHRMaW5lcy5qb2luKFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFRleHQubGFzdEluZGV4T2YoXCJcXG5cIikgPT09IHJlc3VsdFRleHQubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFRleHQgPSByZXN1bHRUZXh0LnN1YnN0cigwLCByZXN1bHRUZXh0Lmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0VGV4dCA9IHRleHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXN1bHRUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGRyYXdNYXNrKGNvbnRleHQ6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IGZpbGwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHN0cm9rZSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWFza0NvbG9yKSB7XHJcbiAgICAgICAgICAgIGZpbGwgPSBuZXcgb2wuc3R5bGUuRmlsbCgpO1xyXG4gICAgICAgICAgICBmaWxsLnNldENvbG9yKEdlb1N0eWxlLnRvUkdCQUNvbG9yKHRoaXMubWFza0NvbG9yLCB0aGlzLm9wYWNpdHkgPyB0aGlzLm9wYWNpdHkgOiAxKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYXNrT3V0bGluZUNvbG9yICYmIHRoaXMubWFza091dGxpbmVXaWR0aCkge1xyXG4gICAgICAgICAgICBzdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hc2tPdXRsaW5lQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHN0cm9rZS5zZXRDb2xvcihHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLm1hc2tPdXRsaW5lQ29sb3IsIHRoaXMub3BhY2l0eSA/IHRoaXMub3BhY2l0eSA6IDEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXNrT3V0bGluZVdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBzdHJva2Uuc2V0V2lkdGgodGhpcy5tYXNrT3V0bGluZVdpZHRoID8gdGhpcy5tYXNrT3V0bGluZVdpZHRoIDogMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1hc2tUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZHJhd25NYXNrID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXduTWFzayA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLm1hc2tUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkZWZhdWx0XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJEZWZhdWx0XCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZWN0YW5nbGVcIjpcclxuICAgICAgICAgICAgY2FzZSBcIlJlY3RhbmdsZVwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3UmVjdGFuZ2xlKGNvbnRleHQsIHgsIHksIHdpZHRoLCBoZWlnaHQsIGZpbGwsIHN0cm9rZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJvdW5kZWRDb3JuZXJzXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJSb3VuZGVkQ29ybmVyc1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Um91bmRSZWN0YW5nbGUoY29udGV4dCwgeCwgeSwgd2lkdGgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicm91bmRlZEVuZHNcIjpcclxuICAgICAgICAgICAgY2FzZSBcIlJvdW5kZWRFbmRzXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdSb3VuZGVkRW5kcyhjb250ZXh0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjaXJjbGVcIjpcclxuICAgICAgICAgICAgY2FzZSBcIkNpcmNsZVwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Q2lyY2xlKGNvbnRleHQsIHgsIHksIHdpZHRoLCBoZWlnaHQsIGZpbGwsIHN0cm9rZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1JlY3RhbmdsZShjb250ZXh0OiBhbnksIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgZmlsbDogb2wuc3R5bGUuRmlsbCwgc3Ryb2tlOiBvbC5zdHlsZS5TdHJva2UpIHtcclxuICAgICAgICBpZiAoZmlsbCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGwuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsUmVjdCh4ICsgc3Ryb2tlLmdldFdpZHRoKCksIHkgKyBzdHJva2UuZ2V0V2lkdGgoKSwgd2lkdGggKyBzdHJva2UuZ2V0V2lkdGgoKSAqIDIsIGhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlLmdldFdpZHRoKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2UuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2VSZWN0KHggKyBzdHJva2UuZ2V0V2lkdGgoKSwgeSArIHN0cm9rZS5nZXRXaWR0aCgpLCB3aWR0aCArIHN0cm9rZS5nZXRXaWR0aCgpICogMiwgaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1JvdW5kUmVjdGFuZ2xlKGNvbnRleHQ6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBmaWxsOiBvbC5zdHlsZS5GaWxsLCBzdHJva2U6IG9sLnN0eWxlLlN0cm9rZSkge1xyXG4gICAgICAgIGxldCByYWRpdXMgPSAod2lkdGggPCBoZWlnaHQgPyB3aWR0aCA6IGhlaWdodCkgKiAwLjM7XHJcbiAgICAgICAgLy8gd2lkdGggKj0gMC45O1xyXG4gICAgICAgIC8vIGhlaWdodCAqPSAwLjg7XHJcbiAgICAgICAgaWYgKHN0cm9rZSkge1xyXG4gICAgICAgICAgICB4ID0geCArIChzdHJva2UuZ2V0V2lkdGgoKSA/IHN0cm9rZS5nZXRXaWR0aCgpIDogMCk7XHJcbiAgICAgICAgICAgIHkgPSB5ICsgKHN0cm9rZS5nZXRXaWR0aCgpID8gc3Ryb2tlLmdldFdpZHRoKCkgOiAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oeCArIHJhZGl1cyArIHN0cm9rZS5nZXRXaWR0aCgpICogMiwgeSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oeCArIHdpZHRoIC0gcmFkaXVzICsgc3Ryb2tlLmdldFdpZHRoKCkgKiAyLCB5KTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoICsgc3Ryb2tlLmdldFdpZHRoKCkgKiAyLCB5LCB4ICsgd2lkdGggKyBzdHJva2UuZ2V0V2lkdGgoKSAqIDIsIHkgKyByYWRpdXMpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKHggKyB3aWR0aCArIHN0cm9rZS5nZXRXaWR0aCgpICogMiwgeSArIGhlaWdodCAtIHJhZGl1cyk7XHJcbiAgICAgICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCArIHN0cm9rZS5nZXRXaWR0aCgpICogMiwgeSArIGhlaWdodCwgeCArIHdpZHRoIC0gcmFkaXVzICsgc3Ryb2tlLmdldFdpZHRoKCkgKiAyLCB5ICsgaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyh4ICsgcmFkaXVzLCB5ICsgaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSArIGhlaWdodCwgeCwgeSArIGhlaWdodCAtIHJhZGl1cyk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oeCwgeSArIHJhZGl1cyk7XHJcbiAgICAgICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyByYWRpdXMsIHkpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGlmIChmaWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbC5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBzdHJva2UuZ2V0V2lkdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZS5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3Um91bmRlZEVuZHMoY29udGV4dDogYW55LCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGZpbGw6IG9sLnN0eWxlLkZpbGwsIHN0cm9rZTogb2wuc3R5bGUuU3Ryb2tlKSB7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9ICh3aWR0aCA8IGhlaWdodCA/IHdpZHRoIDogaGVpZ2h0KSAqIDAuMjtcclxuICAgICAgICAvLyB3aWR0aCAqPSAwLjk7XHJcbiAgICAgICAgLy8gaGVpZ2h0ICo9IDAuODtcclxuICAgICAgICBsZXQgc3Ryb2tlV2lkdGggPSAoc3Ryb2tlLmdldFdpZHRoKCkgPyBzdHJva2UuZ2V0V2lkdGgoKSA6IDApO1xyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgeCA9IHggKyBzdHJva2VXaWR0aDtcclxuICAgICAgICAgICAgeSA9IHkgKyBzdHJva2VXaWR0aDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oeCArIHJhZGl1cywgeSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oeCArIHdpZHRoIC0gcmFkaXVzICsgc3Ryb2tlV2lkdGggKiAyLCB5KTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoICsgc3Ryb2tlV2lkdGggKiAyLCB5ICsgaGVpZ2h0ICogMC41LCB4ICsgd2lkdGggLSByYWRpdXMgKyBzdHJva2VXaWR0aCAqIDIsIHkgKyBoZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKHggKyByYWRpdXMsIHkgKyBoZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh4LCB5ICsgaGVpZ2h0ICogMC41LCB4ICsgcmFkaXVzLCB5KTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBpZiAoZmlsbCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGwuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBzdHJva2UuZ2V0V2lkdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZS5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3Q2lyY2xlKGNvbnRleHQ6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBmaWxsOiBvbC5zdHlsZS5GaWxsLCBzdHJva2U6IG9sLnN0eWxlLlN0cm9rZSkge1xyXG4gICAgICAgIGNvbnRleHQuY2FudmFzLndpZHRoID0gY29udGV4dC5jYW52YXMud2lkdGggPiBjb250ZXh0LmNhbnZhcy5oZWlnaHQgPyBjb250ZXh0LmNhbnZhcy53aWR0aCA6IGNvbnRleHQuY2FudmFzLmhlaWdodDtcclxuICAgICAgICBjb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBjb250ZXh0LmNhbnZhcy53aWR0aDtcclxuICAgICAgICBsZXQgcmFkaXVzID0gMDtcclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIHJhZGl1cyAtPSBzdHJva2UuZ2V0V2lkdGgoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmFkaXVzICs9IGNvbnRleHQuY2FudmFzLndpZHRoICogMC41O1xyXG5cclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuYXJjKHggKyBjb250ZXh0LmNhbnZhcy53aWR0aCAqIDAuNSwgeSArIGNvbnRleHQuY2FudmFzLndpZHRoICogMC41LCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJLCBmYWxzZSk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgaWYgKGZpbGwpIHtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN0cm9rZSkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZS5nZXRXaWR0aCgpICogd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2UuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRleHRXaXRoTnVtZXJpY0Zvcm1hdChmZWF0dXJlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgdG1wQXJndW1lbnRzID0gdGhpcy5udW1lcmljRm9ybWF0LnNwbGl0KFwiLFwiKTtcclxuICAgICAgICBsZXQgbnVtZXJpY0Zvcm1hdE9wdGlvbnMgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCB0bXBBcmd1bWVudCBvZiB0bXBBcmd1bWVudHMpIHtcclxuICAgICAgICAgICAgbGV0IGtleVZhbHVlUGFpciA9IHRtcEFyZ3VtZW50LnNwbGl0KFwiOlwiKTtcclxuICAgICAgICAgICAgc3dpdGNoIChrZXlWYWx1ZVBhaXJbMF0udHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibG9jYWxlTWF0Y2hlclwiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5sb2NhbGVNYXRjaGVyID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzdHlsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5zdHlsZSA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3VycmVuY3lcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykuY3VycmVuY3kgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImN1cnJlbmN5RGlzcGxheVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5jdXJyZW5jeURpc3BsYXkgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInVzZUdyb3VwaW5nXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLnVzZUdyb3VwaW5nID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtaW5pbXVtSW50ZWdlckRpZ2l0c1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5taW5pbXVtSW50ZWdlckRpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWluaW11bUZyYWN0aW9uRGlnaXRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLm1pbmltdW1GcmFjdGlvbkRpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWF4aW11bUZyYWN0aW9uRGlnaXRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLm1heGltdW1GcmFjdGlvbkRpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWluaW11bVNpZ25pZmljYW50RGlnaXRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLm1pbmltdW1TaWduaWZpY2FudERpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWF4aW11bVNpZ25pZmljYW50RGlnaXRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLm1heGltdW1TaWduaWZpY2FudERpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG51bWVyaWMgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQodG1wQXJndW1lbnRzWzBdLCBudW1lcmljRm9ybWF0T3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiBudW1lcmljLmZvcm1hdChOdW1iZXIoZmVhdHVyZVRleHQpKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRUZXh0V2l0aERhdGVGb3JtYXQoZmVhdHVyZVRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICg8YW55PihuZXcgRGF0ZShmZWF0dXJlVGV4dCkpKS5mb3JtYXQodGhpcy5kYXRlRm9ybWF0KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRUZXh0V2l0aEZvcm1hdChmZWF0dXJlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gKDxhbnk+U3RyaW5nKS5mb3JtYXQodGhpcy50ZXh0Rm9ybWF0LCBmZWF0dXJlVGV4dCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0VGV4dFRyYW5zZm9ybShmZWF0dXJlVGV4dDogc3RyaW5nKSB7XHJcbiAgICAgICAgaWYgKGZlYXR1cmVUZXh0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLnRleHRUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ1cHBlcmNhc2VcIjpcclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlVGV4dCA9IGZlYXR1cmVUZXh0LnRvTG9jYWxlVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibG93ZXJjYXNlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVRleHQgPSBmZWF0dXJlVGV4dC50b0xvY2FsZUxvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmVhdHVyZVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgQkFUQ0hfQ09OU1RSVUNUT1JTX0RFRkFVTFQgPSB7XHJcbiAgICAgICAgUG9pbnQ6IFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIE11bHRpUG9pbnQ6IFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIExpbmVTdHJpbmc6IFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIENpcmNsZTogVGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTXVsdGlMaW5lU3RyaW5nOiBUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBQb2x5Z29uOiBUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBNdWx0aVBvbHlnb246IFRleHRMYWJlbGluZ1N0cmF0ZWd5XHJcbiAgICB9O1xyXG5cclxuICAgIEJBVENIX0NPTlNUUlVDVE9SU19ERVRFQ1QgPSB7XHJcbiAgICAgICAgUG9pbnQ6IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIE11bHRpUG9pbnQ6IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIExpbmVTdHJpbmc6IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIENpcmNsZTogRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTXVsdGlMaW5lU3RyaW5nOiBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBQb2x5Z29uOiBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBNdWx0aVBvbHlnb246IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5XHJcbiAgICB9O1xyXG59XHJcblxyXG4oPGFueT5TdHJpbmcpLmZvcm1hdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBzID0gYXJndW1lbnRzWzBdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgbGV0IHJlZyA9IG5ldyBSZWdFeHAoXCJcXFxce1wiICsgaSArIFwiXFxcXH1cIiwgXCJnbVwiKTtcclxuICAgICAgICBzID0gcy5yZXBsYWNlKHJlZywgYXJndW1lbnRzW2kgKyAxXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcztcclxufTtcclxuXHJcbig8YW55PkRhdGUucHJvdG90eXBlKS5mb3JtYXQgPSBmdW5jdGlvbiAoZm10KSB7XHJcbiAgICBsZXQgbyA9IHtcclxuICAgICAgICBcIk0rXCI6IHRoaXMuZ2V0TW9udGgoKSArIDEsXHJcbiAgICAgICAgXCJkK1wiOiB0aGlzLmdldERhdGUoKSxcclxuICAgICAgICBcImgrXCI6IHRoaXMuZ2V0SG91cnMoKSxcclxuICAgICAgICBcIm0rXCI6IHRoaXMuZ2V0TWludXRlcygpLFxyXG4gICAgICAgIFwicytcIjogdGhpcy5nZXRTZWNvbmRzKCksXHJcbiAgICAgICAgXCJxK1wiOiBNYXRoLmZsb29yKCh0aGlzLmdldE1vbnRoKCkgKyAzKSAvIDMpLFxyXG4gICAgICAgIFwiU1wiOiB0aGlzLmdldE1pbGxpc2Vjb25kcygpXHJcbiAgICB9O1xyXG4gICAgaWYgKC8oeSspLy50ZXN0KGZtdCkpXHJcbiAgICAgICAgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAodGhpcy5nZXRGdWxsWWVhcigpICsgXCJcIikuc3Vic3RyKDQgLSBSZWdFeHAuJDEubGVuZ3RoKSk7XHJcbiAgICBmb3IgKGxldCBrIGluIG8pXHJcbiAgICAgICAgaWYgKG5ldyBSZWdFeHAoXCIoXCIgKyBrICsgXCIpXCIpLnRlc3QoZm10KSlcclxuICAgICAgICAgICAgZm10ID0gZm10LnJlcGxhY2UoUmVnRXhwLiQxLCAoUmVnRXhwLiQxLmxlbmd0aCA9PT0gMSkgPyAob1trXSkgOiAoKFwiMDBcIiArIG9ba10pLnN1YnN0cigoXCJcIiArIG9ba10pLmxlbmd0aCkpKTtcclxuICAgIHJldHVybiBmbXQ7XHJcbn07IiwiaW1wb3J0IHsgR2VvVGV4dFN0eWxlIH0gZnJvbSBcIi4vZ2VvVGV4dFN0eWxlXCI7XHJcbmltcG9ydCB7IGNvb3JkaW5hdGUgfSBmcm9tIFwib3BlbmxheWVyc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRleHRMYWJlbGluZ1N0cmF0ZWd5IHtcclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcblxyXG4gICAgcHVibGljIG1hcmtMb2NhdGlvbihmbGF0Q29vcmRpbmF0ZXM6IGFueSwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHJlc29sdXRpb246IGFueSwgZ2VvbWV0cnlUeXBlOiBhbnksIHRleHRTdHlsZTogR2VvVGV4dFN0eWxlLCBzdHJhdGVneVRyZWU6IGFueSwgZnJhbWVTdGF0ZTogb2x4LkZyYW1lU3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tYXJrTG9jYXRpb25Db3JlKGZsYXRDb29yZGluYXRlcywgd2lkdGgsIGhlaWdodCwgcmVzb2x1dGlvbiwgZ2VvbWV0cnlUeXBlLCB0ZXh0U3R5bGUsIHN0cmF0ZWd5VHJlZSwgZnJhbWVTdGF0ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIG1hcmtMb2NhdGlvbkNvcmUoZmxhdENvb3JkaW5hdGVzOiBhbnksIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCByZXNvbHV0aW9uOiBhbnksIGdlb21ldHJ5VHlwZTogYW55LCB0ZXh0U3R5bGU6IEdlb1RleHRTdHlsZSwgc3RyYXRlZ3lUcmVlOiBhbnksIGZyYW1lU3RhdGU6IG9seC5GcmFtZVN0YXRlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNPdmVybGFwcGluZyhmbGF0Q29vcmRpbmF0ZXMsIHdpZHRoLCBoZWlnaHQsIHRleHRTdHlsZS5tYXJnaW4sIHRleHRTdHlsZS5taW5EaXN0YW5jZSwgdGV4dFN0eWxlLm1pblBhZGRpbmcsIHRleHRTdHlsZS5zcGFjaW5nLCBzdHJhdGVneVRyZWUsIGZyYW1lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZsYXRDb29yZGluYXRlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzT3ZlcmxhcHBpbmcoZmxhdENvb3JkaW5hdGVzOiBhbnksIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBtYXJnaW46IG51bWJlciwgbWluRGlzdGFuY2U6IG51bWJlciwgbWluUGFkZGluZzogbnVtYmVyLCBzcGFjaW5nOiBudW1iZXIsIHN0cmF0ZWd5VHJlZTogYW55LCBmcmFtZVN0YXRlOiBvbHguRnJhbWVTdGF0ZSkge1xyXG4gICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdHJ1ZTsgfVxyXG5cclxuICAgICAgICBsZXQgZGlzdGFuY2UgPSAobWFyZ2luID8gbWFyZ2luIDogMCkgKyAobWluRGlzdGFuY2UgPyBtaW5EaXN0YW5jZSA6IDApICsgKG1pblBhZGRpbmcgPyBtaW5QYWRkaW5nIDogMCkgKyAoc3BhY2luZyA/IHNwYWNpbmcgOiAwKTtcclxuXHJcbiAgICAgICAgbGV0IGNvb3JkaW5hdGUgPSBbZmxhdENvb3JkaW5hdGVzWzBdLCBmbGF0Q29vcmRpbmF0ZXNbMV1dO1xyXG4gICAgICAgIGxldCBzY3JlZW5Db29yZGluYXRlcyA9IHRoaXMuY29udmVydFBpeGVsRnJvbUNvb3JkaW5hdGUoY29vcmRpbmF0ZSwgZnJhbWVTdGF0ZSk7XHJcbiAgICAgICAgbGV0IG1pblggPSBzY3JlZW5Db29yZGluYXRlc1swXSAtIHdpZHRoIC8gMiAtIGRpc3RhbmNlICogMC41O1xyXG4gICAgICAgIGxldCBtaW5ZID0gc2NyZWVuQ29vcmRpbmF0ZXNbMV0gLSBoZWlnaHQgLyAyIC0gZGlzdGFuY2UgKiAwLjU7XHJcbiAgICAgICAgbGV0IG1heFggPSBtaW5YICsgd2lkdGggKyBkaXN0YW5jZTtcclxuICAgICAgICBsZXQgbWF4WSA9IG1pblkgKyBoZWlnaHQgKyBkaXN0YW5jZTtcclxuICAgICAgICBsZXQgYm94ID0ge1xyXG4gICAgICAgICAgICBtaW5YOiBtaW5YLFxyXG4gICAgICAgICAgICBtaW5ZOiBtaW5ZLFxyXG4gICAgICAgICAgICBtYXhYOiBtYXhYLFxyXG4gICAgICAgICAgICBtYXhZOiBtYXhZXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXN0cmF0ZWd5VHJlZS5jb2xsaWRlcyhib3gpKSB7XHJcbiAgICAgICAgICAgIHN0cmF0ZWd5VHJlZS5pbnNlcnQoYm94KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnZlcnRQaXhlbEZyb21Db29yZGluYXRlKGNvb3JkaW5hdGU6IGFueSwgZnJhbWVTdGF0ZTogb2x4LkZyYW1lU3RhdGUpIHtcclxuICAgICAgICBpZiAoIWZyYW1lU3RhdGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKDxhbnk+b2wpLnRyYW5zZm9ybS5hcHBseSgoPGFueT5mcmFtZVN0YXRlKS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgY29vcmRpbmF0ZS5zbGljZSgwLCAyKSk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgY2xhc3MgVHJlZU5vZGU8VD4ge1xyXG4gICAgZGF0YTogVDtcclxuICAgIGNoaWxkcmVuOiBBcnJheTxUcmVlTm9kZTxUPj47XHJcblxyXG4gICAgY29uc3RydWN0b3IoZGF0YTogVCkge1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgU3R5bGVKc29uQ2FjaGVJdGVtIH0gZnJvbSBcIi4vc3R5bGVKc29uQ2FjaGVJdGVtXCI7XHJcbmltcG9ydCB7IFRyZWUgfSBmcm9tIFwiLi90cmVlXCI7XHJcbmltcG9ydCB7IFRyZWVOb2RlIH0gZnJvbSBcIi4vdHJlZU5vZGVcIjtcclxuaW1wb3J0IHsgR2VvVGV4dFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlL2dlb1RleHRTdHlsZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0eWxlSnNvbkNhY2hlIHtcclxuICAgIHByaXZhdGUgZ2VvU3R5bGVHcm91cEJ5Wm9vbTogYW55W107XHJcblxyXG4gICAgc3R5bGVKc29uOiBhbnk7XHJcbiAgICBnZW9TdHlsZXM6IGFueTtcclxuICAgIGdlb1RleHRTdHlsZUluZm86YW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZ2VvU3R5bGVHcm91cEJ5Wm9vbSA9IFtdO1xyXG4gICAgICAgIHRoaXMuc3R5bGVKc29uID0ge307XHJcbiAgICAgICAgdGhpcy5nZW9TdHlsZXMgPSB7fTtcclxuICAgICAgICB0aGlzLmdlb1RleHRTdHlsZUluZm8gPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBhZGQoem9vbTogbnVtYmVyLCBkYXRhTGF5ZXJOYW1lOiBzdHJpbmcsIHRyZWU6IFRyZWU8U3R5bGVKc29uQ2FjaGVJdGVtPikge1xyXG4gICAgICAgIGlmICh0aGlzLmdlb1N0eWxlR3JvdXBCeVpvb21bem9vbV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmdlb1N0eWxlR3JvdXBCeVpvb21bem9vbV0gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZ2VvU3R5bGVHcm91cEJ5Wm9vbVt6b29tXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VvU3R5bGVHcm91cEJ5Wm9vbVt6b29tXSA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5nZW9TdHlsZUdyb3VwQnlab29tW3pvb21dW2RhdGFMYXllck5hbWVdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5nZW9TdHlsZUdyb3VwQnlab29tW3pvb21dW2RhdGFMYXllck5hbWVdID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ2VvU3R5bGVHcm91cEJ5Wm9vbVt6b29tXVtkYXRhTGF5ZXJOYW1lXS5wdXNoKHRyZWUpO1xyXG5cclxuICAgICAgICB0aGlzLnJlYWRHZW9TdHlsZUZyb21UcmVlKHRyZWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRHZW9TdHlsZUZyb21UcmVlKHRyZWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkR2VvU3R5bGVGcm9tVHJlZU5vZGUodHJlZS5yb290KTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkR2VvU3R5bGVGcm9tVHJlZU5vZGUobm9kZSkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcclxuICAgICAgICBpZiAobm9kZS5kYXRhLmdlb1N0eWxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VvU3R5bGVzW25vZGUuZGF0YS5nZW9TdHlsZS5pZF0gPSBub2RlLmRhdGEuZ2VvU3R5bGU7XHJcbiAgICAgICAgICAgIC8vIGdldCB0aGUgd2lkdGhzIG9mIEdlb1RleHRTdHlsZVxyXG4gICAgICAgICAgICBpZihub2RlLmRhdGEuZ2VvU3R5bGUgaW5zdGFuY2VvZiBHZW9UZXh0U3R5bGUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2VvVGV4dFN0eWxlSW5mb1tub2RlLmRhdGEuZ2VvU3R5bGUuaWRdPSBub2RlLmRhdGEuZ2VvU3R5bGUuY2hhcldpZHRocztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9kZS5kYXRhLmNoaWxkcmVuR2VvU3R5bGVzICYmIG5vZGUuZGF0YS5jaGlsZHJlbkdlb1N0eWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5kYXRhLmNoaWxkcmVuR2VvU3R5bGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlb1N0eWxlc1tub2RlLmRhdGEuY2hpbGRyZW5HZW9TdHlsZXNbaV0uaWRdID0gbm9kZS5kYXRhLmNoaWxkcmVuR2VvU3R5bGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYobm9kZS5kYXRhLmNoaWxkcmVuR2VvU3R5bGVzW2ldIGluc3RhbmNlb2YgR2VvVGV4dFN0eWxlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VvVGV4dFN0eWxlSW5mb1tub2RlLmRhdGEuY2hpbGRyZW5HZW9TdHlsZXNbaV0uaWRdPSBub2RlLmRhdGEuY2hpbGRyZW5HZW9TdHlsZXNbaV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4gJiYgbm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWFkR2VvU3R5bGVGcm9tVHJlZU5vZGUobm9kZS5jaGlsZHJlbltpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmdlb1N0eWxlR3JvdXBCeVpvb20ubGVuZ3RoID0gMDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBHZW9GaWx0ZXIgfSBmcm9tIFwiLi4vZmlsdGVyL2dlb0ZpbHRlclwiO1xyXG5pbXBvcnQgeyBHZW9GaWx0ZXJJdGVtIH0gZnJvbSBcIi4uL2ZpbHRlci9nZW9GaWx0ZXJJdGVtXCI7XHJcbmltcG9ydCB7IEdlb1pvb21GaWx0ZXIgfSBmcm9tIFwiLi4vZmlsdGVyL2dlb1pvb21GaWx0ZXJcIjtcclxuaW1wb3J0IHsgR2VvU3RyaW5nQXR0cmlidXRlRmlsdGVyIH0gZnJvbSBcIi4uL2ZpbHRlci9nZW9TdHJpbmdBdHRyaWJ1dGVGaWx0ZXJcIjtcclxuaW1wb3J0IHsgR2VvUmVnZXhGaWx0ZXIgfSBmcm9tIFwiLi4vZmlsdGVyL2dlb1JlZ2V4RmlsdGVyXCI7XHJcbmltcG9ydCB7IEdlb051bWJlckF0dHJpYnV0ZUZpbHRlciB9IGZyb20gXCIuLi9maWx0ZXIvZ2VvTnVtYmVyQXR0cmlidXRlRmlsdGVyXCI7XHJcbmltcG9ydCB7IEdlb1N0eWxlIH0gZnJvbSBcIi4uL3N0eWxlL2dlb1N0eWxlXCI7XHJcbmltcG9ydCB7IEdlb0FyZWFTdHlsZSB9IGZyb20gXCIuLi9zdHlsZS9nZW9BcmVhU3R5bGVcIjtcclxuaW1wb3J0IHsgR2VvTGluZVN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlL2dlb0xpbmVTdHlsZVwiO1xyXG5pbXBvcnQgeyBHZW9Qb2ludFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlL2dlb1BvaW50U3R5bGVcIjtcclxuaW1wb3J0IHsgR2VvVGV4dFN0eWxlIH0gZnJvbSBcIi4uL3N0eWxlL2dlb1RleHRTdHlsZVwiO1xyXG5pbXBvcnQgeyBHZW9TaGllbGRTdHlsZSB9IGZyb20gXCIuLi9zdHlsZS9nZW9TaGllbGRTdHlsZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0eWxlSnNvbkNhY2hlSXRlbSB7XHJcbiAgICBwdWJsaWMgZGF0YUxheWVyTmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIG1pblpvb206IG51bWJlcjtcclxuICAgIHB1YmxpYyBtYXhab29tOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgekluZGV4OiBhbnk7IC8vIHN0cmluZ3x8bnVtYmVyXHJcbiAgICBwdWJsaWMgc3R5bGVGaXJzdDogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBmaWx0ZXJHcm91cDogYW55OyAvLyBBcnJheSBvZiBmaWx0ZXJzLFxyXG5cclxuICAgIHB1YmxpYyBnZW9TdHlsZTogR2VvU3R5bGU7XHJcbiAgICBwdWJsaWMgY2hpbGRyZW5HZW9TdHlsZXM6IEdlb1N0eWxlW107XHJcbiAgICBwdWJsaWMgc3ViU3R5bGVDYWNoZUl0ZW1zOiBTdHlsZUpzb25DYWNoZUl0ZW1bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzdHlsZUpzb246IGFueSwgbWluWm9vbSwgbWF4Wm9vbSwgZGF0YUxheWVyQ29sdW1uTmFtZSkge1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW5HZW9TdHlsZXMgPSBbXTtcclxuICAgICAgICB0aGlzLnN1YlN0eWxlQ2FjaGVJdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubWluWm9vbSA9IG1pblpvb207XHJcbiAgICAgICAgdGhpcy5tYXhab29tID0gbWF4Wm9vbTtcclxuICAgICAgICB0aGlzLnpJbmRleCA9IHN0eWxlSnNvbltcInotaW5kZXhcIl07XHJcbiAgICAgICAgdGhpcy5zdHlsZUZpcnN0ID0gc3R5bGVKc29uW1wic3R5bGUtZmlyc3RcIl07XHJcbiAgICAgICAgdGhpcy5maWx0ZXJHcm91cCA9IHRoaXMuY3JlYXRlRmlsdGVycyhzdHlsZUpzb24uZmlsdGVyLCBkYXRhTGF5ZXJDb2x1bW5OYW1lKSB8fCBbXTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVN1Ykl0ZW1zKHN0eWxlSnNvbiwgZGF0YUxheWVyQ29sdW1uTmFtZSk7XHJcbiAgICAgICAgdGhpcy5nZW9TdHlsZSA9IHRoaXMuY3JlYXRlR2VvU3R5bGUoc3R5bGVKc29uKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZUNoaWxkcmVuR2VvU3R5bGUoc3R5bGVKc29uKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVGaWx0ZXJzKGZpbHRlclN0cmluZywgZGF0YUxheWVyQ29sdW1uTmFtZSkge1xyXG4gICAgICAgIGxldCBmaWx0ZXJHcm91cCA9IFtdO1xyXG4gICAgICAgIGxldCB0ZW1wTWluWm9vbSA9IHRoaXMubWF4Wm9vbTtcclxuICAgICAgICBsZXQgdGVtcE1heFpvb20gPSB0aGlzLm1pblpvb207XHJcbiAgICAgICAgaWYgKGZpbHRlclN0cmluZykge1xyXG4gICAgICAgICAgICBsZXQgZmlsdGVyU3RyaW5ncyA9IGZpbHRlclN0cmluZy5zcGxpdChcInxcIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVyU3RyaW5ncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbHRlclN0ciA9IGZpbHRlclN0cmluZ3NbaV07XHJcbiAgICAgICAgICAgICAgICBsZXQgZXhwcmVzc2lvbiA9IFwiKFxcXFx3Kz89ficuKz8nKXwoXFxcXHcrP1s8PiE9XSonW147XSs/Jyl8KFxcXFx3Kz9bPD4hPV0qW147XSspXCI7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24sIFwiZ1wiKTtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHRzID0gZmlsdGVyU3RyLm1hdGNoKHJlZ2V4KTtcclxuICAgICAgICAgICAgICAgIGxldCByYW5nZUZpbHRlcnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGdlb1pvb21GaWx0ZXI6IEdlb1pvb21GaWx0ZXI7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGF0YUxheWVyTmFtZUZpbHRlcjogR2VvU3RyaW5nQXR0cmlidXRlRmlsdGVyO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJJdGVtID0gR2VvRmlsdGVySXRlbS5jcmVhdGVGaWx0ZXJJdGVtKHJlc3VsdHNbaV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlckl0ZW0udmFsdWUuaW5kZXhPZihcIn4nXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2gobmV3IEdlb1JlZ2V4RmlsdGVyKFtmaWx0ZXJJdGVtXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbHRlckl0ZW0ua2V5ID09PSBcInpvb21cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdlb1pvb21GaWx0ZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb1pvb21GaWx0ZXIgPSBuZXcgR2VvWm9vbUZpbHRlcihbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9ab29tRmlsdGVyLmFkZEZpbHRlckl0ZW0oZmlsdGVySXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsdGVySXRlbS52YWx1ZS5pbmNsdWRlcyhcIidcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVySXRlbS5rZXkgPT09IGRhdGFMYXllckNvbHVtbk5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YUxheWVyTmFtZUZpbHRlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFMYXllck5hbWVGaWx0ZXIgPSBuZXcgR2VvU3RyaW5nQXR0cmlidXRlRmlsdGVyKFtmaWx0ZXJJdGVtXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKG5ldyBHZW9TdHJpbmdBdHRyaWJ1dGVGaWx0ZXIoW2ZpbHRlckl0ZW1dKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZUZpbHRlcnNbZmlsdGVySXRlbS5rZXldID0gcmFuZ2VGaWx0ZXJzW2ZpbHRlckl0ZW0ua2V5XSB8fCBuZXcgR2VvTnVtYmVyQXR0cmlidXRlRmlsdGVyKFtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlRmlsdGVyc1tmaWx0ZXJJdGVtLmtleV0uYWRkRmlsdGVySXRlbShmaWx0ZXJJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgdGhlIG1pblpvb20gYW5kIG1heFpvb20gYnkgWm9vbUZpbHRlclxyXG4gICAgICAgICAgICAgICAgaWYgKGdlb1pvb21GaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2goZ2VvWm9vbUZpbHRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2VvWm9vbUZpbHRlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdlb1pvb21GaWx0ZXIucmFuZ2VzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1pblogPSArZ2VvWm9vbUZpbHRlci5yYW5nZXNbMF1bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXhaID0gK2dlb1pvb21GaWx0ZXIucmFuZ2VzWzBdWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWluWiA8PSB0ZW1wTWluWm9vbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcE1pblpvb20gPSBtaW5aO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXhaID49IHRlbXBNYXhab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wTWF4Wm9vbSA9IG1heFo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB6ID0gK2dlb1pvb21GaWx0ZXIuYWxsb3dlZFZhbHVlc1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHogPD0gdGVtcE1pblpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBNaW5ab29tID0gejtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeiA+PSB0ZW1wTWF4Wm9vbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcE1heFpvb20gPSB6O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBkYXRhTGF5ZXJOYW1lXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YUxheWVyTmFtZUZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFMYXllck5hbWVGaWx0ZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YUxheWVyTmFtZSA9IGRhdGFMYXllck5hbWVGaWx0ZXIuZXhwZWN0ZWRWYWx1ZXNbMF07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIGluIHJhbmdlRmlsdGVycykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcnMucHVzaChyYW5nZUZpbHRlcnNbbmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmlsdGVyR3JvdXAucHVzaChmaWx0ZXJzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGVtcE1heFpvb20gIT09IHRoaXMubWluWm9vbSB8fCB0ZW1wTWluWm9vbSAhPT0gdGhpcy5tYXhab29tKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWF4Wm9vbSA9IHRlbXBNYXhab29tO1xyXG4gICAgICAgICAgICB0aGlzLm1pblpvb20gPSB0ZW1wTWluWm9vbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZpbHRlckdyb3VwO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVN1Ykl0ZW1zKHN0eWxlSnNvbiwgZGF0YUxheWVyQ29sdW1uTmFtZSkge1xyXG4gICAgICAgIGlmIChzdHlsZUpzb24uc3R5bGUpIHtcclxuICAgICAgICAgICAgLy8gYXBwbHkgdGhlIHByb3BlcnR5IHRvIHN1YiBzdHlsZS5cclxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHN0eWxlSnNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gXCJzdHlsZVwiICYmIGtleSAhPT0gXCJmaWx0ZXJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVKc29uLnN0eWxlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBwcm9wZXJ0eSB0byBzdWIgc3R5bGUgaWYgdGhlIHN1YiBzdHlsZSBkb2VzIG5vdCBpbmNsdWRlZC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlSnNvbi5zdHlsZVtpXVtrZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiaWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlSnNvbi5zdHlsZVtpXVtrZXldID0gc3R5bGVKc29uW2tleV0gKyBcIiNcIiArIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlSnNvbi5zdHlsZVtpXVtrZXldID0gc3R5bGVKc29uW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHN1Ykl0ZW1NaW5ab29tO1xyXG4gICAgICAgICAgICBsZXQgc3ViSXRlbU1heFpvb207XHJcbiAgICAgICAgICAgIGZvciAobGV0IHN1YlN0eWxlIG9mIHN0eWxlSnNvbi5zdHlsZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0eWxlSnNvbkNhY2hlU3ViSXRlbSA9IG5ldyBTdHlsZUpzb25DYWNoZUl0ZW0oc3ViU3R5bGUsIHRoaXMubWluWm9vbSwgdGhpcy5tYXhab29tLCBkYXRhTGF5ZXJDb2x1bW5OYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViSXRlbU1heFpvb20gPT09IHVuZGVmaW5lZCB8fCBzdHlsZUpzb25DYWNoZVN1Ykl0ZW0ubWF4Wm9vbSA+IHN1Ykl0ZW1NYXhab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViSXRlbU1heFpvb20gPSBzdHlsZUpzb25DYWNoZVN1Ykl0ZW0ubWF4Wm9vbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChzdWJJdGVtTWluWm9vbSA9PT0gdW5kZWZpbmVkIHx8IHN0eWxlSnNvbkNhY2hlU3ViSXRlbS5taW5ab29tIDwgc3ViSXRlbU1pblpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJJdGVtTWluWm9vbSA9IHN0eWxlSnNvbkNhY2hlU3ViSXRlbS5taW5ab29tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc3ViU3R5bGVDYWNoZUl0ZW1zLnB1c2goc3R5bGVKc29uQ2FjaGVTdWJJdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3ViSXRlbU1pblpvb20gJiYgc3ViSXRlbU1pblpvb20gPiB0aGlzLm1pblpvb20pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWluWm9vbSA9IHN1Ykl0ZW1NaW5ab29tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdWJJdGVtTWF4Wm9vbSAmJiBzdWJJdGVtTWF4Wm9vbSA8IHRoaXMubWF4Wm9vbSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhab29tID0gc3ViSXRlbU1heFpvb207XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlR2VvU3R5bGUoc3R5bGVKc29uKSB7XHJcbiAgICAgICAgbGV0IGdlb1N0eWxlO1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBzdHlsZUpzb24pIHtcclxuICAgICAgICAgICAgaWYgKGtleSAhPT0gXCJzdHlsZVwiICYmIGtleSAhPT0gXCJmaWx0ZXJcIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGtleXMgPSBrZXkuc3BsaXQoXCItXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5c1swXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicG9seWdvblwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvU3R5bGUgPSBuZXcgR2VvQXJlYVN0eWxlKHN0eWxlSnNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxpbmVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb1N0eWxlID0gbmV3IEdlb0xpbmVTdHlsZShzdHlsZUpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9TdHlsZSA9IG5ldyBHZW9UZXh0U3R5bGUoc3R5bGVKc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwicG9pbnRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb1N0eWxlID0gbmV3IEdlb1BvaW50U3R5bGUoc3R5bGVKc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2hpZWxkXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9TdHlsZSA9IG5ldyBHZW9TaGllbGRTdHlsZShzdHlsZUpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdlb1N0eWxlO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUNoaWxkcmVuR2VvU3R5bGUoc3R5bGVKc29uKSB7XHJcbiAgICAgICAgaWYgKHN0eWxlSnNvbltcImNoaWxkcmVuXCJdKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVKc29uW1wiY2hpbGRyZW5cIl0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZHJlbkdlb1N0eWxlSnNvbiA9IHN0eWxlSnNvbltcImNoaWxkcmVuXCJdW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuR2VvU3R5bGVKc29uW1wiaWRcIl0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuR2VvU3R5bGVKc29uW1wiaWRcIl0gPSBzdHlsZUpzb25bXCJpZFwiXSArIFwiI2NcIiArIGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuR2VvU3R5bGVzLnB1c2godGhpcy5jcmVhdGVHZW9TdHlsZShjaGlsZHJlbkdlb1N0eWxlSnNvbikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IFRyZWVOb2RlIH0gZnJvbSBcIi4vdHJlZU5vZGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUcmVlPFQ+IHtcclxuICAgIG5vZGU6IFRyZWVOb2RlPFQ+O1xyXG4gICAgcm9vdDogVHJlZU5vZGU8VD47XHJcbiAgICB0cmVlSW5kZXg6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihub2RlOiBUcmVlTm9kZTxUPiwgdHJlZUluZGV4KSB7XHJcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcclxuICAgICAgICB0aGlzLnJvb3QgPSBub2RlO1xyXG4gICAgICAgIHRoaXMudHJlZUluZGV4ID0gdHJlZUluZGV4O1xyXG4gICAgfVxyXG5cclxuICAgIHRyYXZlcnNlTm9kZShjYWxsYmFjaywgc2VsZWN0KSB7XHJcbiAgICAgICAgKGZ1bmN0aW9uIHJlY3Vyc2UoY3VycmVudE5vZGUpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjayhjdXJyZW50Tm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50Tm9kZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IGN1cnJlbnROb2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZWN1cnNlKGN1cnJlbnROb2RlLmNoaWxkcmVuW2ldKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjdXJyZW50IG5vZGUgaXMgbWF0Y2hlZCwgYW5kIHdpdGhvdXQgY2hpbGRyZW5cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3QoY3VycmVudE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRydWU6IHRoZSBjdXJyZW50Tm9kZSBpcyBtYXRjaGVkLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gZmFsc2U6IHRoZSBjdXJyZW50Tm9kZSBpcyBub3QgbWF0Y2hlZC5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pKHRoaXMucm9vdCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZW51bSBWZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2Rle1xyXG4gICAgRGVmYXVsdD0xLFxyXG4gICAgU2luZ2xlVGhyZWFkLFxyXG4gICAgU2luZ2xlQmFja2dyb3VuZFdvcmtlcixcclxuICAgIE11bHRpQmFja2dyb3VuZFdvcmtlclxyXG59IiwiZXhwb3J0IGZ1bmN0aW9uIHdlYmdsQ2FjdWxhdGUoKXtcclxuXHJcbiAgICBvbm1lc3NhZ2UgPSBmdW5jdGlvbihlKXtcclxuICAgICAgbGV0IGRhdGEgPSBlLmRhdGE7XHJcbiAgICAgIGxldCB7XHJcbiAgICAgICAgICByZXBsYXlzXHJcbiAgICAgIH0gPSBkYXRhO1xyXG4gICAgICBsZXQgd2ViZ2xQb2x5Z29uSW5kZXg7XHJcbiAgICAgIGxldCB3ZWJnbExpbmVJbmRleDtcclxuICAgICAgXHJcbiAgICAgIGZvcihsZXQga2V5IGluIHJlcGxheXMpe1xyXG4gICAgICAgICAgbGV0IHJlcGxheSA9IHJlcGxheXNba2V5XTtcclxuICAgICAgICAgIGlmKHJlcGxheS53ZWJnbERyYXdUeXBlID09PSAnbGluZVN0cmluZ1JlcGxheScpe1xyXG4gICAgICAgICAgICB3ZWJnbExpbmVJbmRleCA9IGdldFdlYmdsTGluZUluZGV4KHJlcGxheSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSByZXBsYXkud2ViZ2xFbmRzO1xyXG4gICAgICAgICAgICBkZWxldGUgcmVwbGF5LndlYmdsU3R5bGU7XHJcbiAgICAgICAgICAgIGRlbGV0ZSByZXBsYXkud2ViZ2xDb29yZGluYXRlcztcclxuICAgICAgICAgIH1lbHNlIGlmKHJlcGxheS53ZWJnbERyYXdUeXBlID09PSAncG9seWdvblJlcGxheScpe1xyXG4gICAgICAgICAgICB3ZWJnbFBvbHlnb25JbmRleCA9IGdldFdlYmdsSW5kZXhPYmoocmVwbGF5KTtcclxuICAgICAgICAgICAgZGVsZXRlIHJlcGxheVsnd2ViZ2xFbmRzJ107XHJcbiAgICAgICAgICAgIGRlbGV0ZSByZXBsYXlbJ3dlYmdsRmxhdENvb3JkaW5hdGVzJ107XHJcbiAgICAgICAgICAgIGRlbGV0ZSByZXBsYXlbJ2ZlYXR1cmVJbmRpY2VzJ107XHJcbiAgICAgICAgICAgIGRlbGV0ZSByZXBsYXlbJ3N0eWxlSW5kaWNlcyddO1xyXG4gICAgICAgICAgICBkZWxldGUgcmVwbGF5Wyd3ZWJnbERyYXdUeXBlJ107XHJcbiAgICAgICAgICB9XHJcbiAgICAgIH0gICAgICBcclxuXHJcbiAgICAgIHBvc3RNZXNzYWdlKHtcclxuICAgICAgICB3ZWJnbFBvbHlnb25JbmRleCxcclxuICAgICAgICB3ZWJnbExpbmVJbmRleCxcclxuICAgICAgICB1aWQ6IGRhdGEudWlkLFxyXG4gICAgICAgIG1lc3NhZ2VEYXRhOiBkYXRhLm1lc3NhZ2VEYXRhLFxyXG4gICAgICAgIG1ldGhvZEluZm86IGRhdGEubWV0aG9kSW5mb1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gcG9seWdvblxyXG4gICAgZnVuY3Rpb24gZ2V0V2ViZ2xJbmRleE9iaihkYXRhKSB7XHJcbiAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgd2ViZ2xGbGF0Q29vcmRpbmF0ZXMsXHJcbiAgICAgICAgICAgIHdlYmdsRW5kcyxcclxuICAgICAgICAgICAgZmVhdHVyZUluZGljZXMsXHJcbiAgICAgICAgICAgIHN0eWxlSW5kaWNlcyAgICBcclxuICAgICAgICB9ID0gZGF0YTtcclxuICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgICAgICBsZXQgc3R5bGVPZmZzZXQgPSAwO1xyXG4gICAgICAgIC8vIGRlYnVnZ2VyICAgICAgXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHByZXYgPSAwLCBpbmRleCA9IFtdLCBsZW5ndGggPSB3ZWJnbEVuZHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGVuZCA9IHdlYmdsRW5kc1tpXTtcclxuICAgICAgICAgICAgbGV0IHRlbXBJbmRleCA9IGVhcmN1dCh3ZWJnbEZsYXRDb29yZGluYXRlcy5zbGljZShwcmV2LCBlbmQpKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGkgPT09IGZlYXR1cmVJbmRpY2VzW29mZnNldF0pe1xyXG4gICAgICAgICAgICAgICAgZGF0YS5zdGFydEluZGljZXMucHVzaChpbmRleC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKGkgPT09IHN0eWxlSW5kaWNlc1tzdHlsZU9mZnNldF0pe1xyXG4gICAgICAgICAgICAgICAgZGF0YS5zdHlsZUluZGljZXNfLnB1c2goaW5kZXgubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHN0eWxlT2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0ZW1wSW5kZXgubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGVtcEluZGV4ID0gdGVtcEluZGV4Lm1hcCh2YWwgPT4gdmFsICsgcHJldiAvIDIpO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgucHVzaCguLi50ZW1wSW5kZXgpOyAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJldiA9IGVuZDsgICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRhdGEuaW5kaWNlcyA9IGluZGV4O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB3ZWJnbEZsYXRDb29yZGluYXRlcy5sZW5ndGg7IGkgKz0gMil7XHJcbiAgICAgICAgICAgIHdlYmdsRmxhdENvb3JkaW5hdGVzW2ldIC09IGRhdGEub3JpZ2luWzBdO1xyXG4gICAgICAgICAgICB3ZWJnbEZsYXRDb29yZGluYXRlc1tpICsgMV0gLT0gZGF0YS5vcmlnaW5bMV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhLnZlcnRpY2VzID0gd2ViZ2xGbGF0Q29vcmRpbmF0ZXM7IFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBjb2xvclN0clRvV2ViZ2xDb2xvcihzdHIpIHtcclxuICAgICAgICBsZXQgY29sb3IgPSBbXTtcclxuICAgICAgICBsZXQgc3RyQ29sb3IgPSBzdHIubWF0Y2goL1tcXGRcXC5dKy9tZyk7XHJcbiAgICAgICAgaWYoK3N0ckNvbG9yWzNdICE9PSAxKXtcclxuICAgICAgICAgICAgY29uc3QgQTEgPSArc3RyQ29sb3JbM107XHJcbiAgICAgICAgICAgIGNvbnN0IFIzID0gK3N0ckNvbG9yWzBdICogQTEgKyAyNDAgKiAoMSAtIEExKTsgLy8yNDAgIDIzOCAgMjMyXHJcbiAgICAgICAgICAgIGNvbnN0IEczID0gK3N0ckNvbG9yWzFdICogQTEgKyAyMzggKiAoMSAtIEExKTsgLy8yNDAgIDIzOCAgMjMyXHJcbiAgICAgICAgICAgIGNvbnN0IEIzID0gK3N0ckNvbG9yWzJdICogQTEgKyAyMzIgKiAoMSAtIEExKTsgLy8yNDAgIDIzOCAgMjMyXHJcbiAgICAgICAgICAgIGNvbnN0IEEzID0gMTtcclxuICAgICAgICAgICAgc3RyQ29sb3JbMF0gPSBSMy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBzdHJDb2xvclsxXSA9IEczLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHN0ckNvbG9yWzJdID0gQjMudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgc3RyQ29sb3JbM10gPSBBMy50b1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGNvbG9yID0gc3RyQ29sb3IubWFwKCh2YWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMykgcmV0dXJuICt2YWwgLyAyNTU7XHJcbiAgICBcclxuICAgICAgICAgICAgcmV0dXJuICt2YWw7XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICByZXR1cm4gY29sb3I7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGxpbmVTdHJpbmdcclxuICAgIGZ1bmN0aW9uIGdldFBhdGhPZmZzZXQocG9pbnRzLCBvZmZzZXQpIHtcclxuICAgICAgICB2YXIgbGVuID0gcG9pbnRzLmxlbmd0aCAvIDI7XHJcbiAgICAgICAgdmFyIGNvdW50ID0gbGVuICogMyAqIDI7XHJcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gW107XHJcbiAgICAgICAgdmFyIHBvc2l0aW9uUHJldiA9IFtdO1xyXG4gICAgICAgIHZhciBwb3NpdGlvbk5leHQgPSBbXTtcclxuICAgICAgICBpZihsZW49PT0yICYmIHBvaW50c1swXT09PXBvaW50c1syXSAmJiBwb2ludHNbMV09PT1wb2ludHNbM10pe1xyXG4gICAgICAgICAgcmV0dXJuIFtbXSxbXV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBpbmRpY2VzQ291bnQgPSAzICogMiAqIChsZW4gLSAxKTtcclxuICAgICAgICB2YXIgdHJpYW5nbGVPZmZzZXQgPSAwO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgIHZhciBpMyA9IGkgKiAzICogMjtcclxuICAgICAgICAgIHZhciBpNCA9IGkgKiA0ICogMjtcclxuICAgICAgICAgIHZhciBwb2ludFggPSBwb2ludHNbMiAqIGldO1xyXG4gICAgICAgICAgdmFyIHBvaW50WSA9IHBvaW50c1syICogaSArIDFdXHJcbiAgICAgICAgICBpZihwb2ludFg9PT1wb2ludHNbMippKzJdICYmIHBvaW50WT09PXBvaW50c1syKmkrM10pe1xyXG4gICAgICAgICAgICBpbmRpY2VzQ291bnQtPTY7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcG9zaXRpb25baTMgKyAwXSA9IHBvaW50WDtcclxuICAgICAgICAgIHBvc2l0aW9uW2kzICsgMV0gPSBwb2ludFk7XHJcbiAgICAgICAgICBwb3NpdGlvbltpMyArIDJdID0gMDtcclxuICAgICAgICAgIHBvc2l0aW9uW2kzICsgM10gPSBwb2ludFg7XHJcbiAgICAgICAgICBwb3NpdGlvbltpMyArIDRdID0gcG9pbnRZO1xyXG4gICAgICAgICAgcG9zaXRpb25baTMgKyA1XSA9IDA7XHJcbiAgICAgICAgICBpZiAoaSA8IGNvdW50IC0gMSkge1xyXG4gICAgICAgICAgICB2YXIgaTNwID0gaTMgKyA2O1xyXG4gICAgICAgICAgICBwb3NpdGlvbk5leHRbaTNwICsgMF0gPSBwb2ludFg7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uTmV4dFtpM3AgKyAxXSA9IHBvaW50WTtcclxuICAgICAgICAgICAgcG9zaXRpb25OZXh0W2kzcCArIDJdID0gMDtcclxuICAgICAgXHJcbiAgICAgICAgICAgIHBvc2l0aW9uTmV4dFtpM3AgKyAzXSA9IHBvaW50WDtcclxuICAgICAgICAgICAgcG9zaXRpb25OZXh0W2kzcCArIDRdID0gcG9pbnRZO1xyXG4gICAgICAgICAgICBwb3NpdGlvbk5leHRbaTNwICsgNV0gPSAwO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKGkgPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBpM24gPSBpMyAtIDY7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uUHJldltpM24gKyAwXSA9IHBvaW50WDtcclxuICAgICAgICAgICAgcG9zaXRpb25QcmV2W2kzbiArIDFdID0gcG9pbnRZO1xyXG4gICAgICAgICAgICBwb3NpdGlvblByZXZbaTNuICsgMl0gPSAwO1xyXG4gICAgICBcclxuICAgICAgICAgICAgcG9zaXRpb25QcmV2W2kzbiArIDNdID0gcG9pbnRYO1xyXG4gICAgICAgICAgICBwb3NpdGlvblByZXZbaTNuICsgNF0gPSBwb2ludFk7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uUHJldltpM24gKyA1XSA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICBcclxuICAgICAgICB2YXIgaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShpbmRpY2VzQ291bnQpO1xyXG4gICAgICAgIHZhciBlbmQgPSBjb3VudCAtIDE7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDY7IGkrKykge1xyXG4gICAgICAgICAgcG9zaXRpb25OZXh0W2ldID0gcG9zaXRpb25OZXh0W2kgKyA2XTtcclxuICAgICAgICAgIHBvc2l0aW9uUHJldltlbmQgLSBpXSA9IHBvc2l0aW9uUHJldltlbmQgLSBpIC0gNl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBpbmRpY2VzQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgaWYgKGkgJSAyID09IDApIHtcclxuICAgICAgICAgICAgaW5kaWNlc1t0cmlhbmdsZU9mZnNldCsrXSA9IGk7XHJcbiAgICAgICAgICAgIGluZGljZXNbdHJpYW5nbGVPZmZzZXQrK10gPSBpICsgMTtcclxuICAgICAgICAgICAgaW5kaWNlc1t0cmlhbmdsZU9mZnNldCsrXSA9IGkgKyAyO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5kaWNlc1t0cmlhbmdsZU9mZnNldCsrXSA9IGkgKyAxO1xyXG4gICAgICAgICAgICBpbmRpY2VzW3RyaWFuZ2xlT2Zmc2V0KytdID0gaTtcclxuICAgICAgICAgICAgaW5kaWNlc1t0cmlhbmdsZU9mZnNldCsrXSA9IGkgKyAyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gZ2V0UGF0aENvb3JkaW5hdGUocG9zaXRpb24sIHBvc2l0aW9uTmV4dCwgcG9zaXRpb25QcmV2LCBvZmZzZXQpXHJcbiAgICAgICAgcmV0dXJuIFtjb29yZGluYXRlcywgaW5kaWNlc11cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0V2ViZ2xMaW5lSW5kZXgoZGF0YSkge1xyXG4gICAgICAgIGxldCB7XHJcbiAgICAgICAgICAgIHdlYmdsQ29vcmRpbmF0ZXMsXHJcbiAgICAgICAgICAgIHdlYmdsRW5kcyxcclxuICAgICAgICAgICAgd2ViZ2xTdHlsZSAgICBcclxuICAgICAgICB9ID0gZGF0YTsgXHJcbiAgICAgICAgdmFyIGxpbmVzID0ge1xyXG4gICAgICAgICAgICBpbmRleEFycjogW10sXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzQXJyOiBbXSxcclxuICAgICAgICAgICAgY29sb3JBcnI6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtdWx0aXBseUxpbmUgPSB7XHJcbiAgICAgICAgICAgIGluZGV4QXJyOiBbXSxcclxuICAgICAgICAgICAgY29vcmRpbmF0ZXNBcnI6IFtdLFxyXG4gICAgICAgICAgICBjb2xvckFycjogW10sXHJcbiAgICAgICAgICAgIHJhaWx3YXlJbmRleEFycjogW10sXHJcbiAgICAgICAgICAgIHJhaWx3YXlDb29yZGluYXRlc0FycjogW10sXHJcbiAgICAgICAgICAgIHJhaWx3YXlDb2xvckFycjogW11cclxuICAgICAgICB9ICAgICAgICBcclxuICAgICAgICB2YXIgbGluZUFyciA9IFtdO1xyXG4gICAgICAgIHZhciBsaW5lSW5kZXhBcnIgPSBbXTtcclxuICAgICAgICB2YXIgbGluZUNvbG9yQXJyID0gW107XHJcbiAgICBcclxuICAgICAgICB2YXIgbXV0aUxpbmVBcnIgPSBbXTtcclxuICAgICAgICB2YXIgbXV0aUxpbmVJbmRleEFyciA9IFtdO1xyXG4gICAgICAgIHZhciBtdXRpTGluZUNvbG9yQXJyID0gW107XHJcblxyXG4gICAgICAgIC8vIHJhaWx3YXlcclxuICAgICAgICB2YXIgbXV0aVJhaWx3YXlMaW5lQXJyID0gW107XHJcbiAgICAgICAgdmFyIG11dGlSYWlsd2F5TGluZUluZGV4QXJyID0gW107XHJcbiAgICAgICAgdmFyIG11dGlSYWlsd2F5TGluZUNvbG9yQXJyID0gW107XHJcbiAgICAgICAgLy8gRklYTUUgbmVlZHMgYSB2YXJ5aW5nIGluc3RlYWQgb2YgY29uc3RhbnRcclxuICAgICAgICB2YXIgY2FudmFzU2l6ZSA9IFs1MTIsIDUxMl07XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSB3ZWJnbEVuZHMubGVuZ3RoLCBwcmV2RW5kID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29vcmQgPSB3ZWJnbENvb3JkaW5hdGVzLnNsaWNlKHByZXZFbmQsIHdlYmdsRW5kc1tpXSk7XHJcbiAgICAgICAgICAgIHZhciB3ZWJnbENvbG9yID0gY29sb3JTdHJUb1dlYmdsQ29sb3Iod2ViZ2xTdHlsZVtpXS5zdHJva2VTdHlsZSk7XHJcbiAgICBcclxuICAgICAgICAgICAgaWYgKHdlYmdsU3R5bGVbaV0ubGluZVdpZHRoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGFzdExlbmd0aCA9IGxpbmVBcnIubGVuZ3RoIC8gMjtcclxuICAgICAgICAgICAgICAgIGxpbmVBcnIgPSBsaW5lQXJyLmNvbmNhdChjb29yZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudExlbmd0aCA9IGxpbmVBcnIubGVuZ3RoIC8gMjtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKGxhc3RMZW5ndGggPCBjdXJyZW50TGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVJbmRleEFyci5wdXNoKGxhc3RMZW5ndGgrKywgbGFzdExlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZUNvbG9yQXJyLnB1c2goLi4ud2ViZ2xDb2xvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsaW5lQ29sb3JBcnIucHVzaCguLi53ZWJnbENvbG9yKTsgIC8vbGFzdCB0aW1lXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod2ViZ2xTdHlsZVtpXS5saW5lV2lkdGggIT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmKHdlYmdsU3R5bGVbaV0uc3R5bGVJZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmFpbHdheVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtdXRpUmFpbHdheUxpbmVJbmRleEFycl8gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbXV0aVJhaWx3YXlMaW5lQ29sb3JBcnJfID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3aWR0aEhhbGYgPSB3ZWJnbFN0eWxlW2ldLmxpbmVXaWR0aCAvIChjYW52YXNTaXplWzBdIC8gMikgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBbdGVtcENvb3JkaW5hdGVzLCB0ZW1wSW5kZXhdID0gZ2V0UGF0aE9mZnNldChjb29yZCwgd2lkdGhIYWxmKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbXV0aVJhaWx3YXlMaW5lQXJyLnB1c2gobmV3IEZsb2F0MzJBcnJheSh0ZW1wQ29vcmRpbmF0ZXMpKTsgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSB0ZW1wQ29vcmRpbmF0ZXMubGVuZ3RoOyBpIDwgbGVuZ3RoIC8gMjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGlSYWlsd2F5TGluZUluZGV4QXJyXy5wdXNoKGkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtdXRpUmFpbHdheUxpbmVDb2xvckFycl8ucHVzaCguLi53ZWJnbENvbG9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbXV0aVJhaWx3YXlMaW5lSW5kZXhBcnIucHVzaChuZXcgVWludDE2QXJyYXkobXV0aVJhaWx3YXlMaW5lSW5kZXhBcnJfKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbXV0aVJhaWx3YXlMaW5lQ29sb3JBcnIucHVzaChuZXcgRmxvYXQzMkFycmF5KG11dGlSYWlsd2F5TGluZUNvbG9yQXJyXykpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB3aWR0aEhhbGYgPSB3ZWJnbFN0eWxlW2ldLmxpbmVXaWR0aCAvIChjYW52YXNTaXplWzBdIC8gMikgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXN0TGVuZ3RoID0gKG11dGlMaW5lQXJyLmxlbmd0aCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBbdGVtcENvb3JkaW5hdGVzLCB0ZW1wSW5kZXhdID0gZ2V0UGF0aE9mZnNldChjb29yZCwgd2lkdGhIYWxmKTtcclxuICAgICAgICAgICAgICAgICAgICBtdXRpTGluZUFyciA9IG11dGlMaW5lQXJyLmNvbmNhdCh0ZW1wQ29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TGVuZ3RoID0gbXV0aUxpbmVBcnIubGVuZ3RoIC8gMjtcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuZ3RoID0gdGVtcEluZGV4Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG11dGlMaW5lSW5kZXhBcnIucHVzaChsYXN0TGVuZ3RoICsgdGVtcEluZGV4W2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGxhc3RMZW5ndGgrKyA8IGN1cnJlbnRMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXV0aUxpbmVDb2xvckFyci5wdXNoKC4uLndlYmdsQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIHByZXZFbmQgPSB3ZWJnbEVuZHNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxpbmVzLmluZGV4QXJyLnB1c2gobmV3IFVpbnQxNkFycmF5KGxpbmVJbmRleEFycikpO1xyXG4gICAgICAgIGxpbmVzLmNvb3JkaW5hdGVzQXJyLnB1c2gobmV3IEZsb2F0MzJBcnJheShsaW5lQXJyKSk7XHJcbiAgICAgICAgbGluZXMuY29sb3JBcnIucHVzaChuZXcgRmxvYXQzMkFycmF5KGxpbmVDb2xvckFycikpO1xyXG5cclxuICAgICAgICBsaW5lSW5kZXhBcnIgPSBbXTtcclxuICAgICAgICBsaW5lQXJyID0gW107XHJcbiAgICAgICAgbGluZUNvbG9yQXJyID0gW107XHJcblxyXG4gICAgICAgIGlmIChtdXRpTGluZUluZGV4QXJyLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbXVsdGlwbHlMaW5lLmluZGV4QXJyLnB1c2gobmV3IFVpbnQxNkFycmF5KG11dGlMaW5lSW5kZXhBcnIpKTtcclxuICAgICAgICAgICAgbXVsdGlwbHlMaW5lLmNvb3JkaW5hdGVzQXJyLnB1c2gobmV3IEZsb2F0MzJBcnJheShtdXRpTGluZUFycikpO1xyXG4gICAgICAgICAgICBtdWx0aXBseUxpbmUuY29sb3JBcnIucHVzaChuZXcgRmxvYXQzMkFycmF5KG11dGlMaW5lQ29sb3JBcnIpKTtcclxuXHJcbiAgICAgICAgICAgIG11dGlMaW5lSW5kZXhBcnIgPSBudWxsO1xyXG4gICAgICAgICAgICBtdXRpTGluZUFyciA9IG51bGw7XHJcbiAgICAgICAgICAgIG11dGlMaW5lQ29sb3JBcnIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gcmFpbHdheVxyXG4gICAgICAgIGlmIChtdXRpUmFpbHdheUxpbmVJbmRleEFyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIG11bHRpcGx5TGluZS5yYWlsd2F5SW5kZXhBcnIucHVzaCguLi5tdXRpUmFpbHdheUxpbmVJbmRleEFycik7XHJcbiAgICAgICAgICAgIG11bHRpcGx5TGluZS5yYWlsd2F5Q29vcmRpbmF0ZXNBcnIucHVzaCguLi5tdXRpUmFpbHdheUxpbmVBcnIpO1xyXG4gICAgICAgICAgICBtdWx0aXBseUxpbmUucmFpbHdheUNvbG9yQXJyLnB1c2goLi4ubXV0aVJhaWx3YXlMaW5lQ29sb3JBcnIpO1xyXG5cclxuICAgICAgICAgICAgbXV0aVJhaWx3YXlMaW5lSW5kZXhBcnIgPSBudWxsO1xyXG4gICAgICAgICAgICBtdXRpUmFpbHdheUxpbmVBcnIgPSBudWxsO1xyXG4gICAgICAgICAgICBtdXRpUmFpbHdheUxpbmVDb2xvckFyciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtdWx0aXBseUxpbmUsXHJcbiAgICAgICAgICAgIGxpbmVzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFBhdGhDb29yZGluYXRlKGFfcG9zaXRpb24sIGFfcG9zaXRpb25OZXh0LCBhX3Bvc2l0aW9uUHJldiwgYV9vZmZzZXQpIHtcclxuICAgICAgICB2YXIgcG9pbnRzcyA9IFtdO1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBhX3Bvc2l0aW9uLmxlbmd0aDtcclxuICAgICAgICB2YXIgZmxhZyA9IDE7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgdmFyIGN1cnIgPSB7IHg6IGFfcG9zaXRpb25baV0sIHk6IGFfcG9zaXRpb25baSArIDFdIH1cclxuICAgICAgICAgIHZhciBuZXh0ID0geyB4OiBhX3Bvc2l0aW9uTmV4dFtpXSwgeTogYV9wb3NpdGlvbk5leHRbaSArIDFdIH1cclxuICAgICAgICAgIHZhciBwcmV2ID0geyB4OiBhX3Bvc2l0aW9uUHJldltpXSwgeTogYV9wb3NpdGlvblByZXZbaSArIDFdIH1cclxuICAgICAgICAgIHZhciBkaXIsIGxlbiA9IGFfb2Zmc2V0ICogZmxhZztcclxuICAgICAgICAgIGlmIChjdXJyLnggPT09IHByZXYueCAmJiBjdXJyLnkgPT09IHByZXYueSkge1xyXG4gICAgICAgICAgICBkaXIgPSBub3JtYWxpemUobmV4dC54IC0gY3Vyci54LCBuZXh0LnkgLSBjdXJyLnkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZiAoY3Vyci54ID09PSBuZXh0LnggJiYgY3Vyci55ID09PSBuZXh0LnkpIHtcclxuICAgICAgICAgICAgZGlyID0gbm9ybWFsaXplKGN1cnIueCAtIHByZXYueCwgY3Vyci55IC0gcHJldi55KVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBkaXIxID0gbm9ybWFsaXplKGN1cnIueCAtIHByZXYueCwgY3Vyci55IC0gcHJldi55KVxyXG4gICAgICAgICAgICB2YXIgZGlyMiA9IG5vcm1hbGl6ZShuZXh0LnggLSBjdXJyLngsIG5leHQueSAtIGN1cnIueSlcclxuICAgICAgICAgICAgZGlyID0gbm9ybWFsaXplKGRpcjEueCArIGRpcjIueCwgZGlyMS55ICsgZGlyMi55KTtcclxuICAgICAgICAgICAgdmFyIG1pdGVyID0gMS4wIC8gTWF0aC5tYXgoZGlyLnggKiBkaXIxLnggKyBkaXIueSAqIGRpcjEueSwgMC41KTtcclxuICAgICAgICAgICAgbGVuICo9IG1pdGVyO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGlyID0geyB4OiAtZGlyLnkgKiBsZW4sIHk6IGRpci54ICogbGVuIH07XHJcbiAgICAgICAgICBwb2ludHNzLnB1c2goY3Vyci54ICsgZGlyLngpO1xyXG4gICAgICAgICAgcG9pbnRzcy5wdXNoKGN1cnIueSArIGRpci55KTtcclxuICAgICAgICAgIGZsYWcgKj0gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwb2ludHNzXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbm9ybWFsaXplKHgsIHkpIHtcclxuICAgICAgICB2YXIgbSA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcclxuICAgICAgICByZXR1cm4geyB4OiB4IC8gbSwgeTogeSAvIG0gfVxyXG4gICAgfSAgICAgICAgXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBlYXJjdXRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZWFyY3V0KGRhdGEsIGhvbGVJbmRpY2VzLCBkaW0pIHtcclxuXHJcbiAgICAgICAgZGltID0gZGltIHx8IDI7XHJcblxyXG4gICAgICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aCxcclxuICAgICAgICAgICAgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGgsXHJcbiAgICAgICAgICAgIG91dGVyTm9kZSA9IGxpbmtlZExpc3QoZGF0YSwgMCwgb3V0ZXJMZW4sIGRpbSwgdHJ1ZSksXHJcbiAgICAgICAgICAgIHRyaWFuZ2xlcyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoIW91dGVyTm9kZSkgcmV0dXJuIHRyaWFuZ2xlcztcclxuXHJcbiAgICAgICAgdmFyIG1pblgsIG1pblksIG1heFgsIG1heFksIHgsIHksIGludlNpemU7XHJcblxyXG4gICAgICAgIGlmIChoYXNIb2xlcykgb3V0ZXJOb2RlID0gZWxpbWluYXRlSG9sZXMoZGF0YSwgaG9sZUluZGljZXMsIG91dGVyTm9kZSwgZGltKTtcclxuXHJcbiAgICAgICAgLy8gaWYgdGhlIHNoYXBlIGlzIG5vdCB0b28gc2ltcGxlLCB3ZSdsbCB1c2Ugei1vcmRlciBjdXJ2ZSBoYXNoIGxhdGVyOyBjYWxjdWxhdGUgcG9seWdvbiBiYm94XHJcbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gODAgKiBkaW0pIHtcclxuICAgICAgICAgICAgbWluWCA9IG1heFggPSBkYXRhWzBdO1xyXG4gICAgICAgICAgICBtaW5ZID0gbWF4WSA9IGRhdGFbMV07XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gZGltOyBpIDwgb3V0ZXJMZW47IGkgKz0gZGltKSB7XHJcbiAgICAgICAgICAgICAgICB4ID0gZGF0YVtpXTtcclxuICAgICAgICAgICAgICAgIHkgPSBkYXRhW2kgKyAxXTtcclxuICAgICAgICAgICAgICAgIGlmICh4IDwgbWluWCkgbWluWCA9IHg7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA8IG1pblkpIG1pblkgPSB5O1xyXG4gICAgICAgICAgICAgICAgaWYgKHggPiBtYXhYKSBtYXhYID0geDtcclxuICAgICAgICAgICAgICAgIGlmICh5ID4gbWF4WSkgbWF4WSA9IHk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIG1pblgsIG1pblkgYW5kIGludlNpemUgYXJlIGxhdGVyIHVzZWQgdG8gdHJhbnNmb3JtIGNvb3JkcyBpbnRvIGludGVnZXJzIGZvciB6LW9yZGVyIGNhbGN1bGF0aW9uXHJcbiAgICAgICAgICAgIGludlNpemUgPSBNYXRoLm1heChtYXhYIC0gbWluWCwgbWF4WSAtIG1pblkpO1xyXG4gICAgICAgICAgICBpbnZTaXplID0gaW52U2l6ZSAhPT0gMCA/IDEgLyBpbnZTaXplIDogMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVhcmN1dExpbmtlZChvdXRlck5vZGUsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRyaWFuZ2xlcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBjcmVhdGUgYSBjaXJjdWxhciBkb3VibHkgbGlua2VkIGxpc3QgZnJvbSBwb2x5Z29uIHBvaW50cyBpbiB0aGUgc3BlY2lmaWVkIHdpbmRpbmcgb3JkZXJcclxuICAgIGZ1bmN0aW9uIGxpbmtlZExpc3QoZGF0YSwgc3RhcnQsIGVuZCwgZGltLCBjbG9ja3dpc2UpIHtcclxuICAgICAgICB2YXIgaSwgbGFzdDtcclxuXHJcbiAgICAgICAgaWYgKGNsb2Nrd2lzZSA9PT0gKHNpZ25lZEFyZWEoZGF0YSwgc3RhcnQsIGVuZCwgZGltKSA+IDApKSB7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IGRpbSkgbGFzdCA9IGluc2VydE5vZGUoaSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIGxhc3QpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IGVuZCAtIGRpbTsgaSA+PSBzdGFydDsgaSAtPSBkaW0pIGxhc3QgPSBpbnNlcnROb2RlKGksIGRhdGFbaV0sIGRhdGFbaSArIDFdLCBsYXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChsYXN0ICYmIGVxdWFscyhsYXN0LCBsYXN0Lm5leHQpKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZU5vZGUobGFzdCk7XHJcbiAgICAgICAgICAgIGxhc3QgPSBsYXN0Lm5leHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbGFzdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBlbGltaW5hdGUgY29saW5lYXIgb3IgZHVwbGljYXRlIHBvaW50c1xyXG4gICAgZnVuY3Rpb24gZmlsdGVyUG9pbnRzKHN0YXJ0LCBlbmQpIHtcclxuICAgICAgICBpZiAoIXN0YXJ0KSByZXR1cm4gc3RhcnQ7XHJcbiAgICAgICAgaWYgKCFlbmQpIGVuZCA9IHN0YXJ0O1xyXG5cclxuICAgICAgICB2YXIgcCA9IHN0YXJ0LFxyXG4gICAgICAgICAgICBhZ2FpbjtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGFnYWluID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXAuc3RlaW5lciAmJiAoZXF1YWxzKHAsIHAubmV4dCkgfHwgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPT09IDApKSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVOb2RlKHApO1xyXG4gICAgICAgICAgICAgICAgcCA9IGVuZCA9IHAucHJldjtcclxuICAgICAgICAgICAgICAgIGlmIChwID09PSBwLm5leHQpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgYWdhaW4gPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHAgPSBwLm5leHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IHdoaWxlIChhZ2FpbiB8fCBwICE9PSBlbmQpO1xyXG5cclxuICAgICAgICByZXR1cm4gZW5kO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIG1haW4gZWFyIHNsaWNpbmcgbG9vcCB3aGljaCB0cmlhbmd1bGF0ZXMgYSBwb2x5Z29uIChnaXZlbiBhcyBhIGxpbmtlZCBsaXN0KVxyXG4gICAgZnVuY3Rpb24gZWFyY3V0TGlua2VkKGVhciwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIHBhc3MpIHtcclxuICAgICAgICBpZiAoIWVhcikgcmV0dXJuO1xyXG5cclxuICAgICAgICAvLyBpbnRlcmxpbmsgcG9seWdvbiBub2RlcyBpbiB6LW9yZGVyXHJcbiAgICAgICAgaWYgKCFwYXNzICYmIGludlNpemUpIGluZGV4Q3VydmUoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcclxuXHJcbiAgICAgICAgdmFyIHN0b3AgPSBlYXIsXHJcbiAgICAgICAgICAgIHByZXYsIG5leHQ7XHJcblxyXG4gICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBlYXJzLCBzbGljaW5nIHRoZW0gb25lIGJ5IG9uZVxyXG4gICAgICAgIHdoaWxlIChlYXIucHJldiAhPT0gZWFyLm5leHQpIHtcclxuICAgICAgICAgICAgcHJldiA9IGVhci5wcmV2O1xyXG4gICAgICAgICAgICBuZXh0ID0gZWFyLm5leHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW52U2l6ZSA/IGlzRWFySGFzaGVkKGVhciwgbWluWCwgbWluWSwgaW52U2l6ZSkgOiBpc0VhcihlYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjdXQgb2ZmIHRoZSB0cmlhbmdsZVxyXG4gICAgICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2gocHJldi5pIC8gZGltKTtcclxuICAgICAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKGVhci5pIC8gZGltKTtcclxuICAgICAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKG5leHQuaSAvIGRpbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlTm9kZShlYXIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHNraXBwaW5nIHRoZSBuZXh0IHZlcnRpY2UgbGVhZHMgdG8gbGVzcyBzbGl2ZXIgdHJpYW5nbGVzXHJcbiAgICAgICAgICAgICAgICBlYXIgPSBuZXh0Lm5leHQ7XHJcbiAgICAgICAgICAgICAgICBzdG9wID0gbmV4dC5uZXh0O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlYXIgPSBuZXh0O1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgd2UgbG9vcGVkIHRocm91Z2ggdGhlIHdob2xlIHJlbWFpbmluZyBwb2x5Z29uIGFuZCBjYW4ndCBmaW5kIGFueSBtb3JlIGVhcnNcclxuICAgICAgICAgICAgaWYgKGVhciA9PT0gc3RvcCkge1xyXG4gICAgICAgICAgICAgICAgLy8gdHJ5IGZpbHRlcmluZyBwb2ludHMgYW5kIHNsaWNpbmcgYWdhaW5cclxuICAgICAgICAgICAgICAgIGlmICghcGFzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChmaWx0ZXJQb2ludHMoZWFyKSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDEpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIHRoaXMgZGlkbid0IHdvcmssIHRyeSBjdXJpbmcgYWxsIHNtYWxsIHNlbGYtaW50ZXJzZWN0aW9ucyBsb2NhbGx5XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhc3MgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBlYXIgPSBjdXJlTG9jYWxJbnRlcnNlY3Rpb25zKGVhciwgdHJpYW5nbGVzLCBkaW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCAyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBhcyBhIGxhc3QgcmVzb3J0LCB0cnkgc3BsaXR0aW5nIHRoZSByZW1haW5pbmcgcG9seWdvbiBpbnRvIHR3b1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYXNzID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3BsaXRFYXJjdXQoZWFyLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hlY2sgd2hldGhlciBhIHBvbHlnb24gbm9kZSBmb3JtcyBhIHZhbGlkIGVhciB3aXRoIGFkamFjZW50IG5vZGVzXHJcbiAgICBmdW5jdGlvbiBpc0VhcihlYXIpIHtcclxuICAgICAgICB2YXIgYSA9IGVhci5wcmV2LFxyXG4gICAgICAgICAgICBiID0gZWFyLFxyXG4gICAgICAgICAgICBjID0gZWFyLm5leHQ7XHJcblxyXG4gICAgICAgIGlmIChhcmVhKGEsIGIsIGMpID49IDApIHJldHVybiBmYWxzZTsgLy8gcmVmbGV4LCBjYW4ndCBiZSBhbiBlYXJcclxuXHJcbiAgICAgICAgLy8gbm93IG1ha2Ugc3VyZSB3ZSBkb24ndCBoYXZlIG90aGVyIHBvaW50cyBpbnNpZGUgdGhlIHBvdGVudGlhbCBlYXJcclxuICAgICAgICB2YXIgcCA9IGVhci5uZXh0Lm5leHQ7XHJcblxyXG4gICAgICAgIHdoaWxlIChwICE9PSBlYXIucHJldikge1xyXG4gICAgICAgICAgICBpZiAocG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIHAueCwgcC55KSAmJlxyXG4gICAgICAgICAgICAgICAgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaXNFYXJIYXNoZWQoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKSB7XHJcbiAgICAgICAgdmFyIGEgPSBlYXIucHJldixcclxuICAgICAgICAgICAgYiA9IGVhcixcclxuICAgICAgICAgICAgYyA9IGVhci5uZXh0O1xyXG5cclxuICAgICAgICBpZiAoYXJlYShhLCBiLCBjKSA+PSAwKSByZXR1cm4gZmFsc2U7IC8vIHJlZmxleCwgY2FuJ3QgYmUgYW4gZWFyXHJcblxyXG4gICAgICAgIC8vIHRyaWFuZ2xlIGJib3g7IG1pbiAmIG1heCBhcmUgY2FsY3VsYXRlZCBsaWtlIHRoaXMgZm9yIHNwZWVkXHJcbiAgICAgICAgdmFyIG1pblRYID0gYS54IDwgYi54ID8gKGEueCA8IGMueCA/IGEueCA6IGMueCkgOiAoYi54IDwgYy54ID8gYi54IDogYy54KSxcclxuICAgICAgICAgICAgbWluVFkgPSBhLnkgPCBiLnkgPyAoYS55IDwgYy55ID8gYS55IDogYy55KSA6IChiLnkgPCBjLnkgPyBiLnkgOiBjLnkpLFxyXG4gICAgICAgICAgICBtYXhUWCA9IGEueCA+IGIueCA/IChhLnggPiBjLnggPyBhLnggOiBjLngpIDogKGIueCA+IGMueCA/IGIueCA6IGMueCksXHJcbiAgICAgICAgICAgIG1heFRZID0gYS55ID4gYi55ID8gKGEueSA+IGMueSA/IGEueSA6IGMueSkgOiAoYi55ID4gYy55ID8gYi55IDogYy55KTtcclxuXHJcbiAgICAgICAgLy8gei1vcmRlciByYW5nZSBmb3IgdGhlIGN1cnJlbnQgdHJpYW5nbGUgYmJveDtcclxuICAgICAgICB2YXIgbWluWiA9IHpPcmRlcihtaW5UWCwgbWluVFksIG1pblgsIG1pblksIGludlNpemUpLFxyXG4gICAgICAgICAgICBtYXhaID0gek9yZGVyKG1heFRYLCBtYXhUWSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XHJcblxyXG4gICAgICAgIHZhciBwID0gZWFyLnByZXZaLFxyXG4gICAgICAgICAgICBuID0gZWFyLm5leHRaO1xyXG5cclxuICAgICAgICAvLyBsb29rIGZvciBwb2ludHMgaW5zaWRlIHRoZSB0cmlhbmdsZSBpbiBib3RoIGRpcmVjdGlvbnNcclxuICAgICAgICB3aGlsZSAocCAmJiBwLnogPj0gbWluWiAmJiBuICYmIG4ueiA8PSBtYXhaKSB7XHJcbiAgICAgICAgICAgIGlmIChwICE9PSBlYXIucHJldiAmJiBwICE9PSBlYXIubmV4dCAmJlxyXG4gICAgICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIHAueCwgcC55KSAmJlxyXG4gICAgICAgICAgICAgICAgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBwID0gcC5wcmV2WjtcclxuXHJcbiAgICAgICAgICAgIGlmIChuICE9PSBlYXIucHJldiAmJiBuICE9PSBlYXIubmV4dCAmJlxyXG4gICAgICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIG4ueCwgbi55KSAmJlxyXG4gICAgICAgICAgICAgICAgYXJlYShuLnByZXYsIG4sIG4ubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBuID0gbi5uZXh0WjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGxvb2sgZm9yIHJlbWFpbmluZyBwb2ludHMgaW4gZGVjcmVhc2luZyB6LW9yZGVyXHJcbiAgICAgICAgd2hpbGUgKHAgJiYgcC56ID49IG1pblopIHtcclxuICAgICAgICAgICAgaWYgKHAgIT09IGVhci5wcmV2ICYmIHAgIT09IGVhci5uZXh0ICYmXHJcbiAgICAgICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgcC54LCBwLnkpICYmXHJcbiAgICAgICAgICAgICAgICBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIHAgPSBwLnByZXZaO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gbG9vayBmb3IgcmVtYWluaW5nIHBvaW50cyBpbiBpbmNyZWFzaW5nIHotb3JkZXJcclxuICAgICAgICB3aGlsZSAobiAmJiBuLnogPD0gbWF4Wikge1xyXG4gICAgICAgICAgICBpZiAobiAhPT0gZWFyLnByZXYgJiYgbiAhPT0gZWFyLm5leHQgJiZcclxuICAgICAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBuLngsIG4ueSkgJiZcclxuICAgICAgICAgICAgICAgIGFyZWEobi5wcmV2LCBuLCBuLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgbiA9IG4ubmV4dFo7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBnbyB0aHJvdWdoIGFsbCBwb2x5Z29uIG5vZGVzIGFuZCBjdXJlIHNtYWxsIGxvY2FsIHNlbGYtaW50ZXJzZWN0aW9uc1xyXG4gICAgZnVuY3Rpb24gY3VyZUxvY2FsSW50ZXJzZWN0aW9ucyhzdGFydCwgdHJpYW5nbGVzLCBkaW0pIHtcclxuICAgICAgICB2YXIgcCA9IHN0YXJ0O1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgdmFyIGEgPSBwLnByZXYsXHJcbiAgICAgICAgICAgICAgICBiID0gcC5uZXh0Lm5leHQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWVxdWFscyhhLCBiKSAmJiBpbnRlcnNlY3RzKGEsIHAsIHAubmV4dCwgYikgJiYgbG9jYWxseUluc2lkZShhLCBiKSAmJiBsb2NhbGx5SW5zaWRlKGIsIGEpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2goYS5pIC8gZGltKTtcclxuICAgICAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKHAuaSAvIGRpbSk7XHJcbiAgICAgICAgICAgICAgICB0cmlhbmdsZXMucHVzaChiLmkgLyBkaW0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0d28gbm9kZXMgaW52b2x2ZWRcclxuICAgICAgICAgICAgICAgIHJlbW92ZU5vZGUocCk7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVOb2RlKHAubmV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcCA9IHN0YXJ0ID0gYjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwID0gcC5uZXh0O1xyXG4gICAgICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gdHJ5IHNwbGl0dGluZyBwb2x5Z29uIGludG8gdHdvIGFuZCB0cmlhbmd1bGF0ZSB0aGVtIGluZGVwZW5kZW50bHlcclxuICAgIGZ1bmN0aW9uIHNwbGl0RWFyY3V0KHN0YXJ0LCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xyXG4gICAgICAgIC8vIGxvb2sgZm9yIGEgdmFsaWQgZGlhZ29uYWwgdGhhdCBkaXZpZGVzIHRoZSBwb2x5Z29uIGludG8gdHdvXHJcbiAgICAgICAgdmFyIGEgPSBzdGFydDtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIHZhciBiID0gYS5uZXh0Lm5leHQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChiICE9PSBhLnByZXYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhLmkgIT09IGIuaSAmJiBpc1ZhbGlkRGlhZ29uYWwoYSwgYikpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzcGxpdCB0aGUgcG9seWdvbiBpbiB0d28gYnkgdGhlIGRpYWdvbmFsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBzcGxpdFBvbHlnb24oYSwgYik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZpbHRlciBjb2xpbmVhciBwb2ludHMgYXJvdW5kIHRoZSBjdXRzXHJcbiAgICAgICAgICAgICAgICAgICAgYSA9IGZpbHRlclBvaW50cyhhLCBhLm5leHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGMgPSBmaWx0ZXJQb2ludHMoYywgYy5uZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcnVuIGVhcmN1dCBvbiBlYWNoIGhhbGZcclxuICAgICAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoYSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChjLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYiA9IGIubmV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhID0gYS5uZXh0O1xyXG4gICAgICAgIH0gd2hpbGUgKGEgIT09IHN0YXJ0KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBsaW5rIGV2ZXJ5IGhvbGUgaW50byB0aGUgb3V0ZXIgbG9vcCwgcHJvZHVjaW5nIGEgc2luZ2xlLXJpbmcgcG9seWdvbiB3aXRob3V0IGhvbGVzXHJcbiAgICBmdW5jdGlvbiBlbGltaW5hdGVIb2xlcyhkYXRhLCBob2xlSW5kaWNlcywgb3V0ZXJOb2RlLCBkaW0pIHtcclxuICAgICAgICB2YXIgcXVldWUgPSBbXSxcclxuICAgICAgICAgICAgaSwgbGVuLCBzdGFydCwgZW5kLCBsaXN0O1xyXG5cclxuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBob2xlSW5kaWNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICBzdGFydCA9IGhvbGVJbmRpY2VzW2ldICogZGltO1xyXG4gICAgICAgICAgICBlbmQgPSBpIDwgbGVuIC0gMSA/IGhvbGVJbmRpY2VzW2kgKyAxXSAqIGRpbSA6IGRhdGEubGVuZ3RoO1xyXG4gICAgICAgICAgICBsaXN0ID0gbGlua2VkTGlzdChkYXRhLCBzdGFydCwgZW5kLCBkaW0sIGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKGxpc3QgPT09IGxpc3QubmV4dCkgbGlzdC5zdGVpbmVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgcXVldWUucHVzaChnZXRMZWZ0bW9zdChsaXN0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBxdWV1ZS5zb3J0KGNvbXBhcmVYKTtcclxuXHJcbiAgICAgICAgLy8gcHJvY2VzcyBob2xlcyBmcm9tIGxlZnQgdG8gcmlnaHRcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZWxpbWluYXRlSG9sZShxdWV1ZVtpXSwgb3V0ZXJOb2RlKTtcclxuICAgICAgICAgICAgb3V0ZXJOb2RlID0gZmlsdGVyUG9pbnRzKG91dGVyTm9kZSwgb3V0ZXJOb2RlLm5leHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG91dGVyTm9kZTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb21wYXJlWChhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIGEueCAtIGIueDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBmaW5kIGEgYnJpZGdlIGJldHdlZW4gdmVydGljZXMgdGhhdCBjb25uZWN0cyBob2xlIHdpdGggYW4gb3V0ZXIgcmluZyBhbmQgYW5kIGxpbmsgaXRcclxuICAgIGZ1bmN0aW9uIGVsaW1pbmF0ZUhvbGUoaG9sZSwgb3V0ZXJOb2RlKSB7XHJcbiAgICAgICAgb3V0ZXJOb2RlID0gZmluZEhvbGVCcmlkZ2UoaG9sZSwgb3V0ZXJOb2RlKTtcclxuICAgICAgICBpZiAob3V0ZXJOb2RlKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gc3BsaXRQb2x5Z29uKG91dGVyTm9kZSwgaG9sZSk7XHJcbiAgICAgICAgICAgIGZpbHRlclBvaW50cyhiLCBiLm5leHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBEYXZpZCBFYmVybHkncyBhbGdvcml0aG0gZm9yIGZpbmRpbmcgYSBicmlkZ2UgYmV0d2VlbiBob2xlIGFuZCBvdXRlciBwb2x5Z29uXHJcbiAgICBmdW5jdGlvbiBmaW5kSG9sZUJyaWRnZShob2xlLCBvdXRlck5vZGUpIHtcclxuICAgICAgICB2YXIgcCA9IG91dGVyTm9kZSxcclxuICAgICAgICAgICAgaHggPSBob2xlLngsXHJcbiAgICAgICAgICAgIGh5ID0gaG9sZS55LFxyXG4gICAgICAgICAgICBxeCA9IC1JbmZpbml0eSxcclxuICAgICAgICAgICAgbTtcclxuXHJcbiAgICAgICAgLy8gZmluZCBhIHNlZ21lbnQgaW50ZXJzZWN0ZWQgYnkgYSByYXkgZnJvbSB0aGUgaG9sZSdzIGxlZnRtb3N0IHBvaW50IHRvIHRoZSBsZWZ0O1xyXG4gICAgICAgIC8vIHNlZ21lbnQncyBlbmRwb2ludCB3aXRoIGxlc3NlciB4IHdpbGwgYmUgcG90ZW50aWFsIGNvbm5lY3Rpb24gcG9pbnRcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGlmIChoeSA8PSBwLnkgJiYgaHkgPj0gcC5uZXh0LnkgJiYgcC5uZXh0LnkgIT09IHAueSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBwLnggKyAoaHkgLSBwLnkpICogKHAubmV4dC54IC0gcC54KSAvIChwLm5leHQueSAtIHAueSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA8PSBoeCAmJiB4ID4gcXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBxeCA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT09IGh4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoeSA9PT0gcC55KSByZXR1cm4gcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGh5ID09PSBwLm5leHQueSkgcmV0dXJuIHAubmV4dDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbSA9IHAueCA8IHAubmV4dC54ID8gcCA6IHAubmV4dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwID0gcC5uZXh0O1xyXG4gICAgICAgIH0gd2hpbGUgKHAgIT09IG91dGVyTm9kZSk7XHJcblxyXG4gICAgICAgIGlmICghbSkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgICAgIGlmIChoeCA9PT0gcXgpIHJldHVybiBtLnByZXY7IC8vIGhvbGUgdG91Y2hlcyBvdXRlciBzZWdtZW50OyBwaWNrIGxvd2VyIGVuZHBvaW50XHJcblxyXG4gICAgICAgIC8vIGxvb2sgZm9yIHBvaW50cyBpbnNpZGUgdGhlIHRyaWFuZ2xlIG9mIGhvbGUgcG9pbnQsIHNlZ21lbnQgaW50ZXJzZWN0aW9uIGFuZCBlbmRwb2ludDtcclxuICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gcG9pbnRzIGZvdW5kLCB3ZSBoYXZlIGEgdmFsaWQgY29ubmVjdGlvbjtcclxuICAgICAgICAvLyBvdGhlcndpc2UgY2hvb3NlIHRoZSBwb2ludCBvZiB0aGUgbWluaW11bSBhbmdsZSB3aXRoIHRoZSByYXkgYXMgY29ubmVjdGlvbiBwb2ludFxyXG5cclxuICAgICAgICB2YXIgc3RvcCA9IG0sXHJcbiAgICAgICAgICAgIG14ID0gbS54LFxyXG4gICAgICAgICAgICBteSA9IG0ueSxcclxuICAgICAgICAgICAgdGFuTWluID0gSW5maW5pdHksXHJcbiAgICAgICAgICAgIHRhbjtcclxuXHJcbiAgICAgICAgcCA9IG0ubmV4dDtcclxuXHJcbiAgICAgICAgd2hpbGUgKHAgIT09IHN0b3ApIHtcclxuICAgICAgICAgICAgaWYgKGh4ID49IHAueCAmJiBwLnggPj0gbXggJiYgaHggIT09IHAueCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShoeSA8IG15ID8gaHggOiBxeCwgaHksIG14LCBteSwgaHkgPCBteSA/IHF4IDogaHgsIGh5LCBwLngsIHAueSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0YW4gPSBNYXRoLmFicyhoeSAtIHAueSkgLyAoaHggLSBwLngpOyAvLyB0YW5nZW50aWFsXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCh0YW4gPCB0YW5NaW4gfHwgKHRhbiA9PT0gdGFuTWluICYmIHAueCA+IG0ueCkpICYmIGxvY2FsbHlJbnNpZGUocCwgaG9sZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBtID0gcDtcclxuICAgICAgICAgICAgICAgICAgICB0YW5NaW4gPSB0YW47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBpbnRlcmxpbmsgcG9seWdvbiBub2RlcyBpbiB6LW9yZGVyXHJcbiAgICBmdW5jdGlvbiBpbmRleEN1cnZlKHN0YXJ0LCBtaW5YLCBtaW5ZLCBpbnZTaXplKSB7XHJcbiAgICAgICAgdmFyIHAgPSBzdGFydDtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGlmIChwLnogPT09IG51bGwpIHAueiA9IHpPcmRlcihwLngsIHAueSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XHJcbiAgICAgICAgICAgIHAucHJldlogPSBwLnByZXY7XHJcbiAgICAgICAgICAgIHAubmV4dFogPSBwLm5leHQ7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQ7XHJcbiAgICAgICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xyXG5cclxuICAgICAgICBwLnByZXZaLm5leHRaID0gbnVsbDtcclxuICAgICAgICBwLnByZXZaID0gbnVsbDtcclxuXHJcbiAgICAgICAgc29ydExpbmtlZChwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBTaW1vbiBUYXRoYW0ncyBsaW5rZWQgbGlzdCBtZXJnZSBzb3J0IGFsZ29yaXRobVxyXG4gICAgLy8gaHR0cDovL3d3dy5jaGlhcmsuZ3JlZW5lbmQub3JnLnVrL35zZ3RhdGhhbS9hbGdvcml0aG1zL2xpc3Rzb3J0Lmh0bWxcclxuICAgIGZ1bmN0aW9uIHNvcnRMaW5rZWQobGlzdCkge1xyXG4gICAgICAgIHZhciBpLCBwLCBxLCBlLCB0YWlsLCBudW1NZXJnZXMsIHBTaXplLCBxU2l6ZSxcclxuICAgICAgICAgICAgaW5TaXplID0gMTtcclxuXHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBwID0gbGlzdDtcclxuICAgICAgICAgICAgbGlzdCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRhaWwgPSBudWxsO1xyXG4gICAgICAgICAgICBudW1NZXJnZXMgPSAwO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHApIHtcclxuICAgICAgICAgICAgICAgIG51bU1lcmdlcysrO1xyXG4gICAgICAgICAgICAgICAgcSA9IHA7XHJcbiAgICAgICAgICAgICAgICBwU2l6ZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaW5TaXplOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBwU2l6ZSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIHEgPSBxLm5leHRaO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcSkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBxU2l6ZSA9IGluU2l6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocFNpemUgPiAwIHx8IChxU2l6ZSA+IDAgJiYgcSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBTaXplICE9PSAwICYmIChxU2l6ZSA9PT0gMCB8fCAhcSB8fCBwLnogPD0gcS56KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlID0gcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHAubmV4dFo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBTaXplLS07XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBxLm5leHRaO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxU2l6ZS0tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhaWwpIHRhaWwubmV4dFogPSBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgbGlzdCA9IGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGUucHJldlogPSB0YWlsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRhaWwgPSBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHAgPSBxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0YWlsLm5leHRaID0gbnVsbDtcclxuICAgICAgICAgICAgaW5TaXplICo9IDI7XHJcblxyXG4gICAgICAgIH0gd2hpbGUgKG51bU1lcmdlcyA+IDEpO1xyXG5cclxuICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgIH1cclxuXHJcbiAgICAvLyB6LW9yZGVyIG9mIGEgcG9pbnQgZ2l2ZW4gY29vcmRzIGFuZCBpbnZlcnNlIG9mIHRoZSBsb25nZXIgc2lkZSBvZiBkYXRhIGJib3hcclxuICAgIGZ1bmN0aW9uIHpPcmRlcih4LCB5LCBtaW5YLCBtaW5ZLCBpbnZTaXplKSB7XHJcbiAgICAgICAgLy8gY29vcmRzIGFyZSB0cmFuc2Zvcm1lZCBpbnRvIG5vbi1uZWdhdGl2ZSAxNS1iaXQgaW50ZWdlciByYW5nZVxyXG4gICAgICAgIHggPSAzMjc2NyAqICh4IC0gbWluWCkgKiBpbnZTaXplO1xyXG4gICAgICAgIHkgPSAzMjc2NyAqICh5IC0gbWluWSkgKiBpbnZTaXplO1xyXG5cclxuICAgICAgICB4ID0gKHggfCAoeCA8PCA4KSkgJiAweDAwRkYwMEZGO1xyXG4gICAgICAgIHggPSAoeCB8ICh4IDw8IDQpKSAmIDB4MEYwRjBGMEY7XHJcbiAgICAgICAgeCA9ICh4IHwgKHggPDwgMikpICYgMHgzMzMzMzMzMztcclxuICAgICAgICB4ID0gKHggfCAoeCA8PCAxKSkgJiAweDU1NTU1NTU1O1xyXG5cclxuICAgICAgICB5ID0gKHkgfCAoeSA8PCA4KSkgJiAweDAwRkYwMEZGO1xyXG4gICAgICAgIHkgPSAoeSB8ICh5IDw8IDQpKSAmIDB4MEYwRjBGMEY7XHJcbiAgICAgICAgeSA9ICh5IHwgKHkgPDwgMikpICYgMHgzMzMzMzMzMztcclxuICAgICAgICB5ID0gKHkgfCAoeSA8PCAxKSkgJiAweDU1NTU1NTU1O1xyXG5cclxuICAgICAgICByZXR1cm4geCB8ICh5IDw8IDEpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZpbmQgdGhlIGxlZnRtb3N0IG5vZGUgb2YgYSBwb2x5Z29uIHJpbmdcclxuICAgIGZ1bmN0aW9uIGdldExlZnRtb3N0KHN0YXJ0KSB7XHJcbiAgICAgICAgdmFyIHAgPSBzdGFydCxcclxuICAgICAgICAgICAgbGVmdG1vc3QgPSBzdGFydDtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGlmIChwLnggPCBsZWZ0bW9zdC54KSBsZWZ0bW9zdCA9IHA7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQ7XHJcbiAgICAgICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xyXG5cclxuICAgICAgICByZXR1cm4gbGVmdG1vc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgYSBwb2ludCBsaWVzIHdpdGhpbiBhIGNvbnZleCB0cmlhbmdsZVxyXG4gICAgZnVuY3Rpb24gcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHB4LCBweSkge1xyXG4gICAgICAgIHJldHVybiAoY3ggLSBweCkgKiAoYXkgLSBweSkgLSAoYXggLSBweCkgKiAoY3kgLSBweSkgPj0gMCAmJlxyXG4gICAgICAgICAgICAoYXggLSBweCkgKiAoYnkgLSBweSkgLSAoYnggLSBweCkgKiAoYXkgLSBweSkgPj0gMCAmJlxyXG4gICAgICAgICAgICAoYnggLSBweCkgKiAoY3kgLSBweSkgLSAoY3ggLSBweCkgKiAoYnkgLSBweSkgPj0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjaGVjayBpZiBhIGRpYWdvbmFsIGJldHdlZW4gdHdvIHBvbHlnb24gbm9kZXMgaXMgdmFsaWQgKGxpZXMgaW4gcG9seWdvbiBpbnRlcmlvcilcclxuICAgIGZ1bmN0aW9uIGlzVmFsaWREaWFnb25hbChhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIGEubmV4dC5pICE9PSBiLmkgJiYgYS5wcmV2LmkgIT09IGIuaSAmJiAhaW50ZXJzZWN0c1BvbHlnb24oYSwgYikgJiZcclxuICAgICAgICAgICAgbG9jYWxseUluc2lkZShhLCBiKSAmJiBsb2NhbGx5SW5zaWRlKGIsIGEpICYmIG1pZGRsZUluc2lkZShhLCBiKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBzaWduZWQgYXJlYSBvZiBhIHRyaWFuZ2xlXHJcbiAgICBmdW5jdGlvbiBhcmVhKHAsIHEsIHIpIHtcclxuICAgICAgICByZXR1cm4gKHEueSAtIHAueSkgKiAoci54IC0gcS54KSAtIChxLnggLSBwLngpICogKHIueSAtIHEueSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgdHdvIHBvaW50cyBhcmUgZXF1YWxcclxuICAgIGZ1bmN0aW9uIGVxdWFscyhwMSwgcDIpIHtcclxuICAgICAgICByZXR1cm4gcDEueCA9PT0gcDIueCAmJiBwMS55ID09PSBwMi55O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNoZWNrIGlmIHR3byBzZWdtZW50cyBpbnRlcnNlY3RcclxuICAgIGZ1bmN0aW9uIGludGVyc2VjdHMocDEsIHExLCBwMiwgcTIpIHtcclxuICAgICAgICBpZiAoKGVxdWFscyhwMSwgcTEpICYmIGVxdWFscyhwMiwgcTIpKSB8fFxyXG4gICAgICAgICAgICAoZXF1YWxzKHAxLCBxMikgJiYgZXF1YWxzKHAyLCBxMSkpKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gYXJlYShwMSwgcTEsIHAyKSA+IDAgIT09IGFyZWEocDEsIHExLCBxMikgPiAwICYmXHJcbiAgICAgICAgICAgIGFyZWEocDIsIHEyLCBwMSkgPiAwICE9PSBhcmVhKHAyLCBxMiwgcTEpID4gMDtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjaGVjayBpZiBhIHBvbHlnb24gZGlhZ29uYWwgaW50ZXJzZWN0cyBhbnkgcG9seWdvbiBzZWdtZW50c1xyXG4gICAgZnVuY3Rpb24gaW50ZXJzZWN0c1BvbHlnb24oYSwgYikge1xyXG4gICAgICAgIHZhciBwID0gYTtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGlmIChwLmkgIT09IGEuaSAmJiBwLm5leHQuaSAhPT0gYS5pICYmIHAuaSAhPT0gYi5pICYmIHAubmV4dC5pICE9PSBiLmkgJiZcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3RzKHAsIHAubmV4dCwgYSwgYikpIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBwID0gcC5uZXh0O1xyXG4gICAgICAgIH0gd2hpbGUgKHAgIT09IGEpO1xyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgYSBwb2x5Z29uIGRpYWdvbmFsIGlzIGxvY2FsbHkgaW5zaWRlIHRoZSBwb2x5Z29uXHJcbiAgICBmdW5jdGlvbiBsb2NhbGx5SW5zaWRlKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gYXJlYShhLnByZXYsIGEsIGEubmV4dCkgPCAwID9cclxuICAgICAgICAgICAgYXJlYShhLCBiLCBhLm5leHQpID49IDAgJiYgYXJlYShhLCBhLnByZXYsIGIpID49IDAgOlxyXG4gICAgICAgICAgICBhcmVhKGEsIGIsIGEucHJldikgPCAwIHx8IGFyZWEoYSwgYS5uZXh0LCBiKSA8IDA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2hlY2sgaWYgdGhlIG1pZGRsZSBwb2ludCBvZiBhIHBvbHlnb24gZGlhZ29uYWwgaXMgaW5zaWRlIHRoZSBwb2x5Z29uXHJcbiAgICBmdW5jdGlvbiBtaWRkbGVJbnNpZGUoYSwgYikge1xyXG4gICAgICAgIHZhciBwID0gYSxcclxuICAgICAgICAgICAgaW5zaWRlID0gZmFsc2UsXHJcbiAgICAgICAgICAgIHB4ID0gKGEueCArIGIueCkgLyAyLFxyXG4gICAgICAgICAgICBweSA9IChhLnkgKyBiLnkpIC8gMjtcclxuICAgICAgICBkbyB7XHJcbiAgICAgICAgICAgIGlmICgoKHAueSA+IHB5KSAhPT0gKHAubmV4dC55ID4gcHkpKSAmJiBwLm5leHQueSAhPT0gcC55ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgKHB4IDwgKHAubmV4dC54IC0gcC54KSAqIChweSAtIHAueSkgLyAocC5uZXh0LnkgLSBwLnkpICsgcC54KSlcclxuICAgICAgICAgICAgICAgIGluc2lkZSA9ICFpbnNpZGU7XHJcbiAgICAgICAgICAgIHAgPSBwLm5leHQ7XHJcbiAgICAgICAgfSB3aGlsZSAocCAhPT0gYSk7XHJcblxyXG4gICAgICAgIHJldHVybiBpbnNpZGU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbGluayB0d28gcG9seWdvbiB2ZXJ0aWNlcyB3aXRoIGEgYnJpZGdlOyBpZiB0aGUgdmVydGljZXMgYmVsb25nIHRvIHRoZSBzYW1lIHJpbmcsIGl0IHNwbGl0cyBwb2x5Z29uIGludG8gdHdvO1xyXG4gICAgLy8gaWYgb25lIGJlbG9uZ3MgdG8gdGhlIG91dGVyIHJpbmcgYW5kIGFub3RoZXIgdG8gYSBob2xlLCBpdCBtZXJnZXMgaXQgaW50byBhIHNpbmdsZSByaW5nXHJcbiAgICBmdW5jdGlvbiBzcGxpdFBvbHlnb24oYSwgYikge1xyXG4gICAgICAgIHZhciBhMiA9IG5ldyBOb2RlKGEuaSwgYS54LCBhLnkpLFxyXG4gICAgICAgICAgICBiMiA9IG5ldyBOb2RlKGIuaSwgYi54LCBiLnkpLFxyXG4gICAgICAgICAgICBhbiA9IGEubmV4dCxcclxuICAgICAgICAgICAgYnAgPSBiLnByZXY7XHJcblxyXG4gICAgICAgIGEubmV4dCA9IGI7XHJcbiAgICAgICAgYi5wcmV2ID0gYTtcclxuXHJcbiAgICAgICAgYTIubmV4dCA9IGFuO1xyXG4gICAgICAgIGFuLnByZXYgPSBhMjtcclxuXHJcbiAgICAgICAgYjIubmV4dCA9IGEyO1xyXG4gICAgICAgIGEyLnByZXYgPSBiMjtcclxuXHJcbiAgICAgICAgYnAubmV4dCA9IGIyO1xyXG4gICAgICAgIGIyLnByZXYgPSBicDtcclxuXHJcbiAgICAgICAgcmV0dXJuIGIyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNyZWF0ZSBhIG5vZGUgYW5kIG9wdGlvbmFsbHkgbGluayBpdCB3aXRoIHByZXZpb3VzIG9uZSAoaW4gYSBjaXJjdWxhciBkb3VibHkgbGlua2VkIGxpc3QpXHJcbiAgICBmdW5jdGlvbiBpbnNlcnROb2RlKGksIHgsIHksIGxhc3QpIHtcclxuICAgICAgICB2YXIgcCA9IG5ldyBOb2RlKGksIHgsIHkpO1xyXG5cclxuICAgICAgICBpZiAoIWxhc3QpIHtcclxuICAgICAgICAgICAgcC5wcmV2ID0gcDtcclxuICAgICAgICAgICAgcC5uZXh0ID0gcDtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcC5uZXh0ID0gbGFzdC5uZXh0O1xyXG4gICAgICAgICAgICBwLnByZXYgPSBsYXN0O1xyXG4gICAgICAgICAgICBsYXN0Lm5leHQucHJldiA9IHA7XHJcbiAgICAgICAgICAgIGxhc3QubmV4dCA9IHA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGUocCkge1xyXG4gICAgICAgIHAubmV4dC5wcmV2ID0gcC5wcmV2O1xyXG4gICAgICAgIHAucHJldi5uZXh0ID0gcC5uZXh0O1xyXG5cclxuICAgICAgICBpZiAocC5wcmV2WikgcC5wcmV2Wi5uZXh0WiA9IHAubmV4dFo7XHJcbiAgICAgICAgaWYgKHAubmV4dFopIHAubmV4dFoucHJldlogPSBwLnByZXZaO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIE5vZGUoaSwgeCwgeSkge1xyXG4gICAgICAgIC8vIHZlcnRpY2UgaW5kZXggaW4gY29vcmRpbmF0ZXMgYXJyYXlcclxuICAgICAgICB0aGlzLmkgPSBpO1xyXG5cclxuICAgICAgICAvLyB2ZXJ0ZXggY29vcmRpbmF0ZXNcclxuICAgICAgICB0aGlzLnggPSB4O1xyXG4gICAgICAgIHRoaXMueSA9IHk7XHJcblxyXG4gICAgICAgIC8vIHByZXZpb3VzIGFuZCBuZXh0IHZlcnRpY2Ugbm9kZXMgaW4gYSBwb2x5Z29uIHJpbmdcclxuICAgICAgICB0aGlzLnByZXYgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubmV4dCA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIHotb3JkZXIgY3VydmUgdmFsdWVcclxuICAgICAgICB0aGlzLnogPSBudWxsO1xyXG5cclxuICAgICAgICAvLyBwcmV2aW91cyBhbmQgbmV4dCBub2RlcyBpbiB6LW9yZGVyXHJcbiAgICAgICAgdGhpcy5wcmV2WiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5uZXh0WiA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vIGluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYSBzdGVpbmVyIHBvaW50XHJcbiAgICAgICAgdGhpcy5zdGVpbmVyID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gcmV0dXJuIGEgcGVyY2VudGFnZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHBvbHlnb24gYXJlYSBhbmQgaXRzIHRyaWFuZ3VsYXRpb24gYXJlYTtcclxuICAgIC8vIHVzZWQgdG8gdmVyaWZ5IGNvcnJlY3RuZXNzIG9mIHRyaWFuZ3VsYXRpb25cclxuICAgIGVhcmN1dC5kZXZpYXRpb24gPSBmdW5jdGlvbiAoZGF0YSwgaG9sZUluZGljZXMsIGRpbSwgdHJpYW5nbGVzKSB7XHJcbiAgICAgICAgdmFyIGhhc0hvbGVzID0gaG9sZUluZGljZXMgJiYgaG9sZUluZGljZXMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBvdXRlckxlbiA9IGhhc0hvbGVzID8gaG9sZUluZGljZXNbMF0gKiBkaW0gOiBkYXRhLmxlbmd0aDtcclxuXHJcbiAgICAgICAgdmFyIHBvbHlnb25BcmVhID0gTWF0aC5hYnMoc2lnbmVkQXJlYShkYXRhLCAwLCBvdXRlckxlbiwgZGltKSk7XHJcbiAgICAgICAgaWYgKGhhc0hvbGVzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBob2xlSW5kaWNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gaG9sZUluZGljZXNbaV0gKiBkaW07XHJcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gaSA8IGxlbiAtIDEgPyBob2xlSW5kaWNlc1tpICsgMV0gKiBkaW0gOiBkYXRhLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHBvbHlnb25BcmVhIC09IE1hdGguYWJzKHNpZ25lZEFyZWEoZGF0YSwgc3RhcnQsIGVuZCwgZGltKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB0cmlhbmdsZXNBcmVhID0gMDtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgIHZhciBhID0gdHJpYW5nbGVzW2ldICogZGltO1xyXG4gICAgICAgICAgICB2YXIgYiA9IHRyaWFuZ2xlc1tpICsgMV0gKiBkaW07XHJcbiAgICAgICAgICAgIHZhciBjID0gdHJpYW5nbGVzW2kgKyAyXSAqIGRpbTtcclxuICAgICAgICAgICAgdHJpYW5nbGVzQXJlYSArPSBNYXRoLmFicyhcclxuICAgICAgICAgICAgICAgIChkYXRhW2FdIC0gZGF0YVtjXSkgKiAoZGF0YVtiICsgMV0gLSBkYXRhW2EgKyAxXSkgLVxyXG4gICAgICAgICAgICAgICAgKGRhdGFbYV0gLSBkYXRhW2JdKSAqIChkYXRhW2MgKyAxXSAtIGRhdGFbYSArIDFdKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcG9seWdvbkFyZWEgPT09IDAgJiYgdHJpYW5nbGVzQXJlYSA9PT0gMCA/IDAgOlxyXG4gICAgICAgICAgICBNYXRoLmFicygodHJpYW5nbGVzQXJlYSAtIHBvbHlnb25BcmVhKSAvIHBvbHlnb25BcmVhKTtcclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pIHtcclxuICAgICAgICB2YXIgc3VtID0gMDtcclxuICAgICAgICBmb3IgKHZhciBpID0gc3RhcnQsIGogPSBlbmQgLSBkaW07IGkgPCBlbmQ7IGkgKz0gZGltKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSAoZGF0YVtqXSAtIGRhdGFbaV0pICogKGRhdGFbaSArIDFdICsgZGF0YVtqICsgMV0pO1xyXG4gICAgICAgICAgICBqID0gaTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1bTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB0dXJuIGEgcG9seWdvbiBpbiBhIG11bHRpLWRpbWVuc2lvbmFsIGFycmF5IGZvcm0gKGUuZy4gYXMgaW4gR2VvSlNPTikgaW50byBhIGZvcm0gRWFyY3V0IGFjY2VwdHNcclxuICAgIGVhcmN1dC5mbGF0dGVuID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgZGltID0gZGF0YVswXVswXS5sZW5ndGgsXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHt2ZXJ0aWNlczogW10sIGhvbGVzOiBbXSwgZGltZW5zaW9uczogZGltfSxcclxuICAgICAgICAgICAgaG9sZUluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YVtpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCBkaW07IGQrKykgcmVzdWx0LnZlcnRpY2VzLnB1c2goZGF0YVtpXVtqXVtkXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBob2xlSW5kZXggKz0gZGF0YVtpIC0gMV0ubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmhvbGVzLnB1c2goaG9sZUluZGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxufSIsImV4cG9ydCBjbGFzcyBXZWJnbE1hbmFnZXIge1xyXG4gICAgd29ya2VyQ2FsbGJhY2s6IGFueTtcclxuICAgIHdvcmtlcjogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkgeyAgICAgICBcclxuICAgICAgICB0aGlzLndvcmtlciA9IHt9O1xyXG4gICAgICAgIHRoaXMud29ya2VyQ2FsbGJhY2sgPSB7fTtcclxuICAgICAgICB0aGlzLmluaXRXb3JrZXJzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFdvcmtlcnMoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IGNhbGxCYWNrID0gdGhpcy53b3JrZXJDYWxsYmFjaztcclxuXHJcbiAgICAgICAgICAgIGxldCBzb3VyY2UgPSAnKCcgKyB3aW5kb3dbXCJ3ZWJnbENhY3VsYXRlXCJdICsgJykoKSc7XHJcbiAgICAgICAgICAgIGxldCBibG9iID0gbmV3IEJsb2IoW3NvdXJjZV0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy53b3JrZXIgPSBuZXcgV29ya2VyKHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTtcclxuICAgICAgICAgICAgdGhpcy53b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IGUuZGF0YTtcclxuICAgICAgICAgICAgICAgIGxldCB1aWQgPSBkYXRhLnVpZDtcclxuICAgICAgICAgICAgICAgIGxldCB3ZWJnbENhbGxCYWNrID0gY2FsbEJhY2tbdWlkXTtcclxuICAgICAgICAgICAgICAgIC8vIGFkZCB3ZWJnbEluZGV4T2JqIHRvIGRhdGE/Pz8gd2ViZ2xJbmRleE9iaiBpcyB0aGUgcmVzdWx0IG9mIGVhcmN1dFxyXG4gICAgICAgICAgICAgICAgaWYgKHdlYmdsQ2FsbEJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVwbGF5ID0gZGF0YS5tZXNzYWdlRGF0YS5yZXBsYXlzWzBdOyAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYocmVwbGF5KSAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5LlBvbHlnb24gJiYgKHJlcGxheS5Qb2x5Z29uLndlYmdsSW5kZXhPYmogPSBkYXRhLndlYmdsUG9seWdvbkluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2ViZ2xDYWxsQmFjayhkYXRhLm1lc3NhZ2VEYXRhLCBkYXRhLm1ldGhvZEluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBjYWxsQmFja1t1aWRdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9ICAgXHJcbiAgICB9XHJcblxyXG4gICAgcG9zdE1lc3NhZ2UoZGF0YSkge1xyXG4gICAgICAgIGxldCB7ICBcclxuICAgICAgICAgICAgcmVwbGF5cywgICAgICAgICAgXHJcbiAgICAgICAgICAgIHVpZCxcclxuICAgICAgICAgICAgY2FsbEJhY2ssXHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRhLFxyXG4gICAgICAgICAgICBtZXRob2RJbmZvXHJcbiAgICAgICAgfSA9IGRhdGE7XHJcblxyXG4gICAgICAgIGlmIChjYWxsQmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLndvcmtlckNhbGxiYWNrW3VpZF0gPSBjYWxsQmFjazsgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBvc3RNZXNzYWdlID0ge1xyXG4gICAgICAgICAgICByZXBsYXlzLFxyXG4gICAgICAgICAgICB1aWQ6IHVpZCxcclxuICAgICAgICAgICAgbWVzc2FnZURhdGEsXHJcbiAgICAgICAgICAgIG1ldGhvZEluZm9cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy53b3JrZXIucG9zdE1lc3NhZ2UocG9zdE1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMud29ya2VyLnRlcm1pbmF0ZSgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgVmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZSB9IGZyb20gXCIuL3ZlY3RvclRpbGVMYXllclRocmVhZE1vZGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBXb3JrZXJNYW5hZ2VyIHtcclxuICAgIHdvcmtlckNvdW50OiBudW1iZXI7XHJcbiAgICB3b3JrZXJzOiBXb3JrZXJbXTtcclxuICAgIGN1cnJlbnRXb3JrZXJJbmRleDtcclxuXHJcbiAgICBpbml0ZWQ6IGJvb2xlYW47XHJcbiAgICB3b3JrZXJDYWxsYmFjazogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRocmVhZE1vZGUsIHdvcmtlckNvdW50OiBudW1iZXIpIHtcclxuICAgICAgICBpZiAodGhyZWFkTW9kZSA9PT0gVmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZS5TaW5nbGVCYWNrZ3JvdW5kV29ya2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMud29ya2VyQ291bnQgPSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKHdvcmtlckNvdW50KSB8fCB3b3JrZXJDb3VudCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndvcmtlckNvdW50ID0gTWF0aC5tYXgoTWF0aC5mbG9vcih3aW5kb3cubmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3kgLyAyKSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBwYXNzZWQgYnkgcGFybVxyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXJDb3VudCA9IHdvcmtlckNvdW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3VycmVudFdvcmtlckluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLndvcmtlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLndvcmtlckNhbGxiYWNrID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdFdvcmtlcnMoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IGNhbGxiYWNrcyA9IHRoaXMud29ya2VyQ2FsbGJhY2s7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy53b3JrZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlID0gJygnICsgd2luZG93W1wib2xJbml0XCJdICsgJykoKSc7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmxvYiA9IG5ldyBCbG9iKFtzb3VyY2VdKTtcclxuICAgICAgICAgICAgICAgIGxldCB3b3JrZXIgPSBuZXcgV29ya2VyKHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpKTtcclxuICAgICAgICAgICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXRob2RJbmZvID0gZS5kYXRhW1wibWV0aG9kSW5mb1wiXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZURhdGEgPSBlLmRhdGFbXCJtZXNzYWdlRGF0YVwiXTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdWlkID0gbWV0aG9kSW5mby51aWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNhbGxiYWNrID0gY2FsbGJhY2tzW3VpZF07ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZihmYWxzZSAmJiBtZXRob2RJbmZvLm1ldGhvZE5hbWUgPT09ICdjcmVhdGVSZXBsYXknKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcGxheXMgPSBtZXNzYWdlRGF0YS5yZXBsYXlzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKDxhbnk+d2luZG93KS53ZWJnbE1hbmFnZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5czogcmVwbGF5cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpZDogdWlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEJhY2s6IGNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZURhdGE6IG1lc3NhZ2VEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kSW5mbzogbWV0aG9kSW5mb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTsgICBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobWVzc2FnZURhdGEsIG1ldGhvZEluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSAgXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhbGxiYWNrc1t1aWRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXJzLnB1c2god29ya2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmluaXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwb3N0TWVzc2FnZSh1aWQ6IHN0cmluZywgbWV0aG9kTmFtZTogc3RyaW5nLCBtZXNzYWdlRGF0YSwgY2FsbGJhY2tJbmZvLCB3b3JrZXJJbmRleCkge1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHdvcmtlckluZGV4ICE9PSBcIm51bWJlclwiIHx8IGlzTmFOKHdvcmtlckluZGV4KSB8fCB3b3JrZXJJbmRleCA+PSB0aGlzLndvcmtlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHdvcmtlckluZGV4ID0gdGhpcy5jdXJyZW50V29ya2VySW5kZXggPSAodGhpcy5jdXJyZW50V29ya2VySW5kZXggKyAxKSAlIHRoaXMud29ya2Vycy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbWV0aG9kSW5mbyA9IHtcclxuICAgICAgICAgICAgdWlkOiB1aWQsXHJcbiAgICAgICAgICAgIG1ldGhvZE5hbWU6IG1ldGhvZE5hbWUsXHJcbiAgICAgICAgICAgIHdvcmtlcklkOiB3b3JrZXJJbmRleFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChjYWxsYmFja0luZm8pIHtcclxuICAgICAgICAgICAgdGhpcy53b3JrZXJDYWxsYmFja1t1aWRdID0gY2FsbGJhY2tJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBvc3RNZXNzYWdlID0ge1xyXG4gICAgICAgICAgICBtZXRob2RJbmZvOiBtZXRob2RJbmZvLFxyXG4gICAgICAgICAgICBtZXNzYWdlRGF0YTogbWVzc2FnZURhdGFcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMud29ya2Vyc1t3b3JrZXJJbmRleF0ucG9zdE1lc3NhZ2UocG9zdE1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiB3b3JrZXJJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLndvcmtlckNhbGxiYWNrID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMud29ya2Vycy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgdGhpcy53b3JrZXJzW2luZGV4XS50ZXJtaW5hdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9