/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/main.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/filter/geoFilter.ts":
/*!*********************************!*\
  !*** ./src/filter/geoFilter.ts ***!
  \*********************************/
/*! exports provided: GeoFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoFilter", function() { return GeoFilter; });
var GeoFilter = /** @class */ (function () {
    function GeoFilter(filterItems) {
        this.filterItems = filterItems || [];
        this.replacedValueToIndex = false;
    }
    GeoFilter.prototype.addFilterItem = function (filterItem) {
        this.filterItems.push(filterItem);
    };
    GeoFilter.prototype.initialize = function () {
        this.initializeCore();
        this.initialized = true;
    };
    GeoFilter.prototype.initializeCore = function () { };
    GeoFilter.prototype.matchOLFeature = function (feature, zoom) {
        if (!this.initialized) {
            this.initialize();
        }
        return this.matchFeatureCore(feature, zoom);
    };
    GeoFilter.prototype.replaceVaulesToPbfIndex = function (pbfLayer) {
        this.replaceVaulesToPbfIndexCore(pbfLayer);
    };
    return GeoFilter;
}());



/***/ }),

/***/ "./src/filter/geoFilterItem.ts":
/*!*************************************!*\
  !*** ./src/filter/geoFilterItem.ts ***!
  \*************************************/
/*! exports provided: GeoFilterItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoFilterItem", function() { return GeoFilterItem; });
var GeoFilterItem = /** @class */ (function () {
    function GeoFilterItem(key, operator, value) {
        this.key = key;
        this.operator = operator;
        this.value = value;
    }
    GeoFilterItem.createFilterItem = function (filterItemString) {
        var operator = filterItemString.match(this.operatorRegex)[0];
        var parts = filterItemString.split(operator);
        var item = new GeoFilterItem(parts[0], operator, parts[1]);
        return item;
    };
    GeoFilterItem.operatorRegex = new RegExp("[<>!=]+", "g");
    return GeoFilterItem;
}());



/***/ }),

/***/ "./src/filter/geoNumberAttributeFilter.ts":
/*!************************************************!*\
  !*** ./src/filter/geoNumberAttributeFilter.ts ***!
  \************************************************/
/*! exports provided: GeoNumberAttributeFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoNumberAttributeFilter", function() { return GeoNumberAttributeFilter; });
/* harmony import */ var _geoRangeFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoRangeFilter */ "./src/filter/geoRangeFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoNumberAttributeFilter = /** @class */ (function (_super) {
    __extends(GeoNumberAttributeFilter, _super);
    function GeoNumberAttributeFilter(filterItems) {
        return _super.call(this, filterItems) || this;
    }
    return GeoNumberAttributeFilter;
}(_geoRangeFilter__WEBPACK_IMPORTED_MODULE_0__["GeoRangeFilter"]));



/***/ }),

/***/ "./src/filter/geoRangeFilter.ts":
/*!**************************************!*\
  !*** ./src/filter/geoRangeFilter.ts ***!
  \**************************************/
/*! exports provided: GeoRangeFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoRangeFilter", function() { return GeoRangeFilter; });
/* harmony import */ var _geoFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoFilter */ "./src/filter/geoFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoRangeFilter = /** @class */ (function (_super) {
    __extends(GeoRangeFilter, _super);
    function GeoRangeFilter(filterItems) {
        var _this = _super.call(this, filterItems) || this;
        _this.ranges = [];
        _this.allowedValues = [];
        _this.disallowedValues = [];
        return _this;
    }
    GeoRangeFilter.prototype.initializeCore = function () {
        this.filterItems.sort(function (a, b) { return +a.value - +b.value; });
        for (var i = 0; i < this.filterItems.length; i++) {
            var filterItem = this.filterItems[i];
            this.key = filterItem.key;
            var value = +filterItem.value;
            switch (filterItem.operator) {
                case ">":
                    this.ranges.push([value + 0.00001, Number.POSITIVE_INFINITY]);
                    break;
                case ">=":
                    this.ranges.push([value, Number.POSITIVE_INFINITY]);
                    break;
                case "!=":
                    this.disallowedValues.push(value);
                    break;
                case "=":
                    this.allowedValues.push(value);
                    break;
            }
        }
        for (var i = 0; i < this.filterItems.length; i++) {
            var filterItem = this.filterItems[i];
            var value = +filterItem.value;
            var range = GeoRangeFilter.getRange(this.ranges, value);
            switch (filterItem.operator) {
                case "<":
                    if (range) {
                        range[1] = value + 0.00001;
                    }
                    else {
                        range = [Number.NEGATIVE_INFINITY, value + 0.00001];
                        this.ranges.push(range);
                    }
                    break;
                case "<=":
                    if (range) {
                        range[1] = value;
                    }
                    else {
                        range = [Number.NEGATIVE_INFINITY, value];
                        this.ranges.push(range);
                    }
                    break;
            }
        }
    };
    GeoRangeFilter.prototype.matchFeatureCore = function (feature, zoom) {
        var currentValue;
        if (this.replacedValueToIndex) {
            currentValue = feature.properties[this.key];
        }
        else {
            currentValue = feature.properties[this.key];
        }
        return this.isInRange(+currentValue);
    };
    GeoRangeFilter.prototype.replaceVaulesToPbfIndexCore = function (pbfLayer) {
        this.replacedValueToIndex = true;
    };
    GeoRangeFilter.prototype.isInRange = function (currentValue) {
        if (this.disallowedValues.includes(currentValue)) {
            return false;
        }
        if (this.allowedValues.includes(currentValue)) {
            return true;
        }
        for (var i = 0; i < this.ranges.length; i++) {
            var range = this.ranges[i];
            if (range.length === 1) {
                if (currentValue >= range[0]) {
                    return true;
                }
            }
            else {
                if (currentValue >= range[0] && currentValue <= range[1]) {
                    return true;
                }
            }
        }
    };
    GeoRangeFilter.getRange = function (ranges, value) {
        for (var i = 0; i < ranges.length; i++) {
            var range = ranges[i];
            if (value >= range[0] && value <= range[1]) {
                return range;
            }
        }
        return null;
    };
    return GeoRangeFilter;
}(_geoFilter__WEBPACK_IMPORTED_MODULE_0__["GeoFilter"]));



/***/ }),

/***/ "./src/filter/geoRegexFilter.ts":
/*!**************************************!*\
  !*** ./src/filter/geoRegexFilter.ts ***!
  \**************************************/
/*! exports provided: GeoRegexFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoRegexFilter", function() { return GeoRegexFilter; });
/* harmony import */ var _geoFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoFilter */ "./src/filter/geoFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoRegexFilter = /** @class */ (function (_super) {
    __extends(GeoRegexFilter, _super);
    function GeoRegexFilter(filterItems) {
        return _super.call(this, filterItems) || this;
    }
    GeoRegexFilter.prototype.initializeCore = function () {
        var value = this.filterItems[0].value;
        value = value.slice(2, value.length - 1);
        this.regex = new RegExp(value, "g");
        this.key = this.filterItems[0].key;
    };
    GeoRegexFilter.prototype.matchFeatureCore = function (feature, zoom) {
        var currentValue;
        if (this.replacedValueToIndex) {
            currentValue = feature.properties[this.key];
        }
        else {
            currentValue = feature.properties[this.key];
        }
        if (!currentValue) {
            return false;
        }
        return currentValue.toString().match(this.regex) !== null;
    };
    GeoRegexFilter.prototype.replaceVaulesToPbfIndexCore = function (pbfLayer) {
        this.replacedValueToIndex = true;
    };
    return GeoRegexFilter;
}(_geoFilter__WEBPACK_IMPORTED_MODULE_0__["GeoFilter"]));



/***/ }),

/***/ "./src/filter/geoStringAttributeFilter.ts":
/*!************************************************!*\
  !*** ./src/filter/geoStringAttributeFilter.ts ***!
  \************************************************/
/*! exports provided: GeoStringAttributeFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoStringAttributeFilter", function() { return GeoStringAttributeFilter; });
/* harmony import */ var _geoFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoFilter */ "./src/filter/geoFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoStringAttributeFilter = /** @class */ (function (_super) {
    __extends(GeoStringAttributeFilter, _super);
    function GeoStringAttributeFilter(filterItems) {
        return _super.call(this, filterItems) || this;
    }
    GeoStringAttributeFilter.prototype.initializeCore = function () {
        var expectedValue = this.filterItems[0].value;
        expectedValue = expectedValue.slice(1, expectedValue.length - 1);
        this.expectedValues = expectedValue.split(",");
        this.key = this.filterItems[0].key;
    };
    GeoStringAttributeFilter.prototype.matchFeatureCore = function (feature, zoom) {
        var currentValue;
        var currentExpectedValues;
        if (this.replacedValueToIndex) {
            currentValue = feature.propertiesIndex[this.keyIndex];
            currentExpectedValues = this.expectedValueIndexs;
        }
        else {
            currentValue = feature.properties[this.key];
            currentExpectedValues = this.expectedValues;
        }
        switch (this.filterItems[0].operator) {
            case "=":
                return currentExpectedValues.includes(currentValue);
            case "!=":
            default:
                return !currentExpectedValues.includes(currentValue);
        }
    };
    GeoStringAttributeFilter.prototype.replaceVaulesToPbfIndexCore = function (pbfLayer) {
        if (!this.initialized) {
            this.initialize();
        }
        this.keyIndex = pbfLayer.keys.indexOf(this.key);
        var replacedExpectedVaules = [];
        for (var j = 0, jj = this.expectedValues.length; j < jj; j++) {
            var numberValue = +this.expectedValues[j];
            if (isNaN(numberValue)) {
                replacedExpectedVaules.push(pbfLayer.values.indexOf(this.expectedValues[j]));
            }
            else {
                replacedExpectedVaules.push(pbfLayer.values.indexOf(numberValue));
            }
        }
        this.expectedValueIndexs = replacedExpectedVaules;
        this.replacedValueToIndex = true;
    };
    return GeoStringAttributeFilter;
}(_geoFilter__WEBPACK_IMPORTED_MODULE_0__["GeoFilter"]));



/***/ }),

/***/ "./src/filter/geoZoomFilter.ts":
/*!*************************************!*\
  !*** ./src/filter/geoZoomFilter.ts ***!
  \*************************************/
/*! exports provided: GeoZoomFilter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoZoomFilter", function() { return GeoZoomFilter; });
/* harmony import */ var _geoRangeFilter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoRangeFilter */ "./src/filter/geoRangeFilter.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoZoomFilter = /** @class */ (function (_super) {
    __extends(GeoZoomFilter, _super);
    function GeoZoomFilter(filterItems) {
        return _super.call(this, filterItems) || this;
    }
    GeoZoomFilter.prototype.matchFeatureCore = function (feature, zoom) {
        return this.isInRange(zoom);
    };
    GeoZoomFilter.prototype.replaceVaulesToPbfIndexCore = function (pbfLayer) {
        this.replacedValueToIndex = true;
    };
    return GeoZoomFilter;
}(_geoRangeFilter__WEBPACK_IMPORTED_MODULE_0__["GeoRangeFilter"]));



/***/ }),

/***/ "./src/format/geoMvt.ts":
/*!******************************!*\
  !*** ./src/format/geoMvt.ts ***!
  \******************************/
/*! exports provided: GeoMVTFormat */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoMVTFormat", function() { return GeoMVTFormat; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var GeoMVTFormat = /** @class */ (function (_super) {
    __extends(GeoMVTFormat, _super);
    function GeoMVTFormat(styleJSonCache, options) {
        var _this = this;
        options.layerName = options.layerName ? options.layerName : "layerName";
        _this = _super.call(this, options) || this;
        _this.isMultithread = options.multithread;
        _this.minimalist = options.minimalist;
        _this.maxDataZoom = options.maxDataZoom ? options.maxDataZoom : 14;
        _this.layerName = options.layerName;
        _this.styleJsonCache = styleJSonCache;
        _this.maxDataZoomCache = {};
        _this.registeredLoadEvents = {};
        _this.lruCache = new ol.structs.LRUCache(15);
        _this.sourceCache = {};
        return _this;
    }
    GeoMVTFormat.prototype.getLayerName = function () {
        return this.layerName;
    };
    GeoMVTFormat.prototype.registerTileLoadEvent = function (tile, success, failure, callback) {
        var hasRequested = true;
        var requestKey = tile.requestTileCoord.join(",") + "," + tile.tileCoord[0];
        var loadEventInfo = {
            tile: tile,
            successFunction: success,
            failureFunction: failure,
            callback: callback
        };
        if (this.registeredLoadEvents[requestKey] === undefined) {
            this.registeredLoadEvents[requestKey] = [];
            hasRequested = false;
        }
        this.registeredLoadEvents[requestKey].push(loadEventInfo);
        return hasRequested;
    };
    GeoMVTFormat.prototype.readFeaturesAndCreateInstructsNew = function (source, requestTileCoord, tileCoord) {
        var pbf = new ol.ext.PBF((source));
        var pbfLayers = pbf.readFields(ol.format.MVT.pbfReaders_.layers, {});
        var pbfLayer;
        var features = [];
        var featureIndex = -1;
        var zoomMatchedGeoStylesGroupByLayerId = this.styleJsonCache.geoStyleGroupByZoom[tileCoord[0]];
        if (!zoomMatchedGeoStylesGroupByLayerId) {
            return features;
        }
        var pbfLayerNamesWithGeoStyle = [];
        for (var pbfLayerName in zoomMatchedGeoStylesGroupByLayerId) {
            pbfLayerNamesWithGeoStyle.push(pbfLayerName);
        }
        var instructsCache = [];
        for (var name_1 in pbfLayers) {
            if (this.layers_ && this.layers_.indexOf(name_1) === -1) {
                continue;
            }
            if (pbfLayerNamesWithGeoStyle.indexOf(name_1) === -1) {
                continue;
            }
            pbfLayer = pbfLayers[name_1];
            var cacheTrees = zoomMatchedGeoStylesGroupByLayerId[name_1];
            if (cacheTrees && cacheTrees.length > 0) {
                this.replaceFiltersToIndexOfPbfLayer(cacheTrees, pbfLayer);
                var _loop_1 = function (i) {
                    var rawFeature = ol.format.MVT.readRawFeature_(pbf, pbfLayer, i);
                    var feature_1 = void 0;
                    var _loop_2 = function (j) {
                        var cacheTree = cacheTrees[j];
                        var treeIndex = cacheTree.treeIndex;
                        if (instructsCache[treeIndex] === undefined) {
                            instructsCache[treeIndex] = {
                                min: 10,
                                max: -10
                            };
                        }
                        var matchedNode;
                        var checkNodeMatched = function (node) {
                            var styleJsonCacheItem = node.data;
                            var matched = false;
                            if (styleJsonCacheItem.filterGroup.length > 0) {
                                for (var i_1 = 0; i_1 < styleJsonCacheItem.filterGroup.length; i_1++) {
                                    var filters = styleJsonCacheItem.filterGroup[i_1];
                                    var groupMatched = true;
                                    for (var j_1 = 0; j_1 < filters.length; j_1++) {
                                        var filter = filters[j_1];
                                        if (!filter.matchOLFeature(rawFeature, tileCoord[0])) {
                                            groupMatched = false;
                                            break;
                                        }
                                    }
                                    if (groupMatched) {
                                        matched = true;
                                        break;
                                    }
                                }
                            }
                            else {
                                matched = true;
                            }
                            return matched;
                        };
                        var selectNode = function (node) {
                            matchedNode = node.data;
                        };
                        cacheTree.traverseNode(checkNodeMatched, selectNode);
                        if (matchedNode) {
                            if (feature_1 === undefined) {
                                feature_1 = this_1.createFeature_(pbf, rawFeature);
                                features.push(feature_1);
                                featureIndex += 1;
                            }
                            var zindex = void 0;
                            if (cacheTree.root.data.zIndex) {
                                zindex = rawFeature.properties[cacheTree.root.data.zIndex];
                                feature_1.properties_[cacheTree.root.data.zIndex] = zindex;
                            }
                            if (isNaN(zindex)) {
                                zindex = 0;
                            }
                            if (instructsCache[treeIndex][zindex] === undefined) {
                                instructsCache[treeIndex][zindex] = [];
                                if (zindex < instructsCache[treeIndex]["min"]) {
                                    instructsCache[treeIndex]["min"] = zindex;
                                }
                                if (zindex > instructsCache[treeIndex]["max"]) {
                                    instructsCache[treeIndex]["max"] = zindex;
                                }
                            }
                            instructsCache[treeIndex][zindex].push([featureIndex, matchedNode]);
                            feature_1.extent_ = undefined;
                        }
                    };
                    for (var j = 0; j < cacheTrees.length; j++) {
                        _loop_2(j);
                    }
                };
                var this_1 = this;
                for (var i = 0; i < pbfLayer.length; i++) {
                    _loop_1(i);
                }
            }
            this.extent_ = pbfLayer ? [0, 0, pbfLayer.extent, pbfLayer.extent] : null;
        }
        var instructs = [];
        for (var i = 0; i < instructsCache.length; i++) {
            var instructsInOneTree = instructsCache[i];
            if (instructsInOneTree) {
                for (var j = instructsInOneTree.min, jj = instructsInOneTree.max; j <= jj; j++) {
                    var instructsInOneZIndex = instructsInOneTree[j];
                    if (instructsInOneZIndex) {
                        var childrenInstructs = [];
                        for (var h = 0; h < instructsInOneZIndex.length; h++) {
                            var instruct = instructsInOneZIndex[h];
                            var feature = features[instruct[0]];
                            feature.styleId = feature.styleId ? feature.styleId : {};
                            if (instruct[1].geoStyle) {
                                feature.styleId[instruct[1].geoStyle.id] = 0;
                                instructs.push([instruct[0], instruct[1].geoStyle, i]);
                            }
                            if (instruct[1].childrenGeoStyles) {
                                for (var k = 0; k < instruct[1].childrenGeoStyles.length; k++) {
                                    feature.styleId[instruct[1].childrenGeoStyles[k].id] = 1;
                                    childrenInstructs.push([instruct[0], instruct[1].childrenGeoStyles[k], i]);
                                }
                            }
                        }
                        Array.prototype.push.apply(instructs, childrenInstructs);
                    }
                }
            }
        }
        var subTileCachedInstruct = {};
        var offsetZ = tileCoord[0] - requestTileCoord[0];
        // TODO Get Extent 
        var tileSize = 4096 / Math.pow(2, offsetZ);
        var tileRange = this.getTileRange(requestTileCoord, tileCoord[0]);
        var tiles = {};
        for (var x = tileRange[0]; x <= tileRange[2]; x++) {
            var minX = (x - tileRange[0]) * tileSize;
            var maxX = (x - tileRange[0] + 1) * tileSize;
            for (var y = tileRange[3]; y >= tileRange[1]; y--) {
                var minY = (tileRange[3] - y) * tileSize;
                var maxY = (tileRange[3] - y + 1) * tileSize;
                tiles["" + [x, y]] = [minX, minY, maxX, maxY];
            }
        }
        for (var i = 0; i < instructs.length; i++) {
            var instruct = instructs[i];
            var feature_2 = features[instruct[0]];
            var featureExtent = feature_2.getExtent();
            var featureTileRange = this.getFeatureTileRange(featureExtent, 4096, tileSize, requestTileCoord, offsetZ);
            for (var x = tileRange[0] > featureTileRange[0] ? tileRange[0] : featureTileRange[0], xx = featureTileRange[2] > tileRange[2] ? tileRange[2] : featureTileRange[2]; x <= xx; x++) {
                for (var y = tileRange[1] > featureTileRange[1] ? tileRange[1] : featureTileRange[1], yy = featureTileRange[3] > tileRange[3] ? tileRange[3] : featureTileRange[3]; y <= yy; y++) {
                    var tileKey = "" + [x, y];
                    var tileExtent = tiles[tileKey];
                    if (subTileCachedInstruct[tileKey] === undefined) {
                        subTileCachedInstruct[tileKey] = [];
                    }
                    subTileCachedInstruct[tileKey].push(instruct);
                }
            }
        }
        return [features, subTileCachedInstruct];
    };
    GeoMVTFormat.prototype.getCachedSource = function (tileCoord) {
        return this.sourceCache[tileCoord];
    };
    GeoMVTFormat.prototype.tryLoadTileFromCacheOrRegosterLoadEvent = function (tileCoord, originalZoom, cacheTileInfo) {
        var hasRequested = true;
        var tileCoordKey = tileCoord.join(",") + "," + originalZoom;
        if (this.lruCache.containsKey(tileCoordKey)) {
            var oTile = this.lruCache.get(tileCoordKey);
            this.cachedTileCallback(oTile, [cacheTileInfo]);
        }
        else {
            if (this.registeredLoadEvents[tileCoordKey] === undefined) {
                this.registeredLoadEvents[tileCoordKey] = [];
                hasRequested = false;
            }
            this.registeredLoadEvents[tileCoordKey].push(cacheTileInfo);
        }
        return hasRequested;
    };
    GeoMVTFormat.prototype.addSourceToCache = function (source, zoom, options) {
        if (this.sourceCache[options.tileCoord] === undefined) {
            this.sourceCache[options.tileCoord] = source;
        }
        var instructsTree = this.readFeaturesAndCreateInstructTrees(source, zoom, options);
        var instructs = this.getInstructs(instructsTree);
        var subTileInstructCaches = this.createSubTileInstructCaches(instructs, options);
        var sourceProject = this.readProjection(source);
        var tileCoordKey = options.tileCoord.join(",") + "," + zoom;
        var lastExtent = this.getLastExtent();
        var oTile = { subTileInstructCaches: subTileInstructCaches, sourceProject: sourceProject, lastExtent: lastExtent };
        this.lruCache.set(tileCoordKey, oTile);
        var cachedTileInfo = this.registeredLoadEvents[tileCoordKey];
        delete this.registeredLoadEvents[tileCoordKey];
        this.cachedTileCallback(oTile, cachedTileInfo);
    };
    GeoMVTFormat.prototype.readFeaturesAndCreateInstructTrees = function (source, zoom, options) {
        var pbf = new ol.ext.PBF((source));
        var pbfLayers = pbf.readFields(ol.format.MVT.pbfReaders_.layers, {});
        var features = [];
        var pbfLayer;
        var zoomMatchedGeoStylesGroupByLayerId = this.styleJsonCache.geoStyleGroupByZoom[zoom];
        if (!zoomMatchedGeoStylesGroupByLayerId) {
            return features;
        }
        var pbfLayerNamesWithGeoStyle = [];
        for (var pbfLayerName in zoomMatchedGeoStylesGroupByLayerId) {
            pbfLayerNamesWithGeoStyle.push(pbfLayerName);
        }
        var instructsCache = [];
        for (var name_2 in pbfLayers) {
            if (this.layers_ && this.layers_.indexOf(name_2) === -1) {
                continue;
            }
            if (pbfLayerNamesWithGeoStyle.indexOf(name_2) === -1) {
                continue;
            }
            pbfLayer = pbfLayers[name_2];
            options["extent"] = pbfLayer.extent;
            var cacheTrees = zoomMatchedGeoStylesGroupByLayerId[name_2];
            if (cacheTrees && cacheTrees.length > 0) {
                this.replaceFiltersToIndexOfPbfLayer(cacheTrees, pbfLayer);
                var _loop_3 = function (i) {
                    var rawFeature = ol.format.MVT.readRawFeature_(pbf, pbfLayer, i);
                    var feature = void 0;
                    var _loop_4 = function (j) {
                        var cacheTree = cacheTrees[j];
                        var treeIndex = cacheTree.treeIndex;
                        if (instructsCache[treeIndex] === undefined) {
                            instructsCache[treeIndex] = {
                                min: 10,
                                max: -10
                            };
                        }
                        var matchedNode;
                        var checkNodeMatched = function (node) {
                            var styleJsonCacheItem = node.data;
                            var matched = false;
                            if (styleJsonCacheItem.filterGroup.length > 0) {
                                for (var i_2 = 0; i_2 < styleJsonCacheItem.filterGroup.length; i_2++) {
                                    var filters = styleJsonCacheItem.filterGroup[i_2];
                                    var groupMatched = true;
                                    for (var j_2 = 0; j_2 < filters.length; j_2++) {
                                        var filter = filters[j_2];
                                        if (!filter.matchOLFeature(rawFeature, zoom)) {
                                            groupMatched = false;
                                            break;
                                        }
                                    }
                                    if (groupMatched) {
                                        matched = true;
                                        break;
                                    }
                                }
                            }
                            else {
                                matched = true;
                            }
                            return matched;
                        };
                        var selectNode = function (node) {
                            matchedNode = node.data;
                        };
                        cacheTree.traverseNode(checkNodeMatched, selectNode);
                        if (matchedNode) {
                            if (feature === undefined) {
                                feature = this_2.createFeature_(pbf, rawFeature);
                                if (this_2.minimalist) {
                                    feature.properties_ = {};
                                }
                            }
                            var zindex = void 0;
                            if (cacheTree.root.data.zIndex) {
                                zindex = rawFeature.properties[cacheTree.root.data.zIndex];
                                feature.properties_[cacheTree.root.data.zIndex] = zindex;
                            }
                            if (isNaN(zindex)) {
                                zindex = 0;
                            }
                            if (instructsCache[treeIndex][zindex] === undefined) {
                                instructsCache[treeIndex][zindex] = [];
                                if (zindex < instructsCache[treeIndex]["min"]) {
                                    instructsCache[treeIndex]["min"] = zindex;
                                }
                                if (zindex > instructsCache[treeIndex]["max"]) {
                                    instructsCache[treeIndex]["max"] = zindex;
                                }
                            }
                            instructsCache[treeIndex][zindex].push([feature, matchedNode]);
                            if (this_2.minimalist) {
                                if (matchedNode.geoStyle && (matchedNode.geoStyle.constructor.name === "GeoTextStyle" || matchedNode.geoStyle.constructor.name === "GeoShieldStyle")) {
                                    feature.properties_[matchedNode.geoStyle.name] = rawFeature.properties[matchedNode.geoStyle.name];
                                }
                                if (matchedNode.childrenGeoStyles && matchedNode.childrenGeoStyles.length > 0) {
                                    for (var i_3 = 0; i_3 < matchedNode.childrenGeoStyles.length; i_3++) {
                                        feature.properties_[matchedNode.childrenGeoStyles[i_3].name] = rawFeature.properties[matchedNode.childrenGeoStyles[i_3].name];
                                    }
                                }
                            }
                            feature.extent_ = undefined;
                        }
                    };
                    for (var j = 0; j < cacheTrees.length; j++) {
                        _loop_4(j);
                    }
                };
                var this_2 = this;
                for (var i = 0; i < pbfLayer.length; i++) {
                    _loop_3(i);
                }
            }
            this.extent_ = pbfLayer ? [0, 0, pbfLayer.extent, pbfLayer.extent] : null;
        }
        return instructsCache;
    };
    GeoMVTFormat.prototype.getInstructs = function (instructsTree) {
        var instructs = [];
        // the tress index means the index of SyleId.
        for (var i = 0; i < instructsTree.length; i++) {
            var instructsInOneTree = instructsTree[i];
            if (instructsInOneTree) {
                for (var j = instructsInOneTree.min, jj = instructsInOneTree.max; j <= jj; j++) {
                    var instructsInOneZIndex = instructsInOneTree[j];
                    if (instructsInOneZIndex) {
                        var childrenInstructs = [];
                        for (var h = 0; h < instructsInOneZIndex.length; h++) {
                            var instruct = instructsInOneZIndex[h];
                            instruct[0].styleId = instruct[0].styleId ? instruct[0].styleId : {};
                            if (instruct[1].geoStyle) {
                                instruct[0].styleId[instruct[1].geoStyle.id] = 0;
                                instructs.push([instruct[0], instruct[1].geoStyle, i]);
                            }
                            if (instruct[1].childrenGeoStyles) {
                                for (var k = 0; k < instruct[1].childrenGeoStyles.length; k++) {
                                    instruct[0].styleId[instruct[1].childrenGeoStyles[k].id] = 1;
                                    childrenInstructs.push([instruct[0], instruct[1].childrenGeoStyles[k], i]);
                                }
                            }
                        }
                        Array.prototype.push.apply(instructs, childrenInstructs);
                    }
                }
            }
        }
        return instructs;
    };
    GeoMVTFormat.prototype.createSubTileInstructCaches = function (instructs, options) {
        var subTileCachedInstruct = {};
        var offsetZ = options.originalCoord[0] - options.tileCoord[0];
        var tileSize = options.extent / Math.pow(2, offsetZ);
        var tileRange = this.getTileRange(options.tileCoord, options.originalCoord[0]);
        var tiles = {};
        for (var x = tileRange[0]; x <= tileRange[2]; x++) {
            var minX = (x - tileRange[0]) * tileSize;
            var maxX = (x - tileRange[0] + 1) * tileSize;
            for (var y = tileRange[3]; y >= tileRange[1]; y--) {
                var minY = (tileRange[3] - y) * tileSize;
                var maxY = (tileRange[3] - y + 1) * tileSize;
                tiles["" + [x, y]] = [minX, minY, maxX, maxY];
            }
        }
        for (var i = 0; i < instructs.length; i++) {
            var instruct = instructs[i];
            var featureExtent = instruct[0].getGeometry().getExtent();
            var featureTileRange = this.getFeatureTileRange(featureExtent, options.extent, tileSize, options.tileCoord, offsetZ);
            for (var x = tileRange[0] > featureTileRange[0] ? tileRange[0] : featureTileRange[0], xx = featureTileRange[2] > tileRange[2] ? tileRange[2] : featureTileRange[2]; x <= xx; x++) {
                for (var y = tileRange[1] > featureTileRange[1] ? tileRange[1] : featureTileRange[1], yy = featureTileRange[3] > tileRange[3] ? tileRange[3] : featureTileRange[3]; y <= yy; y++) {
                    var tileKey = "" + [x, y];
                    var tileExtent = tiles[tileKey];
                    if (subTileCachedInstruct[tileKey] === undefined) {
                        subTileCachedInstruct[tileKey] = [];
                    }
                    subTileCachedInstruct[tileKey].push(instruct);
                }
            }
        }
        return subTileCachedInstruct;
    };
    GeoMVTFormat.prototype.cachedTileCallback = function (oTile, cacheTileInfos) {
        for (var i = 0; i < cacheTileInfos.length; i++) {
            var cacheTileInfo = cacheTileInfos[i];
            var tileKey = "" + cacheTileInfo.tile.tileCoord[1] + "," + cacheTileInfo.tile.tileCoord[2];
            cacheTileInfo.callback(cacheTileInfo.tile, cacheTileInfo.successFunction, [], oTile.subTileInstructCaches[tileKey], oTile.sourceProject, oTile.lastExtent);
        }
    };
    GeoMVTFormat.prototype.getTileRange = function (tileCoord, zoom) {
        var x = tileCoord[1];
        var y = tileCoord[2];
        var minX = x;
        var maxX = x;
        var minY = y;
        var maxY = y;
        for (var i = tileCoord[0]; i < zoom; i++) {
            minX = minX * 2;
            maxX = maxX * 2 + 1;
            minY = minY * 2;
            maxY = maxY * 2 + 1;
        }
        return [minX, minY, maxX, maxY];
    };
    GeoMVTFormat.prototype.getFeatureTileRange = function (featureExtent, extent, tileSize, requestTileCoord, offsetZ) {
        var minX = requestTileCoord[1] * Math.pow(2, offsetZ) + Math.floor(featureExtent[0] / tileSize);
        var maxX = requestTileCoord[1] * Math.pow(2, offsetZ) + Math.floor(featureExtent[2] / tileSize);
        var minY = requestTileCoord[2] * Math.pow(2, offsetZ) + Math.floor((extent - featureExtent[3]) / tileSize);
        var maxY = requestTileCoord[2] * Math.pow(2, offsetZ) + Math.floor((extent - featureExtent[1]) / tileSize);
        return [minX, minY, maxX, maxY];
    };
    GeoMVTFormat.prototype.getExtent = function (originalCoord, tilecoord, extent) {
        var ox = originalCoord[1];
        var x = tilecoord[1];
        var xPath = [];
        while (ox !== x) {
            var remainder = ox % 2;
            xPath.push(remainder);
            ox = Math.floor(ox / 2);
        }
        var newExtent = extent;
        var offsetX = 0;
        for (var i = xPath.length - 1; i >= 0; i--) {
            newExtent = newExtent / 2;
            if (xPath[i] === 1) {
                offsetX += newExtent;
            }
        }
        var oy = originalCoord[2];
        var y = tilecoord[2];
        var yPath = [];
        while (oy !== y) {
            var remainder = oy % 2;
            yPath.push(remainder);
            oy = Math.floor(oy / 2);
        }
        newExtent = extent;
        var offsetY = 0;
        for (var i = yPath.length - 1; i >= 0; i--) {
            newExtent = newExtent / 2;
            if (yPath[i] === 0) {
                offsetY += newExtent;
            }
        }
        // TODO: add the buffer
        return [offsetX, offsetY, offsetX + newExtent, offsetY + newExtent];
    };
    GeoMVTFormat.prototype.replaceFiltersToIndexOfPbfLayer = function (cacheTrees, pbfLayer) {
        for (var i = 0, ii = cacheTrees.length; i < ii; i++) {
            var cacheTree = cacheTrees[i];
            this.replaceCacheItemFiltersToIndexOfPbfLayer(cacheTree.root, pbfLayer);
        }
    };
    GeoMVTFormat.prototype.replaceCacheItemFiltersToIndexOfPbfLayer = function (node, pbfLayer) {
        var data = node.data;
        for (var i = 0; i < data.filterGroup.length; i++) {
            var filters = data.filterGroup[i];
            var geoFilter = void 0;
            for (var j = 0; j < filters.length; j++) {
                geoFilter = filters[j];
                geoFilter.replaceVaulesToPbfIndex(pbfLayer);
            }
        }
        if (node.children) {
            for (var i = 0, ii = node.children.length; i < ii; i++) {
                this.replaceCacheItemFiltersToIndexOfPbfLayer(node.children[i], pbfLayer);
            }
        }
    };
    GeoMVTFormat.prototype.readFeaturesAndCreateInstructs = function (source, zoom, options) {
        var pbf = new ol.ext.PBF((source));
        var pbfLayers = pbf.readFields(ol.format.MVT.pbfReaders_.layers, {});
        var features = [];
        var pbfLayer;
        var zoomMatchedGeoStylesGroupByLayerId = this.styleJsonCache.geoStyleGroupByZoom[zoom];
        if (!zoomMatchedGeoStylesGroupByLayerId) {
            return features;
        }
        var pbfLayerNamesWithGeoStyle = [];
        for (var pbfLayerName in zoomMatchedGeoStylesGroupByLayerId) {
            pbfLayerNamesWithGeoStyle.push(pbfLayerName);
        }
        var instructsCache = [];
        for (var name_3 in pbfLayers) {
            if (this.layers_ && this.layers_.indexOf(name_3) === -1) {
                continue;
            }
            if (pbfLayerNamesWithGeoStyle.indexOf(name_3) === -1) {
                continue;
            }
            pbfLayer = pbfLayers[name_3];
            var cacheTrees = zoomMatchedGeoStylesGroupByLayerId[name_3];
            if (cacheTrees && cacheTrees.length > 0) {
                this.replaceFiltersToIndexOfPbfLayer(cacheTrees, pbfLayer);
                var _loop_5 = function (i) {
                    var rawFeature = ol.format.MVT.readRawFeature_(pbf, pbfLayer, i);
                    var feature = void 0;
                    var _loop_6 = function (j) {
                        var cacheTree = cacheTrees[j];
                        var treeIndex = cacheTree.treeIndex;
                        if (instructsCache[treeIndex] === undefined) {
                            instructsCache[treeIndex] = {
                                min: 10,
                                max: -10
                            };
                        }
                        var matchedNode;
                        var checkNodeMatched = function (node) {
                            var styleJsonCacheItem = node.data;
                            var matched = false;
                            if (styleJsonCacheItem.filterGroup.length > 0) {
                                for (var i_4 = 0; i_4 < styleJsonCacheItem.filterGroup.length; i_4++) {
                                    var filters = styleJsonCacheItem.filterGroup[i_4];
                                    var groupMatched = true;
                                    for (var j_3 = 0; j_3 < filters.length; j_3++) {
                                        var filter = filters[j_3];
                                        if (!filter.matchOLFeature(rawFeature, zoom)) {
                                            groupMatched = false;
                                            break;
                                        }
                                    }
                                    if (groupMatched) {
                                        matched = true;
                                        break;
                                    }
                                }
                            }
                            else {
                                matched = true;
                            }
                            return matched;
                        };
                        var selectNode = function (node) {
                            matchedNode = node.data;
                        };
                        cacheTree.traverseNode(checkNodeMatched, selectNode);
                        if (matchedNode) {
                            if (feature === undefined) {
                                feature = this_3.createFeature_(pbf, rawFeature);
                                if (this_3.minimalist) {
                                    feature.properties_ = {};
                                }
                            }
                            var zindex = void 0;
                            if (cacheTree.root.data.zIndex) {
                                zindex = rawFeature.properties[cacheTree.root.data.zIndex];
                                feature.properties_[cacheTree.root.data.zIndex] = zindex;
                            }
                            if (isNaN(zindex)) {
                                zindex = 0;
                            }
                            if (instructsCache[treeIndex][zindex] === undefined) {
                                instructsCache[treeIndex][zindex] = [];
                                if (zindex < instructsCache[treeIndex]["min"]) {
                                    instructsCache[treeIndex]["min"] = zindex;
                                }
                                if (zindex > instructsCache[treeIndex]["max"]) {
                                    instructsCache[treeIndex]["max"] = zindex;
                                }
                            }
                            instructsCache[treeIndex][zindex].push([feature, matchedNode]);
                            if (this_3.minimalist) {
                                if (matchedNode.geoStyle && matchedNode.geoStyle.constructor.name === "GeoTextStyle") {
                                    feature.properties_[matchedNode.geoStyle.name] = rawFeature.properties[matchedNode.geoStyle.name];
                                }
                                if (matchedNode.childrenGeoStyles && matchedNode.childrenGeoStyles.length > 0) {
                                    for (var i_5 = 0; i_5 < matchedNode.childrenGeoStyles.length; i_5++) {
                                        feature.properties_[matchedNode.childrenGeoStyles[i_5].name] = rawFeature.properties[matchedNode.childrenGeoStyles[i_5].name];
                                    }
                                }
                            }
                            feature.extent_ = undefined;
                        }
                    };
                    for (var j = 0; j < cacheTrees.length; j++) {
                        _loop_6(j);
                    }
                };
                var this_3 = this;
                for (var i = 0; i < pbfLayer.length; i++) {
                    _loop_5(i);
                }
            }
            this.extent_ = pbfLayer ? [0, 0, pbfLayer.extent, pbfLayer.extent] : null;
        }
        var instructs = [];
        // the tress index means the index of SyleId.
        for (var i = 0; i < instructsCache.length; i++) {
            var instructsInOneTree = instructsCache[i];
            if (instructsInOneTree) {
                for (var j = instructsInOneTree.min, jj = instructsInOneTree.max; j <= jj; j++) {
                    var instructsInOneZIndex = instructsInOneTree[j];
                    if (instructsInOneZIndex) {
                        var childrenInstructs = [];
                        for (var h = 0; h < instructsInOneZIndex.length; h++) {
                            var instruct = instructsInOneZIndex[h];
                            instruct[0].styleId = instruct[0].styleId ? instruct[0].styleId : {};
                            if (instruct[1].geoStyle) {
                                instruct[0].styleId[instruct[1].geoStyle.id] = 0;
                                instructs.push([instruct[0], instruct[1].geoStyle, i]);
                            }
                            if (instruct[1].childrenGeoStyles) {
                                for (var k = 0; k < instruct[1].childrenGeoStyles.length; k++) {
                                    instruct[0].styleId[instruct[1].childrenGeoStyles[k].id] = 1;
                                    childrenInstructs.push([instruct[0], instruct[1].childrenGeoStyles[k], i]);
                                }
                            }
                        }
                        Array.prototype.push.apply(instructs, childrenInstructs);
                    }
                }
            }
        }
        return [features, instructs];
    };
    GeoMVTFormat.readRawFeature_ = function (pbf, layer, i) {
        pbf.pos = layer.features[i];
        var end = pbf.readVarint() + pbf.pos;
        var feature = {
            layer: layer,
            type: 0,
            properties: {},
            propertiesIndex: {}
        };
        pbf.readFields(ol.format.MVT.pbfReaders_.featureColumnValue, feature, end);
        return feature;
    };
    GeoMVTFormat.featureColumnValue = function (tag, feature, pbf) {
        if (tag === 1) {
            feature.id = pbf.readVarint();
        }
        else if (tag === 2) {
            var end = pbf.readVarint() + pbf.pos;
            while (pbf.pos < end) {
                var key = pbf.readVarint();
                var value = pbf.readVarint();
                feature.propertiesIndex[key] = value;
                key = feature.layer.keys[key];
                value = feature.layer.values[value];
                feature.properties[key] = value;
            }
        }
        else if (tag === 3) {
            feature.type = pbf.readVarint();
        }
        else if (tag === 4) {
            feature.geometry = pbf.pos;
        }
    };
    return GeoMVTFormat;
}(ol.format.MVT));

ol.format.MVT.readRawFeature_ = GeoMVTFormat.readRawFeature_;
ol.format.MVT.pbfReaders_["featureColumnValue"] = GeoMVTFormat.featureColumnValue;


/***/ }),

/***/ "./src/geoVectorTile.ts":
/*!******************************!*\
  !*** ./src/geoVectorTile.ts ***!
  \******************************/
/*! exports provided: GeoVectorTile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoVectorTile", function() { return GeoVectorTile; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var GeoVectorTile = /** @class */ (function (_super) {
    __extends(GeoVectorTile, _super);
    function GeoVectorTile(tileCoord, state, src, format, tileLoadFunction) {
        var _this = _super.call(this, tileCoord, state, src, format, tileLoadFunction) || this;
        _this.disposeInternal = _this.disposeInternalCustom;
        return _this;
    }
    GeoVectorTile.prototype.disposeInternalCustom = function () {
        this.features_ = null;
        this.replayGroups_ = {};
        // this.state = ol.TileState.ABORT;
        this.state = ol.TileState.IDLE;
        this.changed();
        if (this["xhr"] != undefined) {
            this["xhr"].abort();
        }
        if (this.workerId !== undefined) {
            var disposeInfo = {
                formatId: ol.getUid(this.getFormat()),
                maxDataZoom: this.getFormat().maxDataZoom,
                tileCoord: this.tileCoord,
                requestTileCoord: this.requestTileCoord
            };
            this.getFormat().workerManager.postMessage(this.tileCoord + ol.getUid(disposeInfo), "vectorTileDispose", disposeInfo, null, this.workerId);
        }
        ol.Tile.prototype.disposeInternal.call(this);
    };
    GeoVectorTile.prototype.onLoad = function (dataProjection, extent) {
        this.setProjection(dataProjection);
        this.setFeatures();
        this.setExtent(extent);
    };
    GeoVectorTile.prototype.setRenderFeatureInstructs = function (instructs) {
        this.instructs = instructs;
    };
    GeoVectorTile.prototype.getRenderFeatureInstructs = function (instructs) {
        return this.instructs;
    };
    return GeoVectorTile;
}(ol.VectorTile));



/***/ }),

/***/ "./src/layer/vectorTileLayer.ts":
/*!**************************************!*\
  !*** ./src/layer/vectorTileLayer.ts ***!
  \**************************************/
/*! exports provided: VectorTileLayer */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VectorTileLayer", function() { return VectorTileLayer; });
/* harmony import */ var _source_geoVectorTileSource__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../source/geoVectorTileSource */ "./src/source/geoVectorTileSource.ts");
/* harmony import */ var _geoVectorTile__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../geoVectorTile */ "./src/geoVectorTile.ts");
/* harmony import */ var _style_geoStyle__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../style/geoStyle */ "./src/style/geoStyle.ts");
/* harmony import */ var _format_geoMvt__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../format/geoMvt */ "./src/format/geoMvt.ts");
/* harmony import */ var _tree_styleJsonCache__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tree/styleJsonCache */ "./src/tree/styleJsonCache.ts");
/* harmony import */ var _tree_styleJsonCacheItem__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tree/styleJsonCacheItem */ "./src/tree/styleJsonCacheItem.ts");
/* harmony import */ var _render_geoVectorTilelayerRender__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../render/geoVectorTilelayerRender */ "./src/render/geoVectorTilelayerRender.ts");
/* harmony import */ var _tree_TreeNode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tree/TreeNode */ "./src/tree/TreeNode.ts");
/* harmony import */ var _tree_tree__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tree/tree */ "./src/tree/tree.ts");
/* harmony import */ var _worker_workerManager__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../worker/workerManager */ "./src/worker/workerManager.ts");
/* harmony import */ var _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../worker/vectorTileLayerThreadMode */ "./src/worker/vectorTileLayerThreadMode.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();











var VectorTileLayer = /** @class */ (function (_super) {
    __extends(VectorTileLayer, _super);
    function VectorTileLayer(styleJson, opt_options) {
        var _this = this;
        // default
        if (opt_options !== undefined) {
            opt_options["declutter"] = opt_options["declutter"] === undefined ? true : opt_options["declutter"];
            opt_options["minimalist"] = opt_options["minimalist"] === undefined ? true : opt_options["minimalist"];
            opt_options["renderMode"] = 'vector';
            _this = _super.call(this, opt_options) || this;
        }
        else {
            var options = {};
            options["declutter"] = true;
            options["minimalist"] = true;
            opt_options["renderMode"] = 'vector';
            _this = _super.call(this, options) || this;
        }
        if (opt_options !== undefined) {
            // temp Emil
            var tempIsMultithread = opt_options["multithread"] === undefined ? true : opt_options["multithread"];
            _this.threadMode = opt_options["threadMode"] === undefined ? true : opt_options["threadMode"];
            _this.isMultithread = _this.threadMode !== _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_10__["VectorTileLayerThreadMode"].SingleThread;
            _this.backgroundWorkerCount = opt_options["backgroundWorkerCount"];
            // temp Emil
            if (tempIsMultithread) {
                _this.threadMode = _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_10__["VectorTileLayerThreadMode"].Default;
                _this.backgroundWorkerCount = 2;
            }
            _this.minimalist = opt_options["minimalist"] === undefined ? true : opt_options["minimalist"];
            _this.maxDataZoom = opt_options["maxDataZoom"] === undefined ? 14 : opt_options["maxDataZoom"];
            _this.proxy = opt_options["proxy"];
            _this.clientId = opt_options["clientId"];
            _this.clientSecret = opt_options["clientSecret"];
            _this.apiKey = opt_options["apiKey"];
        }
        else {
            _this.isMultithread = true;
            _this.minimalist = true;
            _this.maxDataZoom = 14;
        }
        _this.registerGeoVector();
        if (_this.isStyleJsonUrl(styleJson)) {
            _this.loadStyleJsonAsyn(styleJson);
        }
        else {
            _this.loadStyleJson(styleJson);
        }
        _this.type = ol.LayerType.MAPSUITE_VECTORTILE;
        return _this;
    }
    VectorTileLayer.prototype.loadStyleJsonAsyn = function (styleJsonUrl) {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", styleJsonUrl);
        xhr.onload = function (event) {
            if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {
                var source = void 0;
                source = xhr.responseText;
                this.styleJson = JSON.parse(source);
                this.loadStyleJson(JSON.parse(source));
            }
        }.bind(this);
        xhr.onerror = function () {
        }.bind(this);
        xhr.send();
    };
    VectorTileLayer.prototype.loadStyleJson = function (inputStyleJson) {
        var styleJson = this.styleJson = JSON.parse(JSON.stringify(inputStyleJson));
        this.version = styleJson["version"];
        this.owner = styleJson["owner"];
        this.dateTime = styleJson["dateTime"];
        this.variables = this.getVariables(styleJson["variables"]);
        this.background = styleJson["background"];
        this.replaceVariables(styleJson, this.variables);
        this.geoSources = {};
        if (styleJson["layers"] && styleJson["layers"].length > 0) {
            var layerJson = styleJson["layers"][0];
            var sourceId = layerJson["source"];
            var source = this.getGeoSource(sourceId);
            if (source) {
                this.setSource(source);
                if (this.background) {
                    var backgroundColor = _style_geoStyle__WEBPACK_IMPORTED_MODULE_2__["GeoStyle"].toRGBAColor(this.background);
                    if (backgroundColor) {
                        this["background"] = backgroundColor;
                    }
                }
                var styleJsons = styleJson["styles"];
                var styleIds = layerJson["styles"];
                var minZoom = 0;
                var maxZoom = 22;
                var layerName = source.getGeoFormat().getLayerName();
                var styleJsonCache = new _tree_styleJsonCache__WEBPACK_IMPORTED_MODULE_4__["StyleJsonCache"]();
                var styleIdIndex = 0;
                for (var _i = 0, styleIds_1 = styleIds; _i < styleIds_1.length; _i++) {
                    var styleId = styleIds_1[_i];
                    var styleJson_1 = void 0;
                    for (var index = 0; index < styleJsons.length; index++) {
                        if (styleJsons[index].id === styleId) {
                            styleJson_1 = styleJsons[index];
                        }
                    }
                    if (styleJson_1) {
                        styleJsonCache.styleJson[styleId] = styleJson_1;
                        var item = new _tree_styleJsonCacheItem__WEBPACK_IMPORTED_MODULE_5__["StyleJsonCacheItem"](styleJson_1, minZoom, maxZoom, layerName);
                        for (var zoom = item.minZoom; zoom <= item.maxZoom; zoom++) {
                            var treeNode = new _tree_TreeNode__WEBPACK_IMPORTED_MODULE_7__["TreeNode"](item);
                            this.createChildrenNode(treeNode, item, zoom);
                            styleJsonCache.add(zoom, item.dataLayerName, new _tree_tree__WEBPACK_IMPORTED_MODULE_8__["Tree"](treeNode, styleIdIndex));
                        }
                        styleIdIndex += 1;
                    }
                }
                var geoFormat = source.getGeoFormat();
                geoFormat["styleJsonCache"] = styleJsonCache;
                if (this.isMultithread) {
                    if (this.workerManager) {
                        var messageData = {
                            formatId: ol.getUid(geoFormat),
                            styleJson: styleJsonCache.styleJson,
                            geoTextStyleInfos: styleJsonCache.geoTextStyleInfo
                        };
                        for (var i = 0; i < this.workerManager.workerCount; i++) {
                            this.workerManager.postMessage(ol.getUid(messageData), "initStyleJSON", messageData, undefined, i);
                        }
                    }
                }
            }
        }
    };
    VectorTileLayer.prototype.getGeoSource = function (sourceId) {
        var _this = this;
        if (this.geoSources && this.geoSources[sourceId]) {
            return this.geoSources[sourceId];
        }
        if (this.styleJson["sources"]) {
            this.styleJson['sources'].forEach(function (sourceJson) {
                if (sourceId === sourceJson['id']) {
                    if (!sourceJson['urls'] && sourceJson['url']) {
                        sourceJson['urls'] = [sourceJson['url']];
                        delete sourceJson['url'];
                    }
                    sourceJson['urls'] = sourceJson['urls'].map(function (url) {
                        if (url.indexOf('http') === -1 && url.indexOf('https') === -1) {
                            var host = location.host;
                            var protocol = location.protocol;
                            if (url.indexOf('/') !== 0) {
                                url = protocol + '//' + host + '/' + url;
                            }
                            else if (url.indexOf('/') === 0) {
                                url = protocol + '//' + host + url;
                            }
                        }
                        // apiKey
                        if (url.indexOf('apiKey') === -1 && _this.apiKey) {
                            url = url + '?apiKey=' + _this.apiKey;
                        }
                        // proxy
                        if (_this.proxy) {
                            url = _this.proxy + encodeURIComponent(url);
                        }
                        return url;
                    });
                    _this.geoSources[sourceJson["id"]] = _this.createVectorTileSource(sourceJson);
                    return true;
                }
            });
            return this.geoSources[sourceId];
        }
        return false;
    };
    VectorTileLayer.prototype.createVectorTileSource = function (sourceJson) {
        if (sourceJson["type"] === "MVT") {
            var format = this.getVectorSourceFormat();
            var source = new _source_geoVectorTileSource__WEBPACK_IMPORTED_MODULE_0__["GeoVectorTileSource"]({
                tileClass: _geoVectorTile__WEBPACK_IMPORTED_MODULE_1__["GeoVectorTile"],
                urls: sourceJson["urls"],
                clientId: this.clientId,
                clientSecret: this.clientSecret,
                format: format,
                projection: "EPSG:3857",
                tileGrid: this.createVectorTileGrid(),
                cacheSize: 1024,
                multithread: this.isMultithread,
                minimalist: this.minimalist,
                maxDataZoom: this.maxDataZoom
            });
            format['source'] = source;
            return source;
        }
    };
    VectorTileLayer.prototype.getVectorSourceFormat = function () {
        var format = new _format_geoMvt__WEBPACK_IMPORTED_MODULE_3__["GeoMVTFormat"](undefined, { multithread: this.isMultithread, minimalist: this.minimalist });
        if (this.isMultithread) {
            if (!this.workerManager || !this.workerManager.inited) {
                this.workerManager = new _worker_workerManager__WEBPACK_IMPORTED_MODULE_9__["WorkerManager"](this.threadMode, this.backgroundWorkerCount);
                this.workerManager.initWorkers();
            }
            if (this.workerManager.inited) {
                format["workerManager"] = this.workerManager;
            }
        }
        return format;
    };
    VectorTileLayer.prototype.createVectorTileGrid = function () {
        return ol.tilegrid.createXYZ({ tileSize: 512, maxZoom: 22 });
    };
    VectorTileLayer.prototype.getVariables = function (variablesJson) {
        var variables = {};
        for (var variablesName in variablesJson) {
            if (variablesName.indexOf(",") > 0) {
                var variableNames = variablesName.split(",");
                for (var i = 0; i < variableNames.length; i++) {
                    variables[variableNames[i]] = variablesJson[variablesName];
                }
            }
            else {
                variables[variablesName] = variablesJson[variablesName];
            }
        }
        return variables;
    };
    VectorTileLayer.prototype.replaceVariables = function (styleJson, variables) {
        for (var propertyName in styleJson) {
            var property = styleJson[propertyName];
            if (typeof property === "object") {
                this.replaceVariables(property, variables);
            }
            else if (typeof property === "string") {
                var keyWordIndex = property.indexOf("@");
                if (keyWordIndex >= 0) {
                    var lines = property.split(" ");
                    if (lines.length > 1) {
                        var tempWord = void 0;
                        var results = [];
                        for (var i = 0; i < lines.length; i++) {
                            tempWord = lines[i];
                            if (tempWord.indexOf("@") === 0) {
                                tempWord = variables[tempWord];
                            }
                            results.push(tempWord);
                        }
                        styleJson[propertyName] = results.join(" ");
                    }
                    else {
                        styleJson[propertyName] = variables[lines[0]];
                    }
                }
            }
        }
    };
    VectorTileLayer.prototype.createChildrenNode = function (currentNode, item, zoom) {
        if (item.subStyleCacheItems && item.subStyleCacheItems.length > 0) {
            for (var i = 0, ii = item.subStyleCacheItems.length; i < ii; i++) {
                var subStyleItem = item.subStyleCacheItems[i];
                if (zoom >= subStyleItem.minZoom && zoom <= subStyleItem.maxZoom) {
                    var node = new _tree_TreeNode__WEBPACK_IMPORTED_MODULE_7__["TreeNode"](subStyleItem);
                    currentNode.children.push(node);
                    this.createChildrenNode(node, subStyleItem, zoom);
                }
            }
        }
    };
    VectorTileLayer.prototype.isStyleJsonUrl = function (styleJson) {
        if (styleJson) {
            if (typeof styleJson !== "object") {
                return true;
            }
        }
        return false;
    };
    VectorTileLayer.prototype.registerGeoVector = function () {
        ol.LayerType["GEOVECTORTILE"] = "GEOVECTORTILE";
        // TODO: check the plugin had been registed.
        ol.plugins.register(ol.PluginType.LAYER_RENDERER, _render_geoVectorTilelayerRender__WEBPACK_IMPORTED_MODULE_6__["GeoVectorTileLayerRender"]);
        // (<any>ol.VectorTile).Event = function (type, xhr) {
        //     ol.events.Event.call(this, type);
        //     this.xhr = xhr;
        // };
        // ol.inherits((<any>ol.VectorTile), (<any>ol.events).Event);
        ol.VectorImageTile.prototype.disposeInternal = function (context) {
            for (var i = 0, ii = this.tileKeys.length; i < ii; ++i) {
                var sourceTileKey = this.tileKeys[i];
                var sourceTile = this.getTile(sourceTileKey);
                sourceTile.consumers--;
                if (sourceTile.consumers == 0) {
                    // BufferCache in webgl
                    var vectorTile = this.sourceTiles_[sourceTileKey];
                    var replayGroups = vectorTile.replayGroups_;
                    for (var key in replayGroups) {
                        replayGroups[key].getDeleteResourcesFunction(context)();
                    }
                    delete this.sourceTiles_[sourceTileKey];
                    sourceTile.dispose();
                }
            }
            this.sourceTiles_ = null;
            this.loadListenerKeys_.forEach(ol.events.unlistenByKey);
            this.loadListenerKeys_.length = 0;
            if (this.interimTile) {
                this.interimTile.dispose();
            }
            this.state = ol.TileState.ABORT;
            this.changed();
            // for the disposeInternal
            this.tileKeys.length = 0;
            this.sourceTileListenerKeys_.forEach(ol.events.unlistenByKey);
            this.sourceTileListenerKeys_.length = 0;
            ol.Tile.prototype.disposeInternal.call(this);
        };
        ol.TileQueue.prototype.handleTileChange = function (event) {
            var tile = /** @type {ol.Tile} */ (event.target);
            var state = tile.getState();
            if (state === ol.TileState.LOADED || state === ol.TileState.ERROR ||
                state === ol.TileState.EMPTY || state === ol.TileState.ABORT ||
                state === ol.TileState.CANCEL) {
                if (state === ol.TileState.ABORT || state === ol.TileState.ERROR) {
                    ol.events.unlisten(tile, ol.events.EventType.CHANGE, this.handleTileChange, this);
                }
                var tileKey = tile.getKey();
                if (tileKey in this.tilesLoadingKeys_) {
                    delete this.tilesLoadingKeys_[tileKey];
                    --this.tilesLoading_;
                }
                // Remove the enqueue records, if the tile has been dispose before load
                if (tileKey in this.queuedElements_) {
                    delete this.queuedElements_[tileKey];
                }
                this.tileChangeCallback_();
            }
        };
        // remove quickZoom when animation complete
        ol.View.prototype.updateAnimations_ = function () {
            if (this.updateAnimationKey_ !== undefined) {
                cancelAnimationFrame(this.updateAnimationKey_);
                this.updateAnimationKey_ = undefined;
            }
            if (!this.getAnimating()) {
                return;
            }
            var now = Date.now();
            var more = false;
            for (var i = this.animations_.length - 1; i >= 0; --i) {
                var series = this.animations_[i];
                var seriesComplete = true;
                for (var j = 0, jj = series.length; j < jj; ++j) {
                    var animation = series[j];
                    if (animation.complete) {
                        continue;
                    }
                    var elapsed = now - animation.start;
                    var fraction = animation.duration > 0 ? elapsed / animation.duration : 1;
                    if (fraction >= 1) {
                        animation.complete = true;
                        fraction = 1;
                    }
                    else {
                        seriesComplete = false;
                    }
                    var progress = animation.easing(fraction);
                    if (animation.sourceCenter) {
                        var x0 = animation.sourceCenter[0];
                        var y0 = animation.sourceCenter[1];
                        var x1 = animation.targetCenter[0];
                        var y1 = animation.targetCenter[1];
                        var x = x0 + progress * (x1 - x0);
                        var y = y0 + progress * (y1 - y0);
                        this.set(ol.ViewProperty.CENTER, [x, y]);
                    }
                    if (animation.sourceResolution && animation.targetResolution) {
                        var resolution = progress === 1 ?
                            animation.targetResolution :
                            animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);
                        if (animation.anchor) {
                            this.set(ol.ViewProperty.CENTER, this.calculateCenterZoom(resolution, animation.anchor));
                        }
                        this.set(ol.ViewProperty.RESOLUTION, resolution);
                    }
                    if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {
                        var rotation = progress === 1 ?
                            ol.math.modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :
                            animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);
                        if (animation.anchor) {
                            this.set(ol.ViewProperty.CENTER, this.calculateCenterRotate(rotation, animation.anchor));
                        }
                        this.set(ol.ViewProperty.ROTATION, rotation);
                    }
                    more = true;
                    if (!animation.complete) {
                        break;
                    }
                }
                if (seriesComplete) {
                    this.animations_[i] = null;
                    this.setHint(ol.ViewHint.ANIMATING, -1);
                    var callback = series[0].callback;
                    if (callback) {
                        callback(true);
                    }
                }
            }
            // prune completed series
            this.animations_ = this.animations_.filter(Boolean);
            if (more && this.updateAnimationKey_ === undefined) {
                this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_);
            }
        };
        // Get quickZoom zoom in/out
        ol.View.prototype.animate = function (var_args) {
            var animationCount = arguments.length;
            var callback;
            if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {
                callback = arguments[animationCount - 1];
                --animationCount;
            }
            if (!this.isDef()) {
                // if view properties are not yet set, shortcut to the final state
                var state = arguments[animationCount - 1];
                if (state.center) {
                    this.setCenter(state.center);
                }
                if (state.zoom !== undefined) {
                    this.setZoom(state.zoom);
                }
                if (state.rotation !== undefined) {
                    this.setRotation(state.rotation);
                }
                if (callback) {
                    callback(true);
                }
                return;
            }
            var start = Date.now();
            var center = this.getCenter().slice();
            var resolution = this.getResolution();
            var rotation = this.getRotation();
            var series = [];
            var quickZoom = false;
            for (var i = 0; i < animationCount; ++i) {
                var options = /** @type {olx.AnimationOptions} */ (arguments[i]);
                var animation = /** @type {ol.ViewAnimation} */ ({
                    start: start,
                    complete: false,
                    anchor: options.anchor,
                    duration: options.duration !== undefined ? options.duration : 1000,
                    easing: options.easing || ol.easing.inAndOut
                });
                if (options.center) {
                    animation["sourceCenter"] = center;
                    animation["targetCenter"] = options.center;
                    center = animation["targetCenter"];
                }
                if (options.zoom !== undefined) {
                    animation["sourceResolution"] = resolution;
                    animation["targetResolution"] = this.constrainResolution(this.maxResolution_, options.zoom - this.minZoom_, 0);
                    resolution = animation["targetResolution"];
                    if (!quickZoom) {
                        quickZoom = Math.abs(animation["sourceResolution"] - animation["targetResolution"]) * 2 >= animation["sourceResolution"];
                    }
                }
                else if (options.resolution) {
                    animation["sourceResolution"] = resolution;
                    animation["targetResolution"] = options.resolution;
                    resolution = animation["targetResolution"];
                    if (!quickZoom) {
                        quickZoom = Math.abs(animation["sourceResolution"] - animation["targetResolution"]) * 2 >= animation["sourceResolution"];
                    }
                }
                if (options.rotation !== undefined) {
                    animation["sourceRotation"] = rotation;
                    var delta = ol.math.modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;
                    animation["targetRotation"] = rotation + delta;
                    rotation = animation["targetRotation"];
                }
                animation["callback"] = callback;
                // check if animation is a no-op
                if (ol.View.isNoopAnimation(animation)) {
                    animation.complete = true;
                    // we still push it onto the series for callback handling
                }
                else {
                    start += animation.duration;
                }
                series.push(animation);
            }
            this.animations_.push(series);
            this["quickZoom"] = quickZoom;
            this.setHint(ol.ViewHint.ANIMATING, 1);
            this.updateAnimations_();
        };
        // add quickZoom into frameState
        ol.PluggableMap.prototype.renderFrame_ = function (time) {
            var i, ii, viewState;
            var size = this.getSize();
            var view = this.getView();
            var extent = ol.extent.createEmpty();
            var previousFrameState = this.frameState_;
            var isZoom = view.isZoom;
            /** @type {?olx.FrameState} */
            var frameState = null;
            if (size !== undefined && ol.size.hasArea(size) && view && view.isDef()) {
                var viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);
                var quickZoom = view["quickZoom"];
                var layerStatesArray = this.getLayerGroup().getLayerStatesArray();
                var layerStates = {};
                for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {
                    layerStates[ol.getUid(layerStatesArray[i].layer)] = layerStatesArray[i];
                }
                viewState = view.getState();
                var center = viewState.center;
                var pixelResolution = viewState.resolution / this.pixelRatio_;
                center[0] = Math.round(center[0] / pixelResolution) * pixelResolution;
                center[1] = Math.round(center[1] / pixelResolution) * pixelResolution;
                frameState = /** @type {olx.FrameState} */ ({
                    animate: false,
                    coordinateToPixelTransform: this.coordinateToPixelTransform_,
                    extent: extent,
                    focus: !this.focus_ ? center : this.focus_,
                    index: this.frameIndex_++,
                    layerStates: layerStates,
                    layerStatesArray: layerStatesArray,
                    logos: ol.obj.assign({}, this.logos_),
                    pixelRatio: this.pixelRatio_,
                    pixelToCoordinateTransform: this.pixelToCoordinateTransform_,
                    postRenderFunctions: [],
                    size: size,
                    skippedFeatureUids: this.skippedFeatureUids_,
                    tileQueue: this.tileQueue_,
                    time: time,
                    usedTiles: {},
                    viewState: viewState,
                    viewHints: viewHints,
                    quickZoom: quickZoom,
                    currentResolution: viewState.resolution,
                    wantedTiles: {},
                    context: this.renderer_.context_,
                    isZoom: isZoom
                });
            }
            if (frameState) {
                frameState.extent = ol.extent.getForViewAndSize(viewState.center, viewState.resolution, viewState.rotation, frameState.size, extent);
            }
            this.frameState_ = frameState;
            this.renderer_.renderFrame(frameState);
            if (frameState) {
                if (frameState.animate) {
                    this.render();
                }
                Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);
                if (previousFrameState) {
                    var moveStart = !this.previousExtent_ ||
                        (!ol.extent.isEmpty(this.previousExtent_) &&
                            !ol.extent.equals(frameState.extent, this.previousExtent_));
                    if (moveStart) {
                        this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVESTART, this, previousFrameState));
                        this.previousExtent_ = ol.extent.createOrUpdateEmpty(this.previousExtent_);
                    }
                }
                var idle = this.previousExtent_ &&
                    !frameState.viewHints[ol.ViewHint.ANIMATING] &&
                    !frameState.viewHints[ol.ViewHint.INTERACTING] &&
                    !ol.extent.equals(frameState.extent, this.previousExtent_);
                if (idle) {
                    this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVEEND, this, frameState));
                    ol.extent.clone(frameState.extent, this.previousExtent_);
                }
            }
            this.dispatchEvent(new ol.MapEvent(ol.MapEventType.POSTRENDER, this, frameState));
            setTimeout(this.handlePostRender.bind(this), 0);
        };
        // refine drawImage performance
        ol.renderer.canvas.TileLayer.prototype.drawTileImage = function (tile, frameState, layerState, x, y, w, h, gutter, transition) {
            var image = tile.getImage(this.getLayer());
            if (!image) {
                return;
            }
            var uid = ol.getUid(this);
            var alpha = transition ? tile.getAlpha(uid, frameState.time) : 1;
            if (alpha === 1 && !this.getLayer().getSource().getOpaque(frameState.viewState.projection)) {
                this.context.clearRect(x, y, w, h);
            }
            var alphaChanged = alpha !== this.context.globalAlpha;
            if (alphaChanged) {
                this.context.save();
                this.context.globalAlpha = alpha;
            }
            this.context.drawImage(image, gutter, gutter, image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);
            if (alphaChanged) {
                this.context.restore();
            }
            if (alpha !== 1) {
                frameState.animate = true;
            }
            else if (transition) {
                tile.endTransition(uid);
            }
        };
        // overwrite
        ol.render.webgl.Replay.prototype.replay = function (context, transform, viewRotation, skippedFeaturesHash, screenXY) {
            this.viewRotation_ = viewRotation;
            this.webglReplay_(context, skippedFeaturesHash, undefined, undefined, screenXY);
        };
        // recalculate the verctices of text for resolution changed                 
        ol.render.webgl.Replay.prototype.declutterRepeat_ = function (context, screenXY) {
            var startIndicesFeature = this.startIndicesFeature;
            var startIndicesStyle = this.startIndicesStyle;
            this.indices.length = 0;
            this.vertices.length = 0;
            this.groupIndices.length = 0;
            this.images_.length = 0;
            var frameState = context.frameState;
            var tilePixelExtent = [];
            this.screenXY = screenXY;
            // this.tilePixelExtent = tilePixelExtent;
            for (var i = 0; i < startIndicesFeature.length; i++) {
                var feature = startIndicesFeature[i];
                var style = startIndicesStyle[i];
                var declutterGroup = style.declutterGroup_;
                var geometry = feature.getGeometry();
                var type = feature.getType();
                if (!style) {
                    continue;
                }
                if (this instanceof ol.render.webgl.ImageReplay) {
                    this.setImageStyle(style);
                    this.scale /= window.devicePixelRatio;
                    this.replayImage_(frameState, declutterGroup, geometry);
                    this.renderDeclutter_(declutterGroup, feature);
                    this.scale *= window.devicePixelRatio;
                }
                else {
                    if (type == 'MultiLineString') {
                        var ends = geometry.getEnds();
                        for (var k = 0; k < ends.length; k++) {
                            var flatCoordinates = geometry.getFlatCoordinates().slice(ends[k - 1] || 0, ends[k]);
                            var newFeature = new ol.render.Feature('LineString', flatCoordinates, [flatCoordinates.length], feature.properties_, feature.id_);
                            this.setTextStyle(style);
                            this.drawLineStringText(newFeature.getGeometry(), newFeature, frameState, declutterGroup);
                        }
                    }
                    else {
                        this.setTextStyle(style);
                        if (this.label) {
                            var lineWidth = (this.state_.lineWidth / 2) * this.state_.scale;
                            this.width = this.label.width + lineWidth;
                            this.height = this.label.height;
                            this.anchorX = Math.floor(this.width * this.textAlign_ - this.offsetX_);
                            this.anchorY = Math.floor(this.height * this.textBaseline_ - this.offsetY_);
                            this.scale /= window.devicePixelRatio;
                            this.replayImage_(frameState, declutterGroup, geometry);
                            this.renderDeclutter_(declutterGroup, feature);
                            this.scale *= window.devicePixelRatio;
                        }
                        else {
                            // draw chars  
                            this.drawLineStringText(geometry, feature, frameState, declutterGroup);
                        }
                    }
                }
            }
        };
        ol.render.webgl.Replay.prototype.renderDeclutter_ = function (declutterGroup, feature) {
            if (declutterGroup && declutterGroup.length > 5) {
                var groupCount = declutterGroup[4];
                if (groupCount == 1 || groupCount == declutterGroup.length - 5) {
                    var box = {
                        minX: /** @type {number} */ (declutterGroup[0]),
                        minY: /** @type {number} */ (declutterGroup[1]),
                        maxX: /** @type {number} */ (declutterGroup[2]),
                        maxY: /** @type {number} */ (declutterGroup[3]),
                        value: feature
                    };
                    if (!this.declutterTree.collides(box)) {
                        this.declutterTree.insert(box);
                        for (var j = 5, jj = declutterGroup.length; j < jj; ++j) {
                            var declutter = declutterGroup[j];
                            var options = declutter[0];
                            var this$1 = declutter[1];
                            if (this$1 instanceof ol.render.webgl.TextReplay) {
                                this$1.drawText(options);
                            }
                            else if (this$1 instanceof ol.render.webgl.ImageReplay) {
                                this$1.drawPoint(options);
                            }
                        }
                    }
                    declutterGroup.length = 5;
                    ol.extent.createOrUpdateEmpty(declutterGroup);
                }
            }
        };
        ol.render.webgl.Replay.prototype.replayCharImage_ = function (frameState, declutterGroup, part) {
            var scale = this.scale;
            var coordinateToPixelTransform = frameState.coordinateToPixelTransform;
            var x = part[0];
            var y = part[1];
            var rotation = part[3];
            var text = part[4];
            var cos = Math.cos(rotation);
            var sin = Math.sin(rotation);
            var anchorX = part[2];
            var anchorY = Math.floor(this.height * this.textBaseline_ - this.offsetY_);
            var width = this.width;
            var height = this.height;
            var bottomLeft = [];
            var bottomRight = [];
            var topLeft = [];
            var topRight = [];
            var offsetX, offsetY;
            var pixelCoordinate = ol.transform.apply(coordinateToPixelTransform, [x - this.origin[0] + this.screenXY[0], y - this.origin[1] + this.screenXY[1]]);
            x = pixelCoordinate[0];
            y = pixelCoordinate[1];
            // bottom-left corner
            offsetX = -scale * anchorX;
            offsetY = -scale * (height - anchorY);
            bottomLeft[0] = x + (offsetX * cos - offsetY * sin);
            bottomLeft[1] = y + (offsetX * sin + offsetY * cos);
            // bottom-right corner
            offsetX = scale * (width - anchorX);
            offsetY = -scale * (height - anchorY);
            bottomRight[0] = x + (offsetX * cos - offsetY * sin);
            bottomRight[1] = y + (offsetX * sin + offsetY * cos);
            // top-right corner
            offsetX = scale * (width - anchorX);
            offsetY = scale * anchorY;
            topRight[0] = x + (offsetX * cos - offsetY * sin);
            topRight[1] = y + (offsetX * sin + offsetY * cos);
            // top-left corner
            offsetX = -scale * anchorX;
            offsetY = scale * anchorY;
            topLeft[0] = x + (offsetX * cos - offsetY * sin);
            topLeft[1] = y + (offsetX * sin + offsetY * cos);
            ol.extent.extendCoordinate(declutterGroup, bottomLeft);
            ol.extent.extendCoordinate(declutterGroup, bottomRight);
            ol.extent.extendCoordinate(declutterGroup, topRight);
            ol.extent.extendCoordinate(declutterGroup, topLeft);
            var declutterArgs = [{
                    anchorX: anchorX,
                    anchorY: anchorY,
                    rotation: rotation,
                    flatCoordinates: [part[0], part[1]],
                    text: text
                }, this];
            declutterGroup.push(declutterArgs);
        };
        ol.render.webgl.TextReplay.prototype.drawLineStringText = function (geometry, feature, frameState, declutterGroup) {
            var offset = 0;
            var stride = 2;
            var resolution = frameState.currentResolution;
            var text = this.text_;
            var coordinateToPixelTransform = frameState.coordinateToPixelTransform;
            var maxAngle = this.maxAngle_;
            var lineStringCoordinates = geometry.getFlatCoordinates();
            var end = lineStringCoordinates.length;
            var screenXY = this.screenXY;
            var tilePixelExtent = this.tilePixelExtent;
            var pathLength = ol.geom.flat.length.lineString(lineStringCoordinates, offset, end, stride, resolution);
            var textLength = this.getTextSize_([text])[0];
            if (this.label) {
                pathLength = textLength;
            }
            if (textLength * 1.2 <= pathLength) {
                var declutterGroups = [];
                this.extent = ol.extent.createOrUpdateEmpty();
                var ratio = 1.194328566955879 / resolution;
                if (ratio >= 3) {
                    ratio /= 2;
                }
                var distance = 180 * ratio;
                var tmpLength = pathLength - textLength;
                var centerPoint = tmpLength / 2;
                var leftPoint = centerPoint;
                var rightPoint = centerPoint;
                var pointArray = [];
                pointArray.push(centerPoint);
                if (frameState.currentResolution < 1) {
                    while (leftPoint > ((textLength / 2) + distance)) {
                        leftPoint = leftPoint - distance;
                        pointArray.push(leftPoint);
                    }
                    while (rightPoint < ((pathLength - textLength / 2) - distance)) {
                        rightPoint = rightPoint + distance;
                        pointArray.push(rightPoint);
                    }
                }
                for (var len = 0; len < pointArray.length; len++) {
                    var tempDeclutterGroup = void 0;
                    if (declutterGroup) {
                        // tempDeclutterGroup = featureCallback ? null : declutterGroup.slice(0);
                        tempDeclutterGroup = declutterGroup.slice(0);
                    }
                    var startM = pointArray[len];
                    var parts = ol.geom.flat.textpath.lineString(lineStringCoordinates, offset, end, 2, text, this, startM, maxAngle, resolution, screenXY, coordinateToPixelTransform, this.origin);
                    if (parts) {
                        for (var i = 0; i < parts.length; i++) {
                            var part = parts[i];
                            var lines = part[4];
                            var textSize = this.getTextSize_([lines]);
                            this.width = textSize[0];
                            this.height = textSize[1];
                            this.replayCharImage_(frameState, tempDeclutterGroup, part);
                        }
                        var canvas = frameState.context.canvas_;
                        var intersects = tempDeclutterGroup[0] <= canvas.width && tempDeclutterGroup[2] >= 0 && tempDeclutterGroup[1] <= canvas.height && tempDeclutterGroup[3] >= 0;
                        if (declutterGroup) {
                            if (!intersects && declutterGroup[4] == 1) {
                                continue;
                            }
                            declutterGroups.push(tempDeclutterGroup);
                        }
                    }
                }
                for (var d = 0; d < declutterGroups.length; d++) {
                    var targetDeclutterGroup = declutterGroups[d];
                    if (targetDeclutterGroup && targetDeclutterGroup.length > 5) {
                        var targetExtent = [targetDeclutterGroup[0], targetDeclutterGroup[1], targetDeclutterGroup[2], targetDeclutterGroup[3]];
                        // if (targetExtent[0] > tilePixelExtent[0] && targetExtent[1] > tilePixelExtent[3] && targetExtent[2] < tilePixelExtent[2] && targetExtent[3] < tilePixelExtent[1]) {
                        this.renderDeclutter_(targetDeclutterGroup, feature);
                        // }
                    }
                }
            }
        };
        ol.render.webgl.TextReplay.prototype.drawText = function (options) {
            var this$1 = this;
            var text = options.text;
            if (text || this.label) {
                var offset = 0;
                var end = 2;
                var stride = 2;
                this.startIndices.push(this.indices.length);
                var flatCoordinates = options.flatCoordinates;
                if (this.label) {
                    var image = this.label;
                    var width = image.width;
                    var height = image.height;
                    this.originX = 0;
                    this.originY = 0;
                    // this.height = height;
                    // this.width = width + lineWidth;
                    this.imageHeight = height;
                    this.imageWidth = width;
                    var currentImage;
                    if (this.images_.length === 0) {
                        this.images_.push(image);
                    }
                    else {
                        currentImage = this.images_[this.images_.length - 1];
                        if (ol.getUid(currentImage) != ol.getUid(image)) {
                            this.groupIndices.push(this.indices.length);
                            this.images_.push(image);
                        }
                    }
                    this.drawText_(flatCoordinates, offset, end, stride);
                }
                else {
                    var glyphAtlas = this.currAtlas_;
                    var j, jj, currX, currY, charArr, charInfo;
                    var anchorX = options.anchorX;
                    var anchorY = options.anchorY;
                    var lineWidth = (this.state_.lineWidth / 2) * this.state_.scale;
                    this$1.rotation = options.rotation;
                    currX = 0;
                    currY = 0;
                    charArr = text.split('');
                    for (j = 0, jj = charArr.length; j < jj; ++j) {
                        charInfo = glyphAtlas.atlas.getInfo(charArr[j]);
                        if (charInfo) {
                            var image = charInfo.image;
                            this$1.anchorX = anchorX - currX;
                            this$1.anchorY = anchorY - currY;
                            this$1.originX = j === 0 ? charInfo.offsetX - lineWidth : charInfo.offsetX;
                            this$1.originY = charInfo.offsetY;
                            this$1.height = glyphAtlas.height;
                            this$1.width = j === 0 || j === charArr.length - 1 ?
                                glyphAtlas.width[charArr[j]] + lineWidth : glyphAtlas.width[charArr[j]];
                            this$1.imageHeight = image.height;
                            this$1.imageWidth = image.width;
                            if (this$1.images_.length === 0) {
                                this$1.images_.push(image);
                            }
                            else {
                                var currentImage = this$1.images_[this$1.images_.length - 1];
                                if (ol.getUid(currentImage) != ol.getUid(image)) {
                                    this$1.groupIndices.push(this$1.indices.length);
                                    this$1.images_.push(image);
                                }
                            }
                            this$1.drawText_(flatCoordinates, offset, end, stride);
                        }
                        currX += this$1.width;
                    }
                }
            }
        };
        ol.render.webgl.ImageReplay.prototype.drawPoint = function (options) {
            var offset = 0;
            var end = 2;
            var stride = 2;
            var flatCoordinates = options.flatCoordinates;
            this.drawCoordinates(flatCoordinates, offset, end, stride);
        };
        // Blocking repeat
        ol.render.webgl.Replay.prototype.replayImage_ = function (frameState, declutterGroup, geometry) {
            var box = [];
            var flatCoordinates = geometry.getFlatCoordinates();
            var screenXY = this.screenXY;
            var pixelCoordinate = ol.transform.apply(frameState.coordinateToPixelTransform, [flatCoordinates[0] - this.origin[0] + screenXY[0], flatCoordinates[1] - this.origin[1] + screenXY[1]]);
            var scale = this.scale;
            var canvas = frameState.context.canvas_;
            var rotation = 0;
            var offsetX = -scale * (this.anchorX);
            var offsetY = -scale * (this.height - this.anchorY);
            box[0] = pixelCoordinate[0] + offsetX;
            box[3] = pixelCoordinate[1] - offsetY;
            offsetX = scale * (this.width - this.anchorX);
            offsetY = scale * this.anchorY;
            box[2] = pixelCoordinate[0] + offsetX;
            box[1] = pixelCoordinate[1] - offsetY;
            var intersects = box[0] <= canvas.width && box[2] >= 0 && box[1] <= canvas.height && box[3] >= 0;
            if (declutterGroup) {
                if (!intersects && declutterGroup[4] == 1) {
                    return;
                }
                ol.extent.extend(declutterGroup, box);
                var declutterArgs = [{
                        flatCoordinates: flatCoordinates,
                        rotation: rotation
                    }, this];
                declutterGroup.push(declutterArgs);
            }
        };
        ol.geom.flat.textpath.lineString = function (flatCoordinates, offset, end, stride, text, webglTextReplay, startM, maxAngle, resolution, screenXY, coordinateToPixelTransform, origin) {
            var result = [];
            // Keep text upright
            var reverse = flatCoordinates[offset] > flatCoordinates[end - stride];
            var numChars = text.length;
            var x1 = flatCoordinates[offset];
            var y1 = flatCoordinates[offset + 1];
            offset += stride;
            var x2 = flatCoordinates[offset];
            var y2 = flatCoordinates[offset + 1];
            var segmentM = 0;
            var segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)) / resolution;
            var chunk = '';
            var chunkLength = 0;
            var data, index, previousAngle;
            for (var i = 0; i < numChars; ++i) {
                index = reverse ? numChars - i - 1 : i;
                var char = text.charAt(index);
                chunk = reverse ? char + chunk : chunk + char;
                // var charLength = webglTextReplay.getTextSize_([chunk])[0] - chunkLength;    
                var charLength = webglTextReplay.getTextSize_([char])[0];
                chunkLength += charLength;
                var charM = startM + charLength / 2;
                // label exceed the road range
                // if(offset >= end - stride){
                // return result;
                // }
                while (offset < end - stride && segmentM + segmentLength < charM) {
                    x1 = x2;
                    y1 = y2;
                    offset += stride;
                    x2 = flatCoordinates[offset];
                    y2 = flatCoordinates[offset + 1];
                    segmentM += segmentLength;
                    segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)) / resolution;
                }
                var segmentPos = charM - segmentM;
                var angle = Math.atan2(y2 - y1, x2 - x1);
                if (reverse) {
                    angle += angle > 0 ? -Math.PI : Math.PI;
                }
                if (previousAngle !== undefined) {
                    var delta = angle - previousAngle;
                    delta += (delta > Math.PI) ? -2 * Math.PI : (delta < -Math.PI) ? 2 * Math.PI : 0;
                    if (Math.abs(delta) > maxAngle) {
                        return null;
                    }
                }
                var interpolate = segmentPos / segmentLength;
                var x = ol.math.lerp(x1, x2, interpolate);
                var y = ol.math.lerp(y1, y2, interpolate);
                if (previousAngle == angle) {
                    if (reverse) {
                        data[0] = x;
                        data[1] = y;
                        data[2] = charLength / 2;
                    }
                    data[4] = chunk;
                }
                else {
                    chunk = char;
                    chunkLength = charLength;
                    data = [x, y, charLength / 2, -angle, chunk];
                    if (reverse) {
                        result.unshift(data);
                    }
                    else {
                        result.push(data);
                    }
                    previousAngle = angle;
                }
                startM += charLength;
            }
            return result;
        };
        ol.geom.flat.length.lineString = function (flatCoordinates, offset, end, stride, resolution) {
            var x1 = flatCoordinates[offset];
            var y1 = flatCoordinates[offset + 1];
            var length = 0;
            var i;
            for (i = offset + stride; i < end; i += stride) {
                var x2 = flatCoordinates[i];
                var y2 = flatCoordinates[i + 1];
                length += (Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1)) / resolution);
                x1 = x2;
                y1 = y2;
            }
            return length;
        };
        // webgl render
        ol.render.webgl.Replay.prototype.webglReplay_ = function (context, skippedFeaturesHash, featureCallback, opt_hitExtent, screenXY) {
            var frameState = context.frameState;
            var layerState = context.layerState;
            var viewState = frameState.viewState;
            var center = viewState.center;
            var size = frameState.size;
            var pixelRatio = frameState.pixelRatio;
            var resolution = viewState.resolution;
            var opacity = layerState.opacity;
            var rotation = viewState.rotation;
            var oneByOne = undefined;
            var gl = context.getGL();
            var tmpStencil, tmpStencilFunc, tmpStencilMaskVal, tmpStencilRef, tmpStencilMask, tmpStencilOpFail, tmpStencilOpPass, tmpStencilOpZFail;
            if (this.lineStringReplay) {
                tmpStencil = gl.isEnabled(gl.STENCIL_TEST);
                tmpStencilFunc = gl.getParameter(gl.STENCIL_FUNC);
                tmpStencilMaskVal = gl.getParameter(gl.STENCIL_VALUE_MASK);
                tmpStencilRef = gl.getParameter(gl.STENCIL_REF);
                tmpStencilMask = gl.getParameter(gl.STENCIL_WRITEMASK);
                tmpStencilOpFail = gl.getParameter(gl.STENCIL_FAIL);
                tmpStencilOpPass = gl.getParameter(gl.STENCIL_PASS_DEPTH_PASS);
                tmpStencilOpZFail = gl.getParameter(gl.STENCIL_PASS_DEPTH_FAIL);
                gl.enable(gl.STENCIL_TEST);
                gl.clear(gl.STENCIL_BUFFER_BIT);
                gl.stencilMask(255);
                gl.stencilFunc(gl.ALWAYS, 1, 255);
                gl.stencilOp(gl.KEEP, gl.KEEP, gl.REPLACE);
                // this.lineStringReplay.replay(context,
                //     center, resolution, rotation, size, pixelRatio,
                //     opacity, skippedFeaturesHash,
                //     featureCallback, oneByOne, opt_hitExtent);
                // gl.stencilMask(0);
                // gl.stencilFunc(context.NOTEQUAL, 1, 255);
            }
            context.bindBuffer(gl.ARRAY_BUFFER, this.verticesBuffer);
            context.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);
            var locations = this.setUpProgram(gl, context, size, pixelRatio);
            // set the "uniform" values
            var projectionMatrix = ol.transform.reset(this.projectionMatrix_);
            ol.transform.scale(projectionMatrix, 2 / (resolution * size[0]), 2 / (resolution * size[1]));
            ol.transform.rotate(projectionMatrix, -rotation);
            ol.transform.translate(projectionMatrix, -(center[0] - screenXY[0]), -(center[1] - screenXY[1]));
            var offsetScaleMatrix = ol.transform.reset(this.offsetScaleMatrix_);
            ol.transform.scale(offsetScaleMatrix, 2 / size[0], 2 / size[1]);
            var offsetRotateMatrix = ol.transform.reset(this.offsetRotateMatrix_);
            if (rotation !== 0) {
                ol.transform.rotate(offsetRotateMatrix, -rotation);
            }
            gl.uniformMatrix4fv(locations.u_projectionMatrix, false, ol.vec.Mat4.fromTransform(this.tmpMat4_, projectionMatrix));
            gl.uniformMatrix4fv(locations.u_offsetScaleMatrix, false, ol.vec.Mat4.fromTransform(this.tmpMat4_, offsetScaleMatrix));
            gl.uniformMatrix4fv(locations.u_offsetRotateMatrix, false, ol.vec.Mat4.fromTransform(this.tmpMat4_, offsetRotateMatrix));
            gl.uniform1f(locations.u_opacity, opacity);
            // FIXME replace this temp solution with text calculation in worker
            if (this instanceof ol.render.webgl.TextReplay || this instanceof ol.render.webgl.ImageReplay) {
                gl.uniform1f(locations.u_zIndex, 0);
            }
            else if (this instanceof ol.render.webgl.LineStringReplay) {
                this.u_zIndex = locations.u_zIndex;
            }
            else if (this instanceof ol.render.webgl.PolygonReplay) {
                this.u_zIndex = locations.u_zIndex;
            }
            // draw!
            var result;
            if (featureCallback === undefined) {
                this.drawReplay(gl, context, skippedFeaturesHash, false);
            }
            else {
                // draw feature by feature for the hit-detection
                result = this.drawHitDetectionReplay(gl, context, skippedFeaturesHash, featureCallback, oneByOne, opt_hitExtent);
            }
            // disable the vertex attrib arrays
            this.shutDownProgram(gl, locations);
            if (this.lineStringReplay) {
                if (!tmpStencil) {
                    gl.disable(gl.STENCIL_TEST);
                }
                gl.clear(gl.STENCIL_BUFFER_BIT);
                gl.stencilFunc(/** @type {number} */ (tmpStencilFunc), 
                /** @type {number} */ (tmpStencilRef), /** @type {number} */ (tmpStencilMaskVal));
                gl.stencilMask(/** @type {number} */ (tmpStencilMask));
                gl.stencilOp(/** @type {number} */ (tmpStencilOpFail), 
                /** @type {number} */ (tmpStencilOpZFail), /** @type {number} */ (tmpStencilOpPass));
                // gl.stencilMask(0);
            }
            return result;
        };
        ol.renderer.canvas.VectorTileLayer.prototype.forEachFeatureAtCoordinate = function (coordinate, frameState, hitTolerance, callback, thisArg) {
            var resolution = frameState.viewState.resolution;
            var rotation = frameState.viewState.rotation;
            hitTolerance = hitTolerance == undefined ? 0 : hitTolerance;
            var layer = this.getLayer();
            /** @type {Object.<string, boolean>} */
            var features = {};
            /** @type {Array.<ol.VectorImageTile>} */
            var renderedTiles = this.renderedTiles;
            var source = /** @type {ol.source.VectorTile} */ (layer.getSource());
            var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);
            var bufferedExtent, found;
            var i, ii, replayGroup;
            var tile, tileCoord, tileExtent;
            for (i = 0, ii = renderedTiles.length; i < ii; ++i) {
                tile = renderedTiles[i];
                tileCoord = tile.wrappedTileCoord;
                tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);
                bufferedExtent = ol.extent.buffer(tileExtent, hitTolerance * resolution, bufferedExtent);
                if (!ol.extent.containsCoordinate(bufferedExtent, coordinate)) {
                    continue;
                }
                for (var t = 0, tt = tile.tileKeys.length; t < tt; ++t) {
                    var sourceTile = tile.getTile(tile.tileKeys[t]);
                    if (sourceTile.getState() == ol.TileState.ERROR) {
                        continue;
                    }
                    replayGroup = sourceTile.getReplayGroup(layer, tileCoord.toString());
                    found = found || replayGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {}, 
                    /**
                     * @param {ol.Feature|ol.render.Feature} feature Feature.
                     * @return {?} Callback result.
                     */
                    function (feature) {
                        var key = ol.getUid(feature).toString();
                        if (!(key in features)) {
                            features[key] = true;
                            return callback.call(thisArg, feature, layer);
                        }
                    }, null);
                }
            }
            return found;
        };
    };
    return VectorTileLayer;
}(ol.layer.VectorTile));



/***/ }),

/***/ "./src/main.ts":
/*!*********************!*\
  !*** ./src/main.ts ***!
  \*********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _layer_vectorTileLayer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./layer/vectorTileLayer */ "./src/layer/vectorTileLayer.ts");
/* harmony import */ var _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./worker/vectorTileLayerThreadMode */ "./src/worker/vectorTileLayerThreadMode.ts");


ol.mapsuite = {};
ol.mapsuite["VectorTileLayer"] = _layer_vectorTileLayer__WEBPACK_IMPORTED_MODULE_0__["VectorTileLayer"];
ol.mapsuite["VectorTileLayerThreadMode"] = _worker_vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_1__["VectorTileLayerThreadMode"];
window["ol"] = ol;


/***/ }),

/***/ "./src/render/geoVectorTilelayerRender.ts":
/*!************************************************!*\
  !*** ./src/render/geoVectorTilelayerRender.ts ***!
  \************************************************/
/*! exports provided: GeoVectorTileLayerRender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoVectorTileLayerRender", function() { return GeoVectorTileLayerRender; });
/* harmony import */ var _replayGroupCustom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./replayGroupCustom */ "./src/render/replayGroupCustom.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoVectorTileLayerRender = /** @class */ (function (_super) {
    __extends(GeoVectorTileLayerRender, _super);
    function GeoVectorTileLayerRender(layer) {
        var _this = _super.call(this, layer) || this;
        _this.VECTOR_REPLAYS_CUSTOM = {
            "image": [ol.render.ReplayType.DEFAULT],
            "hybrid": [ol.render.ReplayType.IMAGE, ol.render.ReplayType.TEXT, ol.render.ReplayType.DEFAULT],
            "vector": ol.render.replay.ORDER
        };
        _this.VECTOR_REPLAYS = _this.VECTOR_REPLAYS_CUSTOM;
        _this.prepareFrame = _this.prepareFrameCustom;
        _this.renderTileImage_ = _this.renderTileImageCustom;
        return _this;
    }
    GeoVectorTileLayerRender.prototype.tileLayerPrepareFrameCustom = function (frameState, layerState) {
        var pixelRatio = frameState.pixelRatio;
        var size = frameState.size;
        var viewState = frameState.viewState;
        var projection = viewState.projection;
        var viewResolution = viewState.resolution;
        var viewCenter = viewState.center;
        var tileLayer = this.getLayer();
        var tileSource = /** @type {ol.source.Tile} */ (tileLayer.getSource());
        var sourceRevision = tileSource.getRevision();
        var tileGrid = tileSource.getTileGridForProjection(projection);
        var z = tileGrid.getZForResolution(viewResolution, this.zDirection);
        var tileResolution = tileGrid.getResolution(z);
        var oversampling = Math.round(viewResolution / tileResolution) || 1;
        var extent = frameState.extent;
        // update for webgl
        // let extent = (<any>ol.extent).buffer(frameState.extent,
        //     tileLayer.getRenderBuffer() * viewResolution);
        if (layerState.extent !== undefined) {
            extent = ol.extent.getIntersection(extent, layerState.extent);
        }
        if (ol.extent.isEmpty(extent)) {
            // Return false to prevent the rendering of the layer.
            return false;
        }
        var tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);
        // Adjust tile cache size according to tile Range, TODO: add a property for that
        var xOffset = (tileRange.maxX - tileRange.minX);
        var yOffset = (tileRange.maxY - tileRange.minY);
        xOffset = xOffset <= 0 ? 1 : xOffset * 2 + 3;
        yOffset = yOffset <= 0 ? 1 : yOffset * 2 + 3;
        var cacheSize = xOffset * yOffset;
        tileSource.tileCache.highWaterMark = cacheSize <= 15 ? 15 : cacheSize;
        // Adjust vectorTileData cache size according to the tile Range in data max zoom. it will pass 
        var dataTileRand = tileGrid.getTileRangeForExtentAndZ(extent, tileSource.maxDataZoom);
        var offsetX = dataTileRand.maxX - dataTileRand.minX;
        var offsetY = dataTileRand.maxY - dataTileRand.minY;
        offsetX = offsetX <= 0 ? 1 : offsetX + 3;
        offsetY = offsetY <= 0 ? 1 : offsetY + 3;
        var vectorTileDataCahceSize = offsetX * offsetY;
        tileSource["vectorTileDataCahceSize"] = vectorTileDataCahceSize;
        tileSource.getGeoFormat()["vectorTileDataCahceSize"] = vectorTileDataCahceSize;
        var imageExtent = tileGrid.getTileRangeExtent(z, tileRange);
        var tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);
        /**
         * @type {Object.<number, Object.<string, ol.Tile>>}
         */
        var tilesToDrawByZ = {};
        tilesToDrawByZ[z] = {};
        var findLoadedTiles = this.createLoadedTileFinder(tileSource, projection, tilesToDrawByZ, tileLayer);
        var tmpExtent = this.tmpExtent;
        var tmpTileRange = this.tmpTileRange_;
        var newTiles = false;
        var tile, x, y;
        for (x = tileRange.minX; x <= tileRange.maxX; ++x) {
            for (y = tileRange.minY; y <= tileRange.maxY; ++y) {
                tile = tileSource.getTile(z, x, y, pixelRatio, projection);
                tile.tileRange = tileRange;
                tile.pixelRatio = pixelRatio;
                if (tile.getState() === ol.TileState.ERROR) {
                    if (!tileLayer.getUseInterimTilesOnError()) {
                        // When useInterimTilesOnError is false, we consider the error tile as loaded.
                        tile.setState(ol.TileState.LOADED);
                    }
                    else if (tileLayer.getPreload() > 0) {
                        // Preloaded tiles for lower resolutions might have finished loading.
                        newTiles = true;
                    }
                }
                if (!this.isDrawableTile_(tile)) {
                    tile = tile.getInterimTile();
                }
                if (this.isDrawableTile_(tile)) {
                    var uid = ol.getUid(this);
                    if (tile.getState() === ol.TileState.LOADED) {
                        tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;
                        var inTransition = tile.inTransition(uid);
                        if (!newTiles && (inTransition || this.renderedTiles.indexOf(tile) === -1)) {
                            newTiles = true;
                        }
                    }
                    // judge the data of replayGroup for drawing
                    var sourceTile = tile.getTile(tile.tileKeys[0]);
                    var replayGroup = sourceTile && sourceTile.getReplayGroup(this.getLayer(), sourceTile.tileCoord.toString());
                    if (tile.getAlpha(uid, frameState.time) === 1 && (replayGroup && Object.keys(replayGroup.replaysByZIndex_).length > 0)) {
                        // don't look for alt tiles if alpha is 1
                        continue;
                    }
                }
                var childTileRange = tileGrid.getTileCoordChildTileRange(tile.tileCoord, tmpTileRange, tmpExtent);
                var covered = false;
                if (childTileRange) {
                    covered = findLoadedTiles((z + 1), childTileRange);
                }
                if (!covered) {
                    // if (!covered && frameState.isZoom) {
                    tileGrid.forEachTileCoordParentTileRange(tile.tileCoord, findLoadedTiles, null, tmpTileRange, tmpExtent);
                }
            }
        }
        // delete a large interval for drawing
        var tilesToDrawKeys = Object.keys(tilesToDrawByZ);
        if (tilesToDrawKeys.length > 1) {
            while (+tilesToDrawKeys[tilesToDrawKeys.length - 1] - (+tilesToDrawKeys[0]) > 2) {
                delete tilesToDrawByZ[tilesToDrawKeys[0]];
                tilesToDrawKeys = Object.keys(tilesToDrawByZ);
            }
        }
        var renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;
        var hints = frameState.viewHints;
        var animatingOrInteracting = hints[ol.ViewHint.ANIMATING] || hints[ol.ViewHint.INTERACTING];
        if (!(this.renderedResolution && Date.now() - frameState.time > 16 && animatingOrInteracting) && (newTiles ||
            !(this.renderedExtent_ && ol.extent.containsExtent(this.renderedExtent_, extent)) ||
            this.renderedRevision !== sourceRevision ||
            oversampling !== this.oversampling_ ||
            !animatingOrInteracting && renderedResolution !== this.renderedResolution)) {
            // let context = this.context;
            // if (context) {
            //     let tilePixelSize = tileSource.getTilePixelSize(z, pixelRatio, projection);
            //     let width = Math.round(tileRange.getWidth() * tilePixelSize[0] / oversampling);
            //     let height = Math.round(tileRange.getHeight() * tilePixelSize[1] / oversampling);
            //     let canvas = context.canvas;
            //     if (canvas.width !== width || canvas.height !== height) {
            //         this.oversampling_ = oversampling;
            //         canvas.width = width;
            //         canvas.height = height;
            //     } else {
            //         if (this.renderedExtent_ && !ol.extent.equals(imageExtent, this.renderedExtent_)) {
            //             context.clearRect(0, 0, width, height);
            //         }
            //         oversampling = this.oversampling_;
            //     }
            // }
            this.renderedTiles.length = 0;
            /** @type {Array.<number>} */
            var zs = Object.keys(tilesToDrawByZ).map(Number);
            zs.sort(function (a, b) {
                if (a === z) {
                    return 1;
                }
                else if (b === z) {
                    return -1;
                }
                else {
                    return a > b ? 1 : a < b ? -1 : 0;
                }
            });
            var currentResolution = void 0, currentScale = void 0, currentTilePixelSize = void 0, currentZ = void 0, i = void 0, ii = void 0;
            var tileExtent = void 0, tileGutter = void 0, tilesToDraw = void 0, w = void 0, h = void 0;
            for (i = 0, ii = zs.length; i < ii; ++i) {
                currentZ = zs[i];
                currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);
                currentResolution = tileGrid.getResolution(currentZ);
                currentScale = currentResolution / tileResolution;
                tileGutter = tilePixelRatio * tileSource.getGutter(projection);
                tilesToDraw = tilesToDrawByZ[currentZ];
                for (var tileCoordKey in tilesToDraw) {
                    tile = tilesToDraw[tileCoordKey];
                    tileExtent = tileGrid.getTileCoordExtent(tile.getTileCoord(), tmpExtent);
                    x = (tileExtent[0] - imageExtent[0]) / tileResolution * tilePixelRatio / oversampling;
                    y = (imageExtent[3] - tileExtent[3]) / tileResolution * tilePixelRatio / oversampling;
                    w = currentTilePixelSize[0] * currentScale / oversampling;
                    h = currentTilePixelSize[1] * currentScale / oversampling;
                    this.drawTileImage(tile, frameState, layerState, x, y, w, h, tileGutter, z === currentZ);
                    tile.transition = (z === currentZ);
                    tile.screenXY = [(tileExtent[0] + tileExtent[2]) / 2, (tileExtent[1] + tileExtent[3]) / 2];
                    this.renderedTiles.push(tile);
                }
            }
            this.renderedRevision = sourceRevision;
            this.renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;
            this.renderedExtent_ = imageExtent;
        }
        var scale = this.renderedResolution / viewResolution;
        var transform = ol.transform.compose(this.imageTransform_, pixelRatio * size[0] / 2, pixelRatio * size[1] / 2, scale, scale, 0, (this.renderedExtent_[0] - viewCenter[0]) / this.renderedResolution * pixelRatio, (viewCenter[1] - this.renderedExtent_[3]) / this.renderedResolution * pixelRatio);
        ol.transform.compose(this.coordinateToCanvasPixelTransform, pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5], pixelRatio / viewResolution, -pixelRatio / viewResolution, 0, -viewCenter[0], -viewCenter[1]);
        this.updateUsedTiles(frameState.usedTiles, tileSource, z, tileRange);
        this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio, projection, extent, z, tileLayer.getPreload());
        this.scheduleExpireCache(frameState, tileSource);
        this.updateLogos(frameState, tileSource);
        return this.renderedTiles.length > 0;
    };
    GeoVectorTileLayerRender.prototype.prepareFrameCustom = function (frameState, layerState) {
        var layer = this.getLayer();
        var layerRevision = layer.getRevision();
        if (this.renderedLayerRevision_ !== layerRevision) {
            this.renderedTiles.length = 0;
            var renderMode = layer.getRenderMode();
            if (!this.context && renderMode !== ol.layer.VectorTileRenderType.VECTOR) {
                this.context = ol.dom.createCanvasContext2D();
            }
            if (this.context && renderMode === ol.layer.VectorTileRenderType.VECTOR) {
                this.context = null;
            }
        }
        this.renderedLayerRevision_ = layerRevision;
        return this.tileLayerPrepareFrameCustom.apply(this, arguments);
    };
    GeoVectorTileLayerRender.prototype.postCompose = function (context, frameState, layerState) {
        var layer = this.getLayer();
        var declutterReplays = layer.getDeclutter() ? {} : null;
        var source = /** @type {ol.source.VectorTile} */ (layer.getSource());
        var renderMode = layer.getRenderMode();
        var replayTypes = this.VECTOR_REPLAYS_CUSTOM[renderMode];
        var pixelRatio = frameState.pixelRatio;
        var rotation = frameState.viewState.rotation;
        var size = frameState.size;
        // let offsetX, offsetY;
        // if (rotation) {
        // offsetX = Math.round(pixelRatio * size[0] / 2);
        // offsetY = Math.round(pixelRatio * size[1] / 2);
        // (<any>ol.render.canvas).rotateAtOffset(context, -rotation, offsetX, offsetY);
        // }
        if (declutterReplays) {
            this.declutterTree_.clear();
        }
        var tiles = this.renderedTiles;
        var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);
        // let clips = [];
        var zs = [];
        for (var i = tiles.length - 1; i >= 0; --i) {
            var tile = /** @type {ol.VectorImageTile} */ (tiles[i]);
            var screenXY = tile.screenXY;
            if (tile.getState() === ol.TileState.ABORT) {
                continue;
            }
            var tileCoord = tile.tileCoord;
            var worldOffset = tileGrid.getTileCoordExtent(tileCoord)[0] -
                tileGrid.getTileCoordExtent(tile.wrappedTileCoord)[0];
            var transform = undefined;
            for (var t = 0, tt = tile.tileKeys.length; t < tt; ++t) {
                var sourceTile = tile.getTile(tile.tileKeys[t]);
                if (sourceTile.getState() === ol.TileState.ERROR) {
                    continue;
                }
                // reuse replayGroup of source Tile to reduce the memory.
                // let replayGroup = sourceTile.getReplayGroup(layer, tileCoord.toString());
                var replayGroup = sourceTile.getReplayGroup(layer, sourceTile.tileCoord.toString());
                if (renderMode !== ol.layer.VectorTileRenderType.VECTOR && !replayGroup.hasReplays(replayTypes)) {
                    continue;
                }
                if (!transform) {
                    transform = this.getTransform(frameState, worldOffset);
                }
                // let currentZ = sourceTile.tileCoord[0];
                // let currentClip = replayGroup.getClipCoords(transform);
                // context.save();
                context.globalAlpha = layerState.opacity;
                // Create a clip mask for regions in this low resolution tile that are
                // already filled by a higher resolution tile
                // for (let j = 0, jj = clips.length; j < jj; ++j) {
                //     let clip = clips[j];
                //     if (currentZ < zs[j]) {
                //         context.beginPath();
                //         // counter-clockwise (outer ring) for current tile
                //         context.moveTo(currentClip[0], currentClip[1]);
                //         context.lineTo(currentClip[2], currentClip[3]);
                //         context.lineTo(currentClip[4], currentClip[5]);
                //         context.lineTo(currentClip[6], currentClip[7]);
                //         // clockwise (inner ring) for higher resolution tile
                //         context.moveTo(clip[6], clip[7]);
                //         context.lineTo(clip[4], clip[5]);
                //         context.lineTo(clip[2], clip[3]);
                //         context.lineTo(clip[0], clip[1]);
                //         context.clip();
                //     }
                // }
                context.frameState = frameState;
                context.layerState = layerState;
                replayGroup.replay(context, transform, rotation, {}, replayTypes, declutterReplays, screenXY);
                // context.restore();
                // clips.push(currentClip);
                // zs.push(currentZ);
                if (Object.keys(replayGroup.replaysByZIndex_).length) {
                    var uid = this.ol_uid;
                    var alpha = tile.transition ? tile.getAlpha(uid, frameState.time) : 1;
                    if (alpha !== 1) {
                        frameState.animate = true;
                    }
                    else if (tile.transition) {
                        tile.endTransition(uid);
                    }
                }
            }
        }
        if (declutterReplays) {
            // var hints = frameState.viewHints;
            // var animatingOrInteracting = hints[(<any>ol).ViewHint.ANIMATING] || hints[(<any>ol).ViewHint.INTERACTING];
            // // delete context["quickZoom"]
            // if (animatingOrInteracting) {
            //     context["quickZoom"] = frameState["quickZoom"];
            // }
            // context["currentResolution"] = frameState["currentResolution"];
            // (<any>ol.render.canvas).ReplayGroup.replayDeclutter(declutterReplays, context, rotation);
        }
        if (rotation) {
            //     (<any>ol.render.canvas).rotateAtOffset(context, rotation,
            // /** @type {number} */(offsetX), /** @type {number} */(offsetY));
        }
        ol.renderer.canvas.TileLayer.prototype.postCompose.apply(this, arguments);
    };
    GeoVectorTileLayerRender.prototype.createReplayGroup_ = function (tile, frameState, x, y) {
        var layer = this.getLayer();
        var pixelRatio = frameState.pixelRatio;
        var projection = frameState.viewState.projection;
        var revision = layer.getRevision();
        var renderOrder = /** @type {ol.RenderOrderFunction} */ (layer.getRenderOrder()) || null;
        var replayState = tile.getReplayState(layer);
        if (!replayState.dirty && replayState.renderedRevision === revision &&
            replayState.renderedRenderOrder === renderOrder) {
            return;
        }
        var source = /** @type {ol.source.VectorTile} */ (layer.getSource());
        var sourceTileGrid = source.getTileGrid();
        var tileGrid = source.getTileGridForProjection(projection);
        var resolution = tileGrid.getResolution(tile.tileCoord[0]);
        var tileExtent = tileGrid.getTileCoordExtent(tile.wrappedTileCoord);
        var _loop_1 = function (t, tt) {
            var sourceTile = tile.getTile(tile.tileKeys[t]);
            if (sourceTile.getState() === ol.TileState.ERROR) {
                return "continue";
            }
            var sourceTileCoord = sourceTile.requestTileCoord;
            var sourceTileExtent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);
            var sharedExtent = ol.extent.getIntersection(tileExtent, sourceTileExtent);
            // let bufferedExtent = ol.extent.equals(sourceTileExtent, sharedExtent) ? null :
            //     ol.extent.buffer(sharedExtent, layer.getRenderBuffer() * resolution);
            var tileProjection = sourceTile.getProjection();
            var reproject = true;
            replayState.dirty = false;
            // reuse replayGroup of source Tile to reduce the memory.
            var distReplayGroup = sourceTile.getReplayGroup(layer, tile.wrappedTileCoord.toString());
            if (distReplayGroup) {
                // Check replayGroup has replays
                var replaysZindexCount = 0;
                if (distReplayGroup.replaysByZIndex_) {
                    for (var zindex in distReplayGroup.replaysByZIndex_) {
                        replaysZindexCount++;
                    }
                }
                if (source.isMultithread && replaysZindexCount === 0) {
                    // the replays did not created, it will create after web worker call back
                    if (sourceTile) {
                        if (sourceTile["reuseVectorImageTile"] === undefined) {
                            sourceTile["reuseVectorImageTile"] = [];
                        }
                        sourceTile["reuseVectorImageTile"].push(tile);
                    }
                }
                else {
                    replayState.renderedRevision = revision;
                    replayState.renderedRenderOrder = renderOrder;
                    replayState.renderedTileLoaded = true;
                }
            }
            else {
                replayGroup = new _replayGroupCustom__WEBPACK_IMPORTED_MODULE_0__["ReplayGroupCustom"](0, sharedExtent, layer.getRenderBuffer(), this_1.declutterTree_);
                // let replayGroup = new ReplayGroupCustom(0, sharedExtent, resolution, pixelRatio, source.getOverlaps(), this.declutterTree_, layer.getRenderBuffer());
                var squaredTolerance_1 = ol.renderer.vector.getSquaredTolerance(resolution, pixelRatio);
                var strategyTree_1 = ol.ext.rbush(9);
                /**
                 * @param {ol.Feature|ol.render.Feature} feature Feature.
                 * @this {ol.renderer.canvas.VectorTileLayer}
                 */
                var renderFeature_1 = function (feature, geoStyles, options) {
                    var styles;
                    if (geoStyles) {
                        if (geoStyles && geoStyles.length > 0) {
                            for (var i = 0, ii = geoStyles.length; i < ii; i++) {
                                if (geoStyles[i]) {
                                    var ol4Styles = geoStyles[i].getStyles(feature, resolution, options);
                                    if (styles === undefined) {
                                        styles = [];
                                    }
                                    Array.prototype.push.apply(styles, ol4Styles);
                                }
                            }
                        }
                    }
                    else {
                        var styleFunction = feature.getStyleFunction();
                        if (styleFunction) {
                            styles = styleFunction.call(/** @type {ol.Feature} */ (feature), resolution);
                        }
                        else {
                            styleFunction = layer.getStyleFunction();
                            if (styleFunction) {
                                styles = styleFunction(feature, resolution);
                            }
                        }
                    }
                    if (styles) {
                        var dirty = this.renderFeature(feature, squaredTolerance_1, styles, replayGroup);
                        this.dirty_ = this.dirty_ || dirty;
                        replayState.dirty = replayState.dirty || dirty;
                    }
                };
                var instructs = void 0;
                var features = void 0;
                if (sourceTile.featuresAndInstructs) {
                    instructs = sourceTile.featuresAndInstructs["instructs"];
                    features = sourceTile.featuresAndInstructs["features"];
                }
                if (source.isMultithread) {
                    // let render = this;
                    if (tileProjection.getUnits() === ol.proj.Units.TILE_PIXELS) {
                        tileProjection.setWorldExtent(sourceTileExtent);
                        tileProjection.setExtent(sourceTile.getExtent());
                    }
                    var tileProjectionInfo = {};
                    for (var name_1 in tileProjection) {
                        if (typeof tileProjection[name_1] !== "function") {
                            tileProjectionInfo[name_1] = tileProjection[name_1];
                        }
                    }
                    var projectInfo = {};
                    for (var name_2 in projection) {
                        if (typeof projection[name_2] !== "function") {
                            projectInfo[name_2] = projection[name_2];
                        }
                    }
                    var geoStyles_1 = source.getGeoFormat().styleJsonCache.geoStyles;
                    if (features && instructs) {
                        for (var i = 0; i < instructs.length; i++) {
                            var geoStyleId = instructs[i][1];
                            var geoStyle = geoStyles_1[geoStyleId];
                            var featureInfo = features[instructs[i][0]];
                            var feature = new ol.render.Feature(featureInfo.type_, featureInfo.flatCoordinates_, featureInfo.ends_, featureInfo.properties_);
                            if (featureInfo["projected"] === undefined) {
                                if (tileProjection.getUnits() === ol.proj.Units.TILE_PIXELS) {
                                    // projected tile extent
                                    tileProjection.setWorldExtent(sourceTileExtent);
                                    // tile extent in tile pixel space
                                    tileProjection.setExtent(sourceTile.getExtent());
                                }
                                feature.getGeometry().transform(tileProjection, projection);
                                feature.extent_ = null;
                                featureInfo["projected"] = "";
                            }
                            feature["tempTreeZindex"] = instructs[i][2];
                            feature["styleId"] = geoStyleId;
                            renderFeature_1.call(this_1, feature, [geoStyle], { strategyTree: strategyTree_1, frameState: frameState });
                        }
                    }
                    var messageData = [
                        [0, tileExtent, resolution, pixelRatio, source.getOverlaps(), this_1.declutterTree_, layer.getRenderBuffer(), source.getGeoFormat().minimalist],
                        sourceTile.requestTileCoord,
                        sourceTile.tileCoord,
                        tileProjectionInfo,
                        projectInfo,
                        squaredTolerance_1,
                        window.devicePixelRatio,
                        ol.getUid(source.getGeoFormat()),
                        frameState["coordinateToPixelTransform"],
                        source.getGeoFormat().maxDataZoom,
                        source["vectorTileDataCahceSize"],
                        x,
                        y,
                        frameState["pixelToCoordinateTransform"],
                    ];
                    rendera = this_1;
                    var callabck = function (messageData) {
                        var replaysByZIndex_ = messageData["replays"];
                        var features = messageData["features"];
                        var instructs = messageData["instructs"];
                        if (features && instructs) {
                            for (var i_1 = 0; i_1 < instructs.length; i_1++) {
                                var geoStyleId = instructs[i_1][1];
                                var geoStyle = geoStyles_1[geoStyleId];
                                var featureInfo = features[instructs[i_1][0]];
                                var feature = new ol.render.Feature(featureInfo.type_, featureInfo.flatCoordinates_, featureInfo.ends_, featureInfo.properties_);
                                feature["tempTreeZindex"] = instructs[i_1][2];
                                feature["styleId"] = geoStyleId;
                                renderFeature_1.call(rendera, feature, [geoStyle], { strategyTree: strategyTree_1, frameState: frameState });
                            }
                        }
                        // replayGroup.getReplaysMerged(replaysByZIndex_);
                        for (var zindex_1 in replaysByZIndex_) {
                            for (var replayType in replaysByZIndex_[zindex_1]) {
                                // merge worker to main with replaysByZIndex_
                                var replay = replayGroup.getReplay(zindex_1, replayType);
                                var workerReplay = replaysByZIndex_[zindex_1][replayType];
                                for (var key in workerReplay) {
                                    // if(key === 'indices' || key === 'vertices'){
                                    //     replay[key] = new Int32Array(workerReplay[key]);
                                    // }else 
                                    if (key !== 'lineStringReplay') {
                                        replay[key] = workerReplay[key];
                                    }
                                }
                                if (workerReplay['lineStringReplay']) {
                                    for (var lineStringKey in workerReplay['lineStringReplay']) {
                                        replay['lineStringReplay'][lineStringKey] = workerReplay['lineStringReplay'][lineStringKey];
                                    }
                                }
                            }
                        }
                        // for (let r in replayGroup.getReplays()) {
                        //     zIndexKeys[r] = true;
                        // }     
                        replayGroup.finish(frameState['context']);
                        replayState.renderedTileLoaded = true;
                        sourceTile.state = ol.TileState.LOADED;
                        if (sourceTile["reuseVectorImageTile"]) {
                            for (var i = 0; i < sourceTile["reuseVectorImageTile"].length; i++) {
                                var reusedVectorImageTile = sourceTile["reuseVectorImageTile"][i];
                                delete sourceTile["reuseVectorImageTile"][i];
                                var vectorImageTileReplayState = reusedVectorImageTile.getReplayState(layer);
                                vectorImageTileReplayState.renderedRevision = revision;
                                vectorImageTileReplayState.renderedRenderOrder = renderOrder;
                                vectorImageTileReplayState.renderedTileLoaded = true;
                                reusedVectorImageTile.setState(ol.TileState.LOADED);
                            }
                        }
                        tile.setState(ol.TileState.LOADED);
                    };
                    // reuse replayGroup of source Tile to reduce the memory.
                    sourceTile.setReplayGroup(layer, sourceTile.tileCoord.toString(), replayGroup);
                    source.getGeoFormat().workerManager.postMessage(sourceTile.tileCoord + ol.getUid(callabck), "createReplay", messageData, callabck, sourceTile.workerId);
                    replayState.renderedRevision = revision;
                    replayState.renderedTileLoaded = false;
                }
                else {
                    if (instructs && instructs.length > 0) {
                        for (var i = 0; i < instructs.length; i++) {
                            var featureIndex = instructs[i][0];
                            var feature = features[featureIndex];
                            if (feature["projected"] === undefined) {
                                if (reproject) {
                                    if (tileProjection.getUnits() === ol.proj.Units.TILE_PIXELS) {
                                        // projected tile extent
                                        tileProjection.setWorldExtent(sourceTileExtent);
                                        // tile extent in tile pixel space
                                        tileProjection.setExtent(sourceTile.getExtent());
                                    }
                                    feature.getGeometry().transform(tileProjection, projection);
                                    feature.extent_ = null;
                                    feature.getExtent();
                                }
                                feature["projected"] = "";
                            }
                            feature["tempTreeZindex"] = instructs[i][2];
                            renderFeature_1.call(this_1, feature, [instructs[i][1]], { strategyTree: strategyTree_1, frameState: frameState });
                        }
                    }
                    replayGroup.finish(frameState['context']);
                    // for (let r in replayGroup.getReplays()) {
                    //     zIndexKeys[r] = true;
                    // }
                    sourceTile.setReplayGroup(layer, sourceTile.tileCoord.toString(), replayGroup);
                    replayState.renderedRevision = revision;
                    replayState.renderedRenderOrder = renderOrder;
                    replayState.renderedTileLoaded = true;
                }
            }
        };
        var this_1 = this, replayGroup, rendera;
        // let zIndexKeys = {};
        for (var t = 0, tt = tile.tileKeys.length; t < tt; ++t) {
            _loop_1(t, tt);
        }
    };
    GeoVectorTileLayerRender.prototype.renderTileImageCustom = function (tile, frameState, layerState) {
        var layer = this.getLayer();
        var replayState = tile.getReplayState(layer);
        var revision = layer.getRevision();
        var replays = ol.renderer.canvas.VectorTileLayer.IMAGE_REPLAYS[layer.getRenderMode()];
        if (replays && replayState.renderedTileLoaded && replayState.renderedTileRevision !== revision) {
            replayState.renderedTileRevision = revision;
            var tileCoord = tile.wrappedTileCoord;
            var z = tileCoord[0];
            var pixelRatio = frameState.pixelRatio;
            var source = /** @type {ol.source.VectorTile} */ (layer.getSource());
            var tileGrid = source.getTileGridForProjection(frameState.viewState.projection);
            var resolution = tileGrid.getResolution(z);
            var context = tile.getContext(layer);
            var size = source.getTilePixelSize(z, pixelRatio, frameState.viewState.projection);
            context.canvas.width = size[0];
            context.canvas.height = size[1];
            var tileExtent = tileGrid.getTileCoordExtent(tileCoord);
            if (layer.background) {
                context.rect(0, 0, size[0], size[1]);
                context.fillStyle = layer.background;
                context.fill();
            }
            for (var i = 0, ii = tile.tileKeys.length; i < ii; ++i) {
                var sourceTile = tile.getTile(tile.tileKeys[i]);
                if (sourceTile.getState() === ol.TileState.ERROR) {
                    continue;
                }
                var pixelScale = pixelRatio / resolution;
                var transform = ol.transform.reset(this.tmpTransform_);
                ol.transform.scale(transform, pixelScale, -pixelScale);
                ol.transform.translate(transform, -tileExtent[0], -tileExtent[3]);
                // reuse replayGroup of source Tile to reduce the memory.
                var replayGroup = sourceTile.getReplayGroup(layer, tileCoord);
                replayGroup.replay(context, transform, 0, {}, replays);
            }
        }
    };
    GeoVectorTileLayerRender.handles = function (type, layer) {
        return type === ol.renderer.Type.CANVAS && layer.getType() === ol.LayerType.MAPSUITE_VECTORTILE;
    };
    GeoVectorTileLayerRender.create = function (mapRenderer, layer) {
        return new GeoVectorTileLayerRender(layer);
    };
    GeoVectorTileLayerRender.prototype.disposeInternal = function () {
        ol.events.unlisten(ol.render.canvas.labelCache, ol.events.EventType.CLEAR, this.handleFontsChanged_, this);
        var workerManager = this.getLayer().getSource().getGeoFormat().workerManager;
        workerManager.close();
        ol.renderer.canvas.TileLayer.prototype.disposeInternal.call(this);
    };
    ;
    GeoVectorTileLayerRender.prototype.createLoadedTileFinder = function (source, projection, tiles, tileLayer) {
        return (
        /**
         * @param {number} zoom Zoom level.
         * @param {ol.TileRange} tileRange Tile range.
         * @return {boolean} The tile range is fully loaded.
         */
        function (zoom, tileRange) {
            function callback(tile) {
                if (!tiles[zoom]) {
                    tiles[zoom] = {};
                }
                tiles[zoom][tile.tileCoord.toString()] = tile;
            }
            return source.forEachLoadedTile(projection, zoom, tileRange, callback, tileLayer);
        });
    };
    return GeoVectorTileLayerRender;
}(ol.renderer.canvas.VectorTileLayer));



/***/ }),

/***/ "./src/render/replayGroupCustom.ts":
/*!*****************************************!*\
  !*** ./src/render/replayGroupCustom.ts ***!
  \*****************************************/
/*! exports provided: ReplayGroupCustom */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReplayGroupCustom", function() { return ReplayGroupCustom; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var ReplayGroupCustom = /** @class */ (function (_super) {
    __extends(ReplayGroupCustom, _super);
    function ReplayGroupCustom(tolerance, maxExtent, opt_renderBuffer, declutterTree) {
        var _this = _super.call(this, tolerance, maxExtent, opt_renderBuffer) || this;
        _this.BATCH_CONSTRUCTORS_CUSTOM = {
            "Circle": ol.render.webgl.PolygonReplay,
            "Default": ol.render.webgl.Replay,
            "Image": ol.render.webgl.ImageReplay,
            "LineString": ol.render.webgl.LineStringReplay,
            "Polygon": ol.render.webgl.PolygonReplay,
            "Text": ol.render.webgl.TextReplay
        };
        _this.getReplay = _this.getReplayCustom;
        _this.BATCH_CONSTRUCTORS_ = _this.BATCH_CONSTRUCTORS_CUSTOM;
        _this.replay = _this.replayCustom;
        _this.declutterTree = declutterTree;
        return _this;
        // this.forEachFeatureAtCoordinate = this.forEachFeatureAtCoordinateCustom;
    }
    ReplayGroupCustom.prototype.forEachFeatureAtCoordinateCustom = function (coordinate, resolution, rotation, hitTolerance, skippedFeaturesHash, callback, declutterReplays) {
        hitTolerance = Math.round(hitTolerance);
        var contextSize = hitTolerance * 2 + 1;
        var transform = ol.transform.compose(this.hitDetectionTransform_, hitTolerance + 0.5, hitTolerance + 0.5, 1 / resolution, -1 / resolution, -rotation, -coordinate[0], -coordinate[1]);
        var context = this.hitDetectionContext_;
        if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {
            context.canvas.width = contextSize;
            context.canvas.height = contextSize;
        }
        else {
            context.clearRect(0, 0, contextSize, contextSize);
        }
        /**
         * @type {ol.Extent}
         */
        var hitExtent;
        if (this.renderBuffer_ !== undefined) {
            hitExtent = ol.extent.createEmpty();
            ol.extent.extendCoordinate(hitExtent, coordinate);
            ol.extent.buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);
        }
        var mask = ol.render.canvas.ReplayGroup.getCircleArray_(hitTolerance);
        var declutteredFeatures;
        // if (this.declutterTree_) {
        //     declutteredFeatures = this.declutterTree_.all().map(function (entry) {
        //         return entry.value;
        //     });
        // }
        /**
         * @param {ol.Feature|ol.render.Feature} feature Feature.
         * @return {?} Callback result.
         */
        function hitDetectionCallback(feature) {
            var imageData = context.getImageData(0, 0, contextSize, contextSize).data;
            for (var i = 0; i < contextSize; i++) {
                for (var j = 0; j < contextSize; j++) {
                    if (mask[i][j]) {
                        if (imageData[(j * contextSize + i) * 4 + 3] > 0) {
                            var result = void 0;
                            if (!declutteredFeatures || declutteredFeatures.indexOf(feature) !== -1) {
                                result = callback(feature);
                            }
                            if (result) {
                                return result;
                            }
                            else {
                                context.clearRect(0, 0, contextSize, contextSize);
                                return undefined;
                            }
                        }
                    }
                }
            }
        }
        return this.replayHitDetection_(context, transform, rotation, skippedFeaturesHash, hitDetectionCallback, hitExtent, declutterReplays);
    };
    ReplayGroupCustom.prototype.replayCustom = function (context, transform, viewRotation, skippedFeaturesHash, opt_replayTypes, opt_declutterReplays, screenXY) {
        /** @type {Array.<number>} */
        var zs = Object.keys(this.replaysByZIndex_).map(Number);
        zs.sort(ol.array.numberSafeCompareFunction);
        // setup clipping so that the parts of over-simplified geometries are not
        // visible outside the current extent when panning
        // context.save();
        // this.clip(context, transform);
        var replayTypes = opt_replayTypes ? opt_replayTypes : ol.render.replay.ORDER;
        var i, ii, j, jj, replays, replay;
        for (i = 0, ii = zs.length; i < ii; ++i) {
            var zIndexKey = zs[i].toString();
            replays = this.replaysByZIndex_[zIndexKey];
            for (j = 0, jj = replayTypes.length; j < jj; ++j) {
                var replayType = replayTypes[j];
                replay = replays[replayType];
                // if (replay !== undefined) {
                // if (opt_declutterReplays &&
                //     (replayType === (<any>ol.render).ReplayType.IMAGE || replayType === (<any>ol.render).ReplayType.TEXT)) {
                //     // debugger
                //         let declutter = opt_declutterReplays[zIndexKey];
                //     if (!declutter) {
                //         opt_declutterReplays[zIndexKey] = [replay, transform.slice(0), screenXY];
                //     } else {
                //         declutter.push(replay, transform.slice(0), screenXY);
                //     }
                // } else {       
                if (replay instanceof ol.render.webgl.TextReplay || replay instanceof ol.render.webgl.ImageReplay) {
                    replay.declutterRepeat_(context, screenXY);
                }
                // replay.zIndex = zs[i];
                // replay.replay(context, transform, viewRotation, skippedFeaturesHash, screenXY);
                // }
                // }
            }
        }
        // draw
        for (i = 0, ii = zs.length; i < ii; ++i) {
            var zIndexKey = zs[i].toString();
            replays = this.replaysByZIndex_[zIndexKey];
            for (j = 0, jj = replayTypes.length; j < jj; ++j) {
                var replayType = replayTypes[j];
                replay = replays[replayType];
                if (replay !== undefined) {
                    replay.zIndex = zs[i];
                    if (replay instanceof ol.render.webgl.TextReplay || replay instanceof ol.render.webgl.ImageReplay) {
                        replay.finish(context);
                    }
                    replay.replay(context, transform, viewRotation, skippedFeaturesHash, screenXY);
                }
            }
        }
        // context.restore();
    };
    ReplayGroupCustom.prototype.getReplayCustom = function (zIndex, replayType) {
        var zIndexKey = zIndex !== undefined ? zIndex.toString() : "0";
        var replays = this.replaysByZIndex_[zIndexKey];
        if (replays === undefined) {
            replays = {};
            this.replaysByZIndex_[zIndexKey] = replays;
        }
        var replay = replays[replayType];
        if (replay === undefined) {
            var Constructor = this.BATCH_CONSTRUCTORS_[replayType];
            replay = new Constructor(this.tolerance_, this.maxExtent_, this.declutterTree);
            replays[replayType] = replay;
        }
        return replay;
    };
    return ReplayGroupCustom;
}(ol.render.webgl.ReplayGroup));



/***/ }),

/***/ "./src/source/geoVectorTileSource.ts":
/*!*******************************************!*\
  !*** ./src/source/geoVectorTileSource.ts ***!
  \*******************************************/
/*! exports provided: GeoVectorTileSource */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoVectorTileSource", function() { return GeoVectorTileSource; });
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var GeoVectorTileSource = /** @class */ (function (_super) {
    __extends(GeoVectorTileSource, _super);
    function GeoVectorTileSource(options) {
        var _this = _super.call(this, options) || this;
        _this.maxDataZoom = options.maxDataZoom;
        if (options["tileUrlFunction"] === undefined) {
            _this.setTileUrlFunction(_this.getGeoTileUrlFunction());
        }
        _this.clientId = options.clientId;
        _this.clientSecret = options.clientSecret;
        _this.geoFormat = options.format;
        _this.tileLoadFunction = _this.vectorTileLoadFunction.bind(_this);
        _this.isMultithread = options["multithread"] === undefined ? true : options["multithread"];
        return _this;
    }
    GeoVectorTileSource.prototype.getGeoFormat = function () {
        return this.geoFormat;
    };
    GeoVectorTileSource.prototype.getGeoTileUrlFunction = function () {
        var zRegEx = /\{z\}/g;
        var xRegEx = /\{x\}/g;
        var yRegEx = /\{y\}/g;
        var dashYRegEx = /\{-y\}/g;
        var urls = this.urls;
        var tileGrid = this.tileGrid;
        var maxDataZoom = this.maxDataZoom;
        return function (tileCoord) {
            if (!tileCoord) {
                return undefined;
            }
            else {
                var requestCoord_1 = [tileCoord[0], tileCoord[1], tileCoord[2]];
                if (maxDataZoom && requestCoord_1[0] > maxDataZoom) {
                    while (requestCoord_1[0] !== maxDataZoom) {
                        requestCoord_1[0] -= 1;
                        requestCoord_1[1] = Math.floor(requestCoord_1[1] / 2);
                        requestCoord_1[2] = Math.floor(requestCoord_1[2] / 2);
                    }
                }
                var h = ol.tilecoord.hash(tileCoord);
                var index = ol.math.modulo(h, urls.length);
                var template = urls[index];
                return template.replace(zRegEx, requestCoord_1[0].toString())
                    .replace(xRegEx, requestCoord_1[1].toString())
                    .replace(yRegEx, function () {
                    var y = -requestCoord_1[2] - 1;
                    return y.toString();
                })
                    .replace(dashYRegEx, function () {
                    var z = requestCoord_1[0];
                    var range = tileGrid.getFullTileRange(z);
                    ol.asserts.assert(range, 55); // The {-y} placeholder requires a tile grid with extent
                    var y = range.getHeight() + requestCoord_1[2];
                    return y.toString();
                });
            }
        };
    };
    GeoVectorTileSource.prototype.vectorTileLoadFunction = function (tile, url) {
        var loader = this.loadFeaturesXhr(url, tile.getFormat(), tile.onLoad.bind(tile), tile.onError.bind(tile), this);
        tile.setLoader(loader);
    };
    GeoVectorTileSource.prototype.getIDAndSecret = function (self) {
        var xhr = new XMLHttpRequest();
        var url = 'https://gisserver.thinkgeo.com/api/v1/auth/token';
        var content = 'ApiKey=' + self.clientId + '&ApiSecret=' + self.clientSecret;
        xhr.open("POST", url, false);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        xhr.onload = function (event) {
            if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {
                var token = JSON.parse(xhr.responseText).data.access_token;
                self.token = token;
            }
        }.bind(this);
        xhr.onerror = function () {
        }.bind(this);
        xhr.send(content);
    };
    GeoVectorTileSource.prototype.loadFeaturesXhr = function (url, format, success, failure, self) {
        return (function (extent, resolution, projection) {
            var sourceTile = this;
            var maxDataZoom = format.maxDataZoom;
            var requestTileCoord = [this.tileCoord[0], this.tileCoord[1], this.tileCoord[2]];
            if (maxDataZoom && requestTileCoord[0] > maxDataZoom) {
                while (requestTileCoord[0] !== maxDataZoom) {
                    requestTileCoord[0] -= 1;
                    requestTileCoord[1] = Math.floor(requestTileCoord[1] / 2);
                    requestTileCoord[2] = Math.floor(requestTileCoord[2] / 2);
                }
            }
            this.requestTileCoord = requestTileCoord;
            var tileGrid = self.getTileGrid();
            var tileExtent = tileGrid.getTileCoordExtent(sourceTile.tileCoord);
            var tileResolution = tileGrid.getResolution(sourceTile.tileCoord[0]);
            var callback = function (tile, callbackFunction, sourceProjection, lastExtent) {
                callbackFunction.call(tile, sourceProjection, lastExtent);
            };
            var hasRequested = false;
            hasRequested = format.registerTileLoadEvent(this, success, failure, callback);
            if (!hasRequested) {
                // Client ID and Client Secret   
                if (url.indexOf('apiKey') === -1 && self.clientId && self.clientSecret && !self.token) {
                    self.getIDAndSecret(self);
                }
                if (format.isMultithread && format.workerManager) {
                    var requestInfo = {
                        url: typeof url === "function" ? url(extent, resolution, projection) : url,
                        type: format.getType(),
                        tileCoord: this.tileCoord,
                        requestCoord: requestTileCoord,
                        minimalist: format.minimalist,
                        maxDataZoom: format.maxDataZoom,
                        formatId: ol.getUid(format),
                        layerName: format.layerName,
                        token: self.token,
                        vectorTileDataCahceSize: format["vectorTileDataCahceSize"],
                        tileRange: sourceTile.tileRange,
                        // tileCoordWithSourceCoord: sourceTile.tileCoordWithSourceCoord,
                        vectorImageTileCoord: sourceTile.vectorImageTileCoord,
                        tileExtent: tileExtent,
                        tileResolution: tileResolution,
                        tileSize: this.format_.source.tileGrid.tileSize_ * sourceTile.pixelRatio
                    };
                    var loadedCallback = function (data, methodInfo) {
                        var requestKey = data.requestKey;
                        var tileLoadEventInfos = format.registeredLoadEvents[requestKey];
                        delete format.registeredLoadEvents[requestKey];
                        for (var i = 0; i < tileLoadEventInfos.length; i++) {
                            var loadEventInfo = tileLoadEventInfos[i];
                            loadEventInfo.tile.workerId = methodInfo.workerId; // Currently, we just one web worker for one layer.
                            // let tileKey = "" + loadEventInfo.tile.tileCoord[1] + "," + loadEventInfo.tile.tileCoord[2];
                            // FIXME Eric
                            if (data.status === "cancel") {
                                loadEventInfo.tile.setState(ol.TileState.CANCEL);
                            }
                            else if (data.status === "succeed") {
                                loadEventInfo.callback(loadEventInfo.tile, loadEventInfo.successFunction, format.readProjection());
                            }
                            else {
                                loadEventInfo.callback(loadEventInfo.tile, loadEventInfo.failureFunction, format.readProjection());
                            }
                        }
                    };
                    format.workerManager.postMessage(this.tileCoord + ol.getUid(loadedCallback), "request", requestInfo, loadedCallback, undefined);
                }
                else {
                    var tileCoord_1 = this.tileCoord;
                    var tile_1 = this;
                    var xhr_1 = new XMLHttpRequest();
                    xhr_1.open("GET", typeof url === "function" ? url(extent, resolution, projection) : url, true);
                    if (self.token) {
                        xhr_1.setRequestHeader('Authorization', 'Bearer ' + self.token);
                    }
                    if (format.getType() === ol.format.FormatType.ARRAY_BUFFER) {
                        xhr_1.responseType = "arraybuffer";
                    }
                    xhr_1.onload = function (event) {
                        if (!xhr_1.status || xhr_1.status >= 200 && xhr_1.status < 300) {
                            var type = format.getType();
                            /** @type {Document|Node|Object|string|undefined} */
                            var source = void 0;
                            if (type === ol.format.FormatType.JSON ||
                                type === ol.format.FormatType.TEXT) {
                                source = xhr_1.responseText;
                            }
                            else if (type === ol.format.FormatType.XML) {
                                source = xhr_1.responseXML;
                                if (!source) {
                                    source = ol.xml.parse(xhr_1.responseText);
                                }
                            }
                            else if (type === ol.format.FormatType.ARRAY_BUFFER) {
                                source = /** @type {ArrayBuffer} */ (xhr_1.response);
                            }
                            if (source) {
                                // ReadFeature
                                var data = format.readFeaturesAndCreateInstructsNew(source, requestTileCoord, tileCoord_1);
                                // Call Load Event
                                var requestKey = tile_1.requestTileCoord.join(",") + "," + tile_1.tileCoord[0];
                                var tileLoadEventInfos = format.registeredLoadEvents[requestKey];
                                delete format.registeredLoadEvents[requestKey];
                                for (var i = 0; i < tileLoadEventInfos.length; i++) {
                                    var loadEventInfo = tileLoadEventInfos[i];
                                    var tileKey = "" + loadEventInfo.tile.tileCoord[1] + "," + loadEventInfo.tile.tileCoord[2];
                                    loadEventInfo.tile.featuresAndInstructs = { features: data[0], instructs: data[1][tileKey] };
                                    loadEventInfo.callback(loadEventInfo.tile, loadEventInfo.successFunction, format.readProjection());
                                }
                            }
                            else {
                                failure.call(this);
                            }
                        }
                        else {
                            failure.call(this);
                        }
                    }.bind(this);
                    xhr_1.onerror = function () {
                        failure.call(this);
                    }.bind(this);
                    this["xhr"] = xhr_1;
                    format.source.dispatchEvent(new ol.VectorTile.Event("sendingTileRequest", xhr_1));
                    xhr_1.send();
                }
            }
        });
    };
    GeoVectorTileSource.prototype.forEachLoadedTile = function (projection, z, tileRange, callback, layer) {
        var tileCache = this.getTileCacheForProjection(projection);
        if (!tileCache) {
            return false;
        }
        // let covered = true;
        var covered = false;
        var tile, tileCoordKey, loaded;
        for (var x = tileRange.minX; x <= tileRange.maxX; ++x) {
            for (var y = tileRange.minY; y <= tileRange.maxY; ++y) {
                tileCoordKey = ol.tilecoord.getKeyZXY(z, x, y);
                loaded = false;
                if (tileCache.containsKey(tileCoordKey)) {
                    tile = /** @type {!ol.Tile} */ (tileCache.get(tileCoordKey));
                    loaded = tile.getState() === ol.TileState.LOADED;
                    if (loaded) {
                        if (layer) {
                            var replayState = tile.getReplayState(layer);
                            loaded = replayState.renderedTileLoaded;
                        }
                    }
                    if (loaded) {
                        loaded = (callback(tile) !== false);
                        covered = true;
                    }
                }
                // if (!loaded) {
                //     covered = false;
                // }
            }
        }
        return covered;
    };
    return GeoVectorTileSource;
}(ol.source.VectorTile));



/***/ }),

/***/ "./src/style/detectTextLabelingStrategy.ts":
/*!*************************************************!*\
  !*** ./src/style/detectTextLabelingStrategy.ts ***!
  \*************************************************/
/*! exports provided: DetectTextLabelingStrategy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DetectTextLabelingStrategy", function() { return DetectTextLabelingStrategy; });
/* harmony import */ var _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./textLabelingStrategy */ "./src/style/textLabelingStrategy.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var DetectTextLabelingStrategy = /** @class */ (function (_super) {
    __extends(DetectTextLabelingStrategy, _super);
    function DetectTextLabelingStrategy() {
        var _this = _super.call(this) || this;
        _this.markLocationCore = _this.markLocationCoreCustom;
        return _this;
    }
    DetectTextLabelingStrategy.prototype.markLocationCoreCustom = function (flatCoordinates, width, height, resolution, geometryType, textStyle, grid, frameState) {
        switch (geometryType) {
            case ol.geom.GeometryType.POINT:
            case ol.geom.GeometryType.MULTI_POINT:
            case ol.geom.GeometryType.CIRCLE:
                if (this.isOverlapping(flatCoordinates, width, height, textStyle.margin, textStyle.minDistance, textStyle.minPadding, textStyle.spacing, grid, frameState)) {
                    flatCoordinates = this.movePointLabel(flatCoordinates, width, height, resolution, textStyle, grid, frameState);
                }
                break;
            case ol.geom.GeometryType.LINE_STRING:
            case ol.geom.GeometryType.MULTI_LINE_STRING:
            case ol.geom.GeometryType.POLYGON:
            case ol.geom.GeometryType.MULTI_POLYGON:
                if (this.isOverlapping(flatCoordinates, width, height, textStyle.margin, textStyle.minDistance, textStyle.minPadding, textStyle.spacing, grid, frameState)) {
                    flatCoordinates = undefined;
                }
        }
        return flatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.movePointLabel = function (flatCoordinates, width, height, resolution, textStyle, grid, frameState) {
        var gridSize = 50;
        var distance = gridSize * resolution;
        if (textStyle.placements) {
            var placements = textStyle.placements.split(",");
            for (var _i = 0, placements_1 = placements; _i < placements_1.length; _i++) {
                var placement = placements_1[_i];
                var newFlatCoordinates = this.getMovedPosition(flatCoordinates, placement, distance);
                if (!this.isOverlapping(newFlatCoordinates, width, height, textStyle.margin, textStyle.minDistance, textStyle.minPadding, textStyle.spacing, grid, frameState)) {
                    return newFlatCoordinates;
                }
            }
        }
        return undefined;
    };
    DetectTextLabelingStrategy.prototype.getMovedPosition = function (flatCoordinates, placement, distance) {
        var newFlatCoordinates;
        switch (placement) {
            case "UR":
                newFlatCoordinates = this.moveToUR(flatCoordinates, distance);
                break;
            case "U":
                newFlatCoordinates = this.moveToU(flatCoordinates, distance);
                break;
            case "UL":
                newFlatCoordinates = this.moveToUL(flatCoordinates, distance);
                break;
            case "B":
                newFlatCoordinates = this.moveToB(flatCoordinates, distance);
                break;
            case "BR":
                newFlatCoordinates = this.moveToBR(flatCoordinates, distance);
                break;
            case "BL":
                newFlatCoordinates = this.moveToBL(flatCoordinates, distance);
                break;
            case "L":
                newFlatCoordinates = this.moveToL(flatCoordinates, distance);
                break;
            case "R":
                newFlatCoordinates = this.moveToR(flatCoordinates, distance);
                break;
        }
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToUR = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] + distance);
        newFlatCoordinates.push(flatCoordinates[1] + distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToU = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0]);
        newFlatCoordinates.push(flatCoordinates[1] + distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToUL = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] - distance);
        newFlatCoordinates.push(flatCoordinates[1] + distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToB = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0]);
        newFlatCoordinates.push(flatCoordinates[1] - distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToBR = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] + distance);
        newFlatCoordinates.push(flatCoordinates[1] - distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToBL = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] - distance);
        newFlatCoordinates.push(flatCoordinates[1] - distance);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToL = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] - distance);
        newFlatCoordinates.push(flatCoordinates[1]);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    DetectTextLabelingStrategy.prototype.moveToR = function (flatCoordinates, distance) {
        var newFlatCoordinates = new Array();
        newFlatCoordinates.push(flatCoordinates[0] + distance);
        newFlatCoordinates.push(flatCoordinates[1]);
        newFlatCoordinates.push(flatCoordinates[2]);
        return newFlatCoordinates;
    };
    return DetectTextLabelingStrategy;
}(_textLabelingStrategy__WEBPACK_IMPORTED_MODULE_0__["TextLabelingStrategy"]));



/***/ }),

/***/ "./src/style/geoAreaStyle.ts":
/*!***********************************!*\
  !*** ./src/style/geoAreaStyle.ts ***!
  \***********************************/
/*! exports provided: GeoAreaStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoAreaStyle", function() { return GeoAreaStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
/* harmony import */ var _style_geoBrush__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../style/geoBrush */ "./src/style/geoBrush.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var GeoAreaStyle = /** @class */ (function (_super) {
    __extends(GeoAreaStyle, _super);
    function GeoAreaStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        if (styleJson) {
            _this.brushType = styleJson["polygon-brush-type"];
            _this.rotateAngle = styleJson["polygon-rotate-angle"];
            _this.dx = styleJson["polygon-dx"];
            _this.dy = styleJson["polygon-dy"];
            _this.fill = styleJson["polygon-fill"];
            _this.foregroundFill = styleJson["polygon-foreground-fill"];
            _this.gamma = styleJson["polygon-gamma"] ? styleJson["polygon-gamma"] : true;
            _this.geometryTransform = styleJson["polygon-geometry-transform"];
            _this.hatchStyle = styleJson["polygon-hatch-style"];
            _this.opacity = styleJson["polygon-opacity"];
            _this.outlineColor = styleJson["polygon-outline-color"];
            _this.outlineDashArray = styleJson["polygon-outline-dasharray"];
            _this.outlineOpacity = styleJson["polygon-outline-opacity"];
            _this.outlineWidth = styleJson["polygon-outline-width"];
            _this.linearGradient = styleJson["polygon-linear-gradient"];
            _this.radialGradient = styleJson["polygon-radial-gradient"];
            _this.textureFile = styleJson["polygon-texture-file"];
            _this.shadowColor = styleJson["polygon-shadow-color"];
            _this.shadowDx = styleJson["polygon-shadow-dx"];
            _this.shadowDy = styleJson["polygon-shadow-dy"];
        }
        return _this;
    }
    GeoAreaStyle.prototype.initializeCore = function () {
        this.brushType = this.brushType || "solid";
        this.brushOptions = {
            fillColor: this.fill,
            fillOpacity: this.opacity,
            linearGradient: this.linearGradient,
            radialGradient: this.radialGradient,
            textureFile: this.textureFile,
            foregroundFill: this.foregroundFill,
            hatchStyle: this.hatchStyle
        };
        if (this.geometryTransform) {
            this.geometryTransformValue = this.getTransformValues(this.geometryTransform);
        }
        if (this.brushType === "solid" || this.brushType === "hatch") {
            this.geoBrush = _style_geoBrush__WEBPACK_IMPORTED_MODULE_1__["GeoBrush"].createBrushByType(this.brushType, null, null, this.brushOptions);
        }
        if (this.outlineColor) {
            this.convertedOutlineColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.outlineColor, this.outlineOpacity);
        }
        if (this.outlineDashArray) {
            this.convertedOutlineDashArray = this.outlineDashArray.split(",");
        }
        if (this.shadowColor) {
            this.convertedShadowColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.shadowColor);
        }
        this.shadowTranslateValueByResolution = {};
    };
    GeoAreaStyle.prototype.getTransformValues = function (transform) {
        // get transform values which look like transform(value1, value2)
        var start = transform.indexOf("(");
        var end = transform.indexOf(")");
        var valueString = transform.substring(start + 1, end);
        var values = [];
        if (valueString.includes(",")) {
            values = valueString.split(",");
        }
        else {
            values.push(valueString);
        }
        return values;
    };
    GeoAreaStyle.prototype.GetTransformedCoordinates = function (feature) {
        var tmpFlatCoordinates = feature.getFlatCoordinates();
        var tmpCoordinates = [[]];
        var index = 0;
        for (var i = 0; i < tmpFlatCoordinates.length; i += 2) {
            tmpCoordinates[index] || (tmpCoordinates[index] = []);
            tmpCoordinates[index].push([tmpFlatCoordinates[i], tmpFlatCoordinates[i + 1]]);
            if (tmpCoordinates[index].length > 3 && tmpCoordinates[index][0][0] === tmpFlatCoordinates[i] && tmpCoordinates[index][0][1] === tmpFlatCoordinates[i + 1]) {
                index++;
            }
        }
        var geometry = new ol.geom.Polygon(tmpCoordinates, "XY");
        if (this.geometryTransform.indexOf("translate") === 0) {
            geometry.translate(+this.geometryTransformValue[0].trim(), +this.geometryTransformValue[1].trim());
        }
        else if (this.geometryTransform.indexOf("scale") === 0) {
            geometry.scale(+this.geometryTransformValue[0].trim(), +this.geometryTransformValue[1].trim());
        }
        else if (this.geometryTransform.indexOf("rotate") === 0) {
            var center = ol.extent.getCenter(geometry.getExtent());
            var angle = +this.geometryTransformValue[0].trim() * Math.PI / 180;
            geometry.rotate(angle, center);
        }
        else if (this.geometryTransform.indexOf("skew") === 0) {
            this.skewGeometry(geometry, +this.geometryTransformValue[0].trim(), +this.geometryTransformValue[1].trim());
        }
        return geometry.flatCoordinates;
    };
    GeoAreaStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        var length = 0;
        this.styles = [];
        if (this.fill || (this.outlineColor && this.outlineWidth) || this.linearGradient || this.radialGradient) {
            if (this.geometryTransform) {
                feature.flatCoordinates_ = this.GetTransformedCoordinates(feature);
            }
            if (this.shadowDx || this.shadowDy) {
                var shadowTranslateValue = this.shadowTranslateValueByResolution[resolution];
                if (shadowTranslateValue === undefined) {
                    var tmpResolution = Math.round(resolution * 100000000) / 100000000;
                    this.shadowTranslate = ("translate(" + (this.shadowDx ? this.shadowDx : 0) * tmpResolution + "," + (this.shadowDy ? this.shadowDy : 0) * tmpResolution + ")");
                    shadowTranslateValue = this.getTransformValues(this.shadowTranslate);
                    this.shadowTranslateValueByResolution[resolution] = shadowTranslateValue;
                }
                var tmpFlatCoordinates = feature.getFlatCoordinates();
                var newFlatCoordinates = ol.geom.flat.transform.translate(tmpFlatCoordinates, 0, tmpFlatCoordinates.length, 2, +shadowTranslateValue[0].trim(), +shadowTranslateValue[1].trim(), undefined);
                var tmpCoordinates = [[]];
                var index = 0;
                for (var i = 0; i < newFlatCoordinates.length; i += 2) {
                    tmpCoordinates[index] || (tmpCoordinates[index] = []);
                    tmpCoordinates[index].push([newFlatCoordinates[i], newFlatCoordinates[i + 1]]);
                    if (tmpCoordinates[index].length > 3 && tmpCoordinates[index][0][0] === newFlatCoordinates[i] && tmpCoordinates[index][0][1] === newFlatCoordinates[i + 1]) {
                        index++;
                    }
                }
                var geometry = new ol.geom.Polygon(tmpCoordinates, "XY");
                GeoAreaStyle.areaShadowStyle.getFill().setColor(this.convertedShadowColor);
                GeoAreaStyle.areaShadowStyle.setGeometry(geometry);
                this.styles[length++] = GeoAreaStyle.areaShadowStyle;
            }
            if (this.fill) {
                this.geoBrush = _style_geoBrush__WEBPACK_IMPORTED_MODULE_1__["GeoBrush"].createBrushByType(this.brushType, feature, resolution, this.brushOptions);
                GeoAreaStyle.areaStyle.getFill().setColor(this.geoBrush);
            }
            // stroke to handle outlineColor, outlineDashArray, outlineOpacity and outlineWidth
            if (this.outlineColor || this.outlineDashArray || this.outlineWidth) {
                var newStroke = new ol.style.Stroke();
                newStroke.setColor(this.convertedOutlineColor);
                newStroke.setLineDash(this.convertedOutlineDashArray);
                newStroke.setWidth(this.outlineWidth);
                GeoAreaStyle.areaStyle.setStroke(newStroke);
            }
            else {
                GeoAreaStyle.areaStyle.setStroke(undefined);
            }
            GeoAreaStyle.areaStyle.setGeometry(feature);
            this.styles[length++] = GeoAreaStyle.areaStyle;
            if (this.gamma !== undefined && options.layer) {
                var styleGamma_1 = this.gamma;
                options.layer.on("precompose", function (evt) {
                    evt.context.imageSmoothingEnabled = styleGamma_1;
                    evt.context.webkitImageSmoothingEnabled = styleGamma_1;
                    evt.context.mozImageSmoothingEnabled = styleGamma_1;
                    evt.context.msImageSmoothingEnabled = styleGamma_1;
                });
            }
        }
        return this.styles;
    };
    GeoAreaStyle.areaStyle = new ol.style.Style({
        fill: new ol.style.Fill({}),
        stroke: new ol.style.Stroke({})
    });
    GeoAreaStyle.areaShadowStyle = new ol.style.Style({
        fill: new ol.style.Fill({}),
    });
    return GeoAreaStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));



/***/ }),

/***/ "./src/style/geoBrush.ts":
/*!*******************************!*\
  !*** ./src/style/geoBrush.ts ***!
  \*******************************/
/*! exports provided: GeoBrush */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoBrush", function() { return GeoBrush; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");

var GeoBrush = /** @class */ (function () {
    function GeoBrush() {
    }
    GeoBrush.createBrushByType = function (brushType, feature, resolution, brushTypeOptions) {
        var geoBrushFunction = this.geoBrushFunctions[brushType];
        if (typeof geoBrushFunction === "function") {
            return geoBrushFunction(feature, resolution, brushTypeOptions);
        }
        else {
            return null;
        }
    };
    GeoBrush.registerGeoBrushFunction = function (key, geoBrushFunction) {
        this.geoBrushFunctions[key] = geoBrushFunction;
    };
    GeoBrush.createGeoSolidBrush = function (feature, resolution, geoBrushOptions) {
        if (geoBrushOptions.fillColor) {
            return _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(geoBrushOptions.fillColor, geoBrushOptions.fillOpacity);
        }
    };
    GeoBrush.createRadialGradientColor = function (feature, resolution, geoBrushOptions) {
        var extent = feature.getExtent();
        // TODO: try to create it when creating the GeoStyle.
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        // TODO: check if there is a difference by srid.
        var width = ol.extent.getWidth(extent) / resolution * ol.has.DEVICE_PIXEL_RATIO;
        var height = ol.extent.getHeight(extent) / resolution * ol.has.DEVICE_PIXEL_RATIO;
        // TODO: the (x0,y0) is the center of feature extent, optimize it
        var x0 = width / 2;
        var y0 = height / 2;
        var r1 = x0;
        var grd = context.createRadialGradient(x0, y0, 0, x0, y0, r1);
        var gradientColors = geoBrushOptions.radialGradient.split(",");
        for (var _i = 0, gradientColors_1 = gradientColors; _i < gradientColors_1.length; _i++) {
            var gradientColor = gradientColors_1[_i];
            gradientColor = gradientColor.trim();
            var colorStop = gradientColor.substr(1, gradientColor.length - 2);
            var cs = colorStop.split(":");
            grd.addColorStop(Number(cs[0].trim()), _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(cs[1].trim(), geoBrushOptions.fillOpacity));
        }
        return grd;
    };
    GeoBrush.createLinearGradientColor = function (feature, resolution, geoBrushOptions) {
        var extent = feature.getExtent();
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        // TODO: the direction Angle by x0,y0,x1,y1. this.directionAngle
        var grd = context.createLinearGradient(0, 0, ol.extent.getWidth(extent) / resolution * ol.has.DEVICE_PIXEL_RATIO, ol.extent.getHeight(extent) / resolution * ol.has.DEVICE_PIXEL_RATIO);
        var gradientColors = geoBrushOptions.linearGradient.split(",");
        for (var _i = 0, gradientColors_2 = gradientColors; _i < gradientColors_2.length; _i++) {
            var gradientColor = gradientColors_2[_i];
            gradientColor = gradientColor.trim();
            var colorStop = gradientColor.substr(1, gradientColor.length - 2);
            var cs = colorStop.split(":");
            grd.addColorStop(Number(cs[0].trim()), _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(cs[1].trim(), geoBrushOptions.fillOpacity));
        }
        return grd;
    };
    GeoBrush.createImageCanvasPattern = function (feature, resolution, geoBrushOptions) {
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        var imageElement = document.createElement("img");
        imageElement.src = geoBrushOptions.textureFile;
        return context.createPattern(imageElement, "repeat");
    };
    GeoBrush.createPatternColor = function (feature, resolution, geoBrushOptions) {
        var createPatternFunction = GeoBrush.geoPatternFunctions[geoBrushOptions.hatchStyle];
        if (typeof createPatternFunction === "function") {
            return createPatternFunction(geoBrushOptions.fillColor, geoBrushOptions.foregroundFill);
        }
        else {
            return _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(geoBrushOptions.fillColor, geoBrushOptions.fillOpacity);
        }
    };
    GeoBrush.getCrossPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // horizon line
        context.fillStyle = foregroundFill;
        context.fillRect(0, canvas.height / 2, canvas.width, 1);
        // vertical line
        context.fillRect(canvas.width / 2, 0, 1, canvas.height);
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getHorizontalPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // horizon line
        context.fillStyle = foregroundFill;
        context.fillRect(0, canvas.height / 2, canvas.width, 1);
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getVerticalPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // vertical line
        context.fillStyle = foregroundFill;
        context.fillRect(canvas.width / 2, 0, 1, canvas.height);
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getForwardDiagonalPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // vertical line
        context.strokeStyle = foregroundFill;
        context.moveTo(0, 0);
        context.lineTo(canvas.width, canvas.height);
        context.stroke();
        // context.fillStyle = foregroundFill;
        // context.moveTo(-1, -1);
        // context.lineTo(1, -1);
        // context.lineTo(canvas.width + 1, canvas.height);
        // context.lineTo(canvas.width + 1, canvas.height + 1);
        // context.lineTo(canvas.width, canvas.height + 1);
        // context.lineTo(-1, 0);
        // context.lineTo(-1, -1);
        // context.closePath();
        // context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getBackwardDiagonalPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // vertical line
        context.strokeStyle = foregroundFill;
        context.moveTo(canvas.width, 0);
        context.lineTo(0, canvas.height);
        context.stroke();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent05Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.95 + 1) * ratio;
        canvas.height = size * (2 * 0.95 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.45);
        context.lineTo(canvas.width * 0.55, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.55);
        context.lineTo(canvas.width * 0.45, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.45);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent10Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.9 + 1) * ratio;
        canvas.height = size * (2 * 0.9 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.4);
        context.lineTo(canvas.width * 0.6, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.6);
        context.lineTo(canvas.width * 0.4, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.4);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent20Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.8 + 1) * ratio;
        canvas.height = size * (2 * 0.8 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.3);
        context.lineTo(canvas.width * 0.7, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.7);
        context.lineTo(canvas.width * 0.3, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.3);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent25Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 0.4 * ratio;
        canvas.height = size * 0.4 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.strokeStyle = foregroundFill;
        context.beginPath();
        context.ellipse(canvas.width * 0.25, canvas.height * 0.25, 0.8, 0.8, 0, 0, 2 * Math.PI);
        // context.stroke();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent30Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.7 + 1) * ratio;
        canvas.height = size * (2 * 0.7 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.2);
        context.lineTo(canvas.width * 0.8, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.8);
        context.lineTo(canvas.width * 0.2, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.2);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent40Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.4 + 1) * ratio;
        canvas.height = size * (2 * 0.4 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, canvas.height * 0.1);
        context.lineTo(canvas.width * 0.9, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.9);
        context.lineTo(canvas.width * 0.1, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height * 0.1);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent50Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.5 + 1) * ratio;
        canvas.height = size * (2 * 0.5 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.5, 0);
        context.lineTo(canvas.width, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, canvas.height);
        context.lineTo(0, canvas.height * 0.5);
        context.lineTo(canvas.width * 0.5, 0);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent60Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.4 + 1) * ratio;
        canvas.height = size * (2 * 0.4 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.4, 0);
        context.lineTo(canvas.width * 0.6, 0);
        context.lineTo(canvas.width, canvas.height * 0.4);
        context.lineTo(canvas.width, canvas.height * 0.6);
        context.lineTo(canvas.width * 0.6, canvas.height);
        context.lineTo(canvas.width * 0.4, canvas.height);
        context.lineTo(0, canvas.height * 0.6);
        context.lineTo(0, canvas.height * 0.4);
        context.lineTo(canvas.width * 0.4, 0);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent70Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.3 + 1) * ratio;
        canvas.height = size * (2 * 0.3 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.3, 0);
        context.lineTo(canvas.width * 0.7, 0);
        context.lineTo(canvas.width, canvas.height * 0.3);
        context.lineTo(canvas.width, canvas.height * 0.7);
        context.lineTo(canvas.width * 0.7, canvas.height);
        context.lineTo(canvas.width * 0.3, canvas.height);
        context.lineTo(0, canvas.height * 0.7);
        context.lineTo(0, canvas.height * 0.3);
        context.lineTo(canvas.width * 0.3, 0);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent75Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.25 + 1) * ratio;
        canvas.height = size * (2 * 0.25 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.beginPath();
        context.moveTo(canvas.width * 0.25, 0);
        context.lineTo(canvas.width * 0.75, 0);
        context.lineTo(canvas.width, canvas.height * 0.25);
        context.lineTo(canvas.width, canvas.height * 0.75);
        context.lineTo(canvas.width * 0.75, canvas.height);
        context.lineTo(canvas.width * 0.25, canvas.height);
        context.lineTo(0, canvas.height * 0.75);
        context.lineTo(0, canvas.height * 0.25);
        context.lineTo(canvas.width * 0.25, 0);
        context.closePath();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent80Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 0.8 * ratio;
        canvas.height = size * 0.8 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.strokeStyle = foregroundFill;
        context.beginPath();
        context.ellipse(canvas.width * 0.1, canvas.height * 0.1, 0.8, 0.8, 0, 0, 2 * Math.PI);
        // context.stroke();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getPercent90Pattern = function (fill, foregroundFill) {
        var size = 5;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * (2 * 0.1 + 1) * ratio;
        canvas.height = size * (2 * 0.1 + 1) * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // percentage region
        context.fillStyle = foregroundFill;
        context.strokeStyle = foregroundFill;
        context.beginPath();
        context.ellipse(canvas.width * 0.1, canvas.height * 0.1, 0.4, 0.4, 0, 0, 2 * Math.PI);
        // context.stroke();
        context.fill();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getLargeGridPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // grid rect
        context.strokeStyle = foregroundFill;
        context.strokeRect(0, 0, canvas.width, canvas.height);
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.getDiagonalCrossPattern = function (fill, foregroundFill) {
        var size = 6;
        var ratio = ol.has.DEVICE_PIXEL_RATIO;
        var canvas = document.createElement("canvas");
        canvas.width = size * 2 * ratio;
        canvas.height = size * 2 * ratio;
        var context = canvas.getContext("2d");
        context.fillStyle = fill;
        context.fillRect(0, 0, canvas.width, canvas.height);
        // left to right diagonal line
        context.strokeStyle = foregroundFill;
        context.moveTo(0, 0);
        context.lineTo(canvas.width, canvas.height);
        context.stroke();
        // right to left diagonal line
        context.strokeStyle = foregroundFill;
        context.moveTo(canvas.width, 0);
        context.lineTo(0, canvas.height);
        context.stroke();
        return context.createPattern(canvas, "repeat");
    };
    GeoBrush.geoBrushFunctions = {
        solid: GeoBrush.createGeoSolidBrush,
        radialgradient: GeoBrush.createRadialGradientColor,
        lineargradient: GeoBrush.createLinearGradientColor,
        hatch: GeoBrush.createPatternColor,
        texture: GeoBrush.createImageCanvasPattern
    };
    GeoBrush.geoPatternFunctions = {
        Cross: GeoBrush.getCrossPattern,
        Horizontal: GeoBrush.getHorizontalPattern,
        Vertical: GeoBrush.getVerticalPattern,
        ForwardDiagonal: GeoBrush.getForwardDiagonalPattern,
        BackwardDiagonal: GeoBrush.getBackwardDiagonalPattern,
        LargeGrid: GeoBrush.getLargeGridPattern,
        DiagonalCross: GeoBrush.getDiagonalCrossPattern,
        Percent05: GeoBrush.getPercent05Pattern,
        Percent10: GeoBrush.getPercent10Pattern,
        Percent20: GeoBrush.getPercent20Pattern,
        Percent25: GeoBrush.getPercent25Pattern,
        Percent30: GeoBrush.getPercent30Pattern,
        Percent40: GeoBrush.getPercent40Pattern,
        Percent50: GeoBrush.getPercent50Pattern,
        Percent60: GeoBrush.getPercent60Pattern,
        Percent70: GeoBrush.getPercent70Pattern,
        Percent75: GeoBrush.getPercent75Pattern,
        Percent80: GeoBrush.getPercent80Pattern,
        Percent90: GeoBrush.getPercent90Pattern,
    };
    return GeoBrush;
}());



/***/ }),

/***/ "./src/style/geoLineStyle.ts":
/*!***********************************!*\
  !*** ./src/style/geoLineStyle.ts ***!
  \***********************************/
/*! exports provided: GeoLineStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoLineStyle", function() { return GeoLineStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoLineStyle = /** @class */ (function (_super) {
    __extends(GeoLineStyle, _super);
    function GeoLineStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        _this.geometryLineCaps = [
            "triangle",
            "squareanchor",
            "roundanchor",
            "diamondanchor",
            "arrowanchor"
        ];
        _this.olLineCapsMap = {
            butt: "butt",
            flat: "square",
            square: "square",
            round: "round",
            noanchor: "square",
            anchormask: "square",
            custom: "square"
        };
        _this.convertedDashArray = new Array();
        _this.convertedInnerDashArray = new Array();
        _this.convertedCenterDashArray = new Array();
        _this.lineStroke = new ol.style.Stroke();
        _this.lineStyle = new ol.style.Style({ stroke: _this.lineStroke });
        _this.lineCapFill = new ol.style.Fill();
        _this.lineCapStyle = new ol.style.Style({ fill: _this.lineCapFill });
        _this.lineInnerStroke = new ol.style.Stroke();
        _this.lineInnerStyle = new ol.style.Style({ stroke: _this.lineInnerStroke });
        _this.lineCapInnerFill = new ol.style.Fill();
        _this.lineCapInnerStyle = new ol.style.Style({
            fill: _this.lineCapInnerFill
        });
        _this.lineCenterStroke = new ol.style.Stroke();
        _this.lineCenterStyle = new ol.style.Style({
            stroke: _this.lineCenterStroke
        });
        _this.lineCapCenterFill = new ol.style.Fill();
        _this.lineCapCenterStyle = new ol.style.Style({
            fill: _this.lineCapCenterFill
        });
        if (styleJson) {
            _this.lineCap = styleJson["line-cap"];
            _this.color = styleJson["line-color"];
            _this.dashArray = styleJson["line-dasharray"];
            _this.gamma = styleJson["line-gamma"];
            _this.geometryTransform = styleJson["line-geometry-transform"];
            _this.lineJoin = styleJson["line-join"];
            _this.miterLimit = styleJson["line-miterlimit"];
            _this.offset = styleJson["line-offset"];
            _this.opacity = styleJson["line-opacity"];
            _this.width = styleJson["line-width"];
            _this.lineCapInner = styleJson["line-cap-inner"];
            _this.colorInner = styleJson["line-color-inner"];
            _this.dashArrayInner = styleJson["line-dasharray-inner"];
            _this.lineJoinInner = styleJson["line-join-inner"];
            _this.miterLimitInner = styleJson["line-miterlimit-inner"];
            _this.widthInner = styleJson["line-width-inner"];
            _this.lineCapCenter = styleJson["line-cap-center"];
            _this.colorCenter = styleJson["line-color-center"];
            _this.dashArrayCenter = styleJson["line-dasharray-center"];
            _this.lineJoinCenter = styleJson["line-join-center"];
            _this.miterLimitCenter = styleJson["line-miterlimit-center"];
            _this.widthCenter = styleJson["line-width-center"];
            _this.onewaySymbol = styleJson["line-oneway-symbol"];
        }
        return _this;
    }
    GeoLineStyle.prototype.initializeCore = function () {
        if (this.color) {
            this.olColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.color, this.opacity);
            this.lineStroke.setColor(this.olColor);
            this.lineCapFill.setColor(this.olColor);
        }
        if (this.dashArray) {
            var tmpArray = this.dashArray.split(",");
            for (var _i = 0, tmpArray_1 = tmpArray; _i < tmpArray_1.length; _i++) {
                var a = tmpArray_1[_i];
                this.convertedDashArray.push(parseFloat(a));
            }
        }
        // Drawing inner
        if (this.colorInner) {
            this.olInnerColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.colorInner, this.opacity);
            this.lineInnerStroke.setColor(this.olInnerColor);
            this.lineCapInnerFill.setColor(this.olInnerColor);
        }
        if (this.dashArrayInner) {
            var tmpArray = this.dashArrayInner.split(",");
            for (var _a = 0, tmpArray_2 = tmpArray; _a < tmpArray_2.length; _a++) {
                var a = tmpArray_2[_a];
                this.convertedInnerDashArray.push(parseFloat(a));
            }
        }
        // Drawing center
        if (this.colorCenter) {
            this.olCenterColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.colorCenter, this.opacity);
            this.lineCenterStroke.setColor(this.olCenterColor);
            this.lineCapCenterFill.setColor(this.olCenterColor);
        }
        if (this.dashArrayCenter) {
            var tmpArray = this.dashArrayCenter.split(",");
            for (var _b = 0, tmpArray_3 = tmpArray; _b < tmpArray_3.length; _b++) {
                var a = tmpArray_3[_b];
                this.convertedCenterDashArray.push(parseFloat(a));
            }
        }
        if (this.onewaySymbol) {
            this.onewayIcon = new ol.style.Icon({
                src: this.onewaySymbol,
                imgSize: [18, 5],
                anchor: [0.5, 0.5],
                rotateWithView: true
            });
            this.onewayStyle = new ol.style.Style({
                image: this.onewayIcon
            });
        }
    };
    GeoLineStyle.prototype.getTransformValues = function (transform) {
        // get transform values which look like transform(value1, value2)
        var start = transform.indexOf("(");
        var end = transform.indexOf(")");
        var valueString = transform.substring(start + 1, end);
        var values = [];
        if (valueString.includes(",")) {
            values = valueString.split(",");
        }
        else {
            values.push(valueString);
        }
        return values;
    };
    GeoLineStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        var _this = this;
        var length = 0;
        this.styles = [];
        if (this.color && this.width) {
            if (this.olLineCapsMap[this.lineCap]) {
                this.lineStroke.setLineCap(this.olLineCapsMap[this.lineCap]);
            }
            if (this.color) {
                this.lineStroke.setColor(this.olColor);
                this.lineCapFill.setColor(this.olColor);
            }
            if (this.dashArray) {
                this.lineStroke.setLineDash(this.convertedDashArray);
            }
            if (this.lineJoin) {
                this.lineStroke.setLineJoin(this.lineJoin);
            }
            if (this.miterLimit !== 4) {
                this.lineStroke.setMiterLimit(this.miterLimit);
            }
            if (this.width) {
                this.lineStroke.setWidth(this.width);
            }
            // Set inner
            if (this.colorInner) {
                this.lineInnerStroke.setColor(this.olInnerColor);
                this.lineCapInnerFill.setColor(this.olInnerColor);
            }
            if (this.dashArrayInner) {
                this.lineInnerStroke.setLineDash(this.convertedInnerDashArray);
            }
            if (this.lineJoinInner) {
                this.lineInnerStroke.setLineJoin(this.lineJoinInner);
            }
            if (this.miterLimitInner !== 4) {
                this.lineInnerStroke.setMiterLimit(this.miterLimitInner);
            }
            if (this.widthInner) {
                this.lineInnerStroke.setWidth(this.widthInner);
            }
            // Set center
            if (this.colorCenter) {
                this.lineCenterStroke.setColor(this.olCenterColor);
                this.lineCapCenterFill.setColor(this.olCenterColor);
                this.lineCenterStroke.setLineCap("butt");
            }
            if (this.dashArrayCenter) {
                this.lineCenterStroke.setLineDash(this.convertedCenterDashArray);
            }
            if (this.lineJoinCenter) {
                this.lineCenterStroke.setLineJoin(this.lineJoinCenter);
            }
            if (this.miterLimitCenter !== 4) {
                this.lineCenterStroke.setMiterLimit(this.miterLimitCenter);
            }
            if (this.widthCenter) {
                this.lineCenterStroke.setWidth(this.widthCenter);
            }
            var geometryFunction = function (feature) {
                if (_this.geometryTransform) {
                    var geometry = _this.getGeometry(feature);
                    if (_this.geometryTransform) {
                        var values = _this.getTransformValues(_this.geometryTransform);
                        if (_this.geometryTransform.indexOf("translate") === 0) {
                            geometry.translate(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("scale") === 0) {
                            geometry.scale(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("rotate") === 0) {
                            var center = ol.extent.getCenter(geometry.getExtent());
                            var angle = +values[0].trim() * Math.PI / 180;
                            geometry.rotate(angle, center);
                        }
                        else if (_this.geometryTransform.indexOf("skew") === 0) {
                            _this.skewGeometry(geometry, +values[0].trim(), +values[1].trim());
                        }
                    }
                }
                return feature.getGeometry();
            };
            this.lineStyle.setGeometry(geometryFunction);
            this.styles[length++] = this.lineStyle;
            if (this.gamma !== undefined && options.layer) {
                var styleGamma_1 = this.gamma;
                options.layer.on("precompose", function (evt) {
                    evt.context.imageSmoothingEnabled = styleGamma_1;
                    evt.context.webkitImageSmoothingEnabled = styleGamma_1;
                    evt.context.mozImageSmoothingEnabled = styleGamma_1;
                    evt.context.msImageSmoothingEnabled = styleGamma_1;
                });
            }
            if (this.geometryLineCaps.includes(this.lineCap)) {
                var geometryFunction_1 = function (feature) {
                    var geometry = _this.getGeometry(feature);
                    return GeoLineStyle.createAnchoredGeometry(geometry, _this.lineCap, _this.width, resolution);
                };
                this.lineCapStyle.setGeometry(geometryFunction_1);
                this.styles[length++] = this.lineCapStyle;
            }
            // Drawing inner
            if (this.colorInner && this.widthInner) {
                var geometryFunction_2 = function (feature) {
                    var geometry = _this.getGeometry(feature);
                    if (_this.geometryTransform) {
                        var values = _this.getTransformValues(_this.geometryTransform);
                        if (_this.geometryTransform.indexOf("translate") === 0) {
                            geometry.translate(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("scale") === 0) {
                            geometry.scale(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("rotate") === 0) {
                            var center = ol.extent.getCenter(geometry.getExtent());
                            var angle = +values[0].trim() * Math.PI / 180;
                            geometry.rotate(angle, center);
                        }
                        else if (_this.geometryTransform.indexOf("skew") === 0) {
                            _this.skewGeometry(geometry, +values[0].trim(), +values[1].trim());
                        }
                    }
                    return feature.getGeometry();
                };
                this.lineInnerStyle.setGeometry(geometryFunction_2);
                this.styles[length++] = this.lineInnerStyle;
                if (this.geometryLineCaps.includes(this.lineCapInner)) {
                    var geometryFunction_3 = function (feature) {
                        var geometry = _this.getGeometry(feature);
                        return GeoLineStyle.createAnchoredGeometry(geometry, _this.lineCapInner, _this.widthInner, resolution);
                    };
                    this.lineCapInnerStyle.setGeometry(geometryFunction_3);
                    this.styles[length++] = this.lineCapInnerStyle;
                }
            }
            // Drawing center
            if (this.colorCenter && this.widthCenter) {
                var geometryFunction_4 = function (feature) {
                    var geometry = _this.getGeometry(feature);
                    if (_this.geometryTransform) {
                        var values = _this.getTransformValues(_this.geometryTransform);
                        if (_this.geometryTransform.indexOf("translate") === 0) {
                            geometry.translate(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("scale") === 0) {
                            geometry.scale(+values[0].trim(), +values[1].trim());
                        }
                        else if (_this.geometryTransform.indexOf("rotate") === 0) {
                            var center = ol.extent.getCenter(geometry.getExtent());
                            var angle = +values[0].trim() * Math.PI / 180;
                            geometry.rotate(angle, center);
                        }
                        else if (_this.geometryTransform.indexOf("skew") === 0) {
                            _this.skewGeometry(geometry, +values[0].trim(), +values[1].trim());
                        }
                    }
                    return feature.getGeometry();
                };
                this.lineCenterStyle.setGeometry(geometryFunction_4);
                this.styles[length++] = this.lineCenterStyle;
                if (this.geometryLineCaps.includes(this.lineCapCenter)) {
                    var geometryFunction_5 = function (feature) {
                        var geometry = _this.getGeometry(feature);
                        return GeoLineStyle.createAnchoredGeometry(geometry, _this.lineCapCenter, _this.widthCenter, resolution);
                    };
                    this.lineCapCenterStyle.setGeometry(geometryFunction_5);
                    this.styles[length++] = this.lineCapCenterStyle;
                }
            }
        }
        if (this.onewaySymbol) {
            var flatCoordinates = feature.getFlatCoordinates();
            var longest = 0;
            var longestIndex = void 0;
            for (var i = 0; i <= flatCoordinates.length - 4; i += 2) {
                var dX = Math.abs(flatCoordinates[i] - flatCoordinates[i + 2]);
                var dY = Math.abs(flatCoordinates[i + 1] - flatCoordinates[i + 3]);
                var distance = dX + dY;
                if (distance > longest) {
                    longest = distance;
                    longestIndex = i;
                }
            }
            var start = [flatCoordinates[longestIndex], flatCoordinates[longestIndex + 1]];
            var end = [flatCoordinates[longestIndex + 2], flatCoordinates[longestIndex + 3]];
            var dx = end[0] - start[0];
            var dy = end[1] - start[1];
            var rotation = Math.atan2(dy, dx);
            var centerPoint = [(start[0] + end[0]) * 0.5, (start[1] + end[1]) * 0.5];
            var geometry = new ol.geom.Point(centerPoint, "XY");
            this.onewayIcon.rotation_ = -rotation;
            this.onewayStyle.setGeometry(geometry);
            this.styles[length++] = this.onewayStyle;
        }
        return this.styles;
    };
    GeoLineStyle.prototype.getGeometry = function (feature) {
        var tmpFlatCoordinates = feature.getFlatCoordinates();
        var tmpCoordinates = [];
        for (var i = 0; i < tmpFlatCoordinates.length; i += 2) {
            tmpCoordinates.push([tmpFlatCoordinates[i], tmpFlatCoordinates[i + 1]]);
        }
        return new ol.geom.LineString(tmpCoordinates);
    };
    GeoLineStyle.createAnchoredGeometry = function (geometry, lineCap, lineWidth, resolution) {
        var segments = GeoLineStyle.getTerminalSegments(geometry);
        var linearRing = undefined;
        var multiPolygon = new ol.geom.MultiPolygon([]);
        for (var _i = 0, segments_1 = segments; _i < segments_1.length; _i++) {
            var segment = segments_1[_i];
            var first = segment[0];
            var last = segment[1];
            var delta = lineWidth * resolution / 2;
            var translateDelta = (lineWidth - 1) * resolution / 2;
            switch (lineCap) {
                case "triangle":
                    linearRing = new ol.geom.LinearRing([
                        [last[0], last[1] + delta],
                        [last[0] + delta, last[1]],
                        [last[0], last[1] - delta],
                        [last[0], last[1] + delta]
                    ]);
                    break;
                case "squareanchor":
                    delta *= 1.5;
                    linearRing = new ol.geom.LinearRing([
                        [last[0] - delta, last[1] + delta],
                        [last[0] + delta, last[1] + delta],
                        [last[0] + delta, last[1] - delta],
                        [last[0] - delta, last[1] - delta],
                        [last[0] - delta, last[1] + delta]
                    ]);
                    break;
                case "roundanchor":
                    delta *= 2;
                    var radiusDelta = Math.PI / 18;
                    var coordinates = [];
                    var radius = 0;
                    for (var i = 0; i < 36; i++) {
                        coordinates.push([
                            Math.cos(radius) * delta + last[0],
                            Math.sin(radius) * delta + last[1]
                        ]);
                        radius += radiusDelta;
                    }
                    coordinates.push(coordinates[0]);
                    linearRing = new ol.geom.LinearRing(coordinates);
                    break;
                case "diamondanchor":
                    delta *= 1.5;
                    linearRing = new ol.geom.LinearRing([
                        [last[0] - delta, last[1] + delta],
                        [last[0] + delta, last[1] + delta],
                        [last[0] + delta, last[1] - delta],
                        [last[0] - delta, last[1] - delta],
                        [last[0] - delta, last[1] + delta]
                    ]);
                    linearRing.rotate(Math.PI / 4, last);
                    break;
                case "arrowanchor":
                    delta *= 2;
                    linearRing = new ol.geom.LinearRing([
                        [last[0], last[1] + delta],
                        [last[0] + delta * Math.cos(Math.PI / 6) * 2, last[1]],
                        [last[0], last[1] - delta],
                        [last[0], last[1] + delta]
                    ]);
                    break;
            }
            if (first[0] === last[0]) {
                if (first[1] > last[1]) {
                    linearRing.rotate(-Math.PI / 2, last);
                    linearRing.translate(0, -translateDelta);
                }
                else {
                    linearRing.rotate(Math.PI / 2, last);
                    linearRing.translate(0, translateDelta);
                }
            }
            else if (first[1] === last[1]) {
                if (last[0] < first[0]) {
                    linearRing.rotate(Math.PI, last);
                    linearRing.translate(-translateDelta, 0);
                }
                else {
                    linearRing.translate(translateDelta, 0);
                }
            }
            else {
                var dx = last[0] - first[0];
                var dy = last[1] - first[1];
                var radians = Math.atan(dy / dx);
                if (last[0] > first[0]) {
                    linearRing.rotate(radians, last);
                    linearRing.translate(Math.cos(radians) * translateDelta, Math.sin(radians) * translateDelta);
                }
                else {
                    linearRing.rotate(radians + Math.PI, last);
                    linearRing.translate(-Math.cos(radians) * translateDelta, -Math.sin(radians) * translateDelta);
                }
            }
            var polygon = new ol.geom.Polygon([]);
            polygon.appendLinearRing(linearRing);
            multiPolygon.appendPolygon(polygon);
        }
        return multiPolygon;
    };
    GeoLineStyle.getTerminalSegments = function (geometry) {
        var type = geometry.getType();
        var results = [];
        var geometryType = ol.geom.GeometryType;
        switch (type) {
            case geometryType.LINE_STRING:
                var coords = geometry.getCoordinates();
                var start = [coords[1], coords[0]];
                var end = [coords[coords.length - 2], coords[coords.length - 1]];
                results.push(start);
                results.push(end);
                break;
            case geometryType.MULTI_LINE_STRING:
                var lines = geometry.getLineStrings();
                for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {
                    var line = lines_1[_i];
                    Array.prototype.push.apply(results, GeoLineStyle.getTerminalSegments(line));
                }
                break;
            case geometryType.GEOMETRY_COLLECTION:
                var geometries = geometry.getGeometries();
                for (var _a = 0, geometries_1 = geometries; _a < geometries_1.length; _a++) {
                    var geom = geometries_1[_a];
                    Array.prototype.push.apply(results, GeoLineStyle.getTerminalSegments(geom));
                }
                break;
        }
        return results;
    };
    return GeoLineStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));



/***/ }),

/***/ "./src/style/geoPointStyle.ts":
/*!************************************!*\
  !*** ./src/style/geoPointStyle.ts ***!
  \************************************/
/*! exports provided: GeoPointStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoPointStyle", function() { return GeoPointStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var GeoPointStyle = /** @class */ (function (_super) {
    __extends(GeoPointStyle, _super);
    function GeoPointStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        if (styleJson) {
            _this.glyph = styleJson["point-glyph"];
            _this.linearGradient = styleJson["point-linear-gradient"];
            _this.radialGradient = styleJson["point-radial-gradient"];
            _this.fill = styleJson["point-fill"];
            _this.glyphName = styleJson["point-glyph-name"];
            _this.glyphMaskColor = styleJson["point-glyph-mask-color"];
            _this.glyphMaskMargin = styleJson["point-glyph-mask-margin"];
            _this.glyphMaskOutlineColor = styleJson["point-glyph-mask-outline-color"];
            _this.glyphMaskOutlineWidth = styleJson["point-glyph-mask-outline-width"];
            _this.glyphMaskType = styleJson["point-glyph-mask-type"];
            _this.outlineColor = styleJson["point-outline-color"];
            _this.outlineWidth = styleJson["point-outline-width"];
            _this.size = styleJson["point-size"];
            _this.angle = styleJson["point-rotate-angle"] ? styleJson["point-rotate-angle"] : 0;
            _this.dx = styleJson["point-dx"];
            _this.dy = styleJson["point-dy"];
            _this.pointFile = styleJson["point-file"];
            _this.opacity = styleJson["point-opacity"];
            _this.symbolType = styleJson["point-symbol-type"];
            _this.transform = styleJson["point-transform"];
            _this.pointType = styleJson["point-type"];
            if (_this.outlineColor) {
                _this.convertedGlyphOutLineColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(_this.outlineColor, _this.opacity);
            }
            if (_this.fill) {
                _this.convertedGlyphFill = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(_this.fill, _this.opacity);
            }
            if (_this.linearGradient) {
                if (GeoPointStyle.linearGradientDictionary.hasOwnProperty(_this.linearGradient)) {
                    _this.convertedGlyphFill = GeoPointStyle.linearGradientDictionary[_this.linearGradient];
                }
                else {
                    _this.convertedGlyphFill = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toOLLinearGradient(_this.linearGradient, _this.opacity, _this.size);
                    GeoPointStyle.linearGradientDictionary[_this.linearGradient] = _this.convertedGlyphFill;
                }
            }
            if (_this.radialGradient) {
                if (GeoPointStyle.radialGradientDictionary.hasOwnProperty(_this.radialGradient)) {
                    _this.convertedGlyphFill = GeoPointStyle.radialGradientDictionary[_this.radialGradient];
                }
                else {
                    _this.convertedGlyphFill = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toOLRadialGradient(_this.radialGradient, _this.opacity, _this.size);
                    GeoPointStyle.radialGradientDictionary[_this.radialGradient] = _this.convertedGlyphFill;
                }
            }
        }
        return _this;
    }
    GeoPointStyle.prototype.initializeCore = function () {
        this.style = new ol.style.Style();
        switch (this.pointType) {
            case "symbol":
                this.initSymbolStyle();
                break;
            case "image":
                this.initBitmapStyle();
                break;
            case "glyph":
                this.initGlyphStyle();
            default:
                break;
        }
        if (this.pointType === "glyph") {
            if (this.glyph && this.glyphName) {
                this.textStyle.label = this.getGlyphImage(this.textStyle);
                this.style.setImage(null);
                this.style.setText(this.textStyle);
            }
        }
        else {
            this.style.setImage(this.imageStyle);
        }
    };
    GeoPointStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        if (this.pointType === "glyph") {
            if (this.glyph && this.glyphName) {
                this.textStyle.labelPosition = feature.getFlatCoordinates();
            }
        }
        var featureZindex = feature["tempTreeZindex"];
        if (featureZindex === undefined) {
            featureZindex = 0;
        }
        this.style.setZIndex(featureZindex);
        this.styles = [];
        this.styles[0] = this.style;
        return this.styles;
    };
    GeoPointStyle.prototype.getGlyphImage = function (textState) {
        var font = textState.font_;
        var strokeColor;
        var outlineWidth = 0;
        var textStrok = textState.getStroke();
        if (textStrok) {
            strokeColor = textStrok.getColor();
            outlineWidth = textStrok.getWidth();
        }
        var scale = window.devicePixelRatio;
        // here
        var width = ol.render.canvas.TextReplay.measureTextWidths(font, [textState.text_], []) + outlineWidth * 2;
        var height = ol.render.canvas.measureTextHeight(font) + outlineWidth * 2;
        var tmpMaskMargin = (this.glyphMaskMargin ? this.glyphMaskMargin : "0").split(',');
        var tmpMaskHeightMargin = 0;
        var tmpMaskWidthMargin = 0;
        switch (tmpMaskMargin.length) {
            case 1:
                tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) * 2;
                tmpMaskWidthMargin = parseInt(tmpMaskMargin[0]) * 2;
                break;
            case 2:
                tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) * 2;
                tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) * 2;
                break;
            case 3:
                tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) + parseInt(tmpMaskMargin[2]);
                tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) * 2;
                break;
            case 4:
                tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) + parseInt(tmpMaskMargin[2]);
                tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) + parseInt(tmpMaskMargin[3]);
                break;
            default:
                break;
        }
        var tmpMaskOutlineWidth = (this.glyphMaskOutlineWidth ? this.glyphMaskOutlineWidth : 0) * 2;
        var renderWidth = width + tmpMaskWidthMargin;
        var renderHeight = height + tmpMaskWidthMargin;
        var canvasWidth = width + tmpMaskWidthMargin + tmpMaskOutlineWidth;
        var canvasHeight = height + tmpMaskHeightMargin + tmpMaskOutlineWidth;
        var context = ol.dom.createCanvasContext2D(canvasWidth * scale, canvasHeight * scale);
        if (scale !== 1) {
            context.scale(scale, scale);
        }
        this.drawMask(context, 0, 0, renderWidth, renderHeight);
        context.font = font;
        context.textBaseline = "middle";
        context.textAlign = "center";
        if (textStrok) {
            if (strokeColor && outlineWidth > 0) {
                context.strokeStyle = strokeColor;
                context.lineWidth = outlineWidth * (ol.has.SAFARI ? scale : 1);
                context.strokeText(textState.text_, canvasWidth / 2, canvasHeight / 2);
            }
        }
        var textFill = textState.getFill();
        if (textFill) {
            var color = textFill.getColor();
            if (color) {
                context.fillStyle = color;
                context.fillText(textState.text_, canvasWidth / 2, canvasHeight / 2);
            }
        }
        return context.canvas;
    };
    GeoPointStyle.prototype.drawMask = function (context, x, y, width, height) {
        var fill = undefined;
        var stroke = undefined;
        if (this.glyphMaskColor) {
            fill = new ol.style.Fill();
            fill.setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.glyphMaskColor, this.opacity ? this.opacity : 1));
        }
        if (this.glyphMaskOutlineColor && this.glyphMaskOutlineWidth) {
            stroke = new ol.style.Stroke();
            if (this.glyphMaskOutlineColor) {
                stroke.setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.glyphMaskOutlineColor, this.opacity ? this.opacity : 1));
            }
            if (this.glyphMaskOutlineWidth) {
                stroke.setWidth(this.glyphMaskOutlineWidth ? this.glyphMaskOutlineWidth : 0);
            }
        }
        switch (this.glyphMaskType) {
            case "default":
            case "Default":
            case "rectangle":
            case "Rectangle":
                this.drawRectangle(context, x, y, width, height, fill, stroke);
                break;
            case "roundedCorners":
            case "RoundedCorners":
                this.drawRoundRectangle(context, x, y, width, height, fill, stroke);
                break;
            case "roundedEnds":
            case "RoundedEnds":
                this.drawRoundedEnds(context, x, y, width, height, fill, stroke);
                break;
            case "circle":
            case "Circle":
                this.drawCircle(context, x, y, width, height, fill, stroke);
                break;
        }
    };
    GeoPointStyle.prototype.drawRectangle = function (context, x, y, width, height, fill, stroke) {
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fillRect(x, y, width, height);
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.strokeRect(x + stroke.getWidth(), y + stroke.getWidth(), width, height);
        }
    };
    GeoPointStyle.prototype.drawRoundRectangle = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.3;
        // width *= 0.9;
        // height *= 0.8;
        if (stroke) {
            x = x + (stroke.getWidth() ? stroke.getWidth() : 0);
            y = y + (stroke.getWidth() ? stroke.getWidth() : 0);
        }
        context.beginPath();
        context.moveTo(x + radius, y);
        context.lineTo(x + width - radius, y);
        context.quadraticCurveTo(x + width, y, x + width, y + radius);
        context.lineTo(x + width, y + height - radius);
        context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
        context.lineTo(x + radius, y + height);
        context.quadraticCurveTo(x, y + height, x, y + height - radius);
        context.lineTo(x, y + radius);
        context.quadraticCurveTo(x, y, x + radius, y);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoPointStyle.prototype.drawRoundedEnds = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.2;
        // width *= 0.9;
        // height *= 0.8;
        if (stroke) {
            x = x + (stroke.getWidth() ? stroke.getWidth() : 0);
            y = y + (stroke.getWidth() ? stroke.getWidth() : 0);
        }
        context.beginPath();
        context.moveTo(x + radius, y);
        context.lineTo(x + width - radius, y);
        context.quadraticCurveTo(x + width, y + height * 0.5, x + width - radius, y + height);
        context.lineTo(x + radius, y + height);
        context.quadraticCurveTo(x, y + height * 0.5, x + radius, y);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoPointStyle.prototype.drawCircle = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.5;
        // width *= 0.9;
        // height *= 0.8;
        if (stroke) {
            x = x + (stroke.getWidth() ? stroke.getWidth() : 0);
            y = y + (stroke.getWidth() ? stroke.getWidth() : 0);
        }
        context.beginPath();
        context.arc(x + width * 0.5, y + height * 0.5, radius, 0, 2 * Math.PI, false);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoPointStyle.prototype.initSymbolStyle = function () {
        var radius = this.size / 2;
        switch (this.symbolType) {
            case "circle":
                this.imageStyle = new ol.style.Circle({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    radius: radius
                });
                break;
            case "square":
                this.imageStyle = new ol.style.RegularShape({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    points: 4,
                    radius: radius,
                    angle: Math.PI / 4 + this.angle
                });
                break;
            case "triangle":
                this.imageStyle = new ol.style.RegularShape({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    points: 3,
                    radius: radius,
                    angle: this.angle
                });
                break;
            case "cross":
                this.imageStyle = new ol.style.RegularShape({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    points: 4,
                    radius: radius,
                    radius2: 0,
                    angle: this.angle
                });
                break;
            case "diamond":
                break;
            case "diamond2":
                break;
            case "star":
                this.imageStyle = new ol.style.RegularShape({
                    fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                        color: this.convertedGlyphFill
                    })) : undefined,
                    stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                        color: this.convertedGlyphOutLineColor,
                        width: this.outlineWidth
                    })) : undefined,
                    points: 5,
                    radius: radius,
                    radius2: radius / 2.5,
                    angle: this.angle
                });
                break;
            case "star2":
                break;
        }
    };
    GeoPointStyle.prototype.initBitmapStyle = function () {
        if (this.pointFile) {
            this.imageStyle = new ol.style.Icon(({
                opacity: this.opacity || 1,
                src: this.pointFile,
                rotation: this.angle * Math.PI / 180,
                offset: [this.dx, -this.dy]
            }));
        }
    };
    GeoPointStyle.prototype.initGlyphStyle = function () {
        if (this.glyph) {
            this.textStyle = new ol.style.Text(({
                font: this.size + "px " + this.glyph,
                offsetX: this.dx,
                offsetY: this.dy,
                text: this.glyphName,
                fill: this.convertedGlyphFill !== undefined ? new ol.style.Fill(({
                    color: this.convertedGlyphFill
                })) : undefined,
                stroke: this.convertedGlyphOutLineColor !== undefined && this.outlineWidth > 0 ? new ol.style.Stroke(({
                    color: this.convertedGlyphOutLineColor,
                    width: this.outlineWidth
                })) : undefined,
                rotation: this.angle * Math.PI / 180
            }));
        }
    };
    GeoPointStyle.prototype.applyTransForm = function (style) {
        var transformRgx = /([a-z]+)\((.*?)\)/i;
        if (this.transform && transformRgx.test(this.transform)) {
            var matchedResults = this.transform.match(transformRgx);
            var transFormType = matchedResults.length > 2 ? matchedResults[1] : "";
            var transFormValue = matchedResults.length > 2 ? matchedResults[2] : "";
            switch (transFormType) {
                case "rotate":
                    style.getImage() && style.getImage().setRotation(parseInt(transFormValue));
                    style.getText() && style.getText().setRotation(parseInt(transFormValue));
                    break;
                case "scale":
                    var scale = parseInt(transFormValue.split(",")[0]);
                    style.getImage() && style.getImage().setScale(scale);
                    style.getText() && style.getText().setScale(scale);
                    break;
                case "translate":
                default:
                    throw "not support " + this.transform;
            }
        }
    };
    GeoPointStyle.linearGradientDictionary = {};
    GeoPointStyle.radialGradientDictionary = {};
    return GeoPointStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));



/***/ }),

/***/ "./src/style/geoShieldStyle.ts":
/*!*************************************!*\
  !*** ./src/style/geoShieldStyle.ts ***!
  \*************************************/
/*! exports provided: GeoShieldStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoShieldStyle", function() { return GeoShieldStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
/* harmony import */ var _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./textLabelingStrategy */ "./src/style/textLabelingStrategy.ts");
/* harmony import */ var _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./detectTextLabelingStrategy */ "./src/style/detectTextLabelingStrategy.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



var GeoShieldStyle = /** @class */ (function (_super) {
    __extends(GeoShieldStyle, _super);
    function GeoShieldStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        _this.textAligns = ["left", "right", "center", "end", "start"];
        _this.BATCH_CONSTRUCTORS_DEFAULT = {
            Point: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            MultiPoint: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            LineString: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            Circle: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            MultiLineString: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            Polygon: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"],
            MultiPolygon: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_1__["TextLabelingStrategy"]
        };
        _this.BATCH_CONSTRUCTORS_DETECT = {
            Point: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            MultiPoint: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            LineString: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            Circle: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            MultiLineString: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            Polygon: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"],
            MultiPolygon: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["DetectTextLabelingStrategy"]
        };
        _this.imageCache = [];
        _this.labelInfos = new ol.structs.LRUCache(512);
        _this.charWidths = {};
        if (styleJson) {
            _this.iconType = styleJson["shield-icon-type"];
            _this.iconSymbolType = styleJson["shield-icon-symbol-type"];
            _this.iconSize = styleJson["shield-icon-size"] ? styleJson["shield-icon-size"] : 0;
            _this.iconSrc = styleJson["shield-icon-src"];
            _this.iconColor = styleJson["shield-icon-color"];
            _this.iconOutlineColor = styleJson["shield-icon-outline-color"];
            _this.iconOutlineWidth = styleJson["shield-icon-outline-width"] ? styleJson["shield-icon-outline-width"] : 0;
            if (_this.iconSrc) {
                if (!GeoShieldStyle.poiCache[_this.iconSrc]) {
                    var imageElement = document.createElement("img");
                    imageElement.src = _this.iconSrc;
                    GeoShieldStyle.poiCache[_this.iconSrc] = imageElement;
                }
            }
            _this.name = styleJson["shield-name"];
            _this.font = styleJson["shield-font"];
            _this.align = styleJson["shield-align"];
            _this.angle = styleJson["shield-rotate-angle"] ? styleJson["shield-rotate-angle"] : 0;
            // this.avoidEdges = styleJson["shield-avoid-edges"];
            _this.dateFormat = styleJson["shield-date-format"];
            // TODO
            _this.dx = styleJson["shield-dx"] ? styleJson["shield-dx"] : 0;
            _this.dy = styleJson["shield-dy"] ? styleJson["shield-dy"] : 0;
            _this.faceName = styleJson["shield-face-name"];
            _this.fill = styleJson["shield-fill"];
            // this.forceHorizontalForLine = styleJson["shield-force-horizontal-for-line"];
            _this.haloFill = styleJson["shield-halo-fill"] ? styleJson["shield-halo-fill"] : "Transparent";
            _this.haloRadius = styleJson["shield-halo-radius"] ? styleJson["shield-halo-radius"] : 0;
            // using in strategy
            _this.margin = styleJson["shield-margin"];
            // this.maxCharAngleDelta = styleJson["shield-max-char-angle-delta"];
            // using in strategy
            _this.minDistance = styleJson["shield-min-distance"];
            // using in strategy
            _this.minPadding = styleJson["shield-min-padding"];
            _this.name = styleJson["shield-name"];
            _this.numericFormat = styleJson["shield-numeric-format"];
            _this.opacity = styleJson["shield-opacity"];
            _this.orientation = styleJson["shield-orientation"];
            // using in strategy
            _this.placements = styleJson["shield-placements"] ? styleJson["shield-placements"] : "UR,U,UL,B,BR,BL,L,R";
            // using in strategy
            _this.placementType = styleJson["shield-placement-type"] ? styleJson["shield-placement-type"] : "default";
            _this.size = styleJson["shield-size"];
            // using in strategy
            _this.spacing = styleJson["shield-spacing"] !== undefined ? styleJson["shield-spacing"] : 10;
            _this.textFormat = styleJson["shield-text-format"];
            _this.wrap = styleJson["shield-wrap-before"] ? true : styleJson["shield-wrap-before"];
            _this.wrapWidth = styleJson["shield-wrap-width"];
        }
        return _this;
    }
    GeoShieldStyle.prototype.initializeCore = function () {
        var font;
        var size;
        this.textStyle = new ol.style.Text({
            stroke: new ol.style.Stroke()
        });
        if (this.textAligns.indexOf(this.align) >= 0) {
            this.textStyle.setTextAlign(this.align);
        }
        if (this.font) {
            this.textStyle.setFont(this.font ? this.font : "10px sans-serif");
        }
        if (this.fill) {
            this.textStyle.getFill().setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.fill, this.opacity));
        }
        if (this.haloFill) {
            this.textStyle.getStroke().setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.haloFill, this.opacity));
        }
        if (this.haloRadius) {
            this.textStyle.getStroke().setWidth(this.haloRadius);
        }
        if (this.orientation) {
            this.textStyle.setRotation(this.orientation);
        }
        if (this.iconColor) {
            this.convertSymbolColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.iconColor);
        }
        if (this.iconOutlineColor) {
            this.convertSymbolOutlineColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.iconOutlineColor);
        }
        this.style = new ol.style.Style({
            text: this.textStyle
        });
        var chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
        for (var i = 0; i < chars.length; i++) {
            this.charWidths[chars[i]] = ol.render.canvas.measureTextWidth(this.font, chars[i]);
        }
        this.charWidths[" "] = ol.render.canvas.measureTextWidth(this.font, " ");
        for (var i = 0; i <= 9; i++) {
            this.charWidths[i] = ol.render.canvas.measureTextWidth(this.font, i);
        }
        switch (this.iconType) {
            case "image":
            case "Image":
                this.setShiledImageIcon();
                break;
            case "symbol":
            case "Symbol":
                this.setShieldSymbolIcon();
                break;
        }
    };
    GeoShieldStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        var featureText = "";
        if (this.name) {
            featureText = feature.get(this.name);
        }
        featureText = this.formatText(featureText);
        if (featureText === undefined || featureText === "") {
            return;
        }
        this.textStyle.setText(featureText);
        var labelInfo = this.getLabelInfo(featureText);
        var flatCoordinates = this.setLabelPosition(feature, resolution, labelInfo, options.strategyTree, options.frameState);
        if (flatCoordinates === undefined || flatCoordinates.length < 2) {
            return;
        }
        this.style.setGeometry(new ol.geom.Point(flatCoordinates, "XY"));
        var labelimage = this.getImage(labelInfo);
        this.textStyle.label = labelimage;
        this.textStyle.labelPosition = flatCoordinates;
        if (this.imageCache[featureText] === undefined) {
            this.imageCache[featureText] = [];
        }
        var featureZindex = feature["tempTreeZindex"];
        if (featureZindex === undefined) {
            featureZindex = 0;
        }
        this.style.setZIndex(featureZindex);
        return [this.style];
    };
    GeoShieldStyle.prototype.setShieldSymbolIcon = function () {
        if (this.iconSymbolType !== undefined) {
            switch (this.iconSymbolType) {
                case "circle":
                    this.setCircleIcon();
                    break;
                case "square":
                    this.setSquareIcon();
                    break;
                case "triangle":
                    this.setTriangleIcon();
                    break;
                case "cross":
                    this.setCrossIcon();
                    break;
                case "star":
                    this.setStarIcon();
                    break;
            }
            this.style.setImage(this.image);
        }
    };
    GeoShieldStyle.prototype.setStarIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.RegularShape({
            fill: fill,
            stroke: stroke,
            points: 5,
            radius: radius,
            radius2: radius / 2.5,
            angle: this.angle
        });
    };
    GeoShieldStyle.prototype.setCrossIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.RegularShape({
            fill: fill,
            stroke: stroke,
            points: 4,
            radius: radius,
            radius2: 0,
            angle: this.angle
        });
    };
    GeoShieldStyle.prototype.setTriangleIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.RegularShape({
            fill: fill,
            stroke: stroke,
            points: 3,
            radius: radius,
            angle: this.angle
        });
    };
    GeoShieldStyle.prototype.setSquareIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.RegularShape({
            fill: fill,
            stroke: stroke,
            points: 4,
            radius: radius,
            angle: Math.PI / 4 + this.angle
        });
    };
    GeoShieldStyle.prototype.setCircleIcon = function () {
        var fill = undefined;
        var stroke = undefined;
        var radius = this.iconSize * 0.5;
        if (this.iconColor) {
            fill = new ol.style.Fill(({ color: this.convertSymbolColor }));
        }
        if (this.iconOutlineColor || this.iconOutlineWidth) {
            stroke = new ol.style.Stroke(({
                color: this.convertSymbolOutlineColor,
                width: this.iconOutlineWidth
            }));
        }
        this.image = new ol.style.Circle({
            fill: fill,
            stroke: stroke,
            radius: radius
        });
    };
    GeoShieldStyle.prototype.setShiledImageIcon = function () {
        if (this.iconSrc !== undefined) {
            var poiImg = GeoShieldStyle.poiCache[this.iconSrc];
            if (poiImg.complete) {
                if (poiImg.naturalWidth !== 0) {
                    this.image = new ol.style.Icon({
                        img: poiImg,
                        imgSize: [poiImg.width, poiImg.height],
                        rotation: this.angle * Math.PI / 180
                    });
                    this.style.setImage(this.image);
                }
            }
        }
    };
    GeoShieldStyle.prototype.getLabelInfo = function (text) {
        var key = text;
        if (!this.labelInfos.containsKey(key)) {
            var font = this.formatFont(this.textStyle.getFont());
            text = this.wrapText(text, font);
            var fillState = this.textStyle.getFill();
            var strokeState = this.textStyle.getStroke();
            var pixelRatio = window.devicePixelRatio;
            var scale = this.textStyle.getScale();
            scale = (scale ? scale : 1) * pixelRatio;
            var align = ol.render.replay.TEXT_ALIGN[this.textStyle.getTextAlign() || ol.render.canvas.defaultTextAlign];
            var strokeWidth = strokeState && strokeState.getWidth() ? strokeState.getWidth() : 0;
            var lines = text.split("\n");
            var numLines = lines.length;
            var widths = [];
            // let width = (<any>ol.render.canvas).TextReplay.measureTextWidths(font, lines, widths);
            var width = this.getEstimatedWidth(font, lines, widths);
            var renderWidth = width + strokeWidth;
            var lineHeight = ol.render.canvas.measureTextHeight(font);
            var height = lineHeight * numLines;
            // if (this.dx) { this.textStyle.setOffsetX(this.dx + height / 2); }
            if (this.dx) {
                this.textStyle.setOffsetX(this.dx);
            }
            // if (this.dy) { this.textStyle.setOffsetY(this.dy + height / 2); }
            if (this.dy) {
                this.textStyle.setOffsetY(this.dy);
            }
            var labelWidth = Math.ceil(renderWidth * scale);
            var labelHeight = Math.ceil((height + strokeWidth) * scale);
            var labelInfo = {
                width: labelWidth,
                height: labelHeight,
                scale: scale,
                numLines: numLines,
                lines: lines,
                widths: widths,
                lineHeight: lineHeight,
                font: font
            };
            this.labelInfos.set(key, labelInfo);
        }
        return this.labelInfos.get(key);
    };
    GeoShieldStyle.prototype.setLabelPosition = function (geometry, resolution, labelInfo, strategyTree, frameState) {
        var geometryType = geometry.getType();
        var flatCoordinates;
        var i, ii;
        var Constructor;
        if (this.placementType === "default") {
            Constructor = this.BATCH_CONSTRUCTORS_DEFAULT[geometryType];
        }
        else if (this.placementType === "detect") {
            Constructor = this.BATCH_CONSTRUCTORS_DETECT[geometryType];
        }
        var textLabelingStrategy = new Constructor();
        var width = labelInfo.width;
        var height = labelInfo.height;
        switch (geometryType) {
            case ol.geom.GeometryType.POINT:
            case ol.geom.GeometryType.MULTI_POINT:
                flatCoordinates = geometry.getFlatCoordinates();
                break;
            case ol.geom.GeometryType.LINE_STRING:
                flatCoordinates = /** @type {ol.geom.LineString} */ (geometry).getFlatMidpoint();
                break;
            case ol.geom.GeometryType.CIRCLE:
                flatCoordinates = /** @type {ol.geom.Circle} */ (geometry).getCenter();
                break;
            case ol.geom.GeometryType.MULTI_LINE_STRING:
                flatCoordinates = /** @type {ol.geom.MultiLineString} */ (geometry).getFlatMidpoints();
                break;
            case ol.geom.GeometryType.POLYGON:
                flatCoordinates = /** @type {ol.geom.Polygon} */ (geometry).getFlatInteriorPoint();
                break;
            case ol.geom.GeometryType.MULTI_POLYGON:
                var interiorPoints = /** @type {ol.geom.MultiPolygon} */ (geometry).getFlatInteriorPoints();
                flatCoordinates = [];
                for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {
                    if (this.textStyle.overflow || interiorPoints[i + 2] / resolution >= width) {
                        flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);
                    }
                }
                break;
            default:
        }
        flatCoordinates = textLabelingStrategy.markLocation(flatCoordinates, width, height, resolution, geometryType, this, strategyTree, frameState);
        return flatCoordinates;
    };
    GeoShieldStyle.prototype.getEstimatedWidth = function (font, lines, widths) {
        var numLines = lines.length;
        var width = 0;
        var currentWidth, i;
        for (i = 0; i < numLines; ++i) {
            currentWidth = 0;
            for (var j = 0; j < lines[i].length; j++) {
                var charWidth = this.charWidths[lines[i][j]];
                if (charWidth) {
                    currentWidth += charWidth;
                }
                else {
                    currentWidth += this.charWidths["W"];
                }
            }
            width = Math.max(width, currentWidth);
            widths.push(currentWidth);
        }
        return width;
    };
    GeoShieldStyle.prototype.getImage = function (labelInfo) {
        if (labelInfo.label === undefined) {
            var context = ol.dom.createCanvasContext2D(labelInfo.width, labelInfo.height);
            var label = context.canvas;
            if (labelInfo.scale !== 1) {
                context.scale(labelInfo.scale, labelInfo.scale);
            }
            context.font = labelInfo.font;
            var strokeState = this.textStyle.getStroke();
            var strokeWidth = strokeState && strokeState.getWidth() ? strokeState.getWidth() : 0;
            var fillState = this.textStyle.getFill();
            if (strokeState) {
                context.strokeStyle = strokeState.getColor() ? strokeState.getColor() : "Transparent";
                context.lineWidth = strokeWidth * (ol.has.SAFARI ? labelInfo.scale : 1);
                context.lineCap = strokeState.getLineCap();
                context.lineJoin = strokeState.getLineJoin();
                context.miterLimit = strokeState.getMiterLimit();
                var lineDash = strokeState.getLineDash();
                lineDash = lineDash ? lineDash.slice() : ol.render.canvas.defaultLineDash;
                if (ol.has.CANVAS_LINE_DASH && lineDash.length) {
                    context.setLineDash(strokeState.getLineDash());
                    context.lineDashOffset = strokeState.getLineDashOffset();
                }
            }
            if (fillState) {
                context.fillStyle = fillState.getColor();
            }
            context.textBaseline = "middle";
            context.textAlign = "center";
            var align = ol.render.replay.TEXT_ALIGN[this.textStyle.getTextAlign() || ol.render.canvas.defaultTextAlign];
            var leftRight = (0.5 - align);
            var x = align * label.width / labelInfo.scale + leftRight * strokeWidth;
            var i = void 0;
            if (strokeState) {
                for (i = 0; i < labelInfo.numLines; ++i) {
                    context.strokeText(labelInfo.lines[i], x + leftRight * labelInfo.widths[i], 0.5 * (strokeWidth + labelInfo.lineHeight) + i * labelInfo.lineHeight);
                }
            }
            if (fillState) {
                for (i = 0; i < labelInfo.numLines; ++i) {
                    context.fillText(labelInfo.lines[i], x + leftRight * labelInfo.widths[i], 0.5 * (strokeWidth + labelInfo.lineHeight) + i * labelInfo.lineHeight);
                }
            }
            labelInfo["label"] = label;
        }
        return labelInfo["label"];
    };
    GeoShieldStyle.prototype.formatText = function (featureText) {
        if (this.numericFormat) {
            featureText = this.getTextWithNumericFormat(featureText);
        }
        if (this.dateFormat) {
            featureText = this.getTextWithDateFormat(featureText);
        }
        if (this.textFormat) {
            featureText = this.getTextWithFormat(featureText);
        }
        return featureText;
    };
    GeoShieldStyle.prototype.getTextWithNumericFormat = function (featureText) {
        var tmpArguments = this.numericFormat.split(",");
        var numericFormatOptions = {};
        for (var _i = 0, tmpArguments_1 = tmpArguments; _i < tmpArguments_1.length; _i++) {
            var tmpArgument = tmpArguments_1[_i];
            var keyValuePair = tmpArgument.split(":");
            switch (keyValuePair[0].trim()) {
                case "localeMatcher":
                    numericFormatOptions.localeMatcher = keyValuePair[1].trim();
                    break;
                case "style":
                    numericFormatOptions.style = keyValuePair[1].trim();
                    break;
                case "currency":
                    numericFormatOptions.currency = keyValuePair[1].trim();
                    break;
                case "currencyDisplay":
                    numericFormatOptions.currencyDisplay = keyValuePair[1].trim();
                    break;
                case "useGrouping":
                    numericFormatOptions.useGrouping = keyValuePair[1].trim();
                    break;
                case "minimumIntegerDigits":
                    numericFormatOptions.minimumIntegerDigits = keyValuePair[1].trim();
                    break;
                case "minimumFractionDigits":
                    numericFormatOptions.minimumFractionDigits = keyValuePair[1].trim();
                    break;
                case "maximumFractionDigits":
                    numericFormatOptions.maximumFractionDigits = keyValuePair[1].trim();
                    break;
                case "minimumSignificantDigits":
                    numericFormatOptions.minimumSignificantDigits = keyValuePair[1].trim();
                    break;
                case "maximumSignificantDigits":
                    numericFormatOptions.maximumSignificantDigits = keyValuePair[1].trim();
                    break;
            }
        }
        var numeric = new Intl.NumberFormat(tmpArguments[0], numericFormatOptions);
        return numeric.format(Number(featureText));
    };
    GeoShieldStyle.prototype.getTextWithDateFormat = function (featureText) {
        return (new Date(featureText)).format(this.dateFormat);
    };
    GeoShieldStyle.prototype.getTextWithFormat = function (featureText) {
        return String.format(featureText, this.textFormat);
    };
    GeoShieldStyle.prototype.getPointGeometry = function (feature) {
        return feature.getGeometry();
    };
    GeoShieldStyle.prototype.wrapText = function (text, font) {
        var resultText;
        if (text !== "") {
            var lines = [text];
            var widths = [];
            // let width = (<any>ol.render.canvas).TextReplay.measureTextWidths(font, lines, widths);
            var width = this.getEstimatedWidth(font, lines, widths);
            var wrapWidth = this.wrapWidth;
            var wrapCharacter = " ";
            var isWrapBefore = this.wrap;
            if (wrapWidth > 0 && width > wrapWidth && text.includes(wrapCharacter)) {
                var textLines = [];
                lines = text.split(wrapCharacter);
                var wrapLines = [];
                var wrapWidthSum = 0;
                var tmpWrapWidth = void 0;
                if (isWrapBefore) {
                    for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {
                        var line = lines_1[_i];
                        var tmpLine = [line];
                        // tmpWrapWidth = (<any>ol.render.canvas).TextReplay.measureTextWidths(font, tmpLine, widths);
                        tmpWrapWidth = this.getEstimatedWidth(font, tmpLine, widths);
                        wrapWidthSum += tmpWrapWidth;
                        if (tmpWrapWidth > wrapWidth) {
                            wrapLines = [];
                            textLines = [];
                            wrapWidthSum = 0;
                            break;
                        }
                        if (wrapLines.length > 0) {
                            if (wrapWidthSum > wrapWidth) {
                                wrapLines.push("\n");
                                textLines.push(wrapLines.join(""));
                                wrapLines = [];
                                wrapWidthSum = 0;
                            }
                        }
                        wrapLines.push(" " + line);
                    }
                    if (wrapLines.length > 0) {
                        textLines.push(wrapLines.join(""));
                    }
                }
                else {
                    for (var _a = 0, lines_2 = lines; _a < lines_2.length; _a++) {
                        var line = lines_2[_a];
                        wrapLines.push(" " + line);
                        var tmpLine = [line];
                        // tmpWrapWidth = (<any>ol.render.canvas).TextReplay.measureTextWidths(font, tmpLine, widths);
                        tmpWrapWidth = this.getEstimatedWidth(font, tmpLine, widths);
                        wrapWidthSum += tmpWrapWidth;
                        if (wrapWidthSum > wrapWidth) {
                            wrapLines.push("\n");
                            textLines.push(wrapLines.join(""));
                            wrapLines = [];
                            wrapWidthSum = 0;
                        }
                    }
                    if (wrapLines.length > 0) {
                        textLines.push(wrapLines.join(""));
                    }
                }
                resultText = textLines.join("");
                if (resultText.lastIndexOf("\n") === resultText.length - 1) {
                    resultText = resultText.substr(0, resultText.length - 1);
                }
            }
            else {
                resultText = text;
            }
        }
        return resultText;
    };
    GeoShieldStyle.prototype.formatFont = function (font) {
        var tmpFonts = font.split(" ");
        var formatedFont = [];
        if (tmpFonts[tmpFonts.length - 1].includes("bold") || tmpFonts[tmpFonts.length - 1].includes("italic")) {
            formatedFont.push(tmpFonts[tmpFonts.length - 1] + " ");
            for (var i = 0; i < tmpFonts.length - 1; i++) {
                formatedFont.push(tmpFonts[i] + " ");
            }
        }
        else {
            return font;
        }
        return formatedFont.join("").trim();
    };
    GeoShieldStyle.poiCache = [];
    return GeoShieldStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));



/***/ }),

/***/ "./src/style/geoStyle.ts":
/*!*******************************!*\
  !*** ./src/style/geoStyle.ts ***!
  \*******************************/
/*! exports provided: GeoStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoStyle", function() { return GeoStyle; });
var GeoStyle = /** @class */ (function () {
    function GeoStyle(styleJson) {
        this.styles = [];
        if (styleJson) {
            this.id = styleJson["id"];
            this.uid = ol.getUid(this);
            this.visible = styleJson["visible"] === undefined ? true : styleJson["visible"];
        }
    }
    GeoStyle.prototype.initialize = function () {
        if (!this.initialized) {
            this.initializeCore();
            this.initialized = true;
        }
    };
    GeoStyle.prototype.initializeCore = function () {
    };
    GeoStyle.prototype.getStyles = function (feature, resolution, options) {
        var results = [];
        if (this.visible) {
            results = this.getConvertedStyle(feature, resolution, options);
        }
        return results;
    };
    GeoStyle.prototype.getConvertedStyle = function (feature, resolution, options) {
        this.initialize();
        return this.getConvertedStyleCore(feature, resolution, options);
    };
    GeoStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        return [];
    };
    GeoStyle.prototype.skewGeometry = function (geometry, xDeg, yDeg) {
        var center = ol.extent.getCenter(geometry.getExtent());
        for (var i = 0; i < geometry.flatCoordinates.length; i += 2) {
            var x = geometry.flatCoordinates[i];
            var y = geometry.flatCoordinates[i + 1];
            var rx = this.skewX(x, y, center[0], center[1], xDeg);
            var ry = this.skewY(x, y, center[0], center[1], yDeg);
            geometry.flatCoordinates[i] = rx;
            geometry.flatCoordinates[i + 1] = ry;
        }
    };
    GeoStyle.prototype.skewX = function (x, y, cx, cy, xDeg) {
        var rx = x;
        if (xDeg !== 0) {
            var xResolution = Math.tan(1.0 * xDeg * Math.PI / 180);
            var distance = void 0;
            if (x > cx) {
                if (y > cy) {
                    distance = xResolution * Math.abs(y - cy);
                }
                else {
                    distance = 0 - xResolution * Math.abs(y - cy);
                }
            }
            else {
                if (y > cy) {
                    distance = xResolution * Math.abs(y - cy);
                }
                else {
                    distance = 0 - xResolution * Math.abs(y - cy);
                }
            }
            rx += Math.round(distance);
        }
        return rx;
    };
    GeoStyle.prototype.skewY = function (x, y, cx, cy, yDeg) {
        var ry = y;
        if (yDeg !== 0) {
            var yResolution = Math.tan(1.0 * yDeg * Math.PI / 180);
            var distance = void 0;
            if (y > cy) {
                if (x > cx) {
                    distance = yResolution * Math.abs(x - cx);
                }
                else {
                    distance = 0 - yResolution * Math.abs(x - cx);
                }
            }
            else {
                if (x > cx) {
                    distance = yResolution * Math.abs(x - cx);
                }
                else {
                    distance = 0 - yResolution * Math.abs(x - cx);
                }
            }
            ry += Math.round(distance);
        }
        return ry;
    };
    GeoStyle.toRGBAColor = function (color, opacity) {
        if (opacity === void 0) { opacity = 1; }
        if (color.indexOf("#") === 0) {
            var array = void 0;
            var r = void 0;
            var g = void 0;
            var b = void 0;
            var a = void 0;
            if (color.length === 4) {
                r = +("0x" + color.substr(1, 1) + color.substr(1, 1));
                g = +("0x" + color.substr(2, 1) + color.substr(2, 1));
                b = +("0x" + color.substr(3, 1) + color.substr(3, 1));
                a = opacity;
            }
            else {
                r = +("0x" + color.substr(1, 2));
                g = +("0x" + color.substr(3, 2));
                b = +("0x" + color.substr(5, 2));
                a = opacity;
            }
            array = [r, g, b, a];
            if (!isNaN(r) && !isNaN(g) && !isNaN(b)) {
                return "rgba(" + array.join(",") + ")";
            }
            else {
                return "rgba(0,0,0,0)";
            }
        }
        if (color.indexOf("rgb(") === 0) {
            color = color.replace("rgb(", "rgba(");
            color = color.substring(0, color.length - 1) + "," + opacity + ")";
        }
        if (color.indexOf("argb(") === 0) {
            color = color.replace("argb(", "").replace(")", "");
            var array = color.split(",");
            var a = array.shift();
            array.push(a);
            color = "rgba(" + array.join(",") + ")";
        }
        return color;
    };
    GeoStyle.toOLLinearGradient = function (color, opacity, size) {
        if (opacity === void 0) { opacity = 1; }
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        context.rect(0, 0, size, size);
        var grd = context.createLinearGradient(0, 0, size, size);
        var colorStops = color.split(",");
        for (var _i = 0, colorStops_1 = colorStops; _i < colorStops_1.length; _i++) {
            var colorStop = colorStops_1[_i];
            colorStop = colorStop.trim();
            var tmpColorStop = colorStop.substr(1, colorStop.length - 2);
            var cs = tmpColorStop.split(":");
            grd.addColorStop(Number(cs[0].trim()), this.toRGBAColor(cs[1].trim(), opacity));
        }
        return grd;
    };
    GeoStyle.toOLRadialGradient = function (color, opacity, size) {
        if (opacity === void 0) { opacity = 1; }
        var canvas = document.createElement("canvas");
        var context = canvas.getContext("2d");
        context.rect(0, 0, size, size);
        var grd = context.createRadialGradient(size / 2, size / 2, 0, size / 2, size / 2, size / 2);
        var colorStops = color.split(",");
        for (var _i = 0, colorStops_2 = colorStops; _i < colorStops_2.length; _i++) {
            var colorStop = colorStops_2[_i];
            colorStop = colorStop.trim();
            var tmpColorStop = colorStop.substr(1, colorStop.length - 2);
            var cs = tmpColorStop.split(":");
            grd.addColorStop(Number(cs[0].trim()), this.toRGBAColor(cs[1].trim(), opacity));
        }
        return grd;
    };
    return GeoStyle;
}());



/***/ }),

/***/ "./src/style/geoStyleProperty.ts":
/*!***************************************!*\
  !*** ./src/style/geoStyleProperty.ts ***!
  \***************************************/
/*! exports provided: GeoStyleProperty */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoStyleProperty", function() { return GeoStyleProperty; });
/* harmony import */ var _filter_geoFilterItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../filter/geoFilterItem */ "./src/filter/geoFilterItem.ts");
/* harmony import */ var _filter_geoZoomFilter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/geoZoomFilter */ "./src/filter/geoZoomFilter.ts");
/* harmony import */ var _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../filter/geoStringAttributeFilter */ "./src/filter/geoStringAttributeFilter.ts");
/* harmony import */ var _filter_geoRegexFilter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../filter/geoRegexFilter */ "./src/filter/geoRegexFilter.ts");
/* harmony import */ var _filter_geoNumberAttributeFilter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../filter/geoNumberAttributeFilter */ "./src/filter/geoNumberAttributeFilter.ts");





var GeoStyleProperty = /** @class */ (function () {
    function GeoStyleProperty(styleJsonValue, defaultValue) {
        this.styleJsonValue = styleJsonValue;
        this.defaultValue = defaultValue;
    }
    GeoStyleProperty.prototype.initialize = function () {
        if (this.styleJsonValue !== undefined) {
            if (typeof this.styleJsonValue === "object") {
                this.conditions = [];
                this.values = [];
                for (var name_1 in this.styleJsonValue) {
                    var filters = this.createFilter(name_1);
                    this.conditions.push(filters);
                    this.values.push(this.initializeValue(this.styleJsonValue[name_1]));
                }
            }
        }
        this.value = this.initializeValue(this.defaultValue);
    };
    GeoStyleProperty.prototype.initializeValue = function (value) {
        return value;
    };
    GeoStyleProperty.prototype.isCondition = function () {
        return this.conditions && this.conditions.length > 0;
    };
    GeoStyleProperty.prototype.getValue = function (columnValue) {
        if (this.conditions && this.conditions.length > 0) {
            if (columnValue) {
                var i = 0;
                var matched = false;
                for (i = 0; i < this.conditions.length; i++) {
                    var filterGroup = this.conditions[i];
                    for (var j = 0; j < filterGroup.length; j++) {
                        var filters = filterGroup[j];
                        var groupMatched = true;
                        for (var k = 0; k < filters.length; k++) {
                            var filter = filters[k];
                            var rawFeature = { properties: columnValue };
                            if (!filter.matchOLFeature(rawFeature, 0)) {
                                groupMatched = false;
                                break;
                            }
                        }
                        if (groupMatched) {
                            matched = true;
                            break;
                        }
                    }
                    if (matched) {
                        break;
                    }
                }
                if (matched) {
                    return this.values[i];
                }
            }
            else {
                return this.value;
            }
        }
        else {
            return this.value;
        }
    };
    GeoStyleProperty.prototype.createFilter = function (filterString) {
        var filterGroup = [];
        if (filterString) {
            var filterStrings = filterString.split("|");
            for (var i = 0; i < filterStrings.length; i++) {
                var filterStr = filterStrings[i];
                var expression = "(\\w+?=~'.+?')|(\\w+?[<>!=]*'[^;]+?')|(\\w+?[<>!=]*[^;]+)";
                var regex = new RegExp(expression, "g");
                var results = filterStr.match(regex);
                var rangeFilters = {};
                var filters = [];
                var geoZoomFilter = void 0;
                for (var i_1 = 0; i_1 < results.length; i_1++) {
                    if (results[i_1]) {
                        var filterItem = _filter_geoFilterItem__WEBPACK_IMPORTED_MODULE_0__["GeoFilterItem"].createFilterItem(results[i_1]);
                        if (filterItem.value.indexOf("~'") === 0) {
                            filters.push(new _filter_geoRegexFilter__WEBPACK_IMPORTED_MODULE_3__["GeoRegexFilter"]([filterItem]));
                        }
                        else if (filterItem.key === "zoom") {
                            if (geoZoomFilter === undefined) {
                                geoZoomFilter = new _filter_geoZoomFilter__WEBPACK_IMPORTED_MODULE_1__["GeoZoomFilter"]([]);
                            }
                            geoZoomFilter.addFilterItem(filterItem);
                        }
                        else if (filterItem.value.includes("'")) {
                            filters.push(new _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__["GeoStringAttributeFilter"]([filterItem]));
                        }
                        else {
                            rangeFilters[filterItem.key] = rangeFilters[filterItem.key] || new _filter_geoNumberAttributeFilter__WEBPACK_IMPORTED_MODULE_4__["GeoNumberAttributeFilter"]([]);
                            rangeFilters[filterItem.key].addFilterItem(filterItem);
                        }
                    }
                }
                for (var name_2 in rangeFilters) {
                    filters.push(rangeFilters[name_2]);
                }
                filterGroup.push(filters);
            }
        }
        return filterGroup;
    };
    return GeoStyleProperty;
}());



/***/ }),

/***/ "./src/style/geoTextStyle.ts":
/*!***********************************!*\
  !*** ./src/style/geoTextStyle.ts ***!
  \***********************************/
/*! exports provided: GeoTextStyle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GeoTextStyle", function() { return GeoTextStyle; });
/* harmony import */ var _geoStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./geoStyle */ "./src/style/geoStyle.ts");
/* harmony import */ var _geoStyleProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./geoStyleProperty */ "./src/style/geoStyleProperty.ts");
/* harmony import */ var _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./textLabelingStrategy */ "./src/style/textLabelingStrategy.ts");
/* harmony import */ var _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./detectTextLabelingStrategy */ "./src/style/detectTextLabelingStrategy.ts");
var __extends = (undefined && undefined.__extends) || (function () {
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
        return extendStatics(d, b);
    }
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




var GeoTextStyle = /** @class */ (function (_super) {
    __extends(GeoTextStyle, _super);
    function GeoTextStyle(styleJson) {
        var _this = _super.call(this, styleJson) || this;
        _this.textAligns = ["left", "right", "center", "end", "start"];
        _this.textBaseline = ["bottom", "top", "middle", "alphabetic", "hanging", "ideographic"];
        _this.textTransforms = ["default", "uppercase", "lowercase"];
        _this.drawnMask = false;
        _this.BATCH_CONSTRUCTORS_DEFAULT = {
            Point: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            MultiPoint: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            LineString: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            Circle: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            MultiLineString: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            Polygon: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"],
            MultiPolygon: _textLabelingStrategy__WEBPACK_IMPORTED_MODULE_2__["TextLabelingStrategy"]
        };
        _this.BATCH_CONSTRUCTORS_DETECT = {
            Point: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            MultiPoint: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            LineString: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            Circle: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            MultiLineString: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            Polygon: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"],
            MultiPolygon: _detectTextLabelingStrategy__WEBPACK_IMPORTED_MODULE_3__["DetectTextLabelingStrategy"]
        };
        _this.labelInfos = new ol.structs.LRUCache(512);
        _this.charWidths = {};
        if (styleJson) {
            _this.align = styleJson["text-align"];
            _this.baseline = styleJson["text-base-line"];
            _this.dx = styleJson["text-dx"];
            _this.dy = styleJson["text-dy"];
            _this.font = styleJson["text-font"];
            _this.fill = styleJson["text-fill"];
            _this.forceHorizontalForLine = styleJson["text-force-horizontal-for-line"];
            _this.haloFill = styleJson["text-halo-fill"];
            _this.haloRadius = styleJson["text-halo-radius"];
            _this.margin = styleJson["text-margin"];
            _this.maskColor = styleJson["text-mask-color"];
            _this.maskMargin = styleJson["text-mask-margin"];
            _this.maskOutlineColor = styleJson["text-mask-outline-color"];
            _this.maskOutlineWidth = styleJson["text-mask-outline-width"];
            _this.maskType = styleJson["text-mask-type"];
            _this.maxCharAngle = styleJson["text-max-char-angle"];
            _this.minDistance = styleJson["text-min-distance"];
            _this.minPadding = styleJson["text-min-padding"];
            _this.name = styleJson["text-name"];
            _this.opacity = styleJson["text-opacity"];
            _this.rotateAngle = styleJson["text-rotate-angle"];
            _this.propertyPlacements = new _geoStyleProperty__WEBPACK_IMPORTED_MODULE_1__["GeoStyleProperty"](styleJson[GeoTextStyle.placementsName], "U,B,L,R");
            _this.placementType = styleJson["text-placement-type"] ? styleJson["text-placement-type"] : "default";
            _this.spacing = styleJson["text-spacing"] !== undefined ? styleJson["text-spacing"] : 10;
            _this.wrapBefore = styleJson["text-wrap-before"] ? true : styleJson["text-wrap-before"];
            _this.wrapWidth = styleJson["text-wrap-width"];
            _this.textFormat = styleJson["text-text-format"];
            _this.dateFormat = styleJson["text-date-format"];
            _this.numericFormat = styleJson["text-numeric-format"];
            _this.textTransform = styleJson["text-letter-case"];
            _this.letterSpacing = styleJson["text-letter-spacing"];
            // TODO
            _this.avoidEdge = styleJson["text-avoid-edge"];
            // TODO
            _this.splineType = styleJson["text-spline-type"];
            // TODO
            _this.polygonLabelingLocation = styleJson["text-polygon-labeling-location"];
            var chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
            for (var i = 0; i < chars.length; i++) {
                _this.charWidths[chars[i]] = ol.render.canvas.measureTextWidth(_this.font, chars[i]);
            }
            _this.charWidths[" "] = ol.render.canvas.measureTextWidth(_this.font, " ");
            for (var i = 0; i <= 9; i++) {
                _this.charWidths[i] = ol.render.canvas.measureTextWidth(_this.font, i);
            }
        }
        return _this;
    }
    GeoTextStyle.prototype.initializeCore = function () {
        this.propertyPlacements.initialize();
        this.placements = this.propertyPlacements.getValue();
        if (this.fill) {
            this.fillColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.fill, this.opacity);
        }
        if (this.haloFill) {
            this.haloFillColor = _geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.haloFill, this.opacity);
        }
        var fill = new ol.style.Fill();
        var stroke = new ol.style.Stroke();
        var textStyle = new ol.style.Text({
            fill: fill,
            stroke: stroke
        });
        this.style = new ol.style.Style({
            text: textStyle
        });
        if (this.textAligns.indexOf(this.align) >= 0) {
            textStyle.setTextAlign(this.align);
        }
        if (this.textBaseline.indexOf(this.baseline) >= 0) {
            textStyle.setTextBaseline(this.baseline);
        }
        if (this.dx) {
            textStyle.setOffsetX(this.dx);
        }
        if (this.dy) {
            textStyle.setOffsetY(this.dy);
        }
        if (this.font) {
            textStyle.setFont(this.font);
        }
        if (this.fillColor) {
            fill.setColor(this.fillColor);
        }
        if (this.haloFillColor) {
            stroke.setColor(this.haloFillColor);
        }
        if (this.haloRadius) {
            stroke.setWidth(this.haloRadius);
        }
        if (this.haloFillColor === undefined && this.haloRadius === undefined) {
            textStyle.setStroke(undefined);
        }
        if (this.rotateAngle) {
            textStyle.setRotation(this.rotateAngle);
        }
        if (this.maxCharAngle >= 0) {
            textStyle.setMaxAngle(this.maxCharAngle);
        }
        if (this.textTransforms.includes(this.textTransform)) {
        }
        else {
            // TODO: invalid inputs.
            this.textTransform = this.textTransforms[0];
        }
    };
    GeoTextStyle.prototype.getConvertedStyleCore = function (feature, resolution, options) {
        var textStyles = [];
        var featureText = "";
        var featureProperties = feature.getProperties();
        if (this.name) {
            featureText = feature.get(this.name);
        }
        // A workaround for the language, remove the data update
        if ((featureText === undefined || featureText === "") && this.name.indexOf("name_") === 0) {
            featureText = feature.get("name");
        }
        if (this.numericFormat) {
            featureText = this.getTextWithNumericFormat(featureText);
        }
        if (this.dateFormat) {
            featureText = this.getTextWithDateFormat(featureText);
        }
        if (this.textFormat) {
            featureText = this.getTextWithFormat(featureText);
        }
        if (featureText === undefined || featureText === "") {
            return textStyles;
        }
        featureText = this.getTextTransform(featureText);
        this.placements = this.propertyPlacements.getValue(featureProperties);
        this.style.getText().setText(featureText);
        if (this.setLabelPosition(featureText, feature, resolution, this.style.getText(), options.strategyTree, options.frameState)) {
            var featureZindex = feature["tempTreeZindex"];
            if (featureZindex === undefined) {
                featureZindex = 0;
            }
            this.style.setZIndex(featureZindex);
            textStyles.push(this.style);
        }
        return textStyles;
    };
    GeoTextStyle.prototype.setLabelPosition = function (text, geometry, resolution, textState, strategyTree, frameState) {
        var flatCoordinates;
        var geometryType = geometry.getType();
        if ((geometryType === ol.geom.GeometryType.LINE_STRING || geometryType === ol.geom.GeometryType.MULTI_LINE_STRING) && !this.forceHorizontalForLine) {
            var geometryType_1 = geometry.getType();
            flatCoordinates = geometry.getFlatCoordinates();
            if (flatCoordinates === undefined) {
                return false;
            }
        }
        else {
            var labelInfo = this.getLabelInfo(text, textState);
            var labelWidth = labelInfo.labelWidth;
            var labelHeight = labelInfo.labelHeight;
            var scale = labelInfo.scale;
            var font = labelInfo.font;
            var strokeWidth = labelInfo.strokeWidth;
            var numLines = labelInfo.numLines;
            var lines = labelInfo.lines;
            var lineHeight = labelInfo.lineHeight;
            var renderWidth = labelInfo.renderWidth;
            var height = labelInfo.height;
            var widths = labelInfo.widths;
            var Constructor = void 0;
            if (this.placementType === "default") {
                Constructor = this.BATCH_CONSTRUCTORS_DEFAULT[geometryType];
            }
            else if (this.placementType === "detect") {
                Constructor = this.BATCH_CONSTRUCTORS_DETECT[geometryType];
            }
            var textLabelingStrategy = new Constructor();
            var tmpLabelWidth = labelWidth / window.devicePixelRatio;
            var tmpLabelHeight = labelHeight / window.devicePixelRatio;
            switch (geometryType) {
                case ol.geom.GeometryType.POINT:
                    flatCoordinates = geometry.getFlatCoordinates();
                    break;
                case ol.geom.GeometryType.MULTI_POINT:
                    flatCoordinates = geometry.getCenter();
                    break;
                case ol.geom.GeometryType.LINE_STRING:
                    flatCoordinates = /** @type {ol.geom.LineString} */ (geometry).getFlatMidpoint();
                    break;
                case ol.geom.GeometryType.CIRCLE:
                    flatCoordinates = /** @type {ol.geom.Circle} */ (geometry).getCenter();
                    break;
                case ol.geom.GeometryType.MULTI_LINE_STRING:
                    flatCoordinates = /** @type {ol.geom.MultiLineString} */ (geometry).getFlatMidpoints();
                    break;
                case ol.geom.GeometryType.POLYGON:
                    flatCoordinates = /** @type {ol.geom.Polygon} */ (geometry).getFlatInteriorPoint();
                    break;
                case ol.geom.GeometryType.MULTI_POLYGON:
                    var interiorPoints = /** @type {ol.geom.MultiPolygon} */ (geometry).getFlatMidpoint();
                    break;
                default:
            }
            flatCoordinates = textLabelingStrategy.markLocation(flatCoordinates, tmpLabelWidth, tmpLabelHeight, resolution, geometryType, this, strategyTree, frameState);
            if (flatCoordinates === undefined) {
                return false;
            }
            var labelImage = this.getImage(textState, labelWidth, labelHeight, scale, font, strokeWidth, numLines, lines, lineHeight, renderWidth, height, widths);
            if (labelImage === undefined) {
                return;
            }
            textState.label = labelImage;
        }
        textState.labelPosition = flatCoordinates;
        return true;
    };
    GeoTextStyle.prototype.getLabelInfo = function (text, textState) {
        var key = text + this.uid;
        if (!this.labelInfos.containsKey(key)) {
            var font = textState.getFont();
            text = this.wrapText(text, font);
            var strokeState = textState.getStroke();
            var strokeWidth = strokeState && strokeState.getWidth() ? strokeState.getWidth() : 0;
            var lines = text.split("\n");
            var numLines = lines.length;
            var textScale = textState.getScale();
            textScale = textScale === undefined ? 1 : textScale;
            var scale = textScale * window.devicePixelRatio;
            var widths = [];
            var width = this.getEstimatedWidth(font, lines, widths, this.letterSpacing);
            var lineHeight = ol.render.canvas.measureTextHeight(font);
            var tmpMaskMargin = (this.maskMargin ? this.maskMargin : "0").split(',');
            var tmpMaskHeightMargin = 0;
            var tmpMaskWidthMargin = 0;
            switch (tmpMaskMargin.length) {
                case 1:
                    tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) * 2;
                    tmpMaskWidthMargin = parseInt(tmpMaskMargin[0]) * 2;
                    break;
                case 2:
                    tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) * 2;
                    tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) * 2;
                    break;
                case 3:
                    tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) + parseInt(tmpMaskMargin[2]);
                    tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) * 2;
                    break;
                case 4:
                    tmpMaskHeightMargin = parseInt(tmpMaskMargin[0]) + parseInt(tmpMaskMargin[2]);
                    tmpMaskWidthMargin = parseInt(tmpMaskMargin[1]) + parseInt(tmpMaskMargin[3]);
                    break;
                default:
                    break;
            }
            if (this.maskType) {
                if (this.maskType.toLowerCase() === "circle") {
                    tmpMaskHeightMargin = tmpMaskHeightMargin > tmpMaskWidthMargin ? tmpMaskHeightMargin : tmpMaskWidthMargin;
                    tmpMaskWidthMargin = tmpMaskHeightMargin;
                }
            }
            var height = lineHeight * numLines + strokeWidth + tmpMaskHeightMargin;
            var renderWidth = width + strokeWidth + tmpMaskWidthMargin;
            var tmpMaskOutlineWidth = (this.maskOutlineWidth ? this.maskOutlineWidth : 0);
            var labelWidth = Math.ceil((renderWidth + tmpMaskOutlineWidth * 3) * 1.1 * scale);
            var labelHeight = Math.ceil((height + tmpMaskOutlineWidth * 3) * 1.1 * scale);
            var labelInfo = {
                labelWidth: labelWidth,
                labelHeight: labelHeight,
                scale: scale,
                font: font,
                strokeWidth: strokeWidth,
                numLines: numLines,
                lines: lines,
                lineHeight: lineHeight,
                renderWidth: renderWidth,
                height: height,
                widths: widths
            };
            this.labelInfos.set(key, labelInfo);
        }
        return this.labelInfos.get(key);
    };
    GeoTextStyle.prototype.getEstimatedWidth = function (font, lines, widths, letterSpacing) {
        var numLines = lines.length;
        var width = 0;
        var currentWidth, i;
        for (i = 0; i < numLines; ++i) {
            currentWidth = 0;
            for (var j = 0; j < lines[i].length; j++) {
                var charWidth = this.charWidths[lines[i][j]];
                if (charWidth) {
                    currentWidth += charWidth;
                }
                else {
                    currentWidth += this.charWidths["W"];
                }
            }
            if (letterSpacing) {
                currentWidth = currentWidth + (lines[i].length - 1) * letterSpacing;
            }
            width = Math.max(width, currentWidth);
            widths.push(currentWidth);
        }
        return width;
    };
    GeoTextStyle.prototype.getImage = function (textState, labelWidth, labelHeight, scale, font, strokeWidth, numLines, lines, lineHeight, renderWidth, height, widths) {
        var labelCache = ol.render.canvas.labelCache;
        var key = this.uid !== undefined ? this.uid : ol.getUid(this);
        key += lines.toString();
        if (!labelCache.containsKey(key)) {
            var fillState = textState.getFill();
            var strokeState = textState.getStroke();
            var label = void 0;
            var align = ol.render.replay.TEXT_ALIGN[textState.getTextAlign() || ol.render.canvas.defaultTextAlign];
            var context = ol.dom.createCanvasContext2D(labelWidth, labelHeight);
            label = context.canvas;
            labelCache.set(key, label);
            label.style.display = "none";
            // For letterSpacing we need app
            var body = void 0;
            if (this.letterSpacing) {
                body = document.getElementsByTagName("body")[0];
                if (body) {
                    label.style.display = "none";
                    body.appendChild(label);
                }
                label.style.letterSpacing = this.letterSpacing + "px";
                context = label.getContext("2d");
            }
            if (scale !== 1) {
                context.scale(scale, scale);
            }
            context.font = font;
            if (strokeState) {
                context.strokeStyle = strokeState.getColor();
                context.lineWidth = strokeWidth * (ol.has.SAFARI ? scale : 1);
                context.lineCap = strokeState.getLineCap();
                context.lineJoin = strokeState.getLineJoin();
                context.miterLimit = strokeState.getMiterLimit();
                var lineDash = strokeState.getLineDash();
                lineDash = lineDash ? lineDash.slice() : ol.render.canvas.defaultLineDash;
                if (ol.has.CANVAS_LINE_DASH && lineDash.length) {
                    context.setLineDash(strokeState.getLineDash());
                    context.lineDashOffset = strokeState.getLineDashOffset();
                }
            }
            this.drawMask(context, 0, 0, renderWidth, height);
            if (this.maskType) {
                if (this.maskType.toLowerCase() === "circle") {
                    if (scale !== 1) {
                        context.scale(scale, scale);
                    }
                    context.font = font;
                    if (strokeState) {
                        context.strokeStyle = strokeState.getColor();
                        context.lineWidth = strokeWidth * (ol.has.SAFARI ? scale : 1);
                        context.lineCap = strokeState.getLineCap();
                        context.lineJoin = strokeState.getLineJoin();
                        context.miterLimit = strokeState.getMiterLimit();
                        var lineDash = strokeState.getLineDash();
                        lineDash = lineDash ? lineDash.slice() : ol.render.canvas.defaultLineDash;
                        if (ol.has.CANVAS_LINE_DASH && lineDash.length) {
                            context.setLineDash(strokeState.getLineDash());
                            context.lineDashOffset = strokeState.getLineDashOffset();
                        }
                    }
                }
            }
            context.textBaseline = "middle";
            context.textAlign = "center";
            var leftRight = 0.5 - align;
            var x = align * label.width / scale + leftRight * strokeWidth;
            var i = void 0;
            var tmpMaskMargin = (this.maskMargin ? this.maskMargin : "0").split(',');
            var tmpMaskOutlineWidth = this.maskOutlineWidth ? this.maskOutlineWidth : 0;
            if (strokeState) {
                if (strokeState.getColor() !== null) {
                    context.strokeStyle = strokeState.getColor();
                    context.lineWidth = this.haloRadius ? this.haloRadius : 0;
                    for (i = 0; i < numLines; ++i) {
                        if (this.drawnMask) {
                            context.strokeText(lines[i], x + leftRight * widths[i] * 1.2 - strokeWidth * 1.2 + tmpMaskOutlineWidth * 0.5 / 1.2 - (tmpMaskMargin[3] ? parseInt(tmpMaskMargin[1]) - parseInt(tmpMaskMargin[3]) : 0) * 0.5, this.maskType.toLowerCase() === "circle" ? context.canvas.height / scale * 0.5 - (tmpMaskMargin[2] ? parseInt(tmpMaskMargin[2]) - parseInt(tmpMaskMargin[0]) : 0) : strokeWidth + (i + 1) * lineHeight * 0.5 + parseInt(tmpMaskMargin[0]) + tmpMaskOutlineWidth);
                        }
                        else {
                            context.strokeText(lines[i], x + leftRight * widths[i] * 1.2 - (tmpMaskMargin[3] ? parseInt(tmpMaskMargin[1]) - parseInt(tmpMaskMargin[3]) : 0) * 0.5, 0.5 * (strokeWidth + lineHeight) + i * lineHeight * 1.2 - +parseInt(tmpMaskMargin[0]) + (this.maskOutlineWidth ? this.maskOutlineWidth : 0));
                        }
                    }
                }
            }
            if (fillState) {
                if (fillState.getColor() !== null) {
                    context.fillStyle = fillState.getColor();
                    for (i = 0; i < numLines; ++i) {
                        if (this.drawnMask) {
                            context.fillText(lines[i], x + leftRight * widths[i] * 1.2 - strokeWidth * 1.2 + tmpMaskOutlineWidth * 0.5 / 1.2 - (tmpMaskMargin[3] ? parseInt(tmpMaskMargin[1]) - parseInt(tmpMaskMargin[3]) : 0) * 0.5, this.maskType.toLowerCase() === "circle" ? context.canvas.height / scale * 0.5 - (tmpMaskMargin[2] ? parseInt(tmpMaskMargin[2]) - parseInt(tmpMaskMargin[0]) : 0) : strokeWidth + (i + 1) * lineHeight * 0.5 + parseInt(tmpMaskMargin[0]) + tmpMaskOutlineWidth);
                        }
                        else {
                            context.fillText(lines[i], x + leftRight * widths[i] * 1.2 - (tmpMaskMargin[3] ? parseInt(tmpMaskMargin[1]) - parseInt(tmpMaskMargin[3]) : 0) * 0.5, 0.5 * (strokeWidth + lineHeight) + i * lineHeight * 1.2 + parseInt(tmpMaskMargin[0]) + (this.maskOutlineWidth ? this.maskOutlineWidth : 0));
                        }
                    }
                }
            }
            if (this.letterSpacing && body) {
                body.removeChild(label);
            }
        }
        return labelCache.get(key);
    };
    GeoTextStyle.prototype.wrapText = function (text, font) {
        var resultText;
        if (text !== "") {
            var lines = [text];
            var widths = [];
            var width = this.getEstimatedWidth(font, lines, widths, this.letterSpacing);
            var wrapWidth = this.wrapWidth;
            var wrapCharacter = " ";
            var isWrapBefore = this.wrapBefore;
            if (wrapWidth > 0 && width > wrapWidth && text.includes(wrapCharacter)) {
                var textLines = [];
                lines = text.split(wrapCharacter);
                var wrapLines = [];
                var wrapWidthSum = 0;
                var tmpWrapWidth = void 0;
                if (isWrapBefore) {
                    for (var _i = 0, lines_1 = lines; _i < lines_1.length; _i++) {
                        var line = lines_1[_i];
                        var tmpLine = [line];
                        tmpWrapWidth = this.getEstimatedWidth(font, tmpLine, widths, this.letterSpacing);
                        wrapWidthSum += tmpWrapWidth;
                        if (tmpWrapWidth > wrapWidth) {
                            wrapLines = [];
                            textLines = [];
                            wrapWidthSum = 0;
                            break;
                        }
                        if (wrapLines.length > 0) {
                            if (wrapWidthSum > wrapWidth) {
                                wrapLines.push("\n");
                                textLines.push(wrapLines.join(""));
                                wrapLines = [];
                                wrapWidthSum = 0;
                            }
                        }
                        wrapLines.push(" " + line);
                    }
                    if (wrapLines.length > 0) {
                        textLines.push(wrapLines.join(""));
                    }
                }
                else {
                    for (var _a = 0, lines_2 = lines; _a < lines_2.length; _a++) {
                        var line = lines_2[_a];
                        wrapLines.push(" " + line);
                        var tmpLine = [line];
                        tmpWrapWidth = this.getEstimatedWidth(font, tmpLine, widths, this.letterSpacing);
                        wrapWidthSum += tmpWrapWidth;
                        if (wrapWidthSum > wrapWidth) {
                            wrapLines.push("\n");
                            textLines.push(wrapLines.join(""));
                            wrapLines = [];
                            wrapWidthSum = 0;
                        }
                    }
                    if (wrapLines.length > 0) {
                        textLines.push(wrapLines.join(""));
                    }
                }
                resultText = textLines.join("");
                if (resultText.lastIndexOf("\n") === resultText.length - 1) {
                    resultText = resultText.substr(0, resultText.length - 1);
                }
            }
            else {
                resultText = text;
            }
        }
        return resultText;
    };
    GeoTextStyle.prototype.drawMask = function (context, x, y, width, height) {
        var fill = undefined;
        var stroke = undefined;
        if (this.maskColor) {
            fill = new ol.style.Fill();
            fill.setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.maskColor, this.opacity ? this.opacity : 1));
        }
        if (this.maskOutlineColor && this.maskOutlineWidth) {
            stroke = new ol.style.Stroke();
            if (this.maskOutlineColor) {
                stroke.setColor(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"].toRGBAColor(this.maskOutlineColor, this.opacity ? this.opacity : 1));
            }
            if (this.maskOutlineWidth) {
                stroke.setWidth(this.maskOutlineWidth ? this.maskOutlineWidth : 0);
            }
        }
        if (this.maskType) {
            this.drawnMask = true;
        }
        else {
            this.drawnMask = false;
        }
        switch (this.maskType) {
            case "default":
            case "Default":
            case "rectangle":
            case "Rectangle":
                this.drawRectangle(context, x, y, width, height, fill, stroke);
                break;
            case "roundedCorners":
            case "RoundedCorners":
                this.drawRoundRectangle(context, x, y, width, height, fill, stroke);
                break;
            case "roundedEnds":
            case "RoundedEnds":
                this.drawRoundedEnds(context, x, y, width, height, fill, stroke);
                break;
            case "circle":
            case "Circle":
                this.drawCircle(context, x, y, width, height, fill, stroke);
                break;
        }
    };
    GeoTextStyle.prototype.drawRectangle = function (context, x, y, width, height, fill, stroke) {
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fillRect(x + stroke.getWidth(), y + stroke.getWidth(), width + stroke.getWidth() * 2, height);
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.strokeRect(x + stroke.getWidth(), y + stroke.getWidth(), width + stroke.getWidth() * 2, height);
        }
    };
    GeoTextStyle.prototype.drawRoundRectangle = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.3;
        // width *= 0.9;
        // height *= 0.8;
        if (stroke) {
            x = x + (stroke.getWidth() ? stroke.getWidth() : 0);
            y = y + (stroke.getWidth() ? stroke.getWidth() : 0);
        }
        context.beginPath();
        context.moveTo(x + radius + stroke.getWidth() * 2, y);
        context.lineTo(x + width - radius + stroke.getWidth() * 2, y);
        context.quadraticCurveTo(x + width + stroke.getWidth() * 2, y, x + width + stroke.getWidth() * 2, y + radius);
        context.lineTo(x + width + stroke.getWidth() * 2, y + height - radius);
        context.quadraticCurveTo(x + width + stroke.getWidth() * 2, y + height, x + width - radius + stroke.getWidth() * 2, y + height);
        context.lineTo(x + radius, y + height);
        context.quadraticCurveTo(x, y + height, x, y + height - radius);
        context.lineTo(x, y + radius);
        context.quadraticCurveTo(x, y, x + radius, y);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoTextStyle.prototype.drawRoundedEnds = function (context, x, y, width, height, fill, stroke) {
        var radius = (width < height ? width : height) * 0.2;
        // width *= 0.9;
        // height *= 0.8;
        var strokeWidth = (stroke.getWidth() ? stroke.getWidth() : 0);
        if (stroke) {
            x = x + strokeWidth;
            y = y + strokeWidth;
        }
        context.beginPath();
        context.moveTo(x + radius, y);
        context.lineTo(x + width - radius + strokeWidth * 2, y);
        context.quadraticCurveTo(x + width + strokeWidth * 2, y + height * 0.5, x + width - radius + strokeWidth * 2, y + height);
        context.lineTo(x + radius, y + height);
        context.quadraticCurveTo(x, y + height * 0.5, x + radius, y);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth();
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoTextStyle.prototype.drawCircle = function (context, x, y, width, height, fill, stroke) {
        context.canvas.width = context.canvas.width > context.canvas.height ? context.canvas.width : context.canvas.height;
        context.canvas.height = context.canvas.width;
        var radius = 0;
        if (stroke) {
            radius -= stroke.getWidth();
        }
        radius += context.canvas.width * 0.5;
        context.beginPath();
        context.arc(x + context.canvas.width * 0.5, y + context.canvas.width * 0.5, radius, 0, 2 * Math.PI, false);
        context.closePath();
        if (fill) {
            context.fillStyle = fill.getColor();
            context.fill();
        }
        if (stroke) {
            context.lineWidth = stroke.getWidth() * window.devicePixelRatio;
            context.strokeStyle = stroke.getColor();
            context.stroke();
        }
    };
    GeoTextStyle.prototype.getTextWithNumericFormat = function (featureText) {
        var tmpArguments = this.numericFormat.split(",");
        var numericFormatOptions = {};
        for (var _i = 0, tmpArguments_1 = tmpArguments; _i < tmpArguments_1.length; _i++) {
            var tmpArgument = tmpArguments_1[_i];
            var keyValuePair = tmpArgument.split(":");
            switch (keyValuePair[0].trim()) {
                case "localeMatcher":
                    numericFormatOptions.localeMatcher = keyValuePair[1].trim();
                    break;
                case "style":
                    numericFormatOptions.style = keyValuePair[1].trim();
                    break;
                case "currency":
                    numericFormatOptions.currency = keyValuePair[1].trim();
                    break;
                case "currencyDisplay":
                    numericFormatOptions.currencyDisplay = keyValuePair[1].trim();
                    break;
                case "useGrouping":
                    numericFormatOptions.useGrouping = keyValuePair[1].trim();
                    break;
                case "minimumIntegerDigits":
                    numericFormatOptions.minimumIntegerDigits = keyValuePair[1].trim();
                    break;
                case "minimumFractionDigits":
                    numericFormatOptions.minimumFractionDigits = keyValuePair[1].trim();
                    break;
                case "maximumFractionDigits":
                    numericFormatOptions.maximumFractionDigits = keyValuePair[1].trim();
                    break;
                case "minimumSignificantDigits":
                    numericFormatOptions.minimumSignificantDigits = keyValuePair[1].trim();
                    break;
                case "maximumSignificantDigits":
                    numericFormatOptions.maximumSignificantDigits = keyValuePair[1].trim();
                    break;
            }
        }
        var numeric = new Intl.NumberFormat(tmpArguments[0], numericFormatOptions);
        return numeric.format(Number(featureText));
    };
    GeoTextStyle.prototype.getTextWithDateFormat = function (featureText) {
        return (new Date(featureText)).format(this.dateFormat);
    };
    GeoTextStyle.prototype.getTextWithFormat = function (featureText) {
        return String.format(this.textFormat, featureText);
    };
    GeoTextStyle.prototype.getTextTransform = function (featureText) {
        if (featureText !== undefined) {
            switch (this.textTransform) {
                case "uppercase":
                    featureText = featureText.toLocaleUpperCase();
                    break;
                case "lowercase":
                    featureText = featureText.toLocaleLowerCase();
                    break;
                default:
                    break;
            }
        }
        return featureText;
    };
    GeoTextStyle.placementsName = "text-placements";
    return GeoTextStyle;
}(_geoStyle__WEBPACK_IMPORTED_MODULE_0__["GeoStyle"]));

String.format = function () {
    var s = arguments[0];
    for (var i = 0; i < arguments.length - 1; i++) {
        var reg = new RegExp("\\{" + i + "\\}", "gm");
        s = s.replace(reg, arguments[i + 1]);
    }
    return s;
};
Date.prototype.format = function (fmt) {
    var o = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),
        "S": this.getMilliseconds()
    };
    if (/(y+)/.test(fmt))
        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
    for (var k in o)
        if (new RegExp("(" + k + ")").test(fmt))
            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length === 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
    return fmt;
};


/***/ }),

/***/ "./src/style/textLabelingStrategy.ts":
/*!*******************************************!*\
  !*** ./src/style/textLabelingStrategy.ts ***!
  \*******************************************/
/*! exports provided: TextLabelingStrategy */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextLabelingStrategy", function() { return TextLabelingStrategy; });
var TextLabelingStrategy = /** @class */ (function () {
    function TextLabelingStrategy() {
    }
    TextLabelingStrategy.prototype.markLocation = function (flatCoordinates, width, height, resolution, geometryType, textStyle, strategyTree, frameState) {
        return this.markLocationCore(flatCoordinates, width, height, resolution, geometryType, textStyle, strategyTree, frameState);
    };
    TextLabelingStrategy.prototype.markLocationCore = function (flatCoordinates, width, height, resolution, geometryType, textStyle, strategyTree, frameState) {
        if (this.isOverlapping(flatCoordinates, width, height, textStyle.margin, textStyle.minDistance, textStyle.minPadding, textStyle.spacing, strategyTree, frameState)) {
            return undefined;
        }
        else {
            return flatCoordinates;
        }
    };
    TextLabelingStrategy.prototype.isOverlapping = function (flatCoordinates, width, height, margin, minDistance, minPadding, spacing, strategyTree, frameState) {
        if (flatCoordinates === undefined) {
            return true;
        }
        var distance = (margin ? margin : 0) + (minDistance ? minDistance : 0) + (minPadding ? minPadding : 0) + (spacing ? spacing : 0);
        var coordinate = [flatCoordinates[0], flatCoordinates[1]];
        var screenCoordinates = this.convertPixelFromCoordinate(coordinate, frameState);
        var minX = screenCoordinates[0] - width / 2 - distance * 0.5;
        var minY = screenCoordinates[1] - height / 2 - distance * 0.5;
        var maxX = minX + width + distance;
        var maxY = minY + height + distance;
        var box = {
            minX: minX,
            minY: minY,
            maxX: maxX,
            maxY: maxY
        };
        if (!strategyTree.collides(box)) {
            strategyTree.insert(box);
            return false;
        }
        else {
            return true;
        }
    };
    TextLabelingStrategy.prototype.convertPixelFromCoordinate = function (coordinate, frameState) {
        if (!frameState) {
            return null;
        }
        return ol.transform.apply(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));
    };
    return TextLabelingStrategy;
}());



/***/ }),

/***/ "./src/tree/TreeNode.ts":
/*!******************************!*\
  !*** ./src/tree/TreeNode.ts ***!
  \******************************/
/*! exports provided: TreeNode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TreeNode", function() { return TreeNode; });
var TreeNode = /** @class */ (function () {
    function TreeNode(data) {
        this.data = data;
        this.children = [];
    }
    return TreeNode;
}());



/***/ }),

/***/ "./src/tree/styleJsonCache.ts":
/*!************************************!*\
  !*** ./src/tree/styleJsonCache.ts ***!
  \************************************/
/*! exports provided: StyleJsonCache */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleJsonCache", function() { return StyleJsonCache; });
/* harmony import */ var _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../style/geoTextStyle */ "./src/style/geoTextStyle.ts");

var StyleJsonCache = /** @class */ (function () {
    function StyleJsonCache() {
        this.geoStyleGroupByZoom = [];
        this.styleJson = {};
        this.geoStyles = {};
        this.geoTextStyleInfo = {};
    }
    StyleJsonCache.prototype.add = function (zoom, dataLayerName, tree) {
        if (this.geoStyleGroupByZoom[zoom] === undefined) {
            this.geoStyleGroupByZoom[zoom] = {};
        }
        if (this.geoStyleGroupByZoom[zoom] === undefined) {
            this.geoStyleGroupByZoom[zoom] = {};
        }
        if (this.geoStyleGroupByZoom[zoom][dataLayerName] === undefined) {
            this.geoStyleGroupByZoom[zoom][dataLayerName] = [];
        }
        this.geoStyleGroupByZoom[zoom][dataLayerName].push(tree);
        this.readGeoStyleFromTree(tree);
    };
    StyleJsonCache.prototype.readGeoStyleFromTree = function (tree) {
        return this.readGeoStyleFromTreeNode(tree.root);
    };
    StyleJsonCache.prototype.readGeoStyleFromTreeNode = function (node) {
        var result = [];
        if (node.data.geoStyle) {
            this.geoStyles[node.data.geoStyle.id] = node.data.geoStyle;
            // get the widths of GeoTextStyle
            if (node.data.geoStyle instanceof _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_0__["GeoTextStyle"]) {
                this.geoTextStyleInfo[node.data.geoStyle.id] = node.data.geoStyle.charWidths;
            }
        }
        if (node.data.childrenGeoStyles && node.data.childrenGeoStyles.length > 0) {
            for (var i = 0; i < node.data.childrenGeoStyles.length; i++) {
                this.geoStyles[node.data.childrenGeoStyles[i].id] = node.data.childrenGeoStyles[i];
                if (node.data.childrenGeoStyles[i] instanceof _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_0__["GeoTextStyle"]) {
                    this.geoTextStyleInfo[node.data.childrenGeoStyles[i].id] = node.data.childrenGeoStyles[i];
                }
            }
        }
        if (node.children && node.children.length > 0) {
            for (var i = 0; i < node.children.length; i++) {
                this.readGeoStyleFromTreeNode(node.children[i]);
            }
        }
        return result;
    };
    StyleJsonCache.prototype.clear = function () {
        this.geoStyleGroupByZoom.length = 0;
    };
    return StyleJsonCache;
}());



/***/ }),

/***/ "./src/tree/styleJsonCacheItem.ts":
/*!****************************************!*\
  !*** ./src/tree/styleJsonCacheItem.ts ***!
  \****************************************/
/*! exports provided: StyleJsonCacheItem */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "StyleJsonCacheItem", function() { return StyleJsonCacheItem; });
/* harmony import */ var _filter_geoFilterItem__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../filter/geoFilterItem */ "./src/filter/geoFilterItem.ts");
/* harmony import */ var _filter_geoZoomFilter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../filter/geoZoomFilter */ "./src/filter/geoZoomFilter.ts");
/* harmony import */ var _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../filter/geoStringAttributeFilter */ "./src/filter/geoStringAttributeFilter.ts");
/* harmony import */ var _filter_geoRegexFilter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../filter/geoRegexFilter */ "./src/filter/geoRegexFilter.ts");
/* harmony import */ var _filter_geoNumberAttributeFilter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../filter/geoNumberAttributeFilter */ "./src/filter/geoNumberAttributeFilter.ts");
/* harmony import */ var _style_geoAreaStyle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../style/geoAreaStyle */ "./src/style/geoAreaStyle.ts");
/* harmony import */ var _style_geoLineStyle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../style/geoLineStyle */ "./src/style/geoLineStyle.ts");
/* harmony import */ var _style_geoPointStyle__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../style/geoPointStyle */ "./src/style/geoPointStyle.ts");
/* harmony import */ var _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../style/geoTextStyle */ "./src/style/geoTextStyle.ts");
/* harmony import */ var _style_geoShieldStyle__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../style/geoShieldStyle */ "./src/style/geoShieldStyle.ts");










var StyleJsonCacheItem = /** @class */ (function () {
    function StyleJsonCacheItem(styleJson, minZoom, maxZoom, dataLayerColumnName) {
        this.childrenGeoStyles = [];
        this.subStyleCacheItems = [];
        this.minZoom = minZoom;
        this.maxZoom = maxZoom;
        this.zIndex = styleJson["z-index"];
        this.styleFirst = styleJson["style-first"];
        this.filterGroup = this.createFilters(styleJson.filter, dataLayerColumnName) || [];
        this.createSubItems(styleJson, dataLayerColumnName);
        this.geoStyle = this.createGeoStyle(styleJson);
        this.createChildrenGeoStyle(styleJson);
    }
    StyleJsonCacheItem.prototype.createFilters = function (filterString, dataLayerColumnName) {
        var filterGroup = [];
        var tempMinZoom = this.maxZoom;
        var tempMaxZoom = this.minZoom;
        if (filterString) {
            var filterStrings = filterString.split("|");
            for (var i = 0; i < filterStrings.length; i++) {
                var filterStr = filterStrings[i];
                var expression = "(\\w+?=~'.+?')|(\\w+?[<>!=]*'[^;]+?')|(\\w+?[<>!=]*[^;]+)";
                var regex = new RegExp(expression, "g");
                var results = filterStr.match(regex);
                var rangeFilters = {};
                var filters = [];
                var geoZoomFilter = void 0;
                var dataLayerNameFilter = void 0;
                for (var i_1 = 0; i_1 < results.length; i_1++) {
                    if (results[i_1]) {
                        var filterItem = _filter_geoFilterItem__WEBPACK_IMPORTED_MODULE_0__["GeoFilterItem"].createFilterItem(results[i_1]);
                        if (filterItem.value.indexOf("~'") === 0) {
                            filters.push(new _filter_geoRegexFilter__WEBPACK_IMPORTED_MODULE_3__["GeoRegexFilter"]([filterItem]));
                        }
                        else if (filterItem.key === "zoom") {
                            if (geoZoomFilter === undefined) {
                                geoZoomFilter = new _filter_geoZoomFilter__WEBPACK_IMPORTED_MODULE_1__["GeoZoomFilter"]([]);
                            }
                            geoZoomFilter.addFilterItem(filterItem);
                        }
                        else if (filterItem.value.includes("'")) {
                            if (filterItem.key === dataLayerColumnName) {
                                if (dataLayerNameFilter === undefined) {
                                    dataLayerNameFilter = new _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__["GeoStringAttributeFilter"]([filterItem]);
                                }
                            }
                            else {
                                filters.push(new _filter_geoStringAttributeFilter__WEBPACK_IMPORTED_MODULE_2__["GeoStringAttributeFilter"]([filterItem]));
                            }
                        }
                        else {
                            rangeFilters[filterItem.key] = rangeFilters[filterItem.key] || new _filter_geoNumberAttributeFilter__WEBPACK_IMPORTED_MODULE_4__["GeoNumberAttributeFilter"]([]);
                            rangeFilters[filterItem.key].addFilterItem(filterItem);
                        }
                    }
                }
                // update the minZoom and maxZoom by ZoomFilter
                if (geoZoomFilter) {
                    filters.push(geoZoomFilter);
                    geoZoomFilter.initialize();
                    if (geoZoomFilter.ranges.length > 0) {
                        var minZ = +geoZoomFilter.ranges[0][0];
                        var maxZ = +geoZoomFilter.ranges[0][1];
                        if (minZ <= tempMinZoom) {
                            tempMinZoom = minZ;
                        }
                        if (maxZ >= tempMaxZoom) {
                            tempMaxZoom = maxZ;
                        }
                    }
                    else {
                        var z = +geoZoomFilter.allowedValues[0];
                        if (z <= tempMinZoom) {
                            tempMinZoom = z;
                        }
                        if (z >= tempMaxZoom) {
                            tempMaxZoom = z;
                        }
                    }
                }
                // update the dataLayerName
                if (dataLayerNameFilter) {
                    dataLayerNameFilter.initialize();
                    this.dataLayerName = dataLayerNameFilter.expectedValues[0];
                }
                for (var name_1 in rangeFilters) {
                    filters.push(rangeFilters[name_1]);
                }
                filterGroup.push(filters);
            }
        }
        if (tempMaxZoom !== this.minZoom || tempMinZoom !== this.maxZoom) {
            this.maxZoom = tempMaxZoom;
            this.minZoom = tempMinZoom;
        }
        return filterGroup;
    };
    StyleJsonCacheItem.prototype.createSubItems = function (styleJson, dataLayerColumnName) {
        if (styleJson.style) {
            // apply the property to sub style.
            for (var key in styleJson) {
                if (key !== "style" && key !== "filter") {
                    for (var i = 0; i < styleJson.style.length; i++) {
                        // Apply the property to sub style if the sub style does not included.
                        if (styleJson.style[i][key] === undefined) {
                            if (key === "id") {
                                styleJson.style[i][key] = styleJson[key] + "#" + i;
                            }
                            else {
                                styleJson.style[i][key] = styleJson[key];
                            }
                        }
                    }
                }
            }
            var subItemMinZoom = void 0;
            var subItemMaxZoom = void 0;
            for (var _i = 0, _a = styleJson.style; _i < _a.length; _i++) {
                var subStyle = _a[_i];
                var styleJsonCacheSubItem = new StyleJsonCacheItem(subStyle, this.minZoom, this.maxZoom, dataLayerColumnName);
                if (subItemMaxZoom === undefined || styleJsonCacheSubItem.maxZoom > subItemMaxZoom) {
                    subItemMaxZoom = styleJsonCacheSubItem.maxZoom;
                }
                if (subItemMinZoom === undefined || styleJsonCacheSubItem.minZoom < subItemMinZoom) {
                    subItemMinZoom = styleJsonCacheSubItem.minZoom;
                }
                this.subStyleCacheItems.push(styleJsonCacheSubItem);
            }
            if (subItemMinZoom && subItemMinZoom > this.minZoom) {
                this.minZoom = subItemMinZoom;
            }
            if (subItemMaxZoom && subItemMaxZoom < this.maxZoom) {
                this.maxZoom = subItemMaxZoom;
            }
        }
    };
    StyleJsonCacheItem.prototype.createGeoStyle = function (styleJson) {
        var geoStyle;
        for (var key in styleJson) {
            if (key !== "style" && key !== "filter") {
                var keys = key.split("-");
                if (keys.length > 1) {
                    switch (keys[0]) {
                        case "polygon":
                            geoStyle = new _style_geoAreaStyle__WEBPACK_IMPORTED_MODULE_5__["GeoAreaStyle"](styleJson);
                            break;
                        case "line":
                            geoStyle = new _style_geoLineStyle__WEBPACK_IMPORTED_MODULE_6__["GeoLineStyle"](styleJson);
                            break;
                        case "text":
                            geoStyle = new _style_geoTextStyle__WEBPACK_IMPORTED_MODULE_8__["GeoTextStyle"](styleJson);
                            break;
                        case "point":
                            geoStyle = new _style_geoPointStyle__WEBPACK_IMPORTED_MODULE_7__["GeoPointStyle"](styleJson);
                            break;
                        case "shield":
                            geoStyle = new _style_geoShieldStyle__WEBPACK_IMPORTED_MODULE_9__["GeoShieldStyle"](styleJson);
                            break;
                        default:
                            break;
                    }
                    break;
                }
            }
        }
        return geoStyle;
    };
    StyleJsonCacheItem.prototype.createChildrenGeoStyle = function (styleJson) {
        if (styleJson["children"]) {
            for (var i = 0; i < styleJson["children"].length; i++) {
                var childrenGeoStyleJson = styleJson["children"][i];
                if (childrenGeoStyleJson["id"] === undefined) {
                    childrenGeoStyleJson["id"] = styleJson["id"] + "#c" + i;
                }
                this.childrenGeoStyles.push(this.createGeoStyle(childrenGeoStyleJson));
            }
        }
    };
    return StyleJsonCacheItem;
}());



/***/ }),

/***/ "./src/tree/tree.ts":
/*!**************************!*\
  !*** ./src/tree/tree.ts ***!
  \**************************/
/*! exports provided: Tree */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tree", function() { return Tree; });
var Tree = /** @class */ (function () {
    function Tree(node, treeIndex) {
        this.node = node;
        this.root = node;
        this.treeIndex = treeIndex;
    }
    Tree.prototype.traverseNode = function (callback, select) {
        (function recurse(currentNode) {
            if (callback(currentNode)) {
                if (currentNode.children.length > 0) {
                    for (var i = 0, length_1 = currentNode.children.length; i < length_1; i++) {
                        if (recurse(currentNode.children[i])) {
                            break;
                        }
                    }
                }
                else {
                    // current node is matched, and without children
                    select(currentNode);
                }
                // true: the currentNode is matched.
                return true;
            }
            // false: the currentNode is not matched.
            return false;
        })(this.root);
    };
    return Tree;
}());



/***/ }),

/***/ "./src/worker/vectorTileLayerThreadMode.ts":
/*!*************************************************!*\
  !*** ./src/worker/vectorTileLayerThreadMode.ts ***!
  \*************************************************/
/*! exports provided: VectorTileLayerThreadMode */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VectorTileLayerThreadMode", function() { return VectorTileLayerThreadMode; });
var VectorTileLayerThreadMode;
(function (VectorTileLayerThreadMode) {
    VectorTileLayerThreadMode[VectorTileLayerThreadMode["Default"] = 1] = "Default";
    VectorTileLayerThreadMode[VectorTileLayerThreadMode["SingleThread"] = 2] = "SingleThread";
    VectorTileLayerThreadMode[VectorTileLayerThreadMode["SingleBackgroundWorker"] = 3] = "SingleBackgroundWorker";
    VectorTileLayerThreadMode[VectorTileLayerThreadMode["MultiBackgroundWorker"] = 4] = "MultiBackgroundWorker";
})(VectorTileLayerThreadMode || (VectorTileLayerThreadMode = {}));


/***/ }),

/***/ "./src/worker/workerManager.ts":
/*!*************************************!*\
  !*** ./src/worker/workerManager.ts ***!
  \*************************************/
/*! exports provided: WorkerManager */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "WorkerManager", function() { return WorkerManager; });
/* harmony import */ var _vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./vectorTileLayerThreadMode */ "./src/worker/vectorTileLayerThreadMode.ts");

var WorkerManager = /** @class */ (function () {
    function WorkerManager(threadMode, workerCount) {
        if (threadMode === _vectorTileLayerThreadMode__WEBPACK_IMPORTED_MODULE_0__["VectorTileLayerThreadMode"].SingleBackgroundWorker) {
            this.workerCount = 1;
        }
        else {
            if (isNaN(workerCount) || workerCount <= 0) {
                this.workerCount = Math.max(Math.floor(window.navigator.hardwareConcurrency / 2), 1);
            }
            else {
                // passed by parm
                this.workerCount = workerCount;
            }
        }
        this.currentWorkerIndex = 0;
        this.workers = [];
        this.workerCallback = {};
    }
    WorkerManager.prototype.initWorkers = function () {
        try {
            var callbacks_1 = this.workerCallback;
            for (var i = 0; i < this.workerCount; i++) {
                var source = '(' + window["olInit"] + ')()';
                var blob = new Blob([source]);
                var worker = new Worker(window.URL.createObjectURL(blob));
                worker.onmessage = function (e) {
                    var methodInfo = e.data["methodInfo"];
                    var messageData = e.data["messageData"];
                    var uid = methodInfo.uid;
                    var callback = callbacks_1[uid];
                    if (callback) {
                        callback(messageData, methodInfo);
                    }
                    delete callbacks_1[uid];
                };
                this.workers.push(worker);
            }
            this.inited = true;
            return true;
        }
        catch (e) {
            this.inited = false;
            return false;
        }
    };
    WorkerManager.prototype.postMessage = function (uid, methodName, messageData, callbackInfo, workerIndex) {
        if (typeof workerIndex !== "number" || isNaN(workerIndex) || workerIndex >= this.workers.length) {
            workerIndex = this.currentWorkerIndex = (this.currentWorkerIndex + 1) % this.workers.length;
        }
        var methodInfo = {
            uid: uid,
            methodName: methodName,
            workerId: workerIndex
        };
        if (callbackInfo) {
            this.workerCallback[uid] = callbackInfo;
        }
        var postMessage = {
            methodInfo: methodInfo,
            messageData: messageData
        };
        this.workers[workerIndex].postMessage(postMessage);
        return workerIndex;
    };
    WorkerManager.prototype.close = function () {
        this.workerCallback = {};
        for (var index = 0; index < this.workers.length; index++) {
            this.workers[index].terminate();
        }
    };
    return WorkerManager;
}());



/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbHRlci9nZW9GaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbHRlci9nZW9GaWx0ZXJJdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy9maWx0ZXIvZ2VvTnVtYmVyQXR0cmlidXRlRmlsdGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9maWx0ZXIvZ2VvUmFuZ2VGaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2ZpbHRlci9nZW9SZWdleEZpbHRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL2dlb1N0cmluZ0F0dHJpYnV0ZUZpbHRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvZmlsdGVyL2dlb1pvb21GaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Zvcm1hdC9nZW9NdnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2dlb1ZlY3RvclRpbGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xheWVyL3ZlY3RvclRpbGVMYXllci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyL2dlb1ZlY3RvclRpbGVsYXllclJlbmRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyL3JlcGxheUdyb3VwQ3VzdG9tLnRzIiwid2VicGFjazovLy8uL3NyYy9zb3VyY2UvZ2VvVmVjdG9yVGlsZVNvdXJjZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvZGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3kudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL2dlb0FyZWFTdHlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvZ2VvQnJ1c2gudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL2dlb0xpbmVTdHlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvZ2VvUG9pbnRTdHlsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc3R5bGUvZ2VvU2hpZWxkU3R5bGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL2dlb1N0eWxlLnRzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS9nZW9TdHlsZVByb3BlcnR5LnRzIiwid2VicGFjazovLy8uL3NyYy9zdHlsZS9nZW9UZXh0U3R5bGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0eWxlL3RleHRMYWJlbGluZ1N0cmF0ZWd5LnRzIiwid2VicGFjazovLy8uL3NyYy90cmVlL1RyZWVOb2RlLnRzIiwid2VicGFjazovLy8uL3NyYy90cmVlL3N0eWxlSnNvbkNhY2hlLnRzIiwid2VicGFjazovLy8uL3NyYy90cmVlL3N0eWxlSnNvbkNhY2hlSXRlbS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHJlZS90cmVlLnRzIiwid2VicGFjazovLy8uL3NyYy93b3JrZXIvdmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvd29ya2VyL3dvcmtlck1hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0RBQTBDLGdDQUFnQztBQUMxRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdFQUF3RCxrQkFBa0I7QUFDMUU7QUFDQSx5REFBaUQsY0FBYztBQUMvRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaURBQXlDLGlDQUFpQztBQUMxRSx3SEFBZ0gsbUJBQW1CLEVBQUU7QUFDckk7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBMkIsMEJBQTBCLEVBQUU7QUFDdkQseUNBQWlDLGVBQWU7QUFDaEQ7QUFD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TUFBTSxDQUFDO1NBQy9GO1FBRUQsSUFBSSxVQUFVLEdBQUc7WUFDYixHQUFHLEVBQUUsR0FBRztZQUNSLFVBQVUsRUFBRSxVQUFVO1lBQ3RCLFFBQVEsRUFBRSxXQUFXO1NBQ3hCLENBQUM7UUFFRixJQUFJLFlBQVksRUFBRTtZQUNkLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLEdBQUcsWUFBWSxDQUFDO1NBQzNDO1FBRUQsSUFBSSxXQUFXLEdBQUc7WUFDZCxVQUFVLEVBQUUsVUFBVTtZQUN0QixXQUFXLEVBQUUsV0FBVztTQUMzQjtRQUVELElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ25ELE9BQU8sV0FBVyxDQUFDO0lBQ3ZCLENBQUM7SUFFRCw2QkFBSyxHQUFMO1FBQ0ksSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFFLENBQUM7UUFDekIsS0FBSyxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFO1lBQ3RELElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7U0FDbkM7SUFDTCxDQUFDO0lBQ0wsb0JBQUM7QUFBRCxDQUFDIiwiZmlsZSI6Im9sLm1hcHN1aXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IFwiLi9zcmMvbWFpbi50c1wiKTtcbiIsImltcG9ydCB7IEdlb0ZpbHRlckl0ZW0gfSBmcm9tIFwiLi9nZW9GaWx0ZXJJdGVtXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgR2VvRmlsdGVyIHtcclxuICAgIHB1YmxpYyBpbml0aWFsaXplZDogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBmaWx0ZXJJdGVtczogR2VvRmlsdGVySXRlbVtdO1xyXG4gICAgcHVibGljIHJlcGxhY2VkVmFsdWVUb0luZGV4OiBib29sZWFuO1xyXG5cclxuICAgIHB1YmxpYyBrZXk6IGFueTtcclxuICAgIHB1YmxpYyBrZXlJbmRleDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGZpbHRlckl0ZW1zOiBHZW9GaWx0ZXJJdGVtW10pIHtcclxuICAgICAgICB0aGlzLmZpbHRlckl0ZW1zID0gZmlsdGVySXRlbXMgfHwgW107XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlZFZhbHVlVG9JbmRleCA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEZpbHRlckl0ZW0oZmlsdGVySXRlbTogR2VvRmlsdGVySXRlbSkge1xyXG4gICAgICAgIHRoaXMuZmlsdGVySXRlbXMucHVzaChmaWx0ZXJJdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvcmUoKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ29yZSgpIHsgfVxyXG5cclxuICAgIG1hdGNoT0xGZWF0dXJlKGZlYXR1cmU6IG9sLkZlYXR1cmUsIHpvb206IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmICghdGhpcy5pbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2hGZWF0dXJlQ29yZShmZWF0dXJlLCB6b29tKTtcclxuICAgIH1cclxuXHJcbiAgICByZXBsYWNlVmF1bGVzVG9QYmZJbmRleChwYmZMYXllcjogYW55KSB7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlVmF1bGVzVG9QYmZJbmRleENvcmUocGJmTGF5ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IG1hdGNoRmVhdHVyZUNvcmUoZmVhdHVyZTogb2wuRmVhdHVyZSwgem9vbTogbnVtYmVyKTogYm9vbGVhbjtcclxuICAgIGFic3RyYWN0IHJlcGxhY2VWYXVsZXNUb1BiZkluZGV4Q29yZShwYmZMYXllcjogYW55KTtcclxufSIsImV4cG9ydCBjbGFzcyBHZW9GaWx0ZXJJdGVtIHtcclxuICAgIGtleTogc3RyaW5nO1xyXG4gICAgb3BlcmF0b3I6IHN0cmluZztcclxuICAgIHZhbHVlOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioa2V5OiBzdHJpbmcsIG9wZXJhdG9yOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLmtleSA9IGtleTtcclxuICAgICAgICB0aGlzLm9wZXJhdG9yID0gb3BlcmF0b3I7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBvcGVyYXRvclJlZ2V4ID0gbmV3IFJlZ0V4cChcIls8PiE9XStcIiwgXCJnXCIpO1xyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVGaWx0ZXJJdGVtKGZpbHRlckl0ZW1TdHJpbmc6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBvcGVyYXRvciA9IGZpbHRlckl0ZW1TdHJpbmcubWF0Y2godGhpcy5vcGVyYXRvclJlZ2V4KVswXTtcclxuICAgICAgICBsZXQgcGFydHMgPSBmaWx0ZXJJdGVtU3RyaW5nLnNwbGl0KG9wZXJhdG9yKTtcclxuICAgICAgICBsZXQgaXRlbSA9IG5ldyBHZW9GaWx0ZXJJdGVtKHBhcnRzWzBdLCBvcGVyYXRvciwgcGFydHNbMV0pO1xyXG4gICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgR2VvRmlsdGVySXRlbSB9IGZyb20gXCIuL2dlb0ZpbHRlckl0ZW1cIjtcclxuaW1wb3J0IHsgR2VvUmFuZ2VGaWx0ZXIgfSBmcm9tIFwiLi9nZW9SYW5nZUZpbHRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb051bWJlckF0dHJpYnV0ZUZpbHRlciBleHRlbmRzIEdlb1JhbmdlRmlsdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGZpbHRlckl0ZW1zOiBHZW9GaWx0ZXJJdGVtW10pIHtcclxuICAgICAgICBzdXBlcihmaWx0ZXJJdGVtcyk7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgR2VvRmlsdGVyIH0gZnJvbSBcIi4vZ2VvRmlsdGVyXCI7XHJcbmltcG9ydCB7IEdlb0ZpbHRlckl0ZW0gfSBmcm9tIFwiLi9nZW9GaWx0ZXJJdGVtXCI7XHJcblxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgR2VvUmFuZ2VGaWx0ZXIgZXh0ZW5kcyBHZW9GaWx0ZXIge1xyXG4gICAgcHVibGljIHJhbmdlczogTnVtYmVyW11bXSA9IFtdO1xyXG4gICAgcHVibGljIGFsbG93ZWRWYWx1ZXM6IE51bWJlcltdID0gW107XHJcbiAgICBwdWJsaWMgZGlzYWxsb3dlZFZhbHVlczogTnVtYmVyW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJJdGVtczogR2VvRmlsdGVySXRlbVtdKSB7XHJcbiAgICAgICAgc3VwZXIoZmlsdGVySXRlbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDb3JlKCkge1xyXG4gICAgICAgIHRoaXMuZmlsdGVySXRlbXMuc29ydCgoYSwgYikgPT4gK2EudmFsdWUgLSArYi52YWx1ZSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZpbHRlckl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBmaWx0ZXJJdGVtID0gdGhpcy5maWx0ZXJJdGVtc1tpXTtcclxuICAgICAgICAgICAgdGhpcy5rZXkgPSBmaWx0ZXJJdGVtLmtleTtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gK2ZpbHRlckl0ZW0udmFsdWU7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZmlsdGVySXRlbS5vcGVyYXRvcikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIj5cIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlcy5wdXNoKFt2YWx1ZSArIDAuMDAwMDEsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIj49XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5nZXMucHVzaChbdmFsdWUsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIiE9XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhbGxvd2VkVmFsdWVzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIj1cIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG93ZWRWYWx1ZXMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5maWx0ZXJJdGVtcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZmlsdGVySXRlbSA9IHRoaXMuZmlsdGVySXRlbXNbaV07XHJcbiAgICAgICAgICAgIGxldCB2YWx1ZSA9ICtmaWx0ZXJJdGVtLnZhbHVlO1xyXG4gICAgICAgICAgICBsZXQgcmFuZ2UgPSBHZW9SYW5nZUZpbHRlci5nZXRSYW5nZSh0aGlzLnJhbmdlcywgdmFsdWUpO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGZpbHRlckl0ZW0ub3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCI8XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlWzFdID0gdmFsdWUgKyAwLjAwMDAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSBbTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCB2YWx1ZSArIDAuMDAwMDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlcy5wdXNoKHJhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiPD1cIjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VbMV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlID0gW051bWJlci5ORUdBVElWRV9JTkZJTklUWSwgdmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlcy5wdXNoKHJhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWF0Y2hGZWF0dXJlQ29yZShmZWF0dXJlOiBhbnksIHpvb206IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGxldCBjdXJyZW50VmFsdWU7XHJcbiAgICAgICAgaWYgKHRoaXMucmVwbGFjZWRWYWx1ZVRvSW5kZXgpIHtcclxuICAgICAgICAgICAgY3VycmVudFZhbHVlID0gZmVhdHVyZS5wcm9wZXJ0aWVzW3RoaXMua2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IGZlYXR1cmUucHJvcGVydGllc1t0aGlzLmtleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5pc0luUmFuZ2UoK2N1cnJlbnRWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVwbGFjZVZhdWxlc1RvUGJmSW5kZXhDb3JlKHBiZkxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlZFZhbHVlVG9JbmRleCA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgaXNJblJhbmdlKGN1cnJlbnRWYWx1ZTogYW55KTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWxsb3dlZFZhbHVlcy5pbmNsdWRlcyhjdXJyZW50VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dlZFZhbHVlcy5pbmNsdWRlcyhjdXJyZW50VmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcmFuZ2UgPSB0aGlzLnJhbmdlc1tpXTtcclxuICAgICAgICAgICAgaWYgKHJhbmdlLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA+PSByYW5nZVswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRWYWx1ZSA+PSByYW5nZVswXSAmJiBjdXJyZW50VmFsdWUgPD0gcmFuZ2VbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyBnZXRSYW5nZShyYW5nZXM6IE51bWJlcltdW10sIHZhbHVlOiBudW1iZXIpOiBOdW1iZXJbXSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IHJhbmdlID0gcmFuZ2VzW2ldO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPj0gcmFuZ2VbMF0gJiYgdmFsdWUgPD0gcmFuZ2VbMV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByYW5nZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgR2VvRmlsdGVyIH0gZnJvbSBcIi4vZ2VvRmlsdGVyXCI7XHJcbmltcG9ydCB7IEdlb0ZpbHRlckl0ZW0gfSBmcm9tIFwiLi9nZW9GaWx0ZXJJdGVtXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2VvUmVnZXhGaWx0ZXIgZXh0ZW5kcyBHZW9GaWx0ZXIge1xyXG4gICAgcmVnZXg6IFJlZ0V4cDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJJdGVtczogR2VvRmlsdGVySXRlbVtdKSB7XHJcbiAgICAgICAgc3VwZXIoZmlsdGVySXRlbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDb3JlKCkge1xyXG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuZmlsdGVySXRlbXNbMF0udmFsdWU7XHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgyLCB2YWx1ZS5sZW5ndGggLSAxKTtcclxuICAgICAgICB0aGlzLnJlZ2V4ID0gbmV3IFJlZ0V4cCh2YWx1ZSwgXCJnXCIpO1xyXG5cclxuICAgICAgICB0aGlzLmtleSA9IHRoaXMuZmlsdGVySXRlbXNbMF0ua2V5O1xyXG4gICAgfVxyXG5cclxuICAgIG1hdGNoRmVhdHVyZUNvcmUoZmVhdHVyZTogYW55LCB6b29tOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgY3VycmVudFZhbHVlO1xyXG4gICAgICAgIGlmICh0aGlzLnJlcGxhY2VkVmFsdWVUb0luZGV4KSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IGZlYXR1cmUucHJvcGVydGllc1t0aGlzLmtleV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50VmFsdWUgPSBmZWF0dXJlLnByb3BlcnRpZXNbdGhpcy5rZXldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFjdXJyZW50VmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRWYWx1ZS50b1N0cmluZygpLm1hdGNoKHRoaXMucmVnZXgpICE9PSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcGxhY2VWYXVsZXNUb1BiZkluZGV4Q29yZShwYmZMYXllcikge1xyXG4gICAgICAgIHRoaXMucmVwbGFjZWRWYWx1ZVRvSW5kZXggPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7IEdlb0ZpbHRlciB9IGZyb20gXCIuL2dlb0ZpbHRlclwiO1xyXG5pbXBvcnQgeyBHZW9GaWx0ZXJJdGVtIH0gZnJvbSBcIi4vZ2VvRmlsdGVySXRlbVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb1N0cmluZ0F0dHJpYnV0ZUZpbHRlciBleHRlbmRzIEdlb0ZpbHRlciB7XHJcbiAgICBleHBlY3RlZFZhbHVlczogc3RyaW5nW107XHJcbiAgICBleHBlY3RlZFZhbHVlSW5kZXhzOiBudW1iZXJbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJJdGVtczogR2VvRmlsdGVySXRlbVtdKSB7XHJcbiAgICAgICAgc3VwZXIoZmlsdGVySXRlbXMpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDb3JlKCkge1xyXG4gICAgICAgIGxldCBleHBlY3RlZFZhbHVlID0gdGhpcy5maWx0ZXJJdGVtc1swXS52YWx1ZTtcclxuICAgICAgICBleHBlY3RlZFZhbHVlID0gZXhwZWN0ZWRWYWx1ZS5zbGljZSgxLCBleHBlY3RlZFZhbHVlLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgIHRoaXMuZXhwZWN0ZWRWYWx1ZXMgPSBleHBlY3RlZFZhbHVlLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICB0aGlzLmtleSA9IHRoaXMuZmlsdGVySXRlbXNbMF0ua2V5O1xyXG4gICAgfVxyXG5cclxuICAgIG1hdGNoRmVhdHVyZUNvcmUoZmVhdHVyZTogYW55LCB6b29tOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICBsZXQgY3VycmVudFZhbHVlO1xyXG4gICAgICAgIGxldCBjdXJyZW50RXhwZWN0ZWRWYWx1ZXM7XHJcbiAgICAgICAgaWYgKHRoaXMucmVwbGFjZWRWYWx1ZVRvSW5kZXgpIHtcclxuICAgICAgICAgICAgY3VycmVudFZhbHVlID0gZmVhdHVyZS5wcm9wZXJ0aWVzSW5kZXhbdGhpcy5rZXlJbmRleF07XHJcbiAgICAgICAgICAgIGN1cnJlbnRFeHBlY3RlZFZhbHVlcyA9IHRoaXMuZXhwZWN0ZWRWYWx1ZUluZGV4cztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRWYWx1ZSA9IGZlYXR1cmUucHJvcGVydGllc1t0aGlzLmtleV07XHJcbiAgICAgICAgICAgIGN1cnJlbnRFeHBlY3RlZFZhbHVlcyA9IHRoaXMuZXhwZWN0ZWRWYWx1ZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuZmlsdGVySXRlbXNbMF0ub3BlcmF0b3IpIHtcclxuICAgICAgICAgICAgY2FzZSBcIj1cIjpcclxuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RXhwZWN0ZWRWYWx1ZXMuaW5jbHVkZXMoY3VycmVudFZhbHVlKTtcclxuICAgICAgICAgICAgY2FzZSBcIiE9XCI6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIWN1cnJlbnRFeHBlY3RlZFZhbHVlcy5pbmNsdWRlcyhjdXJyZW50VmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXBsYWNlVmF1bGVzVG9QYmZJbmRleENvcmUocGJmTGF5ZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmtleUluZGV4ID0gcGJmTGF5ZXIua2V5cy5pbmRleE9mKHRoaXMua2V5KTtcclxuXHJcbiAgICAgICAgbGV0IHJlcGxhY2VkRXhwZWN0ZWRWYXVsZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBqID0gMCwgamogPSB0aGlzLmV4cGVjdGVkVmFsdWVzLmxlbmd0aDsgaiA8IGpqOyBqKyspIHtcclxuICAgICAgICAgICAgbGV0IG51bWJlclZhbHVlID0gK3RoaXMuZXhwZWN0ZWRWYWx1ZXNbal07XHJcbiAgICAgICAgICAgIGlmIChpc05hTihudW1iZXJWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJlcGxhY2VkRXhwZWN0ZWRWYXVsZXMucHVzaChwYmZMYXllci52YWx1ZXMuaW5kZXhPZih0aGlzLmV4cGVjdGVkVmFsdWVzW2pdKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXBsYWNlZEV4cGVjdGVkVmF1bGVzLnB1c2gocGJmTGF5ZXIudmFsdWVzLmluZGV4T2YobnVtYmVyVmFsdWUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5leHBlY3RlZFZhbHVlSW5kZXhzID0gcmVwbGFjZWRFeHBlY3RlZFZhdWxlcztcclxuICAgICAgICB0aGlzLnJlcGxhY2VkVmFsdWVUb0luZGV4ID0gdHJ1ZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdlb0ZpbHRlciB9IGZyb20gXCIuL2dlb0ZpbHRlclwiO1xyXG5pbXBvcnQgeyBHZW9GaWx0ZXJJdGVtIH0gZnJvbSBcIi4vZ2VvRmlsdGVySXRlbVwiO1xyXG5pbXBvcnQgeyBHZW9SYW5nZUZpbHRlciB9IGZyb20gXCIuL2dlb1JhbmdlRmlsdGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2VvWm9vbUZpbHRlciBleHRlbmRzIEdlb1JhbmdlRmlsdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGZpbHRlckl0ZW1zOiBHZW9GaWx0ZXJJdGVtW10pIHtcclxuICAgICAgICBzdXBlcihmaWx0ZXJJdGVtcyk7XHJcbiAgICB9XHJcblxyXG4gICAgbWF0Y2hGZWF0dXJlQ29yZShmZWF0dXJlOiBvbC5GZWF0dXJlLCB6b29tOiBudW1iZXIpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pc0luUmFuZ2Uoem9vbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVwbGFjZVZhdWxlc1RvUGJmSW5kZXhDb3JlKHBiZkxheWVyKSB7XHJcbiAgICAgICAgdGhpcy5yZXBsYWNlZFZhbHVlVG9JbmRleCA9IHRydWU7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEdlb01WVEZvcm1hdCBleHRlbmRzIChvbC5mb3JtYXQuTVZUIGFzIHsgbmV3KHA6IG9seC5mb3JtYXQuTVZUT3B0aW9ucyk6IGFueTsgfSkge1xyXG4gICAgc3R5bGVKc29uQ2FjaGU6IGFueTtcclxuICAgIGxheWVyTmFtZTogc3RyaW5nO1xyXG4gICAgbWF4RGF0YVpvb206IG51bWJlcjtcclxuICAgIG1heERhdGFab29tQ2FjaGU6IGFueTtcclxuICAgIHJlZ2lzdGVyZWRMb2FkRXZlbnRzOiBhbnk7XHJcblxyXG4gICAgbHJ1Q2FjaGU6IGFueTtcclxuICAgIHNvdXJjZUNhY2hlOiBhbnk7XHJcblxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0eWxlSlNvbkNhY2hlOiBhbnksIG9wdGlvbnM6IGFueSkge1xyXG4gICAgICAgIG9wdGlvbnMubGF5ZXJOYW1lID0gb3B0aW9ucy5sYXllck5hbWUgPyBvcHRpb25zLmxheWVyTmFtZSA6IFwibGF5ZXJOYW1lXCI7XHJcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5pc011bHRpdGhyZWFkID0gb3B0aW9ucy5tdWx0aXRocmVhZDtcclxuICAgICAgICB0aGlzLm1pbmltYWxpc3QgPSBvcHRpb25zLm1pbmltYWxpc3Q7XHJcbiAgICAgICAgdGhpcy5tYXhEYXRhWm9vbSA9IG9wdGlvbnMubWF4RGF0YVpvb20gPyBvcHRpb25zLm1heERhdGFab29tIDogMTQ7XHJcbiAgICAgICAgdGhpcy5sYXllck5hbWUgPSBvcHRpb25zLmxheWVyTmFtZTtcclxuICAgICAgICB0aGlzLnN0eWxlSnNvbkNhY2hlID0gc3R5bGVKU29uQ2FjaGU7XHJcbiAgICAgICAgdGhpcy5tYXhEYXRhWm9vbUNhY2hlID0ge307XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcmVkTG9hZEV2ZW50cyA9IHt9O1xyXG4gICAgICAgIHRoaXMubHJ1Q2FjaGUgPSBuZXcgKDxhbnk+b2wpLnN0cnVjdHMuTFJVQ2FjaGUoMTUpO1xyXG4gICAgICAgIHRoaXMuc291cmNlQ2FjaGUgPSB7fTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMYXllck5hbWUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5sYXllck5hbWU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHJlZ2lzdGVyVGlsZUxvYWRFdmVudCh0aWxlLCBzdWNjZXNzLCBmYWlsdXJlLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGxldCBoYXNSZXF1ZXN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGxldCByZXF1ZXN0S2V5ID0gdGlsZS5yZXF1ZXN0VGlsZUNvb3JkLmpvaW4oXCIsXCIpICsgXCIsXCIgKyB0aWxlLnRpbGVDb29yZFswXTtcclxuICAgICAgICBsZXQgbG9hZEV2ZW50SW5mbyA9IHtcclxuICAgICAgICAgICAgdGlsZTogdGlsZSxcclxuICAgICAgICAgICAgc3VjY2Vzc0Z1bmN0aW9uOiBzdWNjZXNzLFxyXG4gICAgICAgICAgICBmYWlsdXJlRnVuY3Rpb246IGZhaWx1cmUsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZWdpc3RlcmVkTG9hZEV2ZW50c1tyZXF1ZXN0S2V5XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJlZExvYWRFdmVudHNbcmVxdWVzdEtleV0gPSBbXTtcclxuICAgICAgICAgICAgaGFzUmVxdWVzdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyZWRMb2FkRXZlbnRzW3JlcXVlc3RLZXldLnB1c2gobG9hZEV2ZW50SW5mbyk7XHJcbiAgICAgICAgcmV0dXJuIGhhc1JlcXVlc3RlZDtcclxuICAgIH1cclxuXHJcbiAgICByZWFkRmVhdHVyZXNBbmRDcmVhdGVJbnN0cnVjdHNOZXcoc291cmNlOiBBcnJheUJ1ZmZlciwgcmVxdWVzdFRpbGVDb29yZCwgdGlsZUNvb3JkKSB7XHJcbiAgICAgICAgbGV0IHBiZiA9IG5ldyAoPGFueT5vbCkuZXh0LlBCRigoc291cmNlKSk7XHJcbiAgICAgICAgbGV0IHBiZkxheWVycyA9IHBiZi5yZWFkRmllbGRzKCg8YW55Pm9sKS5mb3JtYXQuTVZULnBiZlJlYWRlcnNfLmxheWVycywge30pO1xyXG4gICAgICAgIGxldCBwYmZMYXllcjtcclxuICAgICAgICBsZXQgZmVhdHVyZXMgPSBbXTtcclxuICAgICAgICBsZXQgZmVhdHVyZUluZGV4ID0gLTE7XHJcblxyXG4gICAgICAgIGxldCB6b29tTWF0Y2hlZEdlb1N0eWxlc0dyb3VwQnlMYXllcklkID0gdGhpcy5zdHlsZUpzb25DYWNoZS5nZW9TdHlsZUdyb3VwQnlab29tW3RpbGVDb29yZFswXV07XHJcbiAgICAgICAgaWYgKCF6b29tTWF0Y2hlZEdlb1N0eWxlc0dyb3VwQnlMYXllcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmZWF0dXJlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBwYmZMYXllck5hbWVzV2l0aEdlb1N0eWxlID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgcGJmTGF5ZXJOYW1lIGluIHpvb21NYXRjaGVkR2VvU3R5bGVzR3JvdXBCeUxheWVySWQpIHtcclxuICAgICAgICAgICAgcGJmTGF5ZXJOYW1lc1dpdGhHZW9TdHlsZS5wdXNoKHBiZkxheWVyTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaW5zdHJ1Y3RzQ2FjaGUgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHBiZkxheWVycykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sYXllcnNfICYmIHRoaXMubGF5ZXJzXy5pbmRleE9mKG5hbWUpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBiZkxheWVyTmFtZXNXaXRoR2VvU3R5bGUuaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwYmZMYXllciA9IHBiZkxheWVyc1tuYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjYWNoZVRyZWVzID0gem9vbU1hdGNoZWRHZW9TdHlsZXNHcm91cEJ5TGF5ZXJJZFtuYW1lXTtcclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoY2FjaGVUcmVlcyAmJiBjYWNoZVRyZWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZUZpbHRlcnNUb0luZGV4T2ZQYmZMYXllcihjYWNoZVRyZWVzLCBwYmZMYXllcik7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBiZkxheWVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhd0ZlYXR1cmUgPSAoPGFueT5vbC5mb3JtYXQuTVZUKS5yZWFkUmF3RmVhdHVyZV8ocGJmLCBwYmZMYXllciwgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZlYXR1cmU7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjYWNoZVRyZWVzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYWNoZVRyZWUgPSBjYWNoZVRyZWVzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHJlZUluZGV4ID0gY2FjaGVUcmVlLnRyZWVJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW46IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heDogLTEwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZE5vZGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tOb2RlTWF0Y2hlZCA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3R5bGVKc29uQ2FjaGVJdGVtID0gbm9kZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZUpzb25DYWNoZUl0ZW0uZmlsdGVyR3JvdXAubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVKc29uQ2FjaGVJdGVtLmZpbHRlckdyb3VwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJzID0gc3R5bGVKc29uQ2FjaGVJdGVtLmZpbHRlckdyb3VwW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ3JvdXBNYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmaWx0ZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVyID0gZmlsdGVyc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVyLm1hdGNoT0xGZWF0dXJlKHJhd0ZlYXR1cmUsIHRpbGVDb29yZFswXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cE1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXBNYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkTm9kZSA9IG5vZGUuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVUcmVlLnRyYXZlcnNlTm9kZShjaGVja05vZGVNYXRjaGVkLCBzZWxlY3ROb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZSA9IHRoaXMuY3JlYXRlRmVhdHVyZV8ocGJmLCByYXdGZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVJbmRleCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB6aW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FjaGVUcmVlLnJvb3QuZGF0YS56SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aW5kZXggPSByYXdGZWF0dXJlLnByb3BlcnRpZXNbY2FjaGVUcmVlLnJvb3QuZGF0YS56SW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllc19bY2FjaGVUcmVlLnJvb3QuZGF0YS56SW5kZXhdID0gemluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTih6aW5kZXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVt6aW5kZXhdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW3ppbmRleF0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoemluZGV4IDwgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1pblwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW1wibWluXCJdID0gemluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoemluZGV4ID4gaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1heFwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW1wibWF4XCJdID0gemluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW3ppbmRleF0ucHVzaChbZmVhdHVyZUluZGV4LCBtYXRjaGVkTm9kZV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZXh0ZW50XyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5leHRlbnRfID0gcGJmTGF5ZXIgPyBbMCwgMCwgcGJmTGF5ZXIuZXh0ZW50LCBwYmZMYXllci5leHRlbnRdIDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGluc3RydWN0cyA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluc3RydWN0c0NhY2hlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBpbnN0cnVjdHNJbk9uZVRyZWUgPSBpbnN0cnVjdHNDYWNoZVtpXTtcclxuICAgICAgICAgICAgaWYgKGluc3RydWN0c0luT25lVHJlZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGluc3RydWN0c0luT25lVHJlZS5taW4sIGpqID0gaW5zdHJ1Y3RzSW5PbmVUcmVlLm1heDsgaiA8PSBqajsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluc3RydWN0c0luT25lWkluZGV4ID0gaW5zdHJ1Y3RzSW5PbmVUcmVlW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdHNJbk9uZVpJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hpbGRyZW5JbnN0cnVjdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCBpbnN0cnVjdHNJbk9uZVpJbmRleC5sZW5ndGg7IGgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluc3RydWN0ID0gaW5zdHJ1Y3RzSW5PbmVaSW5kZXhbaF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVzW2luc3RydWN0WzBdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuc3R5bGVJZCA9IGZlYXR1cmUuc3R5bGVJZCA/IGZlYXR1cmUuc3R5bGVJZCA6IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RbMV0uZ2VvU3R5bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnN0eWxlSWRbaW5zdHJ1Y3RbMV0uZ2VvU3R5bGUuaWRdID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHMucHVzaChbaW5zdHJ1Y3RbMF0sIGluc3RydWN0WzFdLmdlb1N0eWxlLCBpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0WzFdLmNoaWxkcmVuR2VvU3R5bGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBpbnN0cnVjdFsxXS5jaGlsZHJlbkdlb1N0eWxlcy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnN0eWxlSWRbaW5zdHJ1Y3RbMV0uY2hpbGRyZW5HZW9TdHlsZXNba10uaWRdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5JbnN0cnVjdHMucHVzaChbaW5zdHJ1Y3RbMF0sIGluc3RydWN0WzFdLmNoaWxkcmVuR2VvU3R5bGVzW2tdLCBpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGluc3RydWN0cywgY2hpbGRyZW5JbnN0cnVjdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3QgPSB7fTtcclxuICAgICAgICBsZXQgb2Zmc2V0WiA9IHRpbGVDb29yZFswXSAtIHJlcXVlc3RUaWxlQ29vcmRbMF07XHJcblxyXG4gICAgICAgIC8vIFRPRE8gR2V0IEV4dGVudCBcclxuICAgICAgICBsZXQgdGlsZVNpemUgPSA0MDk2IC8gTWF0aC5wb3coMiwgb2Zmc2V0Wik7XHJcblxyXG4gICAgICAgIGxldCB0aWxlUmFuZ2UgPSB0aGlzLmdldFRpbGVSYW5nZShyZXF1ZXN0VGlsZUNvb3JkLCB0aWxlQ29vcmRbMF0pO1xyXG4gICAgICAgIGxldCB0aWxlcyA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IHggPSB0aWxlUmFuZ2VbMF07IHggPD0gdGlsZVJhbmdlWzJdOyB4KyspIHtcclxuICAgICAgICAgICAgbGV0IG1pblggPSAoeCAtIHRpbGVSYW5nZVswXSkgKiB0aWxlU2l6ZTtcclxuICAgICAgICAgICAgbGV0IG1heFggPSAoeCAtIHRpbGVSYW5nZVswXSArIDEpICogdGlsZVNpemU7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHkgPSB0aWxlUmFuZ2VbM107IHkgPj0gdGlsZVJhbmdlWzFdOyB5LS0pIHtcclxuICAgICAgICAgICAgICAgIGxldCBtaW5ZID0gKHRpbGVSYW5nZVszXSAtIHkpICogdGlsZVNpemU7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4WSA9ICh0aWxlUmFuZ2VbM10gLSB5ICsgMSkgKiB0aWxlU2l6ZTtcclxuICAgICAgICAgICAgICAgIHRpbGVzW1wiXCIgKyBbeCwgeV1dID0gW21pblgsIG1pblksIG1heFgsIG1heFldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdHJ1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBpbnN0cnVjdCA9IGluc3RydWN0c1tpXTtcclxuICAgICAgICAgICAgbGV0IGZlYXR1cmUgPSBmZWF0dXJlc1tpbnN0cnVjdFswXV07XHJcbiAgICAgICAgICAgIGxldCBmZWF0dXJlRXh0ZW50ID0gZmVhdHVyZS5nZXRFeHRlbnQoKTtcclxuICAgICAgICAgICAgbGV0IGZlYXR1cmVUaWxlUmFuZ2UgPSB0aGlzLmdldEZlYXR1cmVUaWxlUmFuZ2UoZmVhdHVyZUV4dGVudCwgNDA5NiwgdGlsZVNpemUsIHJlcXVlc3RUaWxlQ29vcmQsIG9mZnNldFopO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IHRpbGVSYW5nZVswXSA+IGZlYXR1cmVUaWxlUmFuZ2VbMF0gPyB0aWxlUmFuZ2VbMF0gOiBmZWF0dXJlVGlsZVJhbmdlWzBdLCB4eCA9IGZlYXR1cmVUaWxlUmFuZ2VbMl0gPiB0aWxlUmFuZ2VbMl0gPyB0aWxlUmFuZ2VbMl0gOiBmZWF0dXJlVGlsZVJhbmdlWzJdOyB4IDw9IHh4OyB4KyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSB0aWxlUmFuZ2VbMV0gPiBmZWF0dXJlVGlsZVJhbmdlWzFdID8gdGlsZVJhbmdlWzFdIDogZmVhdHVyZVRpbGVSYW5nZVsxXSwgeXkgPSBmZWF0dXJlVGlsZVJhbmdlWzNdID4gdGlsZVJhbmdlWzNdID8gdGlsZVJhbmdlWzNdIDogZmVhdHVyZVRpbGVSYW5nZVszXTsgeSA8PSB5eTsgeSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVLZXkgPSBcIlwiICsgW3gsIHldO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlRXh0ZW50ID0gdGlsZXNbdGlsZUtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlRpbGVDYWNoZWRJbnN0cnVjdFt0aWxlS2V5XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRpbGVDYWNoZWRJbnN0cnVjdFt0aWxlS2V5XSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3RbdGlsZUtleV0ucHVzaChpbnN0cnVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW2ZlYXR1cmVzLCBzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3RdO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIGdldENhY2hlZFNvdXJjZSh0aWxlQ29vcmQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZUNhY2hlW3RpbGVDb29yZF07XHJcbiAgICB9XHJcblxyXG4gICAgdHJ5TG9hZFRpbGVGcm9tQ2FjaGVPclJlZ29zdGVyTG9hZEV2ZW50KHRpbGVDb29yZDogYW55LCBvcmlnaW5hbFpvb20sIGNhY2hlVGlsZUluZm86IGFueSkge1xyXG4gICAgICAgIGxldCBoYXNSZXF1ZXN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGxldCB0aWxlQ29vcmRLZXkgPSB0aWxlQ29vcmQuam9pbihcIixcIikgKyBcIixcIiArIG9yaWdpbmFsWm9vbTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMubHJ1Q2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xyXG4gICAgICAgICAgICBsZXQgb1RpbGUgPSB0aGlzLmxydUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlZFRpbGVDYWxsYmFjayhvVGlsZSwgW2NhY2hlVGlsZUluZm9dKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJlZ2lzdGVyZWRMb2FkRXZlbnRzW3RpbGVDb29yZEtleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkTG9hZEV2ZW50c1t0aWxlQ29vcmRLZXldID0gW107XHJcbiAgICAgICAgICAgICAgICBoYXNSZXF1ZXN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkTG9hZEV2ZW50c1t0aWxlQ29vcmRLZXldLnB1c2goY2FjaGVUaWxlSW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoYXNSZXF1ZXN0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkU291cmNlVG9DYWNoZShzb3VyY2U6IEFycmF5QnVmZmVyLCB6b29tOiBudW1iZXIsIG9wdGlvbnM6IGFueSkge1xyXG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUNhY2hlW29wdGlvbnMudGlsZUNvb3JkXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc291cmNlQ2FjaGVbb3B0aW9ucy50aWxlQ29vcmRdID0gc291cmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGluc3RydWN0c1RyZWUgPSB0aGlzLnJlYWRGZWF0dXJlc0FuZENyZWF0ZUluc3RydWN0VHJlZXMoc291cmNlLCB6b29tLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgbGV0IGluc3RydWN0cyA9IHRoaXMuZ2V0SW5zdHJ1Y3RzKGluc3RydWN0c1RyZWUpO1xyXG5cclxuICAgICAgICBsZXQgc3ViVGlsZUluc3RydWN0Q2FjaGVzID0gdGhpcy5jcmVhdGVTdWJUaWxlSW5zdHJ1Y3RDYWNoZXMoaW5zdHJ1Y3RzLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgbGV0IHNvdXJjZVByb2plY3QgPSB0aGlzLnJlYWRQcm9qZWN0aW9uKHNvdXJjZSk7XHJcbiAgICAgICAgbGV0IHRpbGVDb29yZEtleSA9IG9wdGlvbnMudGlsZUNvb3JkLmpvaW4oXCIsXCIpICsgXCIsXCIgKyB6b29tO1xyXG5cclxuICAgICAgICBsZXQgbGFzdEV4dGVudCA9IHRoaXMuZ2V0TGFzdEV4dGVudCgpO1xyXG5cclxuICAgICAgICBsZXQgb1RpbGUgPSB7IHN1YlRpbGVJbnN0cnVjdENhY2hlczogc3ViVGlsZUluc3RydWN0Q2FjaGVzLCBzb3VyY2VQcm9qZWN0OiBzb3VyY2VQcm9qZWN0LCBsYXN0RXh0ZW50OiBsYXN0RXh0ZW50IH07XHJcbiAgICAgICAgdGhpcy5scnVDYWNoZS5zZXQodGlsZUNvb3JkS2V5LCBvVGlsZSk7XHJcblxyXG4gICAgICAgIGxldCBjYWNoZWRUaWxlSW5mbyA9IHRoaXMucmVnaXN0ZXJlZExvYWRFdmVudHNbdGlsZUNvb3JkS2V5XTtcclxuICAgICAgICBkZWxldGUgdGhpcy5yZWdpc3RlcmVkTG9hZEV2ZW50c1t0aWxlQ29vcmRLZXldO1xyXG5cclxuICAgICAgICB0aGlzLmNhY2hlZFRpbGVDYWxsYmFjayhvVGlsZSwgY2FjaGVkVGlsZUluZm8pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRGZWF0dXJlc0FuZENyZWF0ZUluc3RydWN0VHJlZXMoc291cmNlOiBBcnJheUJ1ZmZlciwgem9vbTogbnVtYmVyLCBvcHRpb25zOiBhbnkpIHtcclxuICAgICAgICBsZXQgcGJmID0gbmV3ICg8YW55Pm9sKS5leHQuUEJGKChzb3VyY2UpKTtcclxuICAgICAgICBsZXQgcGJmTGF5ZXJzID0gcGJmLnJlYWRGaWVsZHMoKDxhbnk+b2wpLmZvcm1hdC5NVlQucGJmUmVhZGVyc18ubGF5ZXJzLCB7fSk7XHJcbiAgICAgICAgbGV0IGZlYXR1cmVzID0gW107XHJcbiAgICAgICAgbGV0IHBiZkxheWVyO1xyXG5cclxuICAgICAgICBsZXQgem9vbU1hdGNoZWRHZW9TdHlsZXNHcm91cEJ5TGF5ZXJJZCA9IHRoaXMuc3R5bGVKc29uQ2FjaGUuZ2VvU3R5bGVHcm91cEJ5Wm9vbVt6b29tXTtcclxuICAgICAgICBpZiAoIXpvb21NYXRjaGVkR2VvU3R5bGVzR3JvdXBCeUxheWVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBiZkxheWVyTmFtZXNXaXRoR2VvU3R5bGUgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBwYmZMYXllck5hbWUgaW4gem9vbU1hdGNoZWRHZW9TdHlsZXNHcm91cEJ5TGF5ZXJJZCkge1xyXG4gICAgICAgICAgICBwYmZMYXllck5hbWVzV2l0aEdlb1N0eWxlLnB1c2gocGJmTGF5ZXJOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBpbnN0cnVjdHNDYWNoZSA9IFtdO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHBiZkxheWVycykge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubGF5ZXJzXyAmJiB0aGlzLmxheWVyc18uaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYmZMYXllck5hbWVzV2l0aEdlb1N0eWxlLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGJmTGF5ZXIgPSBwYmZMYXllcnNbbmFtZV07XHJcbiAgICAgICAgICAgIG9wdGlvbnNbXCJleHRlbnRcIl0gPSBwYmZMYXllci5leHRlbnQ7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2FjaGVUcmVlcyA9IHpvb21NYXRjaGVkR2VvU3R5bGVzR3JvdXBCeUxheWVySWRbbmFtZV07XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FjaGVUcmVlcyAmJiBjYWNoZVRyZWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZUZpbHRlcnNUb0luZGV4T2ZQYmZMYXllcihjYWNoZVRyZWVzLCBwYmZMYXllcik7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYmZMYXllci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCByYXdGZWF0dXJlID0gKDxhbnk+b2wuZm9ybWF0Lk1WVCkucmVhZFJhd0ZlYXR1cmVfKHBiZiwgcGJmTGF5ZXIsIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNhY2hlVHJlZXMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNhY2hlVHJlZSA9IGNhY2hlVHJlZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0cmVlSW5kZXggPSBjYWNoZVRyZWUudHJlZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMTAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAtMTBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkTm9kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoZWNrTm9kZU1hdGNoZWQgPSBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlSnNvbkNhY2hlSXRlbSA9IG5vZGUuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVKc29uQ2FjaGVJdGVtLmZpbHRlckdyb3VwLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlSnNvbkNhY2hlSXRlbS5maWx0ZXJHcm91cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVycyA9IHN0eWxlSnNvbkNhY2hlSXRlbS5maWx0ZXJHcm91cFtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdyb3VwTWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZmlsdGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlciA9IGZpbHRlcnNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5tYXRjaE9MRmVhdHVyZShyYXdGZWF0dXJlLCB6b29tKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTWF0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncm91cE1hdGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3ROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWROb2RlID0gbm9kZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVRyZWUudHJhdmVyc2VOb2RlKGNoZWNrTm9kZU1hdGNoZWQsIHNlbGVjdE5vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZSA9IHRoaXMuY3JlYXRlRmVhdHVyZV8ocGJmLCByYXdGZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5taW5pbWFsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllc18gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRyZWUucm9vdC5kYXRhLnpJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppbmRleCA9IHJhd0ZlYXR1cmUucHJvcGVydGllc1tjYWNoZVRyZWUucm9vdC5kYXRhLnpJbmRleF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzX1tjYWNoZVRyZWUucm9vdC5kYXRhLnpJbmRleF0gPSB6aW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTmFOKHppbmRleCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bemluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVt6aW5kZXhdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHppbmRleCA8IGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bXCJtaW5cIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1pblwiXSA9IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHppbmRleCA+IGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bXCJtYXhcIl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1heFwiXSA9IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW3ppbmRleF0ucHVzaChbZmVhdHVyZSwgbWF0Y2hlZE5vZGVdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5taW5pbWFsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWROb2RlLmdlb1N0eWxlICYmIChtYXRjaGVkTm9kZS5nZW9TdHlsZS5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIkdlb1RleHRTdHlsZVwiIHx8IG1hdGNoZWROb2RlLmdlb1N0eWxlLmNvbnN0cnVjdG9yLm5hbWUgPT09IFwiR2VvU2hpZWxkU3R5bGVcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzX1ttYXRjaGVkTm9kZS5nZW9TdHlsZS5uYW1lXSA9IHJhd0ZlYXR1cmUucHJvcGVydGllc1ttYXRjaGVkTm9kZS5nZW9TdHlsZS5uYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWROb2RlLmNoaWxkcmVuR2VvU3R5bGVzICYmIG1hdGNoZWROb2RlLmNoaWxkcmVuR2VvU3R5bGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaGVkTm9kZS5jaGlsZHJlbkdlb1N0eWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzX1ttYXRjaGVkTm9kZS5jaGlsZHJlbkdlb1N0eWxlc1tpXS5uYW1lXSA9IHJhd0ZlYXR1cmUucHJvcGVydGllc1ttYXRjaGVkTm9kZS5jaGlsZHJlbkdlb1N0eWxlc1tpXS5uYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmV4dGVudF8gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5leHRlbnRfID0gcGJmTGF5ZXIgPyBbMCwgMCwgcGJmTGF5ZXIuZXh0ZW50LCBwYmZMYXllci5leHRlbnRdIDogbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RydWN0c0NhY2hlO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEluc3RydWN0cyhpbnN0cnVjdHNUcmVlKSB7XHJcbiAgICAgICAgbGV0IGluc3RydWN0cyA9IFtdO1xyXG4gICAgICAgIC8vIHRoZSB0cmVzcyBpbmRleCBtZWFucyB0aGUgaW5kZXggb2YgU3lsZUlkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdHJ1Y3RzVHJlZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgaW5zdHJ1Y3RzSW5PbmVUcmVlID0gaW5zdHJ1Y3RzVHJlZVtpXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnN0cnVjdHNJbk9uZVRyZWUpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpbnN0cnVjdHNJbk9uZVRyZWUubWluLCBqaiA9IGluc3RydWN0c0luT25lVHJlZS5tYXg7IGogPD0gamo7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnN0cnVjdHNJbk9uZVpJbmRleCA9IGluc3RydWN0c0luT25lVHJlZVtqXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RzSW5PbmVaSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoaWxkcmVuSW5zdHJ1Y3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGggPSAwOyBoIDwgaW5zdHJ1Y3RzSW5PbmVaSW5kZXgubGVuZ3RoOyBoKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbnN0cnVjdCA9IGluc3RydWN0c0luT25lWkluZGV4W2hdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RbMF0uc3R5bGVJZCA9IGluc3RydWN0WzBdLnN0eWxlSWQgPyBpbnN0cnVjdFswXS5zdHlsZUlkIDoge31cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RbMV0uZ2VvU3R5bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdFswXS5zdHlsZUlkW2luc3RydWN0WzFdLmdlb1N0eWxlLmlkXSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RzLnB1c2goW2luc3RydWN0WzBdLCBpbnN0cnVjdFsxXS5nZW9TdHlsZSwgaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdFsxXS5jaGlsZHJlbkdlb1N0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgaW5zdHJ1Y3RbMV0uY2hpbGRyZW5HZW9TdHlsZXMubGVuZ3RoOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RbMF0uc3R5bGVJZFtpbnN0cnVjdFsxXS5jaGlsZHJlbkdlb1N0eWxlc1trXS5pZF0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbkluc3RydWN0cy5wdXNoKFtpbnN0cnVjdFswXSwgaW5zdHJ1Y3RbMV0uY2hpbGRyZW5HZW9TdHlsZXNba10sIGldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoaW5zdHJ1Y3RzLCBjaGlsZHJlbkluc3RydWN0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0cnVjdHM7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlU3ViVGlsZUluc3RydWN0Q2FjaGVzKGluc3RydWN0cywgb3B0aW9ucykge1xyXG4gICAgICAgIGxldCBzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3QgPSB7fTtcclxuXHJcbiAgICAgICAgbGV0IG9mZnNldFogPSBvcHRpb25zLm9yaWdpbmFsQ29vcmRbMF0gLSBvcHRpb25zLnRpbGVDb29yZFswXTtcclxuICAgICAgICBsZXQgdGlsZVNpemUgPSBvcHRpb25zLmV4dGVudCAvIE1hdGgucG93KDIsIG9mZnNldFopO1xyXG5cclxuICAgICAgICBsZXQgdGlsZVJhbmdlID0gdGhpcy5nZXRUaWxlUmFuZ2Uob3B0aW9ucy50aWxlQ29vcmQsIG9wdGlvbnMub3JpZ2luYWxDb29yZFswXSk7XHJcbiAgICAgICAgbGV0IHRpbGVzID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgeCA9IHRpbGVSYW5nZVswXTsgeCA8PSB0aWxlUmFuZ2VbMl07IHgrKykge1xyXG4gICAgICAgICAgICBsZXQgbWluWCA9ICh4IC0gdGlsZVJhbmdlWzBdKSAqIHRpbGVTaXplO1xyXG4gICAgICAgICAgICBsZXQgbWF4WCA9ICh4IC0gdGlsZVJhbmdlWzBdICsgMSkgKiB0aWxlU2l6ZTtcclxuICAgICAgICAgICAgZm9yIChsZXQgeSA9IHRpbGVSYW5nZVszXTsgeSA+PSB0aWxlUmFuZ2VbMV07IHktLSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IG1pblkgPSAodGlsZVJhbmdlWzNdIC0geSkgKiB0aWxlU2l6ZTtcclxuICAgICAgICAgICAgICAgIGxldCBtYXhZID0gKHRpbGVSYW5nZVszXSAtIHkgKyAxKSAqIHRpbGVTaXplO1xyXG4gICAgICAgICAgICAgICAgdGlsZXNbXCJcIiArIFt4LCB5XV0gPSBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdHJ1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBpbnN0cnVjdCA9IGluc3RydWN0c1tpXTtcclxuICAgICAgICAgICAgbGV0IGZlYXR1cmVFeHRlbnQgPSBpbnN0cnVjdFswXS5nZXRHZW9tZXRyeSgpLmdldEV4dGVudCgpO1xyXG4gICAgICAgICAgICBsZXQgZmVhdHVyZVRpbGVSYW5nZSA9IHRoaXMuZ2V0RmVhdHVyZVRpbGVSYW5nZShmZWF0dXJlRXh0ZW50LCBvcHRpb25zLmV4dGVudCwgdGlsZVNpemUsIG9wdGlvbnMudGlsZUNvb3JkLCBvZmZzZXRaKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgeCA9IHRpbGVSYW5nZVswXSA+IGZlYXR1cmVUaWxlUmFuZ2VbMF0gPyB0aWxlUmFuZ2VbMF0gOiBmZWF0dXJlVGlsZVJhbmdlWzBdLCB4eCA9IGZlYXR1cmVUaWxlUmFuZ2VbMl0gPiB0aWxlUmFuZ2VbMl0gPyB0aWxlUmFuZ2VbMl0gOiBmZWF0dXJlVGlsZVJhbmdlWzJdOyB4IDw9IHh4OyB4KyspIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHkgPSB0aWxlUmFuZ2VbMV0gPiBmZWF0dXJlVGlsZVJhbmdlWzFdID8gdGlsZVJhbmdlWzFdIDogZmVhdHVyZVRpbGVSYW5nZVsxXSwgeXkgPSBmZWF0dXJlVGlsZVJhbmdlWzNdID4gdGlsZVJhbmdlWzNdID8gdGlsZVJhbmdlWzNdIDogZmVhdHVyZVRpbGVSYW5nZVszXTsgeSA8PSB5eTsgeSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVLZXkgPSBcIlwiICsgW3gsIHldO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlRXh0ZW50ID0gdGlsZXNbdGlsZUtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YlRpbGVDYWNoZWRJbnN0cnVjdFt0aWxlS2V5XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YlRpbGVDYWNoZWRJbnN0cnVjdFt0aWxlS2V5XSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdWJUaWxlQ2FjaGVkSW5zdHJ1Y3RbdGlsZUtleV0ucHVzaChpbnN0cnVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1YlRpbGVDYWNoZWRJbnN0cnVjdDtcclxuICAgIH1cclxuXHJcbiAgICBjYWNoZWRUaWxlQ2FsbGJhY2sob1RpbGUsIGNhY2hlVGlsZUluZm9zKSB7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FjaGVUaWxlSW5mb3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGNhY2hlVGlsZUluZm8gPSBjYWNoZVRpbGVJbmZvc1tpXTtcclxuICAgICAgICAgICAgbGV0IHRpbGVLZXkgPSBcIlwiICsgY2FjaGVUaWxlSW5mby50aWxlLnRpbGVDb29yZFsxXSArIFwiLFwiICsgY2FjaGVUaWxlSW5mby50aWxlLnRpbGVDb29yZFsyXTtcclxuXHJcbiAgICAgICAgICAgIGNhY2hlVGlsZUluZm8uY2FsbGJhY2soY2FjaGVUaWxlSW5mby50aWxlLCBjYWNoZVRpbGVJbmZvLnN1Y2Nlc3NGdW5jdGlvbiwgW10sIG9UaWxlLnN1YlRpbGVJbnN0cnVjdENhY2hlc1t0aWxlS2V5XSwgb1RpbGUuc291cmNlUHJvamVjdCwgb1RpbGUubGFzdEV4dGVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFRpbGVSYW5nZSh0aWxlQ29vcmQsIHpvb20pIHtcclxuICAgICAgICBsZXQgeCA9IHRpbGVDb29yZFsxXTtcclxuICAgICAgICBsZXQgeSA9IHRpbGVDb29yZFsyXTtcclxuICAgICAgICBsZXQgbWluWCA9IHg7XHJcbiAgICAgICAgbGV0IG1heFggPSB4O1xyXG4gICAgICAgIGxldCBtaW5ZID0geTtcclxuICAgICAgICBsZXQgbWF4WSA9IHk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aWxlQ29vcmRbMF07IGkgPCB6b29tOyBpKyspIHtcclxuICAgICAgICAgICAgbWluWCA9IG1pblggKiAyO1xyXG4gICAgICAgICAgICBtYXhYID0gbWF4WCAqIDIgKyAxO1xyXG4gICAgICAgICAgICBtaW5ZID0gbWluWSAqIDI7XHJcbiAgICAgICAgICAgIG1heFkgPSBtYXhZICogMiArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbbWluWCwgbWluWSwgbWF4WCwgbWF4WV07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RmVhdHVyZVRpbGVSYW5nZShmZWF0dXJlRXh0ZW50LCBleHRlbnQsIHRpbGVTaXplLCByZXF1ZXN0VGlsZUNvb3JkLCBvZmZzZXRaKSB7XHJcblxyXG4gICAgICAgIGxldCBtaW5YID0gcmVxdWVzdFRpbGVDb29yZFsxXSAqIE1hdGgucG93KDIsIG9mZnNldFopICsgTWF0aC5mbG9vcihmZWF0dXJlRXh0ZW50WzBdIC8gdGlsZVNpemUpO1xyXG4gICAgICAgIGxldCBtYXhYID0gcmVxdWVzdFRpbGVDb29yZFsxXSAqIE1hdGgucG93KDIsIG9mZnNldFopICsgTWF0aC5mbG9vcihmZWF0dXJlRXh0ZW50WzJdIC8gdGlsZVNpemUpO1xyXG4gICAgICAgIGxldCBtaW5ZID0gcmVxdWVzdFRpbGVDb29yZFsyXSAqIE1hdGgucG93KDIsIG9mZnNldFopICsgTWF0aC5mbG9vcigoZXh0ZW50IC0gZmVhdHVyZUV4dGVudFszXSkgLyB0aWxlU2l6ZSk7XHJcbiAgICAgICAgbGV0IG1heFkgPSByZXF1ZXN0VGlsZUNvb3JkWzJdICogTWF0aC5wb3coMiwgb2Zmc2V0WikgKyBNYXRoLmZsb29yKChleHRlbnQgLSBmZWF0dXJlRXh0ZW50WzFdKSAvIHRpbGVTaXplKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIFttaW5YLCBtaW5ZLCBtYXhYLCBtYXhZXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRFeHRlbnQob3JpZ2luYWxDb29yZCwgdGlsZWNvb3JkLCBleHRlbnQpIHtcclxuICAgICAgICBsZXQgb3ggPSBvcmlnaW5hbENvb3JkWzFdO1xyXG4gICAgICAgIGxldCB4ID0gdGlsZWNvb3JkWzFdO1xyXG4gICAgICAgIGxldCB4UGF0aCA9IFtdO1xyXG4gICAgICAgIHdoaWxlIChveCAhPT0geCkge1xyXG4gICAgICAgICAgICBsZXQgcmVtYWluZGVyID0gb3ggJSAyO1xyXG4gICAgICAgICAgICB4UGF0aC5wdXNoKHJlbWFpbmRlcik7XHJcbiAgICAgICAgICAgIG94ID0gTWF0aC5mbG9vcihveCAvIDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgbmV3RXh0ZW50ID0gZXh0ZW50O1xyXG4gICAgICAgIGxldCBvZmZzZXRYID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0geFBhdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgbmV3RXh0ZW50ID0gbmV3RXh0ZW50IC8gMjtcclxuICAgICAgICAgICAgaWYgKHhQYXRoW2ldID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRYICs9IG5ld0V4dGVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IG95ID0gb3JpZ2luYWxDb29yZFsyXTtcclxuICAgICAgICBsZXQgeSA9IHRpbGVjb29yZFsyXTtcclxuICAgICAgICBsZXQgeVBhdGggPSBbXTtcclxuICAgICAgICB3aGlsZSAob3kgIT09IHkpIHtcclxuICAgICAgICAgICAgbGV0IHJlbWFpbmRlciA9IG95ICUgMjtcclxuICAgICAgICAgICAgeVBhdGgucHVzaChyZW1haW5kZXIpO1xyXG4gICAgICAgICAgICBveSA9IE1hdGguZmxvb3Iob3kgLyAyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmV3RXh0ZW50ID0gZXh0ZW50O1xyXG4gICAgICAgIGxldCBvZmZzZXRZID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0geVBhdGgubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgbmV3RXh0ZW50ID0gbmV3RXh0ZW50IC8gMjtcclxuICAgICAgICAgICAgaWYgKHlQYXRoW2ldID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXRZICs9IG5ld0V4dGVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPOiBhZGQgdGhlIGJ1ZmZlclxyXG4gICAgICAgIHJldHVybiBbb2Zmc2V0WCwgb2Zmc2V0WSwgb2Zmc2V0WCArIG5ld0V4dGVudCwgb2Zmc2V0WSArIG5ld0V4dGVudF07XHJcbiAgICB9XHJcblxyXG4gICAgcmVwbGFjZUZpbHRlcnNUb0luZGV4T2ZQYmZMYXllcihjYWNoZVRyZWVzLCBwYmZMYXllcikge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGNhY2hlVHJlZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgY2FjaGVUcmVlID0gY2FjaGVUcmVlc1tpXTtcclxuICAgICAgICAgICAgdGhpcy5yZXBsYWNlQ2FjaGVJdGVtRmlsdGVyc1RvSW5kZXhPZlBiZkxheWVyKGNhY2hlVHJlZS5yb290LCBwYmZMYXllcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJlcGxhY2VDYWNoZUl0ZW1GaWx0ZXJzVG9JbmRleE9mUGJmTGF5ZXIobm9kZSwgcGJmTGF5ZXIpIHtcclxuICAgICAgICBsZXQgZGF0YSA9IG5vZGUuZGF0YTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmZpbHRlckdyb3VwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBmaWx0ZXJzID0gZGF0YS5maWx0ZXJHcm91cFtpXTtcclxuICAgICAgICAgICAgbGV0IGdlb0ZpbHRlcjtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmaWx0ZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBnZW9GaWx0ZXIgPSBmaWx0ZXJzW2pdO1xyXG4gICAgICAgICAgICAgICAgZ2VvRmlsdGVyLnJlcGxhY2VWYXVsZXNUb1BiZkluZGV4KHBiZkxheWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXBsYWNlQ2FjaGVJdGVtRmlsdGVyc1RvSW5kZXhPZlBiZkxheWVyKG5vZGUuY2hpbGRyZW5baV0sIHBiZkxheWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIHJlYWRGZWF0dXJlc0FuZENyZWF0ZUluc3RydWN0cyhzb3VyY2U6IEFycmF5QnVmZmVyLCB6b29tOiBudW1iZXIsIG9wdGlvbnM6IGFueSkge1xyXG4gICAgICAgIGxldCBwYmYgPSBuZXcgKDxhbnk+b2wpLmV4dC5QQkYoKHNvdXJjZSkpO1xyXG4gICAgICAgIGxldCBwYmZMYXllcnMgPSBwYmYucmVhZEZpZWxkcygoPGFueT5vbCkuZm9ybWF0Lk1WVC5wYmZSZWFkZXJzXy5sYXllcnMsIHt9KTtcclxuICAgICAgICBsZXQgZmVhdHVyZXMgPSBbXTtcclxuICAgICAgICBsZXQgcGJmTGF5ZXI7XHJcblxyXG4gICAgICAgIGxldCB6b29tTWF0Y2hlZEdlb1N0eWxlc0dyb3VwQnlMYXllcklkID0gdGhpcy5zdHlsZUpzb25DYWNoZS5nZW9TdHlsZUdyb3VwQnlab29tW3pvb21dO1xyXG4gICAgICAgIGlmICghem9vbU1hdGNoZWRHZW9TdHlsZXNHcm91cEJ5TGF5ZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmVhdHVyZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcGJmTGF5ZXJOYW1lc1dpdGhHZW9TdHlsZSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHBiZkxheWVyTmFtZSBpbiB6b29tTWF0Y2hlZEdlb1N0eWxlc0dyb3VwQnlMYXllcklkKSB7XHJcbiAgICAgICAgICAgIHBiZkxheWVyTmFtZXNXaXRoR2VvU3R5bGUucHVzaChwYmZMYXllck5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGluc3RydWN0c0NhY2hlID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gcGJmTGF5ZXJzKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5sYXllcnNfICYmIHRoaXMubGF5ZXJzXy5pbmRleE9mKG5hbWUpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBiZkxheWVyTmFtZXNXaXRoR2VvU3R5bGUuaW5kZXhPZihuYW1lKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwYmZMYXllciA9IHBiZkxheWVyc1tuYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjYWNoZVRyZWVzID0gem9vbU1hdGNoZWRHZW9TdHlsZXNHcm91cEJ5TGF5ZXJJZFtuYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYWNoZVRyZWVzICYmIGNhY2hlVHJlZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXBsYWNlRmlsdGVyc1RvSW5kZXhPZlBiZkxheWVyKGNhY2hlVHJlZXMsIHBiZkxheWVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBiZkxheWVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhd0ZlYXR1cmUgPSAoPGFueT5vbC5mb3JtYXQuTVZUKS5yZWFkUmF3RmVhdHVyZV8ocGJmLCBwYmZMYXllciwgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZlYXR1cmU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2FjaGVUcmVlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2FjaGVUcmVlID0gY2FjaGVUcmVlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRyZWVJbmRleCA9IGNhY2hlVHJlZS50cmVlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAxMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXg6IC0xMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoZWROb2RlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoZWNrTm9kZU1hdGNoZWQgPSBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlSnNvbkNhY2hlSXRlbSA9IG5vZGUuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVKc29uQ2FjaGVJdGVtLmZpbHRlckdyb3VwLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlSnNvbkNhY2hlSXRlbS5maWx0ZXJHcm91cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVycyA9IHN0eWxlSnNvbkNhY2hlSXRlbS5maWx0ZXJHcm91cFtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdyb3VwTWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZmlsdGVycy5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlciA9IGZpbHRlcnNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlci5tYXRjaE9MRmVhdHVyZShyYXdGZWF0dXJlLCB6b29tKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTWF0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChncm91cE1hdGNoZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3ROb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWROb2RlID0gbm9kZS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZVRyZWUudHJhdmVyc2VOb2RlKGNoZWNrTm9kZU1hdGNoZWQsIHNlbGVjdE5vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZSA9IHRoaXMuY3JlYXRlRmVhdHVyZV8ocGJmLCByYXdGZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5taW5pbWFsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllc18gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgemluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVHJlZS5yb290LmRhdGEuekluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemluZGV4ID0gcmF3RmVhdHVyZS5wcm9wZXJ0aWVzW2NhY2hlVHJlZS5yb290LmRhdGEuekluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXNfW2NhY2hlVHJlZS5yb290LmRhdGEuekluZGV4XSA9IHppbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4oemluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVt6aW5kZXhdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW3ppbmRleF0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoemluZGV4IDwgaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1pblwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW1wibWluXCJdID0gemluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoemluZGV4ID4gaW5zdHJ1Y3RzQ2FjaGVbdHJlZUluZGV4XVtcIm1heFwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdHNDYWNoZVt0cmVlSW5kZXhdW1wibWF4XCJdID0gemluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0c0NhY2hlW3RyZWVJbmRleF1bemluZGV4XS5wdXNoKFtmZWF0dXJlLCBtYXRjaGVkTm9kZV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWluaW1hbGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkTm9kZS5nZW9TdHlsZSAmJiBtYXRjaGVkTm9kZS5nZW9TdHlsZS5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIkdlb1RleHRTdHlsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllc19bbWF0Y2hlZE5vZGUuZ2VvU3R5bGUubmFtZV0gPSByYXdGZWF0dXJlLnByb3BlcnRpZXNbbWF0Y2hlZE5vZGUuZ2VvU3R5bGUubmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkTm9kZS5jaGlsZHJlbkdlb1N0eWxlcyAmJiBtYXRjaGVkTm9kZS5jaGlsZHJlbkdlb1N0eWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0Y2hlZE5vZGUuY2hpbGRyZW5HZW9TdHlsZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllc19bbWF0Y2hlZE5vZGUuY2hpbGRyZW5HZW9TdHlsZXNbaV0ubmFtZV0gPSByYXdGZWF0dXJlLnByb3BlcnRpZXNbbWF0Y2hlZE5vZGUuY2hpbGRyZW5HZW9TdHlsZXNbaV0ubmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5leHRlbnRfID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZXh0ZW50XyA9IHBiZkxheWVyID8gWzAsIDAsIHBiZkxheWVyLmV4dGVudCwgcGJmTGF5ZXIuZXh0ZW50XSA6IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IGluc3RydWN0cyA9IFtdO1xyXG4gICAgICAgIC8vIHRoZSB0cmVzcyBpbmRleCBtZWFucyB0aGUgaW5kZXggb2YgU3lsZUlkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdHJ1Y3RzQ2FjaGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGluc3RydWN0c0luT25lVHJlZSA9IGluc3RydWN0c0NhY2hlW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKGluc3RydWN0c0luT25lVHJlZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IGluc3RydWN0c0luT25lVHJlZS5taW4sIGpqID0gaW5zdHJ1Y3RzSW5PbmVUcmVlLm1heDsgaiA8PSBqajsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGluc3RydWN0c0luT25lWkluZGV4ID0gaW5zdHJ1Y3RzSW5PbmVUcmVlW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnN0cnVjdHNJbk9uZVpJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hpbGRyZW5JbnN0cnVjdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCBpbnN0cnVjdHNJbk9uZVpJbmRleC5sZW5ndGg7IGgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluc3RydWN0ID0gaW5zdHJ1Y3RzSW5PbmVaSW5kZXhbaF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdFswXS5zdHlsZUlkID0gaW5zdHJ1Y3RbMF0uc3R5bGVJZCA/IGluc3RydWN0WzBdLnN0eWxlSWQgOiB7fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0WzFdLmdlb1N0eWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3RbMF0uc3R5bGVJZFtpbnN0cnVjdFsxXS5nZW9TdHlsZS5pZF0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0cy5wdXNoKFtpbnN0cnVjdFswXSwgaW5zdHJ1Y3RbMV0uZ2VvU3R5bGUsIGldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdHJ1Y3RbMV0uY2hpbGRyZW5HZW9TdHlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGluc3RydWN0WzFdLmNoaWxkcmVuR2VvU3R5bGVzLmxlbmd0aDsgaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0WzBdLnN0eWxlSWRbaW5zdHJ1Y3RbMV0uY2hpbGRyZW5HZW9TdHlsZXNba10uaWRdID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW5JbnN0cnVjdHMucHVzaChbaW5zdHJ1Y3RbMF0sIGluc3RydWN0WzFdLmNoaWxkcmVuR2VvU3R5bGVzW2tdLCBpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGluc3RydWN0cywgY2hpbGRyZW5JbnN0cnVjdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW2ZlYXR1cmVzLCBpbnN0cnVjdHNdO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZWFkUmF3RmVhdHVyZV8ocGJmLCBsYXllciwgaSkge1xyXG4gICAgICAgIHBiZi5wb3MgPSBsYXllci5mZWF0dXJlc1tpXTtcclxuICAgICAgICBsZXQgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XHJcblxyXG4gICAgICAgIGxldCBmZWF0dXJlID0ge1xyXG4gICAgICAgICAgICBsYXllcjogbGF5ZXIsXHJcbiAgICAgICAgICAgIHR5cGU6IDAsXHJcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzSW5kZXg6IHt9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwYmYucmVhZEZpZWxkcygoPGFueT5vbCkuZm9ybWF0Lk1WVC5wYmZSZWFkZXJzXy5mZWF0dXJlQ29sdW1uVmFsdWUsIGZlYXR1cmUsIGVuZCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmZWF0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBmZWF0dXJlQ29sdW1uVmFsdWUodGFnOiBhbnksIGZlYXR1cmU6IGFueSwgcGJmOiBhbnkpIHtcclxuICAgICAgICBpZiAodGFnID09PSAxKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmUuaWQgPSBwYmYucmVhZFZhcmludCgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGFnID09PSAyKSB7XHJcbiAgICAgICAgICAgIGxldCBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcztcclxuICAgICAgICAgICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIHtcclxuICAgICAgICAgICAgICAgIGxldCBrZXkgPSBwYmYucmVhZFZhcmludCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gcGJmLnJlYWRWYXJpbnQoKTtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllc0luZGV4W2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIGtleSA9IGZlYXR1cmUubGF5ZXIua2V5c1trZXldO1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBmZWF0dXJlLmxheWVyLnZhbHVlc1t2YWx1ZV07XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmICh0YWcgPT09IDMpIHtcclxuICAgICAgICAgICAgZmVhdHVyZS50eXBlID0gcGJmLnJlYWRWYXJpbnQoKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRhZyA9PT0gNCkge1xyXG4gICAgICAgICAgICBmZWF0dXJlLmdlb21ldHJ5ID0gcGJmLnBvcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuKDxhbnk+b2wpLmZvcm1hdC5NVlQucmVhZFJhd0ZlYXR1cmVfID0gR2VvTVZURm9ybWF0LnJlYWRSYXdGZWF0dXJlXztcclxuKDxhbnk+b2wpLmZvcm1hdC5NVlQucGJmUmVhZGVyc19bXCJmZWF0dXJlQ29sdW1uVmFsdWVcIl0gPSBHZW9NVlRGb3JtYXQuZmVhdHVyZUNvbHVtblZhbHVlO1xyXG4iLCJleHBvcnQgY2xhc3MgR2VvVmVjdG9yVGlsZSBleHRlbmRzIChvbC5WZWN0b3JUaWxlIGFzIHsgbmV3KHRpbGVDb29yZDogb2wuVGlsZUNvb3JkLCBzdGF0ZTogb2wuVGlsZS5TdGF0ZSwgc3JjOiBzdHJpbmcsIGZvcm1hdDogb2wuZm9ybWF0LkZlYXR1cmUsIHRpbGVMb2FkRnVuY3Rpb246IG9sLlRpbGVMb2FkRnVuY3Rpb25UeXBlKTogYW55OyB9KSB7XHJcblxyXG4gICAgaW5zdHJ1Y3RzOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IodGlsZUNvb3JkOiBvbC5UaWxlQ29vcmQsIHN0YXRlOiBvbC5UaWxlLlN0YXRlLCBzcmM6IHN0cmluZywgZm9ybWF0OiBvbC5mb3JtYXQuRmVhdHVyZSwgdGlsZUxvYWRGdW5jdGlvbjogb2wuVGlsZUxvYWRGdW5jdGlvblR5cGUpIHtcclxuICAgICAgICBzdXBlcih0aWxlQ29vcmQsIHN0YXRlLCBzcmMsIGZvcm1hdCwgdGlsZUxvYWRGdW5jdGlvbik7XHJcbiAgICAgICAgdGhpcy5kaXNwb3NlSW50ZXJuYWwgPSB0aGlzLmRpc3Bvc2VJbnRlcm5hbEN1c3RvbTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGlzcG9zZUludGVybmFsQ3VzdG9tKCkge1xyXG4gICAgICAgIHRoaXMuZmVhdHVyZXNfID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlcGxheUdyb3Vwc18gPSB7fTtcclxuICAgICAgICAvLyB0aGlzLnN0YXRlID0gb2wuVGlsZVN0YXRlLkFCT1JUO1xyXG4gICAgICAgIHRoaXMuc3RhdGUgPSAoPGFueT5vbCkuVGlsZVN0YXRlLklETEU7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VkKCk7XHJcbiAgICAgICAgaWYgKHRoaXNbXCJ4aHJcIl0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXNbXCJ4aHJcIl0uYWJvcnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLndvcmtlcklkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdmFyIGRpc3Bvc2VJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0SWQ6ICg8YW55Pm9sKS5nZXRVaWQodGhpcy5nZXRGb3JtYXQoKSksXHJcbiAgICAgICAgICAgICAgICBtYXhEYXRhWm9vbTogdGhpcy5nZXRGb3JtYXQoKS5tYXhEYXRhWm9vbSxcclxuICAgICAgICAgICAgICAgIHRpbGVDb29yZDogdGhpcy50aWxlQ29vcmQsXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0VGlsZUNvb3JkOiB0aGlzLnJlcXVlc3RUaWxlQ29vcmRcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5nZXRGb3JtYXQoKS53b3JrZXJNYW5hZ2VyLnBvc3RNZXNzYWdlKHRoaXMudGlsZUNvb3JkICsgKDxhbnk+b2wpLmdldFVpZChkaXNwb3NlSW5mbyksIFwidmVjdG9yVGlsZURpc3Bvc2VcIiwgZGlzcG9zZUluZm8sIG51bGwsIHRoaXMud29ya2VySWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgKDxhbnk+b2wuVGlsZS5wcm90b3R5cGUpLmRpc3Bvc2VJbnRlcm5hbC5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBvbkxvYWQoZGF0YVByb2plY3Rpb24sIGV4dGVudCkge1xyXG4gICAgICAgIHRoaXMuc2V0UHJvamVjdGlvbihkYXRhUHJvamVjdGlvbik7XHJcbiAgICAgICAgdGhpcy5zZXRGZWF0dXJlcygpO1xyXG4gICAgICAgIHRoaXMuc2V0RXh0ZW50KGV4dGVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0UmVuZGVyRmVhdHVyZUluc3RydWN0cyhpbnN0cnVjdHMpIHtcclxuICAgICAgICB0aGlzLmluc3RydWN0cyA9IGluc3RydWN0cztcclxuICAgIH1cclxuXHJcbiAgICBnZXRSZW5kZXJGZWF0dXJlSW5zdHJ1Y3RzKGluc3RydWN0cykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RydWN0cztcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdlb1ZlY3RvclRpbGVTb3VyY2UgfSBmcm9tIFwiLi4vc291cmNlL2dlb1ZlY3RvclRpbGVTb3VyY2VcIjtcclxuaW1wb3J0IHsgR2VvVmVjdG9yVGlsZSB9IGZyb20gXCIuLi9nZW9WZWN0b3JUaWxlXCI7XHJcbmltcG9ydCB7IEdlb1N0eWxlIH0gZnJvbSBcIi4uL3N0eWxlL2dlb1N0eWxlXCI7XHJcbmltcG9ydCB7IEdlb01WVEZvcm1hdCB9IGZyb20gXCIuLi9mb3JtYXQvZ2VvTXZ0XCI7XHJcbmltcG9ydCB7IFN0eWxlSnNvbkNhY2hlIH0gZnJvbSBcIi4uL3RyZWUvc3R5bGVKc29uQ2FjaGVcIjtcclxuaW1wb3J0IHsgU3R5bGVKc29uQ2FjaGVJdGVtIH0gZnJvbSBcIi4uL3RyZWUvc3R5bGVKc29uQ2FjaGVJdGVtXCI7XHJcbmltcG9ydCB7IEdlb1ZlY3RvclRpbGVMYXllclJlbmRlciB9IGZyb20gXCIuLi9yZW5kZXIvZ2VvVmVjdG9yVGlsZWxheWVyUmVuZGVyXCI7XHJcbmltcG9ydCB7IFRyZWVOb2RlIH0gZnJvbSBcIi4uL3RyZWUvVHJlZU5vZGVcIjtcclxuaW1wb3J0IHsgVHJlZSB9IGZyb20gXCIuLi90cmVlL3RyZWVcIjtcclxuaW1wb3J0IHsgV29ya2VyTWFuYWdlciB9IGZyb20gXCIuLi93b3JrZXIvd29ya2VyTWFuYWdlclwiO1xyXG5pbXBvcnQgeyBWZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlIH0gZnJvbSBcIi4uL3dvcmtlci92ZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVmVjdG9yVGlsZUxheWVyIGV4dGVuZHMgKG9sLmxheWVyLlZlY3RvclRpbGUgYXMgeyBuZXcocDogb2x4LmxheWVyLlZlY3RvclRpbGVPcHRpb25zKTogYW55OyB9KSB7XHJcbiAgICBtYXhEYXRhWm9vbTogbnVtYmVyO1xyXG4gICAgbWluaW1hbGlzdDogYm9vbGVhbjtcclxuICAgIHRocmVhZE1vZGU6IFZlY3RvclRpbGVMYXllclRocmVhZE1vZGU7XHJcbiAgICBpc011bHRpdGhyZWFkOiBib29sZWFuO1xyXG4gICAgd29ya2VyTWFuYWdlcjogV29ya2VyTWFuYWdlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzdHlsZUpzb246IGFueSwgb3B0X29wdGlvbnM/OiBvbHgubGF5ZXIuVmVjdG9yVGlsZU9wdGlvbnMpIHtcclxuICAgICAgICAvLyBkZWZhdWx0XHJcbiAgICAgICAgaWYgKG9wdF9vcHRpb25zICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb3B0X29wdGlvbnNbXCJkZWNsdXR0ZXJcIl0gPSBvcHRfb3B0aW9uc1tcImRlY2x1dHRlclwiXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdF9vcHRpb25zW1wiZGVjbHV0dGVyXCJdO1xyXG4gICAgICAgICAgICBvcHRfb3B0aW9uc1tcIm1pbmltYWxpc3RcIl0gPSBvcHRfb3B0aW9uc1tcIm1pbmltYWxpc3RcIl0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBvcHRfb3B0aW9uc1tcIm1pbmltYWxpc3RcIl07XHJcbiAgICAgICAgICAgIG9wdF9vcHRpb25zW1wicmVuZGVyTW9kZVwiXSA9ICd2ZWN0b3InO1xyXG4gICAgICAgICAgICBzdXBlcihvcHRfb3B0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7fVxyXG4gICAgICAgICAgICBvcHRpb25zW1wiZGVjbHV0dGVyXCJdID0gdHJ1ZTtcclxuICAgICAgICAgICAgb3B0aW9uc1tcIm1pbmltYWxpc3RcIl0gPSB0cnVlO1xyXG4gICAgICAgICAgICBvcHRfb3B0aW9uc1tcInJlbmRlck1vZGVcIl0gPSAndmVjdG9yJztcclxuICAgICAgICAgICAgc3VwZXIoPGFueT5vcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvcHRfb3B0aW9ucyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIC8vIHRlbXAgRW1pbFxyXG4gICAgICAgICAgICB2YXIgdGVtcElzTXVsdGl0aHJlYWQgPSBvcHRfb3B0aW9uc1tcIm11bHRpdGhyZWFkXCJdID09PSB1bmRlZmluZWQgPyB0cnVlIDogb3B0X29wdGlvbnNbXCJtdWx0aXRocmVhZFwiXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudGhyZWFkTW9kZSA9IG9wdF9vcHRpb25zW1widGhyZWFkTW9kZVwiXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdF9vcHRpb25zW1widGhyZWFkTW9kZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5pc011bHRpdGhyZWFkID0gdGhpcy50aHJlYWRNb2RlICE9PSBWZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlLlNpbmdsZVRocmVhZDtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kV29ya2VyQ291bnQgPSBvcHRfb3B0aW9uc1tcImJhY2tncm91bmRXb3JrZXJDb3VudFwiXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRlbXAgRW1pbFxyXG4gICAgICAgICAgICBpZiAodGVtcElzTXVsdGl0aHJlYWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGhyZWFkTW9kZSA9IFZlY3RvclRpbGVMYXllclRocmVhZE1vZGUuRGVmYXVsdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZFdvcmtlckNvdW50ID0gMjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5taW5pbWFsaXN0ID0gb3B0X29wdGlvbnNbXCJtaW5pbWFsaXN0XCJdID09PSB1bmRlZmluZWQgPyB0cnVlIDogb3B0X29wdGlvbnNbXCJtaW5pbWFsaXN0XCJdO1xyXG4gICAgICAgICAgICB0aGlzLm1heERhdGFab29tID0gb3B0X29wdGlvbnNbXCJtYXhEYXRhWm9vbVwiXSA9PT0gdW5kZWZpbmVkID8gMTQgOiBvcHRfb3B0aW9uc1tcIm1heERhdGFab29tXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnByb3h5ID0gb3B0X29wdGlvbnNbXCJwcm94eVwiXTtcclxuICAgICAgICAgICAgdGhpcy5jbGllbnRJZCA9IG9wdF9vcHRpb25zW1wiY2xpZW50SWRcIl07XHJcbiAgICAgICAgICAgIHRoaXMuY2xpZW50U2VjcmV0ID0gb3B0X29wdGlvbnNbXCJjbGllbnRTZWNyZXRcIl07XHJcbiAgICAgICAgICAgIHRoaXMuYXBpS2V5ID0gb3B0X29wdGlvbnNbXCJhcGlLZXlcIl07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5pc011bHRpdGhyZWFkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5taW5pbWFsaXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5tYXhEYXRhWm9vbSA9IDE0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyR2VvVmVjdG9yKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTdHlsZUpzb25Vcmwoc3R5bGVKc29uKSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRTdHlsZUpzb25Bc3luKHN0eWxlSnNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRTdHlsZUpzb24oc3R5bGVKc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50eXBlID0gKDxhbnk+b2wpLkxheWVyVHlwZS5NQVBTVUlURV9WRUNUT1JUSUxFOyAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgbG9hZFN0eWxlSnNvbkFzeW4oc3R5bGVKc29uVXJsKSB7XHJcbiAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIHhoci5vcGVuKFwiR0VUXCIsIHN0eWxlSnNvblVybCk7XHJcblxyXG4gICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQ6IGFueSkge1xyXG4gICAgICAgICAgICBpZiAoIXhoci5zdGF0dXMgfHwgeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZTtcclxuICAgICAgICAgICAgICAgIHNvdXJjZSA9IHhoci5yZXNwb25zZVRleHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlSnNvbiA9IEpTT04ucGFyc2Uoc291cmNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZFN0eWxlSnNvbihKU09OLnBhcnNlKHNvdXJjZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGxvYWRTdHlsZUpzb24oaW5wdXRTdHlsZUpzb246IGFueSkge1xyXG4gICAgICAgIHZhciBzdHlsZUpzb24gPSB0aGlzLnN0eWxlSnNvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaW5wdXRTdHlsZUpzb24pKTtcclxuICAgICAgICB0aGlzLnZlcnNpb24gPSBzdHlsZUpzb25bXCJ2ZXJzaW9uXCJdO1xyXG4gICAgICAgIHRoaXMub3duZXIgPSBzdHlsZUpzb25bXCJvd25lclwiXTtcclxuICAgICAgICB0aGlzLmRhdGVUaW1lID0gc3R5bGVKc29uW1wiZGF0ZVRpbWVcIl07XHJcbiAgICAgICAgdGhpcy52YXJpYWJsZXMgPSB0aGlzLmdldFZhcmlhYmxlcyhzdHlsZUpzb25bXCJ2YXJpYWJsZXNcIl0pO1xyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZCA9IHN0eWxlSnNvbltcImJhY2tncm91bmRcIl07XHJcblxyXG4gICAgICAgIHRoaXMucmVwbGFjZVZhcmlhYmxlcyhzdHlsZUpzb24sIHRoaXMudmFyaWFibGVzKTtcclxuXHJcbiAgICAgICAgdGhpcy5nZW9Tb3VyY2VzID0ge307XHJcbiAgICAgICAgaWYgKHN0eWxlSnNvbltcImxheWVyc1wiXSAmJiBzdHlsZUpzb25bXCJsYXllcnNcIl0ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgbGF5ZXJKc29uID0gc3R5bGVKc29uW1wibGF5ZXJzXCJdWzBdO1xyXG4gICAgICAgICAgICB2YXIgc291cmNlSWQgPSBsYXllckpzb25bXCJzb3VyY2VcIl07XHJcblxyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gdGhpcy5nZXRHZW9Tb3VyY2Uoc291cmNlSWQpO1xyXG4gICAgICAgICAgICBpZiAoc291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNvdXJjZShzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYmFja2dyb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiYWNrZ3JvdW5kQ29sb3IgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLmJhY2tncm91bmQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tcImJhY2tncm91bmRcIl0gPSBiYWNrZ3JvdW5kQ29sb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBzdHlsZUpzb25zID0gc3R5bGVKc29uW1wic3R5bGVzXCJdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHN0eWxlSWRzID0gbGF5ZXJKc29uW1wic3R5bGVzXCJdO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1pblpvb20gPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IG1heFpvb20gPSAyMjtcclxuICAgICAgICAgICAgICAgIGxldCBsYXllck5hbWUgPSBzb3VyY2UuZ2V0R2VvRm9ybWF0KCkuZ2V0TGF5ZXJOYW1lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHN0eWxlSnNvbkNhY2hlID0gbmV3IFN0eWxlSnNvbkNhY2hlKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGVJZEluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHN0eWxlSWQgb2Ygc3R5bGVJZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3R5bGVKc29uO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzdHlsZUpzb25zLmxlbmd0aDsgaW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVKc29uc1tpbmRleF0uaWQgPT09IHN0eWxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlSnNvbiA9IHN0eWxlSnNvbnNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZUpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVKc29uQ2FjaGUuc3R5bGVKc29uW3N0eWxlSWRdID0gc3R5bGVKc29uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IG5ldyBTdHlsZUpzb25DYWNoZUl0ZW0oc3R5bGVKc29uLCBtaW5ab29tLCBtYXhab29tLCBsYXllck5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgem9vbSA9IGl0ZW0ubWluWm9vbTsgem9vbSA8PSBpdGVtLm1heFpvb207IHpvb20rKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRyZWVOb2RlID0gbmV3IFRyZWVOb2RlPFN0eWxlSnNvbkNhY2hlSXRlbT4oaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUNoaWxkcmVuTm9kZSh0cmVlTm9kZSwgaXRlbSwgem9vbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZUpzb25DYWNoZS5hZGQoem9vbSwgaXRlbS5kYXRhTGF5ZXJOYW1lLCBuZXcgVHJlZSh0cmVlTm9kZSwgc3R5bGVJZEluZGV4KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlSWRJbmRleCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBnZW9Gb3JtYXQgPSBzb3VyY2UuZ2V0R2VvRm9ybWF0KCk7XHJcbiAgICAgICAgICAgICAgICBnZW9Gb3JtYXRbXCJzdHlsZUpzb25DYWNoZVwiXSA9IHN0eWxlSnNvbkNhY2hlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGl0aHJlYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy53b3JrZXJNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdElkOiAoPGFueT5vbCkuZ2V0VWlkKGdlb0Zvcm1hdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZUpzb246IHN0eWxlSnNvbkNhY2hlLnN0eWxlSnNvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb1RleHRTdHlsZUluZm9zOiBzdHlsZUpzb25DYWNoZS5nZW9UZXh0U3R5bGVJbmZvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud29ya2VyTWFuYWdlci53b3JrZXJDb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtlck1hbmFnZXIucG9zdE1lc3NhZ2UoKDxhbnk+b2wpLmdldFVpZChtZXNzYWdlRGF0YSksIFwiaW5pdFN0eWxlSlNPTlwiLCBtZXNzYWdlRGF0YSwgdW5kZWZpbmVkLCBpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRHZW9Tb3VyY2Uoc291cmNlSWQpIHtcclxuICAgICAgICBpZiAodGhpcy5nZW9Tb3VyY2VzICYmIHRoaXMuZ2VvU291cmNlc1tzb3VyY2VJZF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2VvU291cmNlc1tzb3VyY2VJZF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5zdHlsZUpzb25bXCJzb3VyY2VzXCJdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVKc29uWydzb3VyY2VzJ10uZm9yRWFjaChzb3VyY2VKc29uID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2VJZCA9PT0gc291cmNlSnNvblsnaWQnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc291cmNlSnNvblsndXJscyddICYmIHNvdXJjZUpzb25bJ3VybCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZUpzb25bJ3VybHMnXSA9IFtzb3VyY2VKc29uWyd1cmwnXV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzb3VyY2VKc29uWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlSnNvblsndXJscyddID0gc291cmNlSnNvblsndXJscyddLm1hcCh1cmwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ2h0dHAnKSA9PT0gLTEgJiYgdXJsLmluZGV4T2YoJ2h0dHBzJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG9zdCA9IGxvY2F0aW9uLmhvc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvdG9jb2wgPSBsb2NhdGlvbi5wcm90b2NvbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1cmwuaW5kZXhPZignLycpICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gcHJvdG9jb2wgKyAnLy8nICsgaG9zdCArICcvJyArIHVybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHVybC5pbmRleE9mKCcvJykgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBwcm90b2NvbCArICcvLycgKyBob3N0ICsgdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFwaUtleVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ2FwaUtleScpID09PSAtMSAmJiB0aGlzLmFwaUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsICsgJz9hcGlLZXk9JyArIHRoaXMuYXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb3h5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3h5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSB0aGlzLnByb3h5ICsgZW5jb2RlVVJJQ29tcG9uZW50KHVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2VvU291cmNlc1tzb3VyY2VKc29uW1wiaWRcIl1dID0gdGhpcy5jcmVhdGVWZWN0b3JUaWxlU291cmNlKHNvdXJjZUpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdlb1NvdXJjZXNbc291cmNlSWRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVZlY3RvclRpbGVTb3VyY2Uoc291cmNlSnNvbikge1xyXG4gICAgICAgIGlmIChzb3VyY2VKc29uW1widHlwZVwiXSA9PT0gXCJNVlRcIikge1xyXG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gdGhpcy5nZXRWZWN0b3JTb3VyY2VGb3JtYXQoKTtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBHZW9WZWN0b3JUaWxlU291cmNlKHtcclxuICAgICAgICAgICAgICAgIHRpbGVDbGFzczogPGFueT5HZW9WZWN0b3JUaWxlLFxyXG4gICAgICAgICAgICAgICAgdXJsczogc291cmNlSnNvbltcInVybHNcIl0sXHJcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcclxuICAgICAgICAgICAgICAgIGNsaWVudFNlY3JldDogdGhpcy5jbGllbnRTZWNyZXQsXHJcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCxcclxuICAgICAgICAgICAgICAgIHByb2plY3Rpb246IFwiRVBTRzozODU3XCIsXHJcbiAgICAgICAgICAgICAgICB0aWxlR3JpZDogdGhpcy5jcmVhdGVWZWN0b3JUaWxlR3JpZCgpLFxyXG4gICAgICAgICAgICAgICAgY2FjaGVTaXplOiAxMDI0LFxyXG4gICAgICAgICAgICAgICAgbXVsdGl0aHJlYWQ6IHRoaXMuaXNNdWx0aXRocmVhZCxcclxuICAgICAgICAgICAgICAgIG1pbmltYWxpc3Q6IHRoaXMubWluaW1hbGlzdCxcclxuICAgICAgICAgICAgICAgIG1heERhdGFab29tOiB0aGlzLm1heERhdGFab29tXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmb3JtYXRbJ3NvdXJjZSddID0gc291cmNlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGdldFZlY3RvclNvdXJjZUZvcm1hdCgpIHtcclxuICAgICAgICBsZXQgZm9ybWF0ID0gbmV3IEdlb01WVEZvcm1hdCh1bmRlZmluZWQsIHsgbXVsdGl0aHJlYWQ6IHRoaXMuaXNNdWx0aXRocmVhZCwgbWluaW1hbGlzdDogdGhpcy5taW5pbWFsaXN0IH0pO1xyXG4gICAgICAgIGlmICh0aGlzLmlzTXVsdGl0aHJlYWQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLndvcmtlck1hbmFnZXIgfHwgIXRoaXMud29ya2VyTWFuYWdlci5pbml0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud29ya2VyTWFuYWdlciA9IG5ldyBXb3JrZXJNYW5hZ2VyKHRoaXMudGhyZWFkTW9kZSwgdGhpcy5iYWNrZ3JvdW5kV29ya2VyQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXJNYW5hZ2VyLmluaXRXb3JrZXJzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMud29ya2VyTWFuYWdlci5pbml0ZWQpIHtcclxuICAgICAgICAgICAgICAgIGZvcm1hdFtcIndvcmtlck1hbmFnZXJcIl0gPSB0aGlzLndvcmtlck1hbmFnZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdDtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlVmVjdG9yVGlsZUdyaWQoKTogb2wudGlsZWdyaWQuVGlsZUdyaWQge1xyXG4gICAgICAgIHJldHVybiBvbC50aWxlZ3JpZC5jcmVhdGVYWVooeyB0aWxlU2l6ZTogNTEyLCBtYXhab29tOiAyMiB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRWYXJpYWJsZXModmFyaWFibGVzSnNvbjogYW55KSB7XHJcbiAgICAgICAgbGV0IHZhcmlhYmxlcyA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IHZhcmlhYmxlc05hbWUgaW4gdmFyaWFibGVzSnNvbikge1xyXG4gICAgICAgICAgICBpZiAodmFyaWFibGVzTmFtZS5pbmRleE9mKFwiLFwiKSA+IDApIHtcclxuICAgICAgICAgICAgICAgIGxldCB2YXJpYWJsZU5hbWVzID0gdmFyaWFibGVzTmFtZS5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhcmlhYmxlTmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZXNbdmFyaWFibGVOYW1lc1tpXV0gPSB2YXJpYWJsZXNKc29uW3ZhcmlhYmxlc05hbWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyaWFibGVzW3ZhcmlhYmxlc05hbWVdID0gdmFyaWFibGVzSnNvblt2YXJpYWJsZXNOYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhcmlhYmxlcztcclxuICAgIH1cclxuXHJcbiAgICByZXBsYWNlVmFyaWFibGVzKHN0eWxlSnNvbjogYW55LCB2YXJpYWJsZXM6IGFueSkge1xyXG4gICAgICAgIGZvciAobGV0IHByb3BlcnR5TmFtZSBpbiBzdHlsZUpzb24pIHtcclxuICAgICAgICAgICAgbGV0IHByb3BlcnR5ID0gc3R5bGVKc29uW3Byb3BlcnR5TmFtZV07XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcGVydHkgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVwbGFjZVZhcmlhYmxlcyhwcm9wZXJ0eSwgdmFyaWFibGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcHJvcGVydHkgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBrZXlXb3JkSW5kZXggPSBwcm9wZXJ0eS5pbmRleE9mKFwiQFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChrZXlXb3JkSW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lcyA9IHByb3BlcnR5LnNwbGl0KFwiIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcFdvcmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXN1bHRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBXb3JkID0gbGluZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcFdvcmQuaW5kZXhPZihcIkBcIikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wV29yZCA9IHZhcmlhYmxlc1t0ZW1wV29yZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2godGVtcFdvcmQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlSnNvbltwcm9wZXJ0eU5hbWVdID0gcmVzdWx0cy5qb2luKFwiIFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlSnNvbltwcm9wZXJ0eU5hbWVdID0gdmFyaWFibGVzW2xpbmVzWzBdXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2hpbGRyZW5Ob2RlKGN1cnJlbnROb2RlOiBUcmVlTm9kZTxTdHlsZUpzb25DYWNoZUl0ZW0+LCBpdGVtOiBTdHlsZUpzb25DYWNoZUl0ZW0sIHpvb206IG51bWJlcikge1xyXG4gICAgICAgIGlmIChpdGVtLnN1YlN0eWxlQ2FjaGVJdGVtcyAmJiBpdGVtLnN1YlN0eWxlQ2FjaGVJdGVtcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGl0ZW0uc3ViU3R5bGVDYWNoZUl0ZW1zLmxlbmd0aDsgaSA8IGlpOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdWJTdHlsZUl0ZW0gPSBpdGVtLnN1YlN0eWxlQ2FjaGVJdGVtc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmICh6b29tID49IHN1YlN0eWxlSXRlbS5taW5ab29tICYmIHpvb20gPD0gc3ViU3R5bGVJdGVtLm1heFpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZSA9IG5ldyBUcmVlTm9kZTxTdHlsZUpzb25DYWNoZUl0ZW0+KHN1YlN0eWxlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudE5vZGUuY2hpbGRyZW4ucHVzaChub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUNoaWxkcmVuTm9kZShub2RlLCBzdWJTdHlsZUl0ZW0sIHpvb20pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlzU3R5bGVKc29uVXJsKHN0eWxlSnNvbik6IGJvb2xlYW4ge1xyXG4gICAgICAgIGlmIChzdHlsZUpzb24pIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHlsZUpzb24gIT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyR2VvVmVjdG9yKCkge1xyXG4gICAgICAgICg8YW55Pm9sKS5MYXllclR5cGVbXCJHRU9WRUNUT1JUSUxFXCJdID0gXCJHRU9WRUNUT1JUSUxFXCI7XHJcbiAgICAgICAgLy8gVE9ETzogY2hlY2sgdGhlIHBsdWdpbiBoYWQgYmVlbiByZWdpc3RlZC5cclxuICAgICAgICAoPGFueT5vbCkucGx1Z2lucy5yZWdpc3RlcigoPGFueT5vbCkuUGx1Z2luVHlwZS5MQVlFUl9SRU5ERVJFUiwgR2VvVmVjdG9yVGlsZUxheWVyUmVuZGVyKTtcclxuICAgICAgICAvLyAoPGFueT5vbC5WZWN0b3JUaWxlKS5FdmVudCA9IGZ1bmN0aW9uICh0eXBlLCB4aHIpIHtcclxuICAgICAgICAvLyAgICAgb2wuZXZlbnRzLkV2ZW50LmNhbGwodGhpcywgdHlwZSk7XHJcblxyXG4gICAgICAgIC8vICAgICB0aGlzLnhociA9IHhocjtcclxuICAgICAgICAvLyB9O1xyXG4gICAgICAgIC8vIG9sLmluaGVyaXRzKCg8YW55Pm9sLlZlY3RvclRpbGUpLCAoPGFueT5vbC5ldmVudHMpLkV2ZW50KTtcclxuXHJcbiAgICAgICAgKDxhbnk+b2wpLlZlY3RvckltYWdlVGlsZS5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGhpcy50aWxlS2V5cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlVGlsZUtleSA9IHRoaXMudGlsZUtleXNbaV07XHJcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlVGlsZSA9IHRoaXMuZ2V0VGlsZShzb3VyY2VUaWxlS2V5KTtcclxuICAgICAgICAgICAgICAgIHNvdXJjZVRpbGUuY29uc3VtZXJzLS07XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlVGlsZS5jb25zdW1lcnMgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEJ1ZmZlckNhY2hlIGluIHdlYmdsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZlY3RvclRpbGUgPSB0aGlzLnNvdXJjZVRpbGVzX1tzb3VyY2VUaWxlS2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVwbGF5R3JvdXBzID0gdmVjdG9yVGlsZS5yZXBsYXlHcm91cHNfO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiByZXBsYXlHcm91cHMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYXlHcm91cHNba2V5XS5nZXREZWxldGVSZXNvdXJjZXNGdW5jdGlvbihjb250ZXh0KSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuc291cmNlVGlsZXNfW3NvdXJjZVRpbGVLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRpbGUuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc291cmNlVGlsZXNfID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5sb2FkTGlzdGVuZXJLZXlzXy5mb3JFYWNoKCg8YW55Pm9sKS5ldmVudHMudW5saXN0ZW5CeUtleSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZExpc3RlbmVyS2V5c18ubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJpbVRpbGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJpbVRpbGUuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAoPGFueT5vbCkuVGlsZVN0YXRlLkFCT1JUO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZWQoKTtcclxuICAgICAgICAgICAgLy8gZm9yIHRoZSBkaXNwb3NlSW50ZXJuYWxcclxuICAgICAgICAgICAgdGhpcy50aWxlS2V5cy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnNvdXJjZVRpbGVMaXN0ZW5lcktleXNfLmZvckVhY2goKDxhbnk+b2wpLmV2ZW50cy51bmxpc3RlbkJ5S2V5KTtcclxuICAgICAgICAgICAgdGhpcy5zb3VyY2VUaWxlTGlzdGVuZXJLZXlzXy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAoPGFueT5vbCkuVGlsZS5wcm90b3R5cGUuZGlzcG9zZUludGVybmFsLmNhbGwodGhpcyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgKDxhbnk+b2wpLlRpbGVRdWV1ZS5wcm90b3R5cGUuaGFuZGxlVGlsZUNoYW5nZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBsZXQgdGlsZSA9IC8qKiBAdHlwZSB7b2wuVGlsZX0gKi8gKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGxldCBzdGF0ZSA9IHRpbGUuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgaWYgKHN0YXRlID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkxPQURFRCB8fCBzdGF0ZSA9PT0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5FUlJPUiB8fFxyXG4gICAgICAgICAgICAgICAgc3RhdGUgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuRU1QVFkgfHwgc3RhdGUgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuQUJPUlQgfHxcclxuICAgICAgICAgICAgICAgIHN0YXRlID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkNBTkNFTCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkFCT1JUIHx8IHN0YXRlID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkVSUk9SKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+b2wpLmV2ZW50cy51bmxpc3Rlbih0aWxlLCAoPGFueT5vbCkuZXZlbnRzLkV2ZW50VHlwZS5DSEFOR0UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlVGlsZUNoYW5nZSwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRpbGVLZXkgPSB0aWxlLmdldEtleSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbGVLZXkgaW4gdGhpcy50aWxlc0xvYWRpbmdLZXlzXykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnRpbGVzTG9hZGluZ0tleXNfW3RpbGVLZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIC0tdGhpcy50aWxlc0xvYWRpbmdfO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZW5xdWV1ZSByZWNvcmRzLCBpZiB0aGUgdGlsZSBoYXMgYmVlbiBkaXNwb3NlIGJlZm9yZSBsb2FkXHJcbiAgICAgICAgICAgICAgICBpZiAodGlsZUtleSBpbiB0aGlzLnF1ZXVlZEVsZW1lbnRzXykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnF1ZXVlZEVsZW1lbnRzX1t0aWxlS2V5XTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudGlsZUNoYW5nZUNhbGxiYWNrXygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gcmVtb3ZlIHF1aWNrWm9vbSB3aGVuIGFuaW1hdGlvbiBjb21wbGV0ZVxyXG4gICAgICAgICg8YW55Pm9sKS5WaWV3LnByb3RvdHlwZS51cGRhdGVBbmltYXRpb25zXyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudXBkYXRlQW5pbWF0aW9uS2V5XyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5nZXRBbmltYXRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICB2YXIgbW9yZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5hbmltYXRpb25zXy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IHRoaXMuYW5pbWF0aW9uc19baV07XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VyaWVzQ29tcGxldGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpqID0gc2VyaWVzLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gc2VyaWVzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uY29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGFwc2VkID0gbm93IC0gYW5pbWF0aW9uLnN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFjdGlvbiA9IGFuaW1hdGlvbi5kdXJhdGlvbiA+IDAgPyBlbGFwc2VkIC8gYW5pbWF0aW9uLmR1cmF0aW9uIDogMTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZnJhY3Rpb24gPj0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uY29tcGxldGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFjdGlvbiA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzQ29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gYW5pbWF0aW9uLmVhc2luZyhmcmFjdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5zb3VyY2VDZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHgwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkwID0gYW5pbWF0aW9uLnNvdXJjZUNlbnRlclsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHgxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHkxID0gYW5pbWF0aW9uLnRhcmdldENlbnRlclsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSB4MCArIHByb2dyZXNzICogKHgxIC0geDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IHkwICsgcHJvZ3Jlc3MgKiAoeTEgLSB5MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KCg8YW55Pm9sKS5WaWV3UHJvcGVydHkuQ0VOVEVSLCBbeCwgeV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24gJiYgYW5pbWF0aW9uLnRhcmdldFJlc29sdXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBwcm9ncmVzcyA9PT0gMSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24udGFyZ2V0UmVzb2x1dGlvbiA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24uc291cmNlUmVzb2x1dGlvbiArIHByb2dyZXNzICogKGFuaW1hdGlvbi50YXJnZXRSZXNvbHV0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJlc29sdXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLmFuY2hvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQoKDxhbnk+b2wpLlZpZXdQcm9wZXJ0eS5DRU5URVIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVDZW50ZXJab29tKHJlc29sdXRpb24sIGFuaW1hdGlvbi5hbmNob3IpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldCgoPGFueT5vbCkuVmlld1Byb3BlcnR5LlJFU09MVVRJT04sIHJlc29sdXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICE9PSB1bmRlZmluZWQgJiYgYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gcHJvZ3Jlc3MgPT09IDEgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxhbnk+b2wpLm1hdGgubW9kdWxvKGFuaW1hdGlvbi50YXJnZXRSb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEkgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uICsgcHJvZ3Jlc3MgKiAoYW5pbWF0aW9uLnRhcmdldFJvdGF0aW9uIC0gYW5pbWF0aW9uLnNvdXJjZVJvdGF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbi5hbmNob3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KCg8YW55Pm9sKS5WaWV3UHJvcGVydHkuQ0VOVEVSLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQ2VudGVyUm90YXRlKHJvdGF0aW9uLCBhbmltYXRpb24uYW5jaG9yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXQoKDxhbnk+b2wpLlZpZXdQcm9wZXJ0eS5ST1RBVElPTiwgcm90YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBtb3JlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFuaW1hdGlvbi5jb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VyaWVzQ29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNfW2ldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEhpbnQoKDxhbnk+b2wpLlZpZXdIaW50LkFOSU1BVElORywgLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IHNlcmllc1swXS5jYWxsYmFjaztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIHBydW5lIGNvbXBsZXRlZCBzZXJpZXNcclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zXyA9IHRoaXMuYW5pbWF0aW9uc18uZmlsdGVyKEJvb2xlYW4pO1xyXG4gICAgICAgICAgICBpZiAobW9yZSAmJiB0aGlzLnVwZGF0ZUFuaW1hdGlvbktleV8gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25LZXlfID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMudXBkYXRlQW5pbWF0aW9uc18pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gR2V0IHF1aWNrWm9vbSB6b29tIGluL291dFxyXG4gICAgICAgICg8YW55Pm9sKS5WaWV3LnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKHZhcl9hcmdzKSB7XHJcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25Db3VudCA9IGFyZ3VtZW50cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBjYWxsYmFjaztcclxuICAgICAgICAgICAgaWYgKGFuaW1hdGlvbkNvdW50ID4gMSAmJiB0eXBlb2YgYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gYXJndW1lbnRzW2FuaW1hdGlvbkNvdW50IC0gMV07XHJcbiAgICAgICAgICAgICAgICAtLWFuaW1hdGlvbkNvdW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0RlZigpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiB2aWV3IHByb3BlcnRpZXMgYXJlIG5vdCB5ZXQgc2V0LCBzaG9ydGN1dCB0byB0aGUgZmluYWwgc3RhdGVcclxuICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IGFyZ3VtZW50c1thbmltYXRpb25Db3VudCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLmNlbnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0Q2VudGVyKHN0YXRlLmNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuem9vbSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRab29tKHN0YXRlLnpvb20pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLnJvdGF0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFJvdGF0aW9uKHN0YXRlLnJvdGF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBzdGFydCA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHZhciBjZW50ZXIgPSB0aGlzLmdldENlbnRlcigpLnNsaWNlKCk7XHJcbiAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gdGhpcy5nZXRSZXNvbHV0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMuZ2V0Um90YXRpb24oKTtcclxuICAgICAgICAgICAgdmFyIHNlcmllcyA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgcXVpY2tab29tID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5pbWF0aW9uQ291bnQ7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSAvKiogQHR5cGUge29seC5BbmltYXRpb25PcHRpb25zfSAqLyAoYXJndW1lbnRzW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gLyoqIEB0eXBlIHtvbC5WaWV3QW5pbWF0aW9ufSAqLyAoe1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBzdGFydCxcclxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yOiBvcHRpb25zLmFuY2hvcixcclxuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbiAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5kdXJhdGlvbiA6IDEwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBvcHRpb25zLmVhc2luZyB8fCBvbC5lYXNpbmcuaW5BbmRPdXRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNlbnRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbltcInNvdXJjZUNlbnRlclwiXSA9IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25bXCJ0YXJnZXRDZW50ZXJcIl0gPSBvcHRpb25zLmNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICBjZW50ZXIgPSBhbmltYXRpb25bXCJ0YXJnZXRDZW50ZXJcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuem9vbSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uW1wic291cmNlUmVzb2x1dGlvblwiXSA9IHJlc29sdXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uW1widGFyZ2V0UmVzb2x1dGlvblwiXSA9IHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXhSZXNvbHV0aW9uXywgb3B0aW9ucy56b29tIC0gdGhpcy5taW5ab29tXywgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbiA9IGFuaW1hdGlvbltcInRhcmdldFJlc29sdXRpb25cIl07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcXVpY2tab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1aWNrWm9vbSA9IE1hdGguYWJzKGFuaW1hdGlvbltcInNvdXJjZVJlc29sdXRpb25cIl0gLSBhbmltYXRpb25bXCJ0YXJnZXRSZXNvbHV0aW9uXCJdKSAqIDIgPj0gYW5pbWF0aW9uW1wic291cmNlUmVzb2x1dGlvblwiXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVzb2x1dGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbltcInNvdXJjZVJlc29sdXRpb25cIl0gPSByZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbltcInRhcmdldFJlc29sdXRpb25cIl0gPSBvcHRpb25zLnJlc29sdXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x1dGlvbiA9IGFuaW1hdGlvbltcInRhcmdldFJlc29sdXRpb25cIl07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcXVpY2tab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1aWNrWm9vbSA9IE1hdGguYWJzKGFuaW1hdGlvbltcInNvdXJjZVJlc29sdXRpb25cIl0gLSBhbmltYXRpb25bXCJ0YXJnZXRSZXNvbHV0aW9uXCJdKSAqIDIgPj0gYW5pbWF0aW9uW1wic291cmNlUmVzb2x1dGlvblwiXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMucm90YXRpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbltcInNvdXJjZVJvdGF0aW9uXCJdID0gcm90YXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlbHRhID0gKDxhbnk+b2wpLm1hdGgubW9kdWxvKG9wdGlvbnMucm90YXRpb24gLSByb3RhdGlvbiArIE1hdGguUEksIDIgKiBNYXRoLlBJKSAtIE1hdGguUEk7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uW1widGFyZ2V0Um90YXRpb25cIl0gPSByb3RhdGlvbiArIGRlbHRhO1xyXG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uID0gYW5pbWF0aW9uW1widGFyZ2V0Um90YXRpb25cIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbltcImNhbGxiYWNrXCJdID0gY2FsbGJhY2s7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgYW5pbWF0aW9uIGlzIGEgbm8tb3BcclxuICAgICAgICAgICAgICAgIGlmICgoPGFueT5vbCkuVmlldy5pc05vb3BBbmltYXRpb24oYW5pbWF0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5jb21wbGV0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Ugc3RpbGwgcHVzaCBpdCBvbnRvIHRoZSBzZXJpZXMgZm9yIGNhbGxiYWNrIGhhbmRsaW5nXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ICs9IGFuaW1hdGlvbi5kdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlcmllcy5wdXNoKGFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zXy5wdXNoKHNlcmllcyk7XHJcbiAgICAgICAgICAgIHRoaXNbXCJxdWlja1pvb21cIl0gPSBxdWlja1pvb207XHJcbiAgICAgICAgICAgIHRoaXMuc2V0SGludCgoPGFueT5vbCkuVmlld0hpbnQuQU5JTUFUSU5HLCAxKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVBbmltYXRpb25zXygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIGFkZCBxdWlja1pvb20gaW50byBmcmFtZVN0YXRlXHJcbiAgICAgICAgKDxhbnk+b2wpLlBsdWdnYWJsZU1hcC5wcm90b3R5cGUucmVuZGVyRnJhbWVfID0gZnVuY3Rpb24gKHRpbWUpIHtcclxuICAgICAgICAgICAgdmFyIGksIGlpLCB2aWV3U3RhdGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2l6ZSA9IHRoaXMuZ2V0U2l6ZSgpO1xyXG4gICAgICAgICAgICB2YXIgdmlldyA9IHRoaXMuZ2V0VmlldygpO1xyXG4gICAgICAgICAgICB2YXIgZXh0ZW50ID0gb2wuZXh0ZW50LmNyZWF0ZUVtcHR5KCk7XHJcbiAgICAgICAgICAgIHZhciBwcmV2aW91c0ZyYW1lU3RhdGUgPSB0aGlzLmZyYW1lU3RhdGVfO1xyXG4gICAgICAgICAgICB2YXIgaXNab29tPXZpZXcuaXNab29tO1xyXG4gICAgICAgICAgICAvKiogQHR5cGUgez9vbHguRnJhbWVTdGF0ZX0gKi9cclxuICAgICAgICAgICAgdmFyIGZyYW1lU3RhdGUgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoc2l6ZSAhPT0gdW5kZWZpbmVkICYmICg8YW55Pm9sKS5zaXplLmhhc0FyZWEoc2l6ZSkgJiYgdmlldyAmJiB2aWV3LmlzRGVmKCkpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2aWV3SGludHMgPSB2aWV3LmdldEhpbnRzKHRoaXMuZnJhbWVTdGF0ZV8gPyB0aGlzLmZyYW1lU3RhdGVfLnZpZXdIaW50cyA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVpY2tab29tID0gdmlld1tcInF1aWNrWm9vbVwiXTtcclxuICAgICAgICAgICAgICAgIHZhciBsYXllclN0YXRlc0FycmF5ID0gdGhpcy5nZXRMYXllckdyb3VwKCkuZ2V0TGF5ZXJTdGF0ZXNBcnJheSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxheWVyU3RhdGVzID0ge307XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IGxheWVyU3RhdGVzQXJyYXkubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxheWVyU3RhdGVzWyg8YW55Pm9sKS5nZXRVaWQobGF5ZXJTdGF0ZXNBcnJheVtpXS5sYXllcildID0gbGF5ZXJTdGF0ZXNBcnJheVtpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZpZXdTdGF0ZSA9IHZpZXcuZ2V0U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSB2aWV3U3RhdGUuY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBpeGVsUmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uIC8gdGhpcy5waXhlbFJhdGlvXztcclxuICAgICAgICAgICAgICAgIGNlbnRlclswXSA9IE1hdGgucm91bmQoY2VudGVyWzBdIC8gcGl4ZWxSZXNvbHV0aW9uKSAqIHBpeGVsUmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgIGNlbnRlclsxXSA9IE1hdGgucm91bmQoY2VudGVyWzFdIC8gcGl4ZWxSZXNvbHV0aW9uKSAqIHBpeGVsUmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgIGZyYW1lU3RhdGUgPSAvKiogQHR5cGUge29seC5GcmFtZVN0YXRlfSAqLyAoe1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtOiB0aGlzLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtXyxcclxuICAgICAgICAgICAgICAgICAgICBleHRlbnQ6IGV4dGVudCxcclxuICAgICAgICAgICAgICAgICAgICBmb2N1czogIXRoaXMuZm9jdXNfID8gY2VudGVyIDogdGhpcy5mb2N1c18sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuZnJhbWVJbmRleF8rKyxcclxuICAgICAgICAgICAgICAgICAgICBsYXllclN0YXRlczogbGF5ZXJTdGF0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbGF5ZXJTdGF0ZXNBcnJheTogbGF5ZXJTdGF0ZXNBcnJheSxcclxuICAgICAgICAgICAgICAgICAgICBsb2dvczogKDxhbnk+b2wpLm9iai5hc3NpZ24oe30sIHRoaXMubG9nb3NfKSxcclxuICAgICAgICAgICAgICAgICAgICBwaXhlbFJhdGlvOiB0aGlzLnBpeGVsUmF0aW9fLFxyXG4gICAgICAgICAgICAgICAgICAgIHBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtOiB0aGlzLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtXyxcclxuICAgICAgICAgICAgICAgICAgICBwb3N0UmVuZGVyRnVuY3Rpb25zOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHNraXBwZWRGZWF0dXJlVWlkczogdGhpcy5za2lwcGVkRmVhdHVyZVVpZHNfLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbGVRdWV1ZTogdGhpcy50aWxlUXVldWVfLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHRpbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlZFRpbGVzOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICB2aWV3U3RhdGU6IHZpZXdTdGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICB2aWV3SGludHM6IHZpZXdIaW50cyxcclxuICAgICAgICAgICAgICAgICAgICBxdWlja1pvb206IHF1aWNrWm9vbSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UmVzb2x1dGlvbjogdmlld1N0YXRlLnJlc29sdXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgd2FudGVkVGlsZXM6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMucmVuZGVyZXJfLmNvbnRleHRfLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzWm9vbTppc1pvb21cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgZnJhbWVTdGF0ZS5leHRlbnQgPSAoPGFueT5vbCkuZXh0ZW50LmdldEZvclZpZXdBbmRTaXplKHZpZXdTdGF0ZS5jZW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgdmlld1N0YXRlLnJlc29sdXRpb24sIHZpZXdTdGF0ZS5yb3RhdGlvbiwgZnJhbWVTdGF0ZS5zaXplLCBleHRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZyYW1lU3RhdGVfID0gZnJhbWVTdGF0ZTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlcl8ucmVuZGVyRnJhbWUoZnJhbWVTdGF0ZSk7XHJcbiAgICAgICAgICAgIGlmIChmcmFtZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnJhbWVTdGF0ZS5hbmltYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdFJlbmRlckZ1bmN0aW9uc18sIGZyYW1lU3RhdGUucG9zdFJlbmRlckZ1bmN0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzRnJhbWVTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlU3RhcnQgPSAhdGhpcy5wcmV2aW91c0V4dGVudF8gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKCFvbC5leHRlbnQuaXNFbXB0eSh0aGlzLnByZXZpb3VzRXh0ZW50XykgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFvbC5leHRlbnQuZXF1YWxzKGZyYW1lU3RhdGUuZXh0ZW50LCB0aGlzLnByZXZpb3VzRXh0ZW50XykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb3ZlU3RhcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IG9sLk1hcEV2ZW50KCg8YW55Pm9sKS5NYXBFdmVudFR5cGUuTU9WRVNUQVJULCB0aGlzLCBwcmV2aW91c0ZyYW1lU3RhdGUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c0V4dGVudF8gPSAoPGFueT5vbCkuZXh0ZW50LmNyZWF0ZU9yVXBkYXRlRW1wdHkodGhpcy5wcmV2aW91c0V4dGVudF8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaWRsZSA9IHRoaXMucHJldmlvdXNFeHRlbnRfICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIWZyYW1lU3RhdGUudmlld0hpbnRzWyg8YW55Pm9sKS5WaWV3SGludC5BTklNQVRJTkddICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIWZyYW1lU3RhdGUudmlld0hpbnRzWyg8YW55Pm9sKS5WaWV3SGludC5JTlRFUkFDVElOR10gJiZcclxuICAgICAgICAgICAgICAgICAgICAhb2wuZXh0ZW50LmVxdWFscyhmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpZGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgb2wuTWFwRXZlbnQoKDxhbnk+b2wpLk1hcEV2ZW50VHlwZS5NT1ZFRU5ELCB0aGlzLCBmcmFtZVN0YXRlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+b2wpLmV4dGVudC5jbG9uZShmcmFtZVN0YXRlLmV4dGVudCwgdGhpcy5wcmV2aW91c0V4dGVudF8pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgICAgICAgICBuZXcgb2wuTWFwRXZlbnQoKDxhbnk+b2wpLk1hcEV2ZW50VHlwZS5QT1NUUkVOREVSLCB0aGlzLCBmcmFtZVN0YXRlKSk7XHJcblxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMuaGFuZGxlUG9zdFJlbmRlci5iaW5kKHRoaXMpLCAwKTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gcmVmaW5lIGRyYXdJbWFnZSBwZXJmb3JtYW5jZVxyXG4gICAgICAgICg8YW55Pm9sKS5yZW5kZXJlci5jYW52YXMuVGlsZUxheWVyLnByb3RvdHlwZS5kcmF3VGlsZUltYWdlID0gZnVuY3Rpb24gKHRpbGUsIGZyYW1lU3RhdGUsIGxheWVyU3RhdGUsIHgsIHksIHcsIGgsIGd1dHRlciwgdHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgaW1hZ2UgPSB0aWxlLmdldEltYWdlKHRoaXMuZ2V0TGF5ZXIoKSk7XHJcbiAgICAgICAgICAgIGlmICghaW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdWlkID0gKDxhbnk+b2wpLmdldFVpZCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGFscGhhID0gdHJhbnNpdGlvbiA/IHRpbGUuZ2V0QWxwaGEodWlkLCBmcmFtZVN0YXRlLnRpbWUpIDogMTtcclxuICAgICAgICAgICAgaWYgKGFscGhhID09PSAxICYmICF0aGlzLmdldExheWVyKCkuZ2V0U291cmNlKCkuZ2V0T3BhcXVlKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuY2xlYXJSZWN0KHgsIHksIHcsIGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBhbHBoYUNoYW5nZWQgPSBhbHBoYSAhPT0gdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhO1xyXG4gICAgICAgICAgICBpZiAoYWxwaGFDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhID0gYWxwaGE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgZ3V0dGVyLCBndXR0ZXIsXHJcbiAgICAgICAgICAgICAgICBpbWFnZS53aWR0aCAtIDIgKiBndXR0ZXIsIGltYWdlLmhlaWdodCAtIDIgKiBndXR0ZXIsIHgsIHksIHcsIGgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFscGhhQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYWxwaGEgIT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGZyYW1lU3RhdGUuYW5pbWF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGlsZS5lbmRUcmFuc2l0aW9uKHVpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBvdmVyd3JpdGVcclxuICAgICAgICAoPGFueT5vbC5yZW5kZXIpLndlYmdsLlJlcGxheS5wcm90b3R5cGUucmVwbGF5ID0gZnVuY3Rpb24gKFxyXG4gICAgICAgICAgICBjb250ZXh0LCB0cmFuc2Zvcm0sIHZpZXdSb3RhdGlvbiwgc2tpcHBlZEZlYXR1cmVzSGFzaCwgc2NyZWVuWFkpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3Um90YXRpb25fID0gdmlld1JvdGF0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLndlYmdsUmVwbGF5Xyhjb250ZXh0LCBcclxuICAgICAgICAgICAgICAgIHNraXBwZWRGZWF0dXJlc0hhc2gsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBzY3JlZW5YWSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gcmVjYWxjdWxhdGUgdGhlIHZlcmN0aWNlcyBvZiB0ZXh0IGZvciByZXNvbHV0aW9uIGNoYW5nZWQgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICg8YW55Pm9sLnJlbmRlcikud2ViZ2wuUmVwbGF5LnByb3RvdHlwZS5kZWNsdXR0ZXJSZXBlYXRfID0gZnVuY3Rpb24gKGNvbnRleHQsIHNjcmVlblhZKXtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0SW5kaWNlc0ZlYXR1cmUgPSB0aGlzLnN0YXJ0SW5kaWNlc0ZlYXR1cmU7XHJcbiAgICAgICAgICAgIHZhciBzdGFydEluZGljZXNTdHlsZSA9IHRoaXMuc3RhcnRJbmRpY2VzU3R5bGU7XHJcbiAgICAgICAgICAgIHRoaXMuaW5kaWNlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnZlcnRpY2VzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBJbmRpY2VzLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzXy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB2YXIgZnJhbWVTdGF0ZSA9IGNvbnRleHQuZnJhbWVTdGF0ZTtcclxuICAgICAgICAgICAgdmFyIHRpbGVQaXhlbEV4dGVudCA9IFtdOyAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuc2NyZWVuWFkgPSBzY3JlZW5YWTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaXMudGlsZVBpeGVsRXh0ZW50ID0gdGlsZVBpeGVsRXh0ZW50O1xyXG5cclxuICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHN0YXJ0SW5kaWNlc0ZlYXR1cmUubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBzdGFydEluZGljZXNGZWF0dXJlW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gc3RhcnRJbmRpY2VzU3R5bGVbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgZGVjbHV0dGVyR3JvdXAgPSBzdHlsZS5kZWNsdXR0ZXJHcm91cF87XHJcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGZlYXR1cmUuZ2V0VHlwZSgpOyBcclxuXHJcbiAgICAgICAgICAgICAgICBpZighc3R5bGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKHRoaXMgaW5zdGFuY2VvZiAoPGFueT5vbCkucmVuZGVyLndlYmdsLkltYWdlUmVwbGF5KXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEltYWdlU3R5bGUoc3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NhbGUgLz0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBsYXlJbWFnZV8oZnJhbWVTdGF0ZSwgZGVjbHV0dGVyR3JvdXAsIGdlb21ldHJ5KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckRlY2x1dHRlcl8oZGVjbHV0dGVyR3JvdXAsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2NhbGUgKj0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXsgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGUgPT0gJ011bHRpTGluZVN0cmluZycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZW5kcyA9IGdlb21ldHJ5LmdldEVuZHMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrID0gMDsgayA8IGVuZHMubGVuZ3RoOyBrKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpLnNsaWNlKGVuZHNbayAtIDFdIHx8IDAsIGVuZHNba10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0ZlYXR1cmUgPSBuZXcgKDxhbnk+b2wpLnJlbmRlci5GZWF0dXJlKCdMaW5lU3RyaW5nJywgZmxhdENvb3JkaW5hdGVzLCBbZmxhdENvb3JkaW5hdGVzLmxlbmd0aF0sIGZlYXR1cmUucHJvcGVydGllc18sIGZlYXR1cmUuaWRfKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUZXh0U3R5bGUoc3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3TGluZVN0cmluZ1RleHQobmV3RmVhdHVyZS5nZXRHZW9tZXRyeSgpLCBuZXdGZWF0dXJlLCBmcmFtZVN0YXRlLCBkZWNsdXR0ZXJHcm91cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRleHRTdHlsZShzdHlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMubGFiZWwpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmVXaWR0aCA9ICh0aGlzLnN0YXRlXy5saW5lV2lkdGggLyAyKSAqIHRoaXMuc3RhdGVfLnNjYWxlOyAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy5sYWJlbC53aWR0aCArIGxpbmVXaWR0aDsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMubGFiZWwuaGVpZ2h0OyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5jaG9yWCA9IE1hdGguZmxvb3IodGhpcy53aWR0aCAqIHRoaXMudGV4dEFsaWduXyAtIHRoaXMub2Zmc2V0WF8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmNob3JZID0gTWF0aC5mbG9vcih0aGlzLmhlaWdodCAqIHRoaXMudGV4dEJhc2VsaW5lXyAtIHRoaXMub2Zmc2V0WV8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2FsZSAvPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVwbGF5SW1hZ2VfKGZyYW1lU3RhdGUsIGRlY2x1dHRlckdyb3VwLCBnZW9tZXRyeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckRlY2x1dHRlcl8oZGVjbHV0dGVyR3JvdXAsIGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY2FsZSAqPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2V7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZHJhdyBjaGFycyAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXdMaW5lU3RyaW5nVGV4dChnZW9tZXRyeSwgZmVhdHVyZSwgZnJhbWVTdGF0ZSwgZGVjbHV0dGVyR3JvdXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIFxyXG4gICAgICAgICg8YW55Pm9sLnJlbmRlcikud2ViZ2wuUmVwbGF5LnByb3RvdHlwZS5yZW5kZXJEZWNsdXR0ZXJfID0gZnVuY3Rpb24gKGRlY2x1dHRlckdyb3VwLCBmZWF0dXJlKXtcclxuICAgICAgICAgICAgaWYoZGVjbHV0dGVyR3JvdXAgJiYgZGVjbHV0dGVyR3JvdXAubGVuZ3RoID4gNSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBDb3VudCA9IGRlY2x1dHRlckdyb3VwWzRdO1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwQ291bnQgPT0gMSB8fCBncm91cENvdW50ID09IGRlY2x1dHRlckdyb3VwLmxlbmd0aCAtIDUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYm94ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5YOiAvKiogQHR5cGUge251bWJlcn0gKi8gKGRlY2x1dHRlckdyb3VwWzBdKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluWTogLyoqIEB0eXBlIHtudW1iZXJ9ICovIChkZWNsdXR0ZXJHcm91cFsxXSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFg6IC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAoZGVjbHV0dGVyR3JvdXBbMl0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhZOiAvKiogQHR5cGUge251bWJlcn0gKi8gKGRlY2x1dHRlckdyb3VwWzNdKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZlYXR1cmVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5kZWNsdXR0ZXJUcmVlLmNvbGxpZGVzKGJveCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlY2x1dHRlclRyZWUuaW5zZXJ0KGJveCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSA1LCBqaiA9IGRlY2x1dHRlckdyb3VwLmxlbmd0aDsgaiA8IGpqOyArK2opIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWNsdXR0ZXIgPSBkZWNsdXR0ZXJHcm91cFtqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gZGVjbHV0dGVyWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXMkMSA9IGRlY2x1dHRlclsxXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzJDEgaW5zdGFuY2VvZiAoPGFueT5vbCkucmVuZGVyLndlYmdsLlRleHRSZXBsYXkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMkMS5kcmF3VGV4dChvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMkMSBpbnN0YW5jZW9mICg8YW55Pm9sKS5yZW5kZXIud2ViZ2wuSW1hZ2VSZXBsYXkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMkMS5kcmF3UG9pbnQob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGVjbHV0dGVyR3JvdXAubGVuZ3RoID0gNTtcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5vbC5leHRlbnQpLmNyZWF0ZU9yVXBkYXRlRW1wdHkoZGVjbHV0dGVyR3JvdXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgKDxhbnk+b2wucmVuZGVyKS53ZWJnbC5SZXBsYXkucHJvdG90eXBlLnJlcGxheUNoYXJJbWFnZV8gPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSwgZGVjbHV0dGVyR3JvdXAsIHBhcnQpe1xyXG4gICAgICAgICAgICB2YXIgc2NhbGUgPSB0aGlzLnNjYWxlO1xyXG4gICAgICAgICAgICB2YXIgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0gPSBmcmFtZVN0YXRlLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtO1xyXG4gICAgICAgICAgICB2YXIgeCA9IHBhcnRbMF07XHJcbiAgICAgICAgICAgIHZhciB5ID0gcGFydFsxXTtcclxuICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gcGFydFszXTtcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBwYXJ0WzRdO1xyXG4gICAgICAgICAgICB2YXIgY29zID0gTWF0aC5jb3Mocm90YXRpb24pO1xyXG4gICAgICAgICAgICB2YXIgc2luID0gTWF0aC5zaW4ocm90YXRpb24pOyBcclxuICAgICAgICAgICAgdmFyIGFuY2hvclggPSBwYXJ0WzJdO1xyXG4gICAgICAgICAgICB2YXIgYW5jaG9yWSA9IE1hdGguZmxvb3IodGhpcy5oZWlnaHQgKiB0aGlzLnRleHRCYXNlbGluZV8gLSB0aGlzLm9mZnNldFlfKTtcclxuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0O1xyXG4gICAgICAgICAgICB2YXIgYm90dG9tTGVmdCA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgYm90dG9tUmlnaHQgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHRvcExlZnQgPSBbXTtcclxuICAgICAgICAgICAgdmFyIHRvcFJpZ2h0ID0gW107XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXRYLCBvZmZzZXRZO1xyXG4gICAgICAgICAgICB2YXIgcGl4ZWxDb29yZGluYXRlID0gKDxhbnk+b2wpLnRyYW5zZm9ybS5hcHBseShjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSxcclxuICAgICAgICAgICAgICAgIFt4IC0gdGhpcy5vcmlnaW5bMF0gKyB0aGlzLnNjcmVlblhZWzBdLCB5IC0gdGhpcy5vcmlnaW5bMV0gKyB0aGlzLnNjcmVlblhZWzFdXSk7XHJcbiAgICAgICAgICAgIHggPSBwaXhlbENvb3JkaW5hdGVbMF07XHJcbiAgICAgICAgICAgIHkgPSBwaXhlbENvb3JkaW5hdGVbMV07XHJcblxyXG4gICAgICAgICAgICAvLyBib3R0b20tbGVmdCBjb3JuZXJcclxuICAgICAgICAgICAgb2Zmc2V0WCA9IC1zY2FsZSAqIGFuY2hvclg7XHJcbiAgICAgICAgICAgIG9mZnNldFkgPSAtc2NhbGUgKiAoaGVpZ2h0IC0gYW5jaG9yWSk7XHJcbiAgICAgICAgICAgIGJvdHRvbUxlZnRbMF0gPSB4ICsgKG9mZnNldFggKiBjb3MgLSBvZmZzZXRZICogc2luKTtcclxuICAgICAgICAgICAgYm90dG9tTGVmdFsxXSA9IHkgKyAob2Zmc2V0WCAqIHNpbiArIG9mZnNldFkgKiBjb3MpO1xyXG5cclxuICAgICAgICAgICAgLy8gYm90dG9tLXJpZ2h0IGNvcm5lclxyXG4gICAgICAgICAgICBvZmZzZXRYID0gc2NhbGUgKiAod2lkdGggLSBhbmNob3JYKTtcclxuICAgICAgICAgICAgb2Zmc2V0WSA9IC1zY2FsZSAqIChoZWlnaHQgLSBhbmNob3JZKTtcclxuICAgICAgICAgICAgYm90dG9tUmlnaHRbMF0gPSB4ICsgKG9mZnNldFggKiBjb3MgLSBvZmZzZXRZICogc2luKTtcclxuICAgICAgICAgICAgYm90dG9tUmlnaHRbMV0gPSB5ICsgKG9mZnNldFggKiBzaW4gKyBvZmZzZXRZICogY29zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRvcC1yaWdodCBjb3JuZXJcclxuICAgICAgICAgICAgb2Zmc2V0WCA9IHNjYWxlICogKHdpZHRoIC0gYW5jaG9yWCk7XHJcbiAgICAgICAgICAgIG9mZnNldFkgPSBzY2FsZSAqIGFuY2hvclk7XHJcbiAgICAgICAgICAgIHRvcFJpZ2h0WzBdID0geCArIChvZmZzZXRYICogY29zIC0gb2Zmc2V0WSAqIHNpbik7XHJcbiAgICAgICAgICAgIHRvcFJpZ2h0WzFdID0geSArIChvZmZzZXRYICogc2luICsgb2Zmc2V0WSAqIGNvcyk7XHJcblxyXG4gICAgICAgICAgICAvLyB0b3AtbGVmdCBjb3JuZXJcclxuICAgICAgICAgICAgb2Zmc2V0WCA9IC1zY2FsZSAqIGFuY2hvclg7XHJcbiAgICAgICAgICAgIG9mZnNldFkgPSBzY2FsZSAqIGFuY2hvclk7XHJcbiAgICAgICAgICAgIHRvcExlZnRbMF0gPSB4ICsgKG9mZnNldFggKiBjb3MgLSBvZmZzZXRZICogc2luKTtcclxuICAgICAgICAgICAgdG9wTGVmdFsxXSA9IHkgKyAob2Zmc2V0WCAqIHNpbiArIG9mZnNldFkgKiBjb3MpO1xyXG5cclxuICAgICAgICAgICAgKDxhbnk+b2wpLmV4dGVudC5leHRlbmRDb29yZGluYXRlKGRlY2x1dHRlckdyb3VwLCBib3R0b21MZWZ0KTtcclxuICAgICAgICAgICAgKDxhbnk+b2wpLmV4dGVudC5leHRlbmRDb29yZGluYXRlKGRlY2x1dHRlckdyb3VwLCBib3R0b21SaWdodCk7XHJcbiAgICAgICAgICAgICg8YW55Pm9sKS5leHRlbnQuZXh0ZW5kQ29vcmRpbmF0ZShkZWNsdXR0ZXJHcm91cCwgdG9wUmlnaHQpO1xyXG4gICAgICAgICAgICAoPGFueT5vbCkuZXh0ZW50LmV4dGVuZENvb3JkaW5hdGUoZGVjbHV0dGVyR3JvdXAsIHRvcExlZnQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRlY2x1dHRlckFyZ3MgPSBbe1xyXG4gICAgICAgICAgICAgICAgYW5jaG9yWCxcclxuICAgICAgICAgICAgICAgIGFuY2hvclksXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbixcclxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlczogW3BhcnRbMF0sIHBhcnRbMV1dLFxyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICB9LCB0aGlzXTtcclxuICAgICAgICAgICAgZGVjbHV0dGVyR3JvdXAucHVzaChkZWNsdXR0ZXJBcmdzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAoPGFueT5vbC5yZW5kZXIpLndlYmdsLlRleHRSZXBsYXkucHJvdG90eXBlLmRyYXdMaW5lU3RyaW5nVGV4dCA9IGZ1bmN0aW9uIChnZW9tZXRyeSwgZmVhdHVyZSwgZnJhbWVTdGF0ZSwgZGVjbHV0dGVyR3JvdXApIHtcclxuICAgICAgICAgICAgdmFyIG9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBzdHJpZGUgPSAyO1xyXG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IGZyYW1lU3RhdGUuY3VycmVudFJlc29sdXRpb247XHJcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gdGhpcy50ZXh0XztcclxuICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtID0gZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIG1heEFuZ2xlID0gdGhpcy5tYXhBbmdsZV87XHJcbiAgICAgICAgICAgIHZhciBsaW5lU3RyaW5nQ29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgdmFyIGVuZCA9IGxpbmVTdHJpbmdDb29yZGluYXRlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHZhciBzY3JlZW5YWSA9IHRoaXMuc2NyZWVuWFk7XHJcbiAgICAgICAgICAgIHZhciB0aWxlUGl4ZWxFeHRlbnQgPSB0aGlzLnRpbGVQaXhlbEV4dGVudDsgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgcGF0aExlbmd0aCA9ICg8YW55Pm9sLmdlb20pLmZsYXQubGVuZ3RoLmxpbmVTdHJpbmcobGluZVN0cmluZ0Nvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCByZXNvbHV0aW9uKTtcclxuICAgICAgICAgICAgbGV0IHRleHRMZW5ndGggPSB0aGlzLmdldFRleHRTaXplXyhbdGV4dF0pWzBdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYodGhpcy5sYWJlbCl7XHJcbiAgICAgICAgICAgICAgICBwYXRoTGVuZ3RoID0gdGV4dExlbmd0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0ZXh0TGVuZ3RoICogMS4yIDw9IHBhdGhMZW5ndGgpIHsgIFxyXG4gICAgICAgICAgICAgICAgbGV0IGRlY2x1dHRlckdyb3VwcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHRlbnQgPSAoPGFueT5vbC5leHRlbnQpLmNyZWF0ZU9yVXBkYXRlRW1wdHkoKTsgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgcmF0aW8gPSAxLjE5NDMyODU2Njk1NTg3OSAvIHJlc29sdXRpb247XHJcblxyXG4gICAgICAgICAgICAgICAgaWYocmF0aW8gPj0gMyl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW8gLz0gMjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBkaXN0YW5jZSA9IDE4MCAqIHJhdGlvO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRtcExlbmd0aCA9IHBhdGhMZW5ndGggLSB0ZXh0TGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdmFyIGNlbnRlclBvaW50ID0gdG1wTGVuZ3RoIC8gMjtcclxuICAgICAgICAgICAgICAgIHZhciBsZWZ0UG9pbnQgPSBjZW50ZXJQb2ludDtcclxuICAgICAgICAgICAgICAgIHZhciByaWdodFBvaW50ID0gY2VudGVyUG9pbnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnRBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcG9pbnRBcnJheS5wdXNoKGNlbnRlclBvaW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihmcmFtZVN0YXRlLmN1cnJlbnRSZXNvbHV0aW9uIDwgMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUobGVmdFBvaW50ID4gKCh0ZXh0TGVuZ3RoIC8gMikgKyBkaXN0YW5jZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0UG9pbnQgPSBsZWZ0UG9pbnQgLSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRBcnJheS5wdXNoKGxlZnRQb2ludCk7ICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUocmlnaHRQb2ludCA8ICgocGF0aExlbmd0aCAtIHRleHRMZW5ndGggLyAyKSAtIGRpc3RhbmNlKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0UG9pbnQgPSByaWdodFBvaW50ICsgZGlzdGFuY2U7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRBcnJheS5wdXNoKHJpZ2h0UG9pbnQpOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBsZW4gPSAwOyBsZW4gPCBwb2ludEFycmF5Lmxlbmd0aDsgbGVuKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGVtcERlY2x1dHRlckdyb3VwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWNsdXR0ZXJHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0ZW1wRGVjbHV0dGVyR3JvdXAgPSBmZWF0dXJlQ2FsbGJhY2sgPyBudWxsIDogZGVjbHV0dGVyR3JvdXAuc2xpY2UoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBEZWNsdXR0ZXJHcm91cCA9IGRlY2x1dHRlckdyb3VwLnNsaWNlKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnRNID0gcG9pbnRBcnJheVtsZW5dOyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnRzID0gKDxhbnk+b2wuZ2VvbSkuZmxhdC50ZXh0cGF0aC5saW5lU3RyaW5nKGxpbmVTdHJpbmdDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIDIsIHRleHQsIHRoaXMsIHN0YXJ0TSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhBbmdsZSwgcmVzb2x1dGlvbiwgc2NyZWVuWFksIGNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLCB0aGlzLm9yaWdpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYocGFydHMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSBwYXJ0c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaW5lcyA9IHBhcnRbNF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dFNpemUgPSB0aGlzLmdldFRleHRTaXplXyhbbGluZXNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGggPSB0ZXh0U2l6ZVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gdGV4dFNpemVbMV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXBsYXlDaGFySW1hZ2VfKGZyYW1lU3RhdGUsIHRlbXBEZWNsdXR0ZXJHcm91cCwgcGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGZyYW1lU3RhdGUuY29udGV4dC5jYW52YXNfO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW50ZXJzZWN0cyA9IHRlbXBEZWNsdXR0ZXJHcm91cFswXSA8PSBjYW52YXMud2lkdGggJiYgdGVtcERlY2x1dHRlckdyb3VwWzJdID49IDAgJiYgdGVtcERlY2x1dHRlckdyb3VwWzFdIDw9IGNhbnZhcy5oZWlnaHQgJiYgdGVtcERlY2x1dHRlckdyb3VwWzNdID49IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkZWNsdXR0ZXJHcm91cCl7ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIWludGVyc2VjdHMgJiYgZGVjbHV0dGVyR3JvdXBbNF0gPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVjbHV0dGVyR3JvdXBzLnB1c2godGVtcERlY2x1dHRlckdyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBkID0gMDsgZCA8IGRlY2x1dHRlckdyb3Vwcy5sZW5ndGg7IGQrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXREZWNsdXR0ZXJHcm91cCA9IGRlY2x1dHRlckdyb3Vwc1tkXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0RGVjbHV0dGVyR3JvdXAgJiYgdGFyZ2V0RGVjbHV0dGVyR3JvdXAubGVuZ3RoID4gNSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RXh0ZW50ID0gW3RhcmdldERlY2x1dHRlckdyb3VwWzBdLCB0YXJnZXREZWNsdXR0ZXJHcm91cFsxXSwgdGFyZ2V0RGVjbHV0dGVyR3JvdXBbMl0sIHRhcmdldERlY2x1dHRlckdyb3VwWzNdXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHRhcmdldEV4dGVudFswXSA+IHRpbGVQaXhlbEV4dGVudFswXSAmJiB0YXJnZXRFeHRlbnRbMV0gPiB0aWxlUGl4ZWxFeHRlbnRbM10gJiYgdGFyZ2V0RXh0ZW50WzJdIDwgdGlsZVBpeGVsRXh0ZW50WzJdICYmIHRhcmdldEV4dGVudFszXSA8IHRpbGVQaXhlbEV4dGVudFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJEZWNsdXR0ZXJfKHRhcmdldERlY2x1dHRlckdyb3VwLCBmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICg8YW55Pm9sLnJlbmRlcikud2ViZ2wuVGV4dFJlcGxheS5wcm90b3R5cGUuZHJhd1RleHQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YXIgdGhpcyQxID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIHRleHQgPSBvcHRpb25zLnRleHQ7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0IHx8IHRoaXMubGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVuZCA9IDI7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RyaWRlID0gMjsgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRJbmRpY2VzLnB1c2godGhpcy5pbmRpY2VzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBvcHRpb25zLmZsYXRDb29yZGluYXRlcztcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMubGFiZWwpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IHRoaXMubGFiZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2Uud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9yaWdpblggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3JpZ2luWSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy53aWR0aCA9IHdpZHRoICsgbGluZVdpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZVdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJbWFnZTtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmltYWdlc18ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VzXy5wdXNoKGltYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SW1hZ2UgPSB0aGlzLmltYWdlc19bdGhpcy5pbWFnZXNfLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKDxhbnk+b2wpLmdldFVpZChjdXJyZW50SW1hZ2UpICE9ICg8YW55Pm9sKS5nZXRVaWQoaW1hZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdyb3VwSW5kaWNlcy5wdXNoKHRoaXMuaW5kaWNlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZXNfLnB1c2goaW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1RleHRfKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ2x5cGhBdGxhcyA9IHRoaXMuY3VyckF0bGFzXztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaiwgamosIGN1cnJYLCBjdXJyWSwgY2hhckFyciwgY2hhckluZm87XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuY2hvclggPSBvcHRpb25zLmFuY2hvclg7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuY2hvclkgPSBvcHRpb25zLmFuY2hvclk7ICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5lV2lkdGggPSAodGhpcy5zdGF0ZV8ubGluZVdpZHRoIC8gMikgKiB0aGlzLnN0YXRlXy5zY2FsZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzJDEucm90YXRpb24gPSBvcHRpb25zLnJvdGF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJYID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyWSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhckFyciA9IHRleHQuc3BsaXQoJycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAwLCBqaiA9IGNoYXJBcnIubGVuZ3RoOyBqIDwgamo7ICsraikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFySW5mbyA9IGdseXBoQXRsYXMuYXRsYXMuZ2V0SW5mbyhjaGFyQXJyW2pdKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFySW5mbykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0gY2hhckluZm8uaW1hZ2U7ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyQxLmFuY2hvclggPSBhbmNob3JYIC0gY3Vyclg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzJDEuYW5jaG9yWSA9IGFuY2hvclkgLSBjdXJyWTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMkMS5vcmlnaW5YID0gaiA9PT0gMCA/IGNoYXJJbmZvLm9mZnNldFggLSBsaW5lV2lkdGggOiBjaGFySW5mby5vZmZzZXRYO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyQxLm9yaWdpblkgPSBjaGFySW5mby5vZmZzZXRZO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyQxLmhlaWdodCA9IGdseXBoQXRsYXMuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyQxLndpZHRoID0gaiA9PT0gMCB8fCBqID09PSBjaGFyQXJyLmxlbmd0aCAtIDEgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdseXBoQXRsYXMud2lkdGhbY2hhckFycltqXV0gKyBsaW5lV2lkdGggOiBnbHlwaEF0bGFzLndpZHRoW2NoYXJBcnJbal1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyQxLmltYWdlSGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyQxLmltYWdlV2lkdGggPSBpbWFnZS53aWR0aDtcclxuICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMkMS5pbWFnZXNfLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMkMS5pbWFnZXNfLnB1c2goaW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudEltYWdlID0gdGhpcyQxLmltYWdlc19bdGhpcyQxLmltYWdlc18ubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCg8YW55Pm9sKS5nZXRVaWQoY3VycmVudEltYWdlKSAhPSAoPGFueT5vbCkuZ2V0VWlkKGltYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzJDEuZ3JvdXBJbmRpY2VzLnB1c2godGhpcyQxLmluZGljZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyQxLmltYWdlc18ucHVzaChpbWFnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzJDEuZHJhd1RleHRfKGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyclggKz0gdGhpcyQxLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICg8YW55Pm9sLnJlbmRlcikud2ViZ2wuSW1hZ2VSZXBsYXkucHJvdG90eXBlLmRyYXdQb2ludCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSAwO1xyXG4gICAgICAgICAgICB2YXIgZW5kID0gMjtcclxuICAgICAgICAgICAgdmFyIHN0cmlkZSA9IDI7ICAgIFxyXG4gICAgICAgICAgICB2YXIgZmxhdENvb3JkaW5hdGVzID0gb3B0aW9ucy5mbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmRyYXdDb29yZGluYXRlcyhcclxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcywgb2Zmc2V0LCBlbmQsIHN0cmlkZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQmxvY2tpbmcgcmVwZWF0XHJcbiAgICAgICAgKDxhbnk+b2wucmVuZGVyKS53ZWJnbC5SZXBsYXkucHJvdG90eXBlLnJlcGxheUltYWdlXyA9IGZ1bmN0aW9uIChmcmFtZVN0YXRlLCBkZWNsdXR0ZXJHcm91cCwgZ2VvbWV0cnkpe1xyXG4gICAgICAgICAgICB2YXIgYm94ID0gW107XHJcbiAgICAgICAgICAgIHZhciBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgdmFyIHNjcmVlblhZID0gdGhpcy5zY3JlZW5YWTtcclxuICAgICAgICAgICAgdmFyIHBpeGVsQ29vcmRpbmF0ZSA9ICg8YW55Pm9sKS50cmFuc2Zvcm0uYXBwbHkoZnJhbWVTdGF0ZS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSwgW2ZsYXRDb29yZGluYXRlc1swXSAtIHRoaXMub3JpZ2luWzBdICsgc2NyZWVuWFlbMF0sIGZsYXRDb29yZGluYXRlc1sxXSAtIHRoaXMub3JpZ2luWzFdICsgc2NyZWVuWFlbMV1dKTtcclxuICAgICAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5zY2FsZTtcclxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGZyYW1lU3RhdGUuY29udGV4dC5jYW52YXNfO1xyXG4gICAgICAgICAgICB2YXIgcm90YXRpb24gPSAwOyAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgdmFyIG9mZnNldFggPSAtc2NhbGUgKiAodGhpcy5hbmNob3JYKTtcclxuICAgICAgICAgICAgdmFyIG9mZnNldFkgPSAtc2NhbGUgKiAodGhpcy5oZWlnaHQgLSB0aGlzLmFuY2hvclkpO1xyXG4gICAgICAgICAgICBib3hbMF0gPSBwaXhlbENvb3JkaW5hdGVbMF0gKyBvZmZzZXRYO1xyXG4gICAgICAgICAgICBib3hbM10gPSBwaXhlbENvb3JkaW5hdGVbMV0gLSBvZmZzZXRZO1xyXG5cclxuICAgICAgICAgICAgb2Zmc2V0WCA9IHNjYWxlICogKHRoaXMud2lkdGggLSB0aGlzLmFuY2hvclgpO1xyXG4gICAgICAgICAgICBvZmZzZXRZID0gc2NhbGUgKiB0aGlzLmFuY2hvclk7ICAgICAgICBcclxuICAgICAgICAgICAgYm94WzJdID0gcGl4ZWxDb29yZGluYXRlWzBdICsgb2Zmc2V0WDtcclxuICAgICAgICAgICAgYm94WzFdID0gcGl4ZWxDb29yZGluYXRlWzFdIC0gb2Zmc2V0WTtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbnRlcnNlY3RzID0gYm94WzBdIDw9IGNhbnZhcy53aWR0aCAmJiBib3hbMl0gPj0gMCAmJiBib3hbMV0gPD0gY2FudmFzLmhlaWdodCAmJiBib3hbM10gPj0gMDtcclxuICAgICAgICAgICAgaWYoZGVjbHV0dGVyR3JvdXApeyAgICBcclxuICAgICAgICAgICAgICAgIGlmKCFpbnRlcnNlY3RzICYmIGRlY2x1dHRlckdyb3VwWzRdID09IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAoPGFueT5vbCkuZXh0ZW50LmV4dGVuZChkZWNsdXR0ZXJHcm91cCwgYm94KTtcclxuICAgICAgICAgICAgICAgIHZhciBkZWNsdXR0ZXJBcmdzID0gW3tcclxuICAgICAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgcm90YXRpb25cclxuICAgICAgICAgICAgICAgIH0sIHRoaXNdO1xyXG4gICAgICAgICAgICAgICAgZGVjbHV0dGVyR3JvdXAucHVzaChkZWNsdXR0ZXJBcmdzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICg8YW55Pm9sLmdlb20pLmZsYXQudGV4dHBhdGgubGluZVN0cmluZyA9IGZ1bmN0aW9uIChcclxuICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCB0ZXh0LCB3ZWJnbFRleHRSZXBsYXksIFxyXG4gICAgICAgICAgICBzdGFydE0sIG1heEFuZ2xlLCByZXNvbHV0aW9uLCBzY3JlZW5YWSwgY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIG9yaWdpbikge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gS2VlcCB0ZXh0IHVwcmlnaHRcclxuICAgICAgICAgICAgdmFyIHJldmVyc2UgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0XSA+IGZsYXRDb29yZGluYXRlc1tlbmQgLSBzdHJpZGVdO1xyXG5cclxuICAgICAgICAgICAgdmFyIG51bUNoYXJzID0gdGV4dC5sZW5ndGg7XHJcbiAgICBcclxuICAgICAgICAgICAgdmFyIHgxID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XHJcbiAgICAgICAgICAgIHZhciB5MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcclxuICAgICAgICAgICAgb2Zmc2V0ICs9IHN0cmlkZTtcclxuICAgICAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XHJcbiAgICAgICAgICAgIHZhciB5MiA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXQgKyAxXTtcclxuICAgICAgICAgICAgdmFyIHNlZ21lbnRNID0gMDtcclxuICAgICAgICAgICAgdmFyIHNlZ21lbnRMZW5ndGggPSBNYXRoLnNxcnQoTWF0aC5wb3coeDIgLSB4MSwgMikgKyBNYXRoLnBvdyh5MiAtIHkxLCAyKSkgLyByZXNvbHV0aW9uO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHZhciBjaHVuayA9ICcnO1xyXG4gICAgICAgICAgICB2YXIgY2h1bmtMZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSwgaW5kZXgsIHByZXZpb3VzQW5nbGU7ICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQ2hhcnM7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSByZXZlcnNlID8gbnVtQ2hhcnMgLSBpIC0gMSA6IGk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhciA9IHRleHQuY2hhckF0KGluZGV4KTtcclxuICAgICAgICAgICAgICAgIGNodW5rID0gcmV2ZXJzZSA/IGNoYXIgKyBjaHVuayA6IGNodW5rICsgY2hhcjtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBjaGFyTGVuZ3RoID0gd2ViZ2xUZXh0UmVwbGF5LmdldFRleHRTaXplXyhbY2h1bmtdKVswXSAtIGNodW5rTGVuZ3RoOyAgICBcclxuICAgICAgICAgICAgICAgIHZhciBjaGFyTGVuZ3RoID0gd2ViZ2xUZXh0UmVwbGF5LmdldFRleHRTaXplXyhbY2hhcl0pWzBdOyAgICBcclxuICAgICAgICAgICAgICAgIGNodW5rTGVuZ3RoICs9IGNoYXJMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hhck0gPSBzdGFydE0gKyBjaGFyTGVuZ3RoIC8gMjtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBsYWJlbCBleGNlZWQgdGhlIHJvYWQgcmFuZ2VcclxuICAgICAgICAgICAgICAgIC8vIGlmKG9mZnNldCA+PSBlbmQgLSBzdHJpZGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA8IGVuZCAtIHN0cmlkZSAmJiBzZWdtZW50TSArIHNlZ21lbnRMZW5ndGggPCBjaGFyTSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHgxID0geDI7XHJcbiAgICAgICAgICAgICAgICAgICAgeTEgPSB5MjtcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gc3RyaWRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHgyID0gZmxhdENvb3JkaW5hdGVzW29mZnNldF07XHJcbiAgICAgICAgICAgICAgICAgICAgeTIgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgc2VnbWVudE0gKz0gc2VnbWVudExlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBzZWdtZW50TGVuZ3RoID0gTWF0aC5zcXJ0KE1hdGgucG93KHgyIC0geDEsIDIpICsgTWF0aC5wb3coeTIgLSB5MSwgMikpIC8gcmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBzZWdtZW50UG9zID0gY2hhck0gLSBzZWdtZW50TTtcclxuICAgICAgICAgICAgICAgIHZhciBhbmdsZSA9IE1hdGguYXRhbjIoeTIgLSB5MSwgeDIgLSB4MSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmV2ZXJzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ2xlICs9IGFuZ2xlID4gMCA/IC1NYXRoLlBJIDogTWF0aC5QSTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwcmV2aW91c0FuZ2xlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBhbmdsZSAtIHByZXZpb3VzQW5nbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgKz0gKGRlbHRhID4gTWF0aC5QSSkgPyAtMiAqIE1hdGguUEkgOiAoZGVsdGEgPCAtTWF0aC5QSSkgPyAyICogTWF0aC5QSSA6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRlbHRhKSA+IG1heEFuZ2xlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBpbnRlcnBvbGF0ZSA9IHNlZ21lbnRQb3MgLyBzZWdtZW50TGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSAoPGFueT5vbCkubWF0aC5sZXJwKHgxLCB4MiwgaW50ZXJwb2xhdGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkgPSAoPGFueT5vbCkubWF0aC5sZXJwKHkxLCB5MiwgaW50ZXJwb2xhdGUpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQW5nbGUgPT0gYW5nbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmV2ZXJzZSkgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbMF0gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhWzFdID0geTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVsyXSA9IGNoYXJMZW5ndGggLyAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkYXRhWzRdID0gY2h1bms7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNodW5rID0gY2hhcjtcclxuICAgICAgICAgICAgICAgICAgICBjaHVua0xlbmd0aCA9IGNoYXJMZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IFt4LCB5LCBjaGFyTGVuZ3RoIC8gMiwgLWFuZ2xlLCBjaHVua107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnVuc2hpZnQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQW5nbGUgPSBhbmdsZTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHN0YXJ0TSArPSBjaGFyTGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICg8YW55Pm9sLmdlb20pLmZsYXQubGVuZ3RoLmxpbmVTdHJpbmcgPSBmdW5jdGlvbiAoZmxhdENvb3JkaW5hdGVzLCBvZmZzZXQsIGVuZCwgc3RyaWRlLCByZXNvbHV0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciB4MSA9IGZsYXRDb29yZGluYXRlc1tvZmZzZXRdO1xyXG4gICAgICAgICAgICB2YXIgeTEgPSBmbGF0Q29vcmRpbmF0ZXNbb2Zmc2V0ICsgMV07XHJcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSAwO1xyXG4gICAgICAgICAgICB2YXIgaTtcclxuICAgICAgICAgICAgZm9yIChpID0gb2Zmc2V0ICsgc3RyaWRlOyBpIDwgZW5kOyBpICs9IHN0cmlkZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHgyID0gZmxhdENvb3JkaW5hdGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkyID0gZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcclxuICAgICAgICAgICAgICAgIGxlbmd0aCArPSAoTWF0aC5zcXJ0KCh4MiAtIHgxKSAqICh4MiAtIHgxKSArICh5MiAtIHkxKSAqICh5MiAtIHkxKSkgLyByZXNvbHV0aW9uKTtcclxuICAgICAgICAgICAgICAgIHgxID0geDI7XHJcbiAgICAgICAgICAgICAgICB5MSA9IHkyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBsZW5ndGg7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyB3ZWJnbCByZW5kZXJcclxuICAgICAgICAoPGFueT5vbCkucmVuZGVyLndlYmdsLlJlcGxheS5wcm90b3R5cGUud2ViZ2xSZXBsYXlfID0gZnVuY3Rpb24gKFxyXG4gICAgICAgICAgICBjb250ZXh0LCBza2lwcGVkRmVhdHVyZXNIYXNoLCBmZWF0dXJlQ2FsbGJhY2ssIG9wdF9oaXRFeHRlbnQsIHNjcmVlblhZXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHZhciBmcmFtZVN0YXRlID0gY29udGV4dC5mcmFtZVN0YXRlO1xyXG4gICAgICAgICAgICB2YXIgbGF5ZXJTdGF0ZSA9IGNvbnRleHQubGF5ZXJTdGF0ZTtcclxuICAgICAgICAgICAgdmFyIHZpZXdTdGF0ZSA9IGZyYW1lU3RhdGUudmlld1N0YXRlO1xyXG4gICAgICAgICAgICB2YXIgY2VudGVyID0gdmlld1N0YXRlLmNlbnRlcjtcclxuICAgICAgICAgICAgdmFyIHNpemUgPSBmcmFtZVN0YXRlLnNpemU7XHJcbiAgICAgICAgICAgIHZhciBwaXhlbFJhdGlvID0gZnJhbWVTdGF0ZS5waXhlbFJhdGlvO1xyXG4gICAgICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IHZpZXdTdGF0ZS5yZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICB2YXIgb3BhY2l0eSA9IGxheWVyU3RhdGUub3BhY2l0eTtcclxuICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gdmlld1N0YXRlLnJvdGF0aW9uO1xyXG4gICAgICAgICAgICB2YXIgb25lQnlPbmUgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgZ2wgPSBjb250ZXh0LmdldEdMKCk7XHJcbiAgICAgICAgICAgIHZhciB0bXBTdGVuY2lsLCB0bXBTdGVuY2lsRnVuYywgdG1wU3RlbmNpbE1hc2tWYWwsIHRtcFN0ZW5jaWxSZWYsIHRtcFN0ZW5jaWxNYXNrLFxyXG4gICAgICAgICAgICAgICAgdG1wU3RlbmNpbE9wRmFpbCwgdG1wU3RlbmNpbE9wUGFzcywgdG1wU3RlbmNpbE9wWkZhaWw7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5saW5lU3RyaW5nUmVwbGF5KSB7XHJcbiAgICAgICAgICAgICAgICB0bXBTdGVuY2lsID0gZ2wuaXNFbmFibGVkKGdsLlNURU5DSUxfVEVTVCk7XHJcbiAgICAgICAgICAgICAgICB0bXBTdGVuY2lsRnVuYyA9IGdsLmdldFBhcmFtZXRlcihnbC5TVEVOQ0lMX0ZVTkMpO1xyXG4gICAgICAgICAgICAgICAgdG1wU3RlbmNpbE1hc2tWYWwgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuU1RFTkNJTF9WQUxVRV9NQVNLKTtcclxuICAgICAgICAgICAgICAgIHRtcFN0ZW5jaWxSZWYgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuU1RFTkNJTF9SRUYpO1xyXG4gICAgICAgICAgICAgICAgdG1wU3RlbmNpbE1hc2sgPSBnbC5nZXRQYXJhbWV0ZXIoZ2wuU1RFTkNJTF9XUklURU1BU0spO1xyXG4gICAgICAgICAgICAgICAgdG1wU3RlbmNpbE9wRmFpbCA9IGdsLmdldFBhcmFtZXRlcihnbC5TVEVOQ0lMX0ZBSUwpO1xyXG4gICAgICAgICAgICAgICAgdG1wU3RlbmNpbE9wUGFzcyA9IGdsLmdldFBhcmFtZXRlcihnbC5TVEVOQ0lMX1BBU1NfREVQVEhfUEFTUyk7XHJcbiAgICAgICAgICAgICAgICB0bXBTdGVuY2lsT3BaRmFpbCA9IGdsLmdldFBhcmFtZXRlcihnbC5TVEVOQ0lMX1BBU1NfREVQVEhfRkFJTCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZ2wuZW5hYmxlKGdsLlNURU5DSUxfVEVTVCk7XHJcbiAgICAgICAgICAgICAgICBnbC5jbGVhcihnbC5TVEVOQ0lMX0JVRkZFUl9CSVQpO1xyXG4gICAgICAgICAgICAgICAgZ2wuc3RlbmNpbE1hc2soMjU1KTtcclxuICAgICAgICAgICAgICAgIGdsLnN0ZW5jaWxGdW5jKGdsLkFMV0FZUywgMSwgMjU1KTtcclxuICAgICAgICAgICAgICAgIGdsLnN0ZW5jaWxPcChnbC5LRUVQLCBnbC5LRUVQLCBnbC5SRVBMQUNFKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzLmxpbmVTdHJpbmdSZXBsYXkucmVwbGF5KGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgY2VudGVyLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgc2l6ZSwgcGl4ZWxSYXRpbyxcclxuICAgICAgICAgICAgICAgIC8vICAgICBvcGFjaXR5LCBza2lwcGVkRmVhdHVyZXNIYXNoLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgIGZlYXR1cmVDYWxsYmFjaywgb25lQnlPbmUsIG9wdF9oaXRFeHRlbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGdsLnN0ZW5jaWxNYXNrKDApO1xyXG4gICAgICAgICAgICAgICAgLy8gZ2wuc3RlbmNpbEZ1bmMoY29udGV4dC5OT1RFUVVBTCwgMSwgMjU1KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29udGV4dC5iaW5kQnVmZmVyKGdsLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0aWNlc0J1ZmZlcik7XHJcbiAgICAgICAgICAgIGNvbnRleHQuYmluZEJ1ZmZlcihnbC5FTEVNRU5UX0FSUkFZX0JVRkZFUiwgdGhpcy5pbmRpY2VzQnVmZmVyKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbnMgPSB0aGlzLnNldFVwUHJvZ3JhbShnbCwgY29udGV4dCwgc2l6ZSwgcGl4ZWxSYXRpbyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gc2V0IHRoZSBcInVuaWZvcm1cIiB2YWx1ZXNcclxuICAgICAgICAgICAgdmFyIHByb2plY3Rpb25NYXRyaXggPSAoPGFueT5vbCkudHJhbnNmb3JtLnJlc2V0KHRoaXMucHJvamVjdGlvbk1hdHJpeF8pO1xyXG4gICAgICAgICAgICAoPGFueT5vbCkudHJhbnNmb3JtLnNjYWxlKHByb2plY3Rpb25NYXRyaXgsIDIgLyAocmVzb2x1dGlvbiAqIHNpemVbMF0pLCAyIC8gKHJlc29sdXRpb24gKiBzaXplWzFdKSk7XHJcbiAgICAgICAgICAgICg8YW55Pm9sKS50cmFuc2Zvcm0ucm90YXRlKHByb2plY3Rpb25NYXRyaXgsIC1yb3RhdGlvbik7XHJcbiAgICAgICAgICAgICg8YW55Pm9sKS50cmFuc2Zvcm0udHJhbnNsYXRlKHByb2plY3Rpb25NYXRyaXgsIC0oY2VudGVyWzBdIC0gc2NyZWVuWFlbMF0pLCAtKGNlbnRlclsxXSAtIHNjcmVlblhZWzFdKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgb2Zmc2V0U2NhbGVNYXRyaXggPSAoPGFueT5vbCkudHJhbnNmb3JtLnJlc2V0KHRoaXMub2Zmc2V0U2NhbGVNYXRyaXhfKTtcclxuICAgICAgICAgICAgKDxhbnk+b2wpLnRyYW5zZm9ybS5zY2FsZShvZmZzZXRTY2FsZU1hdHJpeCwgMiAvIHNpemVbMF0sIDIgLyBzaXplWzFdKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvZmZzZXRSb3RhdGVNYXRyaXggPSAoPGFueT5vbCkudHJhbnNmb3JtLnJlc2V0KHRoaXMub2Zmc2V0Um90YXRlTWF0cml4Xyk7XHJcbiAgICAgICAgICAgIGlmIChyb3RhdGlvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgKDxhbnk+b2wpLnRyYW5zZm9ybS5yb3RhdGUob2Zmc2V0Um90YXRlTWF0cml4LCAtcm90YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBnbC51bmlmb3JtTWF0cml4NGZ2KGxvY2F0aW9ucy51X3Byb2plY3Rpb25NYXRyaXgsIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgKDxhbnk+b2wpLnZlYy5NYXQ0LmZyb21UcmFuc2Zvcm0odGhpcy50bXBNYXQ0XywgcHJvamVjdGlvbk1hdHJpeCkpO1xyXG4gICAgICAgICAgICBnbC51bmlmb3JtTWF0cml4NGZ2KGxvY2F0aW9ucy51X29mZnNldFNjYWxlTWF0cml4LCBmYWxzZSxcclxuICAgICAgICAgICAgICAgICg8YW55Pm9sKS52ZWMuTWF0NC5mcm9tVHJhbnNmb3JtKHRoaXMudG1wTWF0NF8sIG9mZnNldFNjYWxlTWF0cml4KSk7XHJcbiAgICAgICAgICAgIGdsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb25zLnVfb2Zmc2V0Um90YXRlTWF0cml4LCBmYWxzZSxcclxuICAgICAgICAgICAgICAgICg8YW55Pm9sKS52ZWMuTWF0NC5mcm9tVHJhbnNmb3JtKHRoaXMudG1wTWF0NF8sIG9mZnNldFJvdGF0ZU1hdHJpeCkpO1xyXG4gICAgICAgICAgICBnbC51bmlmb3JtMWYobG9jYXRpb25zLnVfb3BhY2l0eSwgb3BhY2l0eSk7IFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gRklYTUUgcmVwbGFjZSB0aGlzIHRlbXAgc29sdXRpb24gd2l0aCB0ZXh0IGNhbGN1bGF0aW9uIGluIHdvcmtlclxyXG4gICAgICAgICAgICBpZih0aGlzIGluc3RhbmNlb2YgKDxhbnk+b2wpLnJlbmRlci53ZWJnbC5UZXh0UmVwbGF5IHx8IHRoaXMgaW5zdGFuY2VvZiAoPGFueT5vbCkucmVuZGVyLndlYmdsLkltYWdlUmVwbGF5KXtcclxuICAgICAgICAgICAgICAgIGdsLnVuaWZvcm0xZihsb2NhdGlvbnMudV96SW5kZXgsIDApO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZih0aGlzIGluc3RhbmNlb2YgKDxhbnk+b2wpLnJlbmRlci53ZWJnbC5MaW5lU3RyaW5nUmVwbGF5KXtcclxuICAgICAgICAgICAgICAgIHRoaXMudV96SW5kZXggPSBsb2NhdGlvbnMudV96SW5kZXg7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMgaW5zdGFuY2VvZiAoPGFueT5vbCkucmVuZGVyLndlYmdsLlBvbHlnb25SZXBsYXkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy51X3pJbmRleCA9IGxvY2F0aW9ucy51X3pJbmRleDtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAvLyBkcmF3IVxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZUNhbGxiYWNrID09PSB1bmRlZmluZWQpIHsgXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdSZXBsYXkoZ2wsIGNvbnRleHQsIHNraXBwZWRGZWF0dXJlc0hhc2gsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGRyYXcgZmVhdHVyZSBieSBmZWF0dXJlIGZvciB0aGUgaGl0LWRldGVjdGlvblxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5kcmF3SGl0RGV0ZWN0aW9uUmVwbGF5KGdsLCBjb250ZXh0LCBza2lwcGVkRmVhdHVyZXNIYXNoLFxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZUNhbGxiYWNrLCBvbmVCeU9uZSwgb3B0X2hpdEV4dGVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGRpc2FibGUgdGhlIHZlcnRleCBhdHRyaWIgYXJyYXlzXHJcbiAgICAgICAgICAgIHRoaXMuc2h1dERvd25Qcm9ncmFtKGdsLCBsb2NhdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMubGluZVN0cmluZ1JlcGxheSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0bXBTdGVuY2lsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2wuZGlzYWJsZShnbC5TVEVOQ0lMX1RFU1QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZ2wuY2xlYXIoZ2wuU1RFTkNJTF9CVUZGRVJfQklUKTtcclxuICAgICAgICAgICAgICAgIGdsLnN0ZW5jaWxGdW5jKC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbEZ1bmMpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbFJlZiksIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbE1hc2tWYWwpKTtcclxuICAgICAgICAgICAgICAgIGdsLnN0ZW5jaWxNYXNrKC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbE1hc2spKTtcclxuICAgICAgICAgICAgICAgIGdsLnN0ZW5jaWxPcCgvKiogQHR5cGUge251bWJlcn0gKi8gKHRtcFN0ZW5jaWxPcEZhaWwpLFxyXG4gICAgICAgICAgICAgICAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyAodG1wU3RlbmNpbE9wWkZhaWwpLCAvKiogQHR5cGUge251bWJlcn0gKi8gKHRtcFN0ZW5jaWxPcFBhc3MpKTtcclxuICAgICAgICAgICAgICAgIC8vIGdsLnN0ZW5jaWxNYXNrKDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICg8YW55Pm9sKS5yZW5kZXJlci5jYW52YXMuVmVjdG9yVGlsZUxheWVyLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZSA9IGZ1bmN0aW9uIChjb29yZGluYXRlLCBmcmFtZVN0YXRlLCBoaXRUb2xlcmFuY2UsIGNhbGxiYWNrLCB0aGlzQXJnKSB7XHJcbiAgICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbjtcclxuICAgICAgICAgICAgdmFyIHJvdGF0aW9uID0gZnJhbWVTdGF0ZS52aWV3U3RhdGUucm90YXRpb247XHJcbiAgICAgICAgICAgIGhpdFRvbGVyYW5jZSA9IGhpdFRvbGVyYW5jZSA9PSB1bmRlZmluZWQgPyAwIDogaGl0VG9sZXJhbmNlO1xyXG4gICAgICAgICAgICB2YXIgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsIGJvb2xlYW4+fSAqL1xyXG4gICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7QXJyYXkuPG9sLlZlY3RvckltYWdlVGlsZT59ICovXHJcbiAgICAgICAgICAgIHZhciByZW5kZXJlZFRpbGVzID0gdGhpcy5yZW5kZXJlZFRpbGVzO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IC8qKiBAdHlwZSB7b2wuc291cmNlLlZlY3RvclRpbGV9ICovIChsYXllci5nZXRTb3VyY2UoKSk7XHJcbiAgICAgICAgICAgIHZhciB0aWxlR3JpZCA9IHNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24oZnJhbWVTdGF0ZS52aWV3U3RhdGUucHJvamVjdGlvbik7XHJcbiAgICAgICAgICAgIHZhciBidWZmZXJlZEV4dGVudCwgZm91bmQ7XHJcbiAgICAgICAgICAgIHZhciBpLCBpaSwgcmVwbGF5R3JvdXA7XHJcbiAgICAgICAgICAgIHZhciB0aWxlLCB0aWxlQ29vcmQsIHRpbGVFeHRlbnQ7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0gcmVuZGVyZWRUaWxlcy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICB0aWxlID0gcmVuZGVyZWRUaWxlc1tpXTtcclxuICAgICAgICAgICAgICAgIHRpbGVDb29yZCA9IHRpbGUud3JhcHBlZFRpbGVDb29yZDtcclxuICAgICAgICAgICAgICAgIHRpbGVFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQodGlsZUNvb3JkLCB0aGlzLnRtcEV4dGVudCk7XHJcbiAgICAgICAgICAgICAgICBidWZmZXJlZEV4dGVudCA9IG9sLmV4dGVudC5idWZmZXIodGlsZUV4dGVudCwgaGl0VG9sZXJhbmNlICogcmVzb2x1dGlvbiwgYnVmZmVyZWRFeHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFvbC5leHRlbnQuY29udGFpbnNDb29yZGluYXRlKGJ1ZmZlcmVkRXh0ZW50LCBjb29yZGluYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDAsIHR0ID0gdGlsZS50aWxlS2V5cy5sZW5ndGg7IHQgPCB0dDsgKyt0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXJjZVRpbGUgPSB0aWxlLmdldFRpbGUodGlsZS50aWxlS2V5c1t0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZVRpbGUuZ2V0U3RhdGUoKSA9PSAoPGFueT5vbCkuVGlsZVN0YXRlLkVSUk9SKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXBsYXlHcm91cCA9IHNvdXJjZVRpbGUuZ2V0UmVwbGF5R3JvdXAobGF5ZXIsIHRpbGVDb29yZC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGZvdW5kIHx8IHJlcGxheUdyb3VwLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlLCByZXNvbHV0aW9uLCByb3RhdGlvbiwgaGl0VG9sZXJhbmNlLCB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7b2wuRmVhdHVyZXxvbC5yZW5kZXIuRmVhdHVyZX0gZmVhdHVyZSBGZWF0dXJlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHs/fSBDYWxsYmFjayByZXN1bHQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZmVhdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9ICg8YW55Pm9sKS5nZXRVaWQoZmVhdHVyZSkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGtleSBpbiBmZWF0dXJlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlc1trZXldID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2suY2FsbCh0aGlzQXJnLCBmZWF0dXJlLCBsYXllcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmb3VuZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH1cclxufSIsImltcG9ydCB7IFZlY3RvclRpbGVMYXllciB9IGZyb20gXCIuL2xheWVyL3ZlY3RvclRpbGVMYXllclwiO1xyXG5pbXBvcnQgeyBWZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlIH0gZnJvbSBcIi4vd29ya2VyL3ZlY3RvclRpbGVMYXllclRocmVhZE1vZGVcIjtcclxuXHJcbig8YW55Pm9sKS5tYXBzdWl0ZSA9IHt9O1xyXG5cclxuKDxhbnk+b2wpLm1hcHN1aXRlW1wiVmVjdG9yVGlsZUxheWVyXCJdID0gVmVjdG9yVGlsZUxheWVyO1xyXG4oPGFueT5vbCkubWFwc3VpdGVbXCJWZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlXCJdID0gVmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZTtcclxuXHJcbig8YW55PndpbmRvdylbXCJvbFwiXSA9IG9sOyIsImltcG9ydCB7IFJlcGxheUdyb3VwQ3VzdG9tIH0gZnJvbSBcIi4vcmVwbGF5R3JvdXBDdXN0b21cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9WZWN0b3JUaWxlTGF5ZXJSZW5kZXIgZXh0ZW5kcyAoKDxhbnk+b2wpLnJlbmRlcmVyLmNhbnZhcy5WZWN0b3JUaWxlTGF5ZXIgYXMgeyBuZXcocDogb2wubGF5ZXIuVmVjdG9yVGlsZSk6IGFueTsgfSkge1xyXG4gICAgY29uc3RydWN0b3IobGF5ZXI6IG9sLmxheWVyLlZlY3RvclRpbGUpIHtcclxuICAgICAgICBzdXBlcihsYXllcik7XHJcbiAgICAgICAgdGhpcy5WRUNUT1JfUkVQTEFZUyA9IHRoaXMuVkVDVE9SX1JFUExBWVNfQ1VTVE9NO1xyXG4gICAgICAgIHRoaXMucHJlcGFyZUZyYW1lID0gdGhpcy5wcmVwYXJlRnJhbWVDdXN0b207XHJcbiAgICAgICAgdGhpcy5yZW5kZXJUaWxlSW1hZ2VfID0gdGhpcy5yZW5kZXJUaWxlSW1hZ2VDdXN0b207XHJcbiAgICB9XHJcblxyXG4gICAgVkVDVE9SX1JFUExBWVNfQ1VTVE9NID0ge1xyXG4gICAgICAgIFwiaW1hZ2VcIjogWyg8YW55Pm9sLnJlbmRlcikuUmVwbGF5VHlwZS5ERUZBVUxUXSxcclxuICAgICAgICBcImh5YnJpZFwiOiBbKDxhbnk+b2wucmVuZGVyKS5SZXBsYXlUeXBlLklNQUdFLCAoPGFueT5vbC5yZW5kZXIpLlJlcGxheVR5cGUuVEVYVCwgKDxhbnk+b2wucmVuZGVyKS5SZXBsYXlUeXBlLkRFRkFVTFRdLFxyXG4gICAgICAgIFwidmVjdG9yXCI6ICg8YW55Pm9sKS5yZW5kZXIucmVwbGF5Lk9SREVSXHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyB0aWxlTGF5ZXJQcmVwYXJlRnJhbWVDdXN0b20oZnJhbWVTdGF0ZTogYW55LCBsYXllclN0YXRlOiBhbnkpIHtcclxuICAgICAgICBsZXQgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcclxuICAgICAgICBsZXQgc2l6ZSA9IGZyYW1lU3RhdGUuc2l6ZTtcclxuICAgICAgICBsZXQgdmlld1N0YXRlID0gZnJhbWVTdGF0ZS52aWV3U3RhdGU7XHJcbiAgICAgICAgbGV0IHByb2plY3Rpb24gPSB2aWV3U3RhdGUucHJvamVjdGlvbjtcclxuICAgICAgICBsZXQgdmlld1Jlc29sdXRpb24gPSB2aWV3U3RhdGUucmVzb2x1dGlvbjtcclxuICAgICAgICBsZXQgdmlld0NlbnRlciA9IHZpZXdTdGF0ZS5jZW50ZXI7XHJcblxyXG4gICAgICAgIGxldCB0aWxlTGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XHJcbiAgICAgICAgbGV0IHRpbGVTb3VyY2UgPSAvKiogQHR5cGUge29sLnNvdXJjZS5UaWxlfSAqLyAodGlsZUxheWVyLmdldFNvdXJjZSgpKTtcclxuICAgICAgICBsZXQgc291cmNlUmV2aXNpb24gPSB0aWxlU291cmNlLmdldFJldmlzaW9uKCk7XHJcbiAgICAgICAgbGV0IHRpbGVHcmlkID0gdGlsZVNvdXJjZS5nZXRUaWxlR3JpZEZvclByb2plY3Rpb24ocHJvamVjdGlvbik7XHJcbiAgICAgICAgbGV0IHogPSB0aWxlR3JpZC5nZXRaRm9yUmVzb2x1dGlvbih2aWV3UmVzb2x1dGlvbiwgdGhpcy56RGlyZWN0aW9uKTtcclxuICAgICAgICBsZXQgdGlsZVJlc29sdXRpb24gPSB0aWxlR3JpZC5nZXRSZXNvbHV0aW9uKHopO1xyXG4gICAgICAgIGxldCBvdmVyc2FtcGxpbmcgPSBNYXRoLnJvdW5kKHZpZXdSZXNvbHV0aW9uIC8gdGlsZVJlc29sdXRpb24pIHx8IDE7XHJcbiAgICAgICAgbGV0IGV4dGVudCA9IGZyYW1lU3RhdGUuZXh0ZW50O1xyXG4gICAgICAgIC8vIHVwZGF0ZSBmb3Igd2ViZ2xcclxuICAgICAgICAvLyBsZXQgZXh0ZW50ID0gKDxhbnk+b2wuZXh0ZW50KS5idWZmZXIoZnJhbWVTdGF0ZS5leHRlbnQsXHJcbiAgICAgICAgLy8gICAgIHRpbGVMYXllci5nZXRSZW5kZXJCdWZmZXIoKSAqIHZpZXdSZXNvbHV0aW9uKTtcclxuXHJcbiAgICAgICAgaWYgKGxheWVyU3RhdGUuZXh0ZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZXh0ZW50ID0gb2wuZXh0ZW50LmdldEludGVyc2VjdGlvbihleHRlbnQsIGxheWVyU3RhdGUuZXh0ZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9sLmV4dGVudC5pc0VtcHR5KGV4dGVudCkpIHtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIHRvIHByZXZlbnQgdGhlIHJlbmRlcmluZyBvZiB0aGUgbGF5ZXIuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRpbGVSYW5nZSA9IHRpbGVHcmlkLmdldFRpbGVSYW5nZUZvckV4dGVudEFuZFooZXh0ZW50LCB6KTtcclxuXHJcbiAgICAgICAgLy8gQWRqdXN0IHRpbGUgY2FjaGUgc2l6ZSBhY2NvcmRpbmcgdG8gdGlsZSBSYW5nZSwgVE9ETzogYWRkIGEgcHJvcGVydHkgZm9yIHRoYXRcclxuICAgICAgICBsZXQgeE9mZnNldCA9ICh0aWxlUmFuZ2UubWF4WCAtIHRpbGVSYW5nZS5taW5YKTtcclxuICAgICAgICBsZXQgeU9mZnNldCA9ICh0aWxlUmFuZ2UubWF4WSAtIHRpbGVSYW5nZS5taW5ZKTtcclxuICAgICAgICB4T2Zmc2V0ID0geE9mZnNldCA8PSAwID8gMSA6IHhPZmZzZXQgKiAyICsgMztcclxuICAgICAgICB5T2Zmc2V0ID0geU9mZnNldCA8PSAwID8gMSA6IHlPZmZzZXQgKiAyICsgMztcclxuICAgICAgICBsZXQgY2FjaGVTaXplID0geE9mZnNldCAqIHlPZmZzZXQ7XHJcbiAgICAgICAgdGlsZVNvdXJjZS50aWxlQ2FjaGUuaGlnaFdhdGVyTWFyayA9IGNhY2hlU2l6ZSA8PSAxNSA/IDE1IDogY2FjaGVTaXplO1xyXG5cclxuICAgICAgICAvLyBBZGp1c3QgdmVjdG9yVGlsZURhdGEgY2FjaGUgc2l6ZSBhY2NvcmRpbmcgdG8gdGhlIHRpbGUgUmFuZ2UgaW4gZGF0YSBtYXggem9vbS4gaXQgd2lsbCBwYXNzIFxyXG4gICAgICAgIHZhciBkYXRhVGlsZVJhbmQgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VGb3JFeHRlbnRBbmRaKGV4dGVudCwgdGlsZVNvdXJjZS5tYXhEYXRhWm9vbSk7XHJcbiAgICAgICAgdmFyIG9mZnNldFggPSBkYXRhVGlsZVJhbmQubWF4WCAtIGRhdGFUaWxlUmFuZC5taW5YO1xyXG4gICAgICAgIHZhciBvZmZzZXRZID0gZGF0YVRpbGVSYW5kLm1heFkgLSBkYXRhVGlsZVJhbmQubWluWTtcclxuXHJcbiAgICAgICAgb2Zmc2V0WCA9IG9mZnNldFggPD0gMCA/IDEgOiBvZmZzZXRYICsgMztcclxuICAgICAgICBvZmZzZXRZID0gb2Zmc2V0WSA8PSAwID8gMSA6IG9mZnNldFkgKyAzO1xyXG4gICAgICAgIHZhciB2ZWN0b3JUaWxlRGF0YUNhaGNlU2l6ZSA9IG9mZnNldFggKiBvZmZzZXRZO1xyXG4gICAgICAgIHRpbGVTb3VyY2VbXCJ2ZWN0b3JUaWxlRGF0YUNhaGNlU2l6ZVwiXSA9IHZlY3RvclRpbGVEYXRhQ2FoY2VTaXplO1xyXG4gICAgICAgIHRpbGVTb3VyY2UuZ2V0R2VvRm9ybWF0KClbXCJ2ZWN0b3JUaWxlRGF0YUNhaGNlU2l6ZVwiXSA9IHZlY3RvclRpbGVEYXRhQ2FoY2VTaXplO1xyXG5cclxuICAgICAgICBsZXQgaW1hZ2VFeHRlbnQgPSB0aWxlR3JpZC5nZXRUaWxlUmFuZ2VFeHRlbnQoeiwgdGlsZVJhbmdlKTtcclxuXHJcbiAgICAgICAgbGV0IHRpbGVQaXhlbFJhdGlvID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxSYXRpbyhwaXhlbFJhdGlvKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge09iamVjdC48bnVtYmVyLCBPYmplY3QuPHN0cmluZywgb2wuVGlsZT4+fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxldCB0aWxlc1RvRHJhd0J5WiA9IHt9O1xyXG4gICAgICAgIHRpbGVzVG9EcmF3QnlaW3pdID0ge307XHJcblxyXG4gICAgICAgIGxldCBmaW5kTG9hZGVkVGlsZXMgPSB0aGlzLmNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIoXHJcbiAgICAgICAgICAgIHRpbGVTb3VyY2UsIHByb2plY3Rpb24sIHRpbGVzVG9EcmF3QnlaLCB0aWxlTGF5ZXIpO1xyXG5cclxuICAgICAgICBsZXQgdG1wRXh0ZW50ID0gdGhpcy50bXBFeHRlbnQ7XHJcbiAgICAgICAgbGV0IHRtcFRpbGVSYW5nZSA9IHRoaXMudG1wVGlsZVJhbmdlXztcclxuICAgICAgICBsZXQgbmV3VGlsZXMgPSBmYWxzZTtcclxuICAgICAgICBsZXQgdGlsZSwgeCwgeTsgIFxyXG5cclxuICAgICAgICBmb3IgKHggPSB0aWxlUmFuZ2UubWluWDsgeCA8PSB0aWxlUmFuZ2UubWF4WDsgKyt4KSB7XHJcbiAgICAgICAgICAgIGZvciAoeSA9IHRpbGVSYW5nZS5taW5ZOyB5IDw9IHRpbGVSYW5nZS5tYXhZOyArK3kpIHtcclxuICAgICAgICAgICAgICAgIHRpbGUgPSB0aWxlU291cmNlLmdldFRpbGUoeiwgeCwgeSwgcGl4ZWxSYXRpbywgcHJvamVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aWxlLnRpbGVSYW5nZSA9IHRpbGVSYW5nZTtcclxuICAgICAgICAgICAgICAgIHRpbGUucGl4ZWxSYXRpbyA9IHBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkVSUk9SKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aWxlTGF5ZXIuZ2V0VXNlSW50ZXJpbVRpbGVzT25FcnJvcigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gdXNlSW50ZXJpbVRpbGVzT25FcnJvciBpcyBmYWxzZSwgd2UgY29uc2lkZXIgdGhlIGVycm9yIHRpbGUgYXMgbG9hZGVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlLnNldFN0YXRlKCg8YW55Pm9sKS5UaWxlU3RhdGUuTE9BREVEKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRpbGVMYXllci5nZXRQcmVsb2FkKCkgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZWxvYWRlZCB0aWxlcyBmb3IgbG93ZXIgcmVzb2x1dGlvbnMgbWlnaHQgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdUaWxlcyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNEcmF3YWJsZVRpbGVfKHRpbGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZSA9IHRpbGUuZ2V0SW50ZXJpbVRpbGUoKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICBcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0RyYXdhYmxlVGlsZV8odGlsZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdWlkID0gKDxhbnk+b2wpLmdldFVpZCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGlsZS5nZXRTdGF0ZSgpID09PSAoPGFueT5vbCkuVGlsZVN0YXRlLkxPQURFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlc1RvRHJhd0J5Wlt6XVt0aWxlLnRpbGVDb29yZC50b1N0cmluZygpXSA9IHRpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpblRyYW5zaXRpb24gPSB0aWxlLmluVHJhbnNpdGlvbih1aWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5ld1RpbGVzICYmIChpblRyYW5zaXRpb24gfHwgdGhpcy5yZW5kZXJlZFRpbGVzLmluZGV4T2YodGlsZSkgPT09IC0xKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGlsZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGp1ZGdlIHRoZSBkYXRhIG9mIHJlcGxheUdyb3VwIGZvciBkcmF3aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNvdXJjZVRpbGUgPSB0aWxlLmdldFRpbGUodGlsZS50aWxlS2V5c1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlcGxheUdyb3VwID0gc291cmNlVGlsZSAmJiBzb3VyY2VUaWxlLmdldFJlcGxheUdyb3VwKHRoaXMuZ2V0TGF5ZXIoKSwgc291cmNlVGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGUuZ2V0QWxwaGEodWlkLCBmcmFtZVN0YXRlLnRpbWUpID09PSAxICYmIChyZXBsYXlHcm91cCAmJiBPYmplY3Qua2V5cyhyZXBsYXlHcm91cC5yZXBsYXlzQnlaSW5kZXhfKS5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBsb29rIGZvciBhbHQgdGlsZXMgaWYgYWxwaGEgaXMgMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGNoaWxkVGlsZVJhbmdlID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkQ2hpbGRUaWxlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZS50aWxlQ29vcmQsIHRtcFRpbGVSYW5nZSwgdG1wRXh0ZW50KTtcclxuICAgICAgICAgICAgICAgIGxldCBjb3ZlcmVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRUaWxlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkID0gZmluZExvYWRlZFRpbGVzKCh6ICsgMSksIGNoaWxkVGlsZVJhbmdlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKCFjb3ZlcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKCFjb3ZlcmVkICYmIGZyYW1lU3RhdGUuaXNab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZUdyaWQuZm9yRWFjaFRpbGVDb29yZFBhcmVudFRpbGVSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZS50aWxlQ29vcmQsIGZpbmRMb2FkZWRUaWxlcywgbnVsbCwgdG1wVGlsZVJhbmdlLCB0bXBFeHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBkZWxldGUgYSBsYXJnZSBpbnRlcnZhbCBmb3IgZHJhd2luZ1xyXG4gICAgICAgIHZhciB0aWxlc1RvRHJhd0tleXMgPSBPYmplY3Qua2V5cyh0aWxlc1RvRHJhd0J5Wik7XHJcbiAgICAgICAgaWYodGlsZXNUb0RyYXdLZXlzLmxlbmd0aCA+IDEpe1xyXG4gICAgICAgICAgICB3aGlsZSgrdGlsZXNUb0RyYXdLZXlzW3RpbGVzVG9EcmF3S2V5cy5sZW5ndGggLSAxXSAtICgrdGlsZXNUb0RyYXdLZXlzWzBdKSA+IDIpe1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRpbGVzVG9EcmF3QnlaW3RpbGVzVG9EcmF3S2V5c1swXV07XHJcbiAgICAgICAgICAgICAgICB0aWxlc1RvRHJhd0tleXMgPSBPYmplY3Qua2V5cyh0aWxlc1RvRHJhd0J5Wik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCByZW5kZXJlZFJlc29sdXRpb24gPSB0aWxlUmVzb2x1dGlvbiAqIHBpeGVsUmF0aW8gLyB0aWxlUGl4ZWxSYXRpbyAqIG92ZXJzYW1wbGluZztcclxuICAgICAgICBsZXQgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcclxuICAgICAgICBsZXQgYW5pbWF0aW5nT3JJbnRlcmFjdGluZyA9IGhpbnRzWyg8YW55Pm9sKS5WaWV3SGludC5BTklNQVRJTkddIHx8IGhpbnRzWyg8YW55Pm9sKS5WaWV3SGludC5JTlRFUkFDVElOR107XHJcbiAgICAgICAgaWYgKCEodGhpcy5yZW5kZXJlZFJlc29sdXRpb24gJiYgRGF0ZS5ub3coKSAtIGZyYW1lU3RhdGUudGltZSA+IDE2ICYmIGFuaW1hdGluZ09ySW50ZXJhY3RpbmcpICYmIChcclxuICAgICAgICAgICAgbmV3VGlsZXMgfHxcclxuICAgICAgICAgICAgISh0aGlzLnJlbmRlcmVkRXh0ZW50XyAmJiBvbC5leHRlbnQuY29udGFpbnNFeHRlbnQodGhpcy5yZW5kZXJlZEV4dGVudF8sIGV4dGVudCkpIHx8XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbiAhPT0gc291cmNlUmV2aXNpb24gfHxcclxuICAgICAgICAgICAgb3ZlcnNhbXBsaW5nICE9PSB0aGlzLm92ZXJzYW1wbGluZ18gfHxcclxuICAgICAgICAgICAgIWFuaW1hdGluZ09ySW50ZXJhY3RpbmcgJiYgcmVuZGVyZWRSZXNvbHV0aW9uICE9PSB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvblxyXG4gICAgICAgICkpIHtcclxuICAgICAgICAgICAgLy8gbGV0IGNvbnRleHQgPSB0aGlzLmNvbnRleHQ7XHJcbiAgICAgICAgICAgIC8vIGlmIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgIC8vICAgICBsZXQgdGlsZVBpeGVsU2l6ZSA9IHRpbGVTb3VyY2UuZ2V0VGlsZVBpeGVsU2l6ZSh6LCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcclxuICAgICAgICAgICAgLy8gICAgIGxldCB3aWR0aCA9IE1hdGgucm91bmQodGlsZVJhbmdlLmdldFdpZHRoKCkgKiB0aWxlUGl4ZWxTaXplWzBdIC8gb3ZlcnNhbXBsaW5nKTtcclxuICAgICAgICAgICAgLy8gICAgIGxldCBoZWlnaHQgPSBNYXRoLnJvdW5kKHRpbGVSYW5nZS5nZXRIZWlnaHQoKSAqIHRpbGVQaXhlbFNpemVbMV0gLyBvdmVyc2FtcGxpbmcpO1xyXG4gICAgICAgICAgICAvLyAgICAgbGV0IGNhbnZhcyA9IGNvbnRleHQuY2FudmFzO1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKGNhbnZhcy53aWR0aCAhPT0gd2lkdGggfHwgY2FudmFzLmhlaWdodCAhPT0gaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5vdmVyc2FtcGxpbmdfID0gb3ZlcnNhbXBsaW5nO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGlmICh0aGlzLnJlbmRlcmVkRXh0ZW50XyAmJiAhb2wuZXh0ZW50LmVxdWFscyhpbWFnZUV4dGVudCwgdGhpcy5yZW5kZXJlZEV4dGVudF8pKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgICAgICBvdmVyc2FtcGxpbmcgPSB0aGlzLm92ZXJzYW1wbGluZ187XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRUaWxlcy5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAvKiogQHR5cGUge0FycmF5LjxudW1iZXI+fSAqL1xyXG4gICAgICAgICAgICBsZXQgenMgPSBPYmplY3Qua2V5cyh0aWxlc1RvRHJhd0J5WikubWFwKE51bWJlcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB6cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYSA9PT0geikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiID09PSB6KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYSA+IGIgPyAxIDogYSA8IGIgPyAtMSA6IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pOyBcclxuXHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50UmVzb2x1dGlvbiwgY3VycmVudFNjYWxlLCBjdXJyZW50VGlsZVBpeGVsU2l6ZSwgY3VycmVudFosIGksIGlpO1xyXG4gICAgICAgICAgICBsZXQgdGlsZUV4dGVudCwgdGlsZUd1dHRlciwgdGlsZXNUb0RyYXcsIHcsIGg7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGlpID0genMubGVuZ3RoOyBpIDwgaWk7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFogPSB6c1tpXTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaWxlUGl4ZWxTaXplID0gdGlsZVNvdXJjZS5nZXRUaWxlUGl4ZWxTaXplKGN1cnJlbnRaLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRSZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbihjdXJyZW50Wik7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50U2NhbGUgPSBjdXJyZW50UmVzb2x1dGlvbiAvIHRpbGVSZXNvbHV0aW9uO1xyXG4gICAgICAgICAgICAgICAgdGlsZUd1dHRlciA9IHRpbGVQaXhlbFJhdGlvICogdGlsZVNvdXJjZS5nZXRHdXR0ZXIocHJvamVjdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aWxlc1RvRHJhdyA9IHRpbGVzVG9EcmF3QnlaW2N1cnJlbnRaXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHRpbGVDb29yZEtleSBpbiB0aWxlc1RvRHJhdykgeyAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZSA9IHRpbGVzVG9EcmF3W3RpbGVDb29yZEtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZUV4dGVudCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudCh0aWxlLmdldFRpbGVDb29yZCgpLCB0bXBFeHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHggPSAodGlsZUV4dGVudFswXSAtIGltYWdlRXh0ZW50WzBdKSAvIHRpbGVSZXNvbHV0aW9uICogdGlsZVBpeGVsUmF0aW8gLyBvdmVyc2FtcGxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgeSA9IChpbWFnZUV4dGVudFszXSAtIHRpbGVFeHRlbnRbM10pIC8gdGlsZVJlc29sdXRpb24gKiB0aWxlUGl4ZWxSYXRpbyAvIG92ZXJzYW1wbGluZztcclxuICAgICAgICAgICAgICAgICAgICB3ID0gY3VycmVudFRpbGVQaXhlbFNpemVbMF0gKiBjdXJyZW50U2NhbGUgLyBvdmVyc2FtcGxpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgaCA9IGN1cnJlbnRUaWxlUGl4ZWxTaXplWzFdICogY3VycmVudFNjYWxlIC8gb3ZlcnNhbXBsaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd1RpbGVJbWFnZSh0aWxlLCBmcmFtZVN0YXRlLCBsYXllclN0YXRlLCB4LCB5LCB3LCBoLCB0aWxlR3V0dGVyLCB6ID09PSBjdXJyZW50Wik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZS50cmFuc2l0aW9uID0gKHogPT09IGN1cnJlbnRaKTtcclxuICAgICAgICAgICAgICAgICAgICB0aWxlLnNjcmVlblhZID0gWyh0aWxlRXh0ZW50WzBdICsgdGlsZUV4dGVudFsyXSkgLyAyLCh0aWxlRXh0ZW50WzFdICsgdGlsZUV4dGVudFszXSkgLyAyXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMucHVzaCh0aWxlKTtcclxuICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZWRSZXZpc2lvbiA9IHNvdXJjZVJldmlzaW9uO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbiA9IHRpbGVSZXNvbHV0aW9uICogcGl4ZWxSYXRpbyAvIHRpbGVQaXhlbFJhdGlvICogb3ZlcnNhbXBsaW5nO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkRXh0ZW50XyA9IGltYWdlRXh0ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHNjYWxlID0gdGhpcy5yZW5kZXJlZFJlc29sdXRpb24gLyB2aWV3UmVzb2x1dGlvbjtcclxuICAgICAgICBsZXQgdHJhbnNmb3JtID0gKDxhbnk+b2wpLnRyYW5zZm9ybS5jb21wb3NlKHRoaXMuaW1hZ2VUcmFuc2Zvcm1fLCBwaXhlbFJhdGlvICogc2l6ZVswXSAvIDIsIHBpeGVsUmF0aW8gKiBzaXplWzFdIC8gMiwgc2NhbGUsIHNjYWxlLCAwLCAodGhpcy5yZW5kZXJlZEV4dGVudF9bMF0gLSB2aWV3Q2VudGVyWzBdKSAvIHRoaXMucmVuZGVyZWRSZXNvbHV0aW9uICogcGl4ZWxSYXRpbywgKHZpZXdDZW50ZXJbMV0gLSB0aGlzLnJlbmRlcmVkRXh0ZW50X1szXSkgLyB0aGlzLnJlbmRlcmVkUmVzb2x1dGlvbiAqIHBpeGVsUmF0aW8pO1xyXG4gICAgICAgICg8YW55Pm9sKS50cmFuc2Zvcm0uY29tcG9zZSh0aGlzLmNvb3JkaW5hdGVUb0NhbnZhc1BpeGVsVHJhbnNmb3JtLCBwaXhlbFJhdGlvICogc2l6ZVswXSAvIDIgLSB0cmFuc2Zvcm1bNF0sIHBpeGVsUmF0aW8gKiBzaXplWzFdIC8gMiAtIHRyYW5zZm9ybVs1XSwgcGl4ZWxSYXRpbyAvIHZpZXdSZXNvbHV0aW9uLCAtcGl4ZWxSYXRpbyAvIHZpZXdSZXNvbHV0aW9uLCAwLCAtdmlld0NlbnRlclswXSwgLXZpZXdDZW50ZXJbMV0pO1xyXG5cclxuICAgICAgICB0aGlzLnVwZGF0ZVVzZWRUaWxlcyhmcmFtZVN0YXRlLnVzZWRUaWxlcywgdGlsZVNvdXJjZSwgeiwgdGlsZVJhbmdlKTtcclxuICAgICAgICB0aGlzLm1hbmFnZVRpbGVQeXJhbWlkKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UsIHRpbGVHcmlkLCBwaXhlbFJhdGlvLCBwcm9qZWN0aW9uLCBleHRlbnQsIHosIHRpbGVMYXllci5nZXRQcmVsb2FkKCkpO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGVFeHBpcmVDYWNoZShmcmFtZVN0YXRlLCB0aWxlU291cmNlKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUxvZ29zKGZyYW1lU3RhdGUsIHRpbGVTb3VyY2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJlZFRpbGVzLmxlbmd0aCA+IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHByZXBhcmVGcmFtZUN1c3RvbShmcmFtZVN0YXRlOiBhbnksIGxheWVyU3RhdGU6IGFueSkge1xyXG4gICAgICAgIGxldCBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcclxuICAgICAgICBsZXQgbGF5ZXJSZXZpc2lvbiA9IGxheWVyLmdldFJldmlzaW9uKCk7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyZWRMYXllclJldmlzaW9uXyAhPT0gbGF5ZXJSZXZpc2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkVGlsZXMubGVuZ3RoID0gMDtcclxuICAgICAgICAgICAgbGV0IHJlbmRlck1vZGUgPSBsYXllci5nZXRSZW5kZXJNb2RlKCk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250ZXh0ICYmIHJlbmRlck1vZGUgIT09ICg8YW55Pm9sLmxheWVyKS5WZWN0b3JUaWxlUmVuZGVyVHlwZS5WRUNUT1IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dCA9ICg8YW55Pm9sKS5kb20uY3JlYXRlQ2FudmFzQ29udGV4dDJEKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGV4dCAmJiByZW5kZXJNb2RlID09PSAoPGFueT5vbC5sYXllcikuVmVjdG9yVGlsZVJlbmRlclR5cGUuVkVDVE9SKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyZWRMYXllclJldmlzaW9uXyA9IGxheWVyUmV2aXNpb247XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZUxheWVyUHJlcGFyZUZyYW1lQ3VzdG9tLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHBvc3RDb21wb3NlKGNvbnRleHQ6IGFueSwgZnJhbWVTdGF0ZTogYW55LCBsYXllclN0YXRlOiBhbnkpIHtcclxuICAgICAgICBsZXQgbGF5ZXIgPSB0aGlzLmdldExheWVyKCk7XHJcbiAgICAgICAgbGV0IGRlY2x1dHRlclJlcGxheXMgPSBsYXllci5nZXREZWNsdXR0ZXIoKSA/IHt9IDogbnVsbDtcclxuICAgICAgICBsZXQgc291cmNlID0gLyoqIEB0eXBlIHtvbC5zb3VyY2UuVmVjdG9yVGlsZX0gKi8gKGxheWVyLmdldFNvdXJjZSgpKTtcclxuICAgICAgICBsZXQgcmVuZGVyTW9kZSA9IGxheWVyLmdldFJlbmRlck1vZGUoKTtcclxuICAgICAgICBsZXQgcmVwbGF5VHlwZXMgPSB0aGlzLlZFQ1RPUl9SRVBMQVlTX0NVU1RPTVtyZW5kZXJNb2RlXTtcclxuICAgICAgICBsZXQgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcclxuICAgICAgICBsZXQgcm90YXRpb24gPSBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5yb3RhdGlvbjtcclxuICAgICAgICBsZXQgc2l6ZSA9IGZyYW1lU3RhdGUuc2l6ZTtcclxuICAgICAgICAvLyBsZXQgb2Zmc2V0WCwgb2Zmc2V0WTtcclxuICAgICAgICAvLyBpZiAocm90YXRpb24pIHtcclxuICAgICAgICAgICAgLy8gb2Zmc2V0WCA9IE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHNpemVbMF0gLyAyKTtcclxuICAgICAgICAgICAgLy8gb2Zmc2V0WSA9IE1hdGgucm91bmQocGl4ZWxSYXRpbyAqIHNpemVbMV0gLyAyKTtcclxuICAgICAgICAgICAgLy8gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykucm90YXRlQXRPZmZzZXQoY29udGV4dCwgLXJvdGF0aW9uLCBvZmZzZXRYLCBvZmZzZXRZKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKGRlY2x1dHRlclJlcGxheXMpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWNsdXR0ZXJUcmVlXy5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdGlsZXMgPSB0aGlzLnJlbmRlcmVkVGlsZXM7XHJcbiAgICAgICAgbGV0IHRpbGVHcmlkID0gc291cmNlLmdldFRpbGVHcmlkRm9yUHJvamVjdGlvbihmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKTtcclxuICAgICAgICAvLyBsZXQgY2xpcHMgPSBbXTtcclxuICAgICAgICBsZXQgenMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRpbGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcbiAgICAgICAgICAgIGxldCB0aWxlID0gLyoqIEB0eXBlIHtvbC5WZWN0b3JJbWFnZVRpbGV9ICovICh0aWxlc1tpXSk7XHJcbiAgICAgICAgICAgIGxldCBzY3JlZW5YWSA9IHRpbGUuc2NyZWVuWFk7XHJcbiAgICAgICAgICAgIGlmICh0aWxlLmdldFN0YXRlKCkgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuQUJPUlQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgdGlsZUNvb3JkID0gdGlsZS50aWxlQ29vcmQ7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCB3b3JsZE9mZnNldCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQpWzBdIC1cclxuICAgICAgICAgICAgICAgIHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudCh0aWxlLndyYXBwZWRUaWxlQ29vcmQpWzBdO1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMCwgdHQgPSB0aWxlLnRpbGVLZXlzLmxlbmd0aDsgdCA8IHR0OyArK3QpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzb3VyY2VUaWxlID0gdGlsZS5nZXRUaWxlKHRpbGUudGlsZUtleXNbdF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZVRpbGUuZ2V0U3RhdGUoKSA9PT0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5FUlJPUikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIHJldXNlIHJlcGxheUdyb3VwIG9mIHNvdXJjZSBUaWxlIHRvIHJlZHVjZSB0aGUgbWVtb3J5LlxyXG4gICAgICAgICAgICAgICAgLy8gbGV0IHJlcGxheUdyb3VwID0gc291cmNlVGlsZS5nZXRSZXBsYXlHcm91cChsYXllciwgdGlsZUNvb3JkLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlcGxheUdyb3VwID0gc291cmNlVGlsZS5nZXRSZXBsYXlHcm91cChsYXllciwgc291cmNlVGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVuZGVyTW9kZSAhPT0gKDxhbnk+b2wubGF5ZXIpLlZlY3RvclRpbGVSZW5kZXJUeXBlLlZFQ1RPUiAmJiAhcmVwbGF5R3JvdXAuaGFzUmVwbGF5cyhyZXBsYXlUeXBlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybSA9IHRoaXMuZ2V0VHJhbnNmb3JtKGZyYW1lU3RhdGUsIHdvcmxkT2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGxldCBjdXJyZW50WiA9IHNvdXJjZVRpbGUudGlsZUNvb3JkWzBdO1xyXG4gICAgICAgICAgICAgICAgLy8gbGV0IGN1cnJlbnRDbGlwID0gcmVwbGF5R3JvdXAuZ2V0Q2xpcENvb3Jkcyh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgLy8gY29udGV4dC5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0Lmdsb2JhbEFscGhhID0gbGF5ZXJTdGF0ZS5vcGFjaXR5O1xyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY2xpcCBtYXNrIGZvciByZWdpb25zIGluIHRoaXMgbG93IHJlc29sdXRpb24gdGlsZSB0aGF0IGFyZVxyXG4gICAgICAgICAgICAgICAgLy8gYWxyZWFkeSBmaWxsZWQgYnkgYSBoaWdoZXIgcmVzb2x1dGlvbiB0aWxlXHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgKGxldCBqID0gMCwgamogPSBjbGlwcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgbGV0IGNsaXAgPSBjbGlwc1tqXTtcclxuICAgICAgICAgICAgICAgIC8vICAgICBpZiAoY3VycmVudFogPCB6c1tqXSkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyBjb3VudGVyLWNsb2Nrd2lzZSAob3V0ZXIgcmluZykgZm9yIGN1cnJlbnQgdGlsZVxyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb250ZXh0Lm1vdmVUbyhjdXJyZW50Q2xpcFswXSwgY3VycmVudENsaXBbMV0pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFsyXSwgY3VycmVudENsaXBbM10pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs0XSwgY3VycmVudENsaXBbNV0pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb250ZXh0LmxpbmVUbyhjdXJyZW50Q2xpcFs2XSwgY3VycmVudENsaXBbN10pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAvLyBjbG9ja3dpc2UgKGlubmVyIHJpbmcpIGZvciBoaWdoZXIgcmVzb2x1dGlvbiB0aWxlXHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnRleHQubW92ZVRvKGNsaXBbNl0sIGNsaXBbN10pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb250ZXh0LmxpbmVUbyhjbGlwWzRdLCBjbGlwWzVdKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29udGV4dC5saW5lVG8oY2xpcFsyXSwgY2xpcFszXSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnRleHQubGluZVRvKGNsaXBbMF0sIGNsaXBbMV0pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBjb250ZXh0LmNsaXAoKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5mcmFtZVN0YXRlID0gZnJhbWVTdGF0ZTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQubGF5ZXJTdGF0ZSA9IGxheWVyU3RhdGU7XHJcbiAgICAgICAgICAgICAgICByZXBsYXlHcm91cC5yZXBsYXkoY29udGV4dCwgdHJhbnNmb3JtLCByb3RhdGlvbiwge30sIHJlcGxheVR5cGVzLCBkZWNsdXR0ZXJSZXBsYXlzLCBzY3JlZW5YWSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIGNvbnRleHQucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gY2xpcHMucHVzaChjdXJyZW50Q2xpcCk7XHJcbiAgICAgICAgICAgICAgICAvLyB6cy5wdXNoKGN1cnJlbnRaKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYoT2JqZWN0LmtleXMocmVwbGF5R3JvdXAucmVwbGF5c0J5WkluZGV4XykubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdWlkID0gdGhpcy5vbF91aWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhID0gdGlsZS50cmFuc2l0aW9uID8gdGlsZS5nZXRBbHBoYSh1aWQsIGZyYW1lU3RhdGUudGltZSkgOiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYSAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVN0YXRlLmFuaW1hdGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGlsZS50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGUuZW5kVHJhbnNpdGlvbih1aWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoZGVjbHV0dGVyUmVwbGF5cykge1xyXG4gICAgICAgICAgICAvLyB2YXIgaGludHMgPSBmcmFtZVN0YXRlLnZpZXdIaW50cztcclxuICAgICAgICAgICAgLy8gdmFyIGFuaW1hdGluZ09ySW50ZXJhY3RpbmcgPSBoaW50c1soPGFueT5vbCkuVmlld0hpbnQuQU5JTUFUSU5HXSB8fCBoaW50c1soPGFueT5vbCkuVmlld0hpbnQuSU5URVJBQ1RJTkddO1xyXG4gICAgICAgICAgICAvLyAvLyBkZWxldGUgY29udGV4dFtcInF1aWNrWm9vbVwiXVxyXG4gICAgICAgICAgICAvLyBpZiAoYW5pbWF0aW5nT3JJbnRlcmFjdGluZykge1xyXG4gICAgICAgICAgICAvLyAgICAgY29udGV4dFtcInF1aWNrWm9vbVwiXSA9IGZyYW1lU3RhdGVbXCJxdWlja1pvb21cIl07XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gY29udGV4dFtcImN1cnJlbnRSZXNvbHV0aW9uXCJdID0gZnJhbWVTdGF0ZVtcImN1cnJlbnRSZXNvbHV0aW9uXCJdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuUmVwbGF5R3JvdXAucmVwbGF5RGVjbHV0dGVyKGRlY2x1dHRlclJlcGxheXMsIGNvbnRleHQsIHJvdGF0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJvdGF0aW9uKSB7XHJcbiAgICAgICAgLy8gICAgICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLnJvdGF0ZUF0T2Zmc2V0KGNvbnRleHQsIHJvdGF0aW9uLFxyXG4gICAgICAgIC8vIC8qKiBAdHlwZSB7bnVtYmVyfSAqLyhvZmZzZXRYKSwgLyoqIEB0eXBlIHtudW1iZXJ9ICovKG9mZnNldFkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgKDxhbnk+b2wpLnJlbmRlcmVyLmNhbnZhcy5UaWxlTGF5ZXIucHJvdG90eXBlLnBvc3RDb21wb3NlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZVJlcGxheUdyb3VwXyh0aWxlOiBvbC5WZWN0b3JUaWxlLCBmcmFtZVN0YXRlOiBvbHguRnJhbWVTdGF0ZSwgeCwgeSkge1xyXG4gICAgICAgIGxldCBsYXllciA9IHRoaXMuZ2V0TGF5ZXIoKTtcclxuICAgICAgICBsZXQgcGl4ZWxSYXRpbyA9IGZyYW1lU3RhdGUucGl4ZWxSYXRpbztcclxuICAgICAgICBsZXQgcHJvamVjdGlvbiA9IGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb247XHJcbiAgICAgICAgbGV0IHJldmlzaW9uID0gbGF5ZXIuZ2V0UmV2aXNpb24oKTtcclxuICAgICAgICBsZXQgcmVuZGVyT3JkZXIgPSAvKiogQHR5cGUge29sLlJlbmRlck9yZGVyRnVuY3Rpb259ICovXHJcbiAgICAgICAgICAgIChsYXllci5nZXRSZW5kZXJPcmRlcigpKSB8fCBudWxsO1xyXG5cclxuICAgICAgICBsZXQgcmVwbGF5U3RhdGUgPSAoPGFueT50aWxlKS5nZXRSZXBsYXlTdGF0ZShsYXllcik7XHJcbiAgICAgICAgaWYgKCFyZXBsYXlTdGF0ZS5kaXJ0eSAmJiByZXBsYXlTdGF0ZS5yZW5kZXJlZFJldmlzaW9uID09PSByZXZpc2lvbiAmJlxyXG4gICAgICAgICAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFJlbmRlck9yZGVyID09PSByZW5kZXJPcmRlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc291cmNlID0gLyoqIEB0eXBlIHtvbC5zb3VyY2UuVmVjdG9yVGlsZX0gKi8gKGxheWVyLmdldFNvdXJjZSgpKTtcclxuICAgICAgICBsZXQgc291cmNlVGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWQoKTtcclxuICAgICAgICBsZXQgdGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xyXG4gICAgICAgIGxldCByZXNvbHV0aW9uID0gdGlsZUdyaWQuZ2V0UmVzb2x1dGlvbigoPGFueT50aWxlKS50aWxlQ29vcmRbMF0pO1xyXG4gICAgICAgIGxldCB0aWxlRXh0ZW50ID0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KCg8YW55PnRpbGUpLndyYXBwZWRUaWxlQ29vcmQpO1xyXG5cclxuICAgICAgICAvLyBsZXQgekluZGV4S2V5cyA9IHt9O1xyXG4gICAgICAgIGZvciAobGV0IHQgPSAwLCB0dCA9ICg8YW55PnRpbGUpLnRpbGVLZXlzLmxlbmd0aDsgdCA8IHR0OyArK3QpIHtcclxuICAgICAgICAgICAgbGV0IHNvdXJjZVRpbGUgPSAoPGFueT50aWxlKS5nZXRUaWxlKCg8YW55PnRpbGUpLnRpbGVLZXlzW3RdKTtcclxuICAgICAgICAgICAgaWYgKHNvdXJjZVRpbGUuZ2V0U3RhdGUoKSA9PT0gKDxhbnk+b2wpLlRpbGVTdGF0ZS5FUlJPUikge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHNvdXJjZVRpbGVDb29yZCA9IHNvdXJjZVRpbGUucmVxdWVzdFRpbGVDb29yZDtcclxuICAgICAgICAgICAgbGV0IHNvdXJjZVRpbGVFeHRlbnQgPSBzb3VyY2VUaWxlR3JpZC5nZXRUaWxlQ29vcmRFeHRlbnQoc291cmNlVGlsZUNvb3JkKTtcclxuICAgICAgICAgICAgbGV0IHNoYXJlZEV4dGVudCA9IG9sLmV4dGVudC5nZXRJbnRlcnNlY3Rpb24odGlsZUV4dGVudCwgc291cmNlVGlsZUV4dGVudCk7XHJcbiAgICAgICAgICAgIC8vIGxldCBidWZmZXJlZEV4dGVudCA9IG9sLmV4dGVudC5lcXVhbHMoc291cmNlVGlsZUV4dGVudCwgc2hhcmVkRXh0ZW50KSA/IG51bGwgOlxyXG4gICAgICAgICAgICAvLyAgICAgb2wuZXh0ZW50LmJ1ZmZlcihzaGFyZWRFeHRlbnQsIGxheWVyLmdldFJlbmRlckJ1ZmZlcigpICogcmVzb2x1dGlvbik7XHJcbiAgICAgICAgICAgIGxldCB0aWxlUHJvamVjdGlvbiA9IHNvdXJjZVRpbGUuZ2V0UHJvamVjdGlvbigpO1xyXG4gICAgICAgICAgICBsZXQgcmVwcm9qZWN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmVwbGF5U3RhdGUuZGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIHJldXNlIHJlcGxheUdyb3VwIG9mIHNvdXJjZSBUaWxlIHRvIHJlZHVjZSB0aGUgbWVtb3J5LlxyXG4gICAgICAgICAgICBsZXQgZGlzdFJlcGxheUdyb3VwID0gc291cmNlVGlsZS5nZXRSZXBsYXlHcm91cChsYXllciwgKDxhbnk+dGlsZSkud3JhcHBlZFRpbGVDb29yZC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgaWYgKGRpc3RSZXBsYXlHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgcmVwbGF5R3JvdXAgaGFzIHJlcGxheXNcclxuICAgICAgICAgICAgICAgIGxldCByZXBsYXlzWmluZGV4Q291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RSZXBsYXlHcm91cC5yZXBsYXlzQnlaSW5kZXhfKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgemluZGV4IGluIGRpc3RSZXBsYXlHcm91cC5yZXBsYXlzQnlaSW5kZXhfKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxheXNaaW5kZXhDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLmlzTXVsdGl0aHJlYWQgJiYgcmVwbGF5c1ppbmRleENvdW50ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHJlcGxheXMgZGlkIG5vdCBjcmVhdGVkLCBpdCB3aWxsIGNyZWF0ZSBhZnRlciB3ZWIgd29ya2VyIGNhbGwgYmFja1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VUaWxlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZVRpbGVbXCJyZXVzZVZlY3RvckltYWdlVGlsZVwiXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VUaWxlW1wicmV1c2VWZWN0b3JJbWFnZVRpbGVcIl0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VUaWxlW1wicmV1c2VWZWN0b3JJbWFnZVRpbGVcIl0ucHVzaCh0aWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFJldmlzaW9uID0gcmV2aXNpb247XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3RhdGUucmVuZGVyZWRSZW5kZXJPcmRlciA9IHJlbmRlck9yZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZUxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVwbGF5R3JvdXAgPSBuZXcgUmVwbGF5R3JvdXBDdXN0b20oXHJcbiAgICAgICAgICAgICAgICAgICAgMCwgc2hhcmVkRXh0ZW50LCBsYXllci5nZXRSZW5kZXJCdWZmZXIoKSwgdGhpcy5kZWNsdXR0ZXJUcmVlXyk7XHJcbiAgICAgICAgICAgICAgICAvLyBsZXQgcmVwbGF5R3JvdXAgPSBuZXcgUmVwbGF5R3JvdXBDdXN0b20oMCwgc2hhcmVkRXh0ZW50LCByZXNvbHV0aW9uLCBwaXhlbFJhdGlvLCBzb3VyY2UuZ2V0T3ZlcmxhcHMoKSwgdGhpcy5kZWNsdXR0ZXJUcmVlXywgbGF5ZXIuZ2V0UmVuZGVyQnVmZmVyKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNxdWFyZWRUb2xlcmFuY2UgPSAoPGFueT5vbCkucmVuZGVyZXIudmVjdG9yLmdldFNxdWFyZWRUb2xlcmFuY2UocmVzb2x1dGlvbiwgcGl4ZWxSYXRpbyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RyYXRlZ3lUcmVlID0gKDxhbnk+b2wpLmV4dC5yYnVzaCg5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7b2wuRmVhdHVyZXxvbC5yZW5kZXIuRmVhdHVyZX0gZmVhdHVyZSBGZWF0dXJlLlxyXG4gICAgICAgICAgICAgICAgICogQHRoaXMge29sLnJlbmRlcmVyLmNhbnZhcy5WZWN0b3JUaWxlTGF5ZXJ9XHJcbiAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgIGxldCByZW5kZXJGZWF0dXJlID0gZnVuY3Rpb24gKGZlYXR1cmUsIGdlb1N0eWxlcywgb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdHlsZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdlb1N0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvU3R5bGVzICYmIGdlb1N0eWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaWkgPSBnZW9TdHlsZXMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW9TdHlsZXNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG9sNFN0eWxlcyA9IGdlb1N0eWxlc1tpXS5nZXRTdHlsZXMoZmVhdHVyZSwgcmVzb2x1dGlvbiwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoc3R5bGVzLCBvbDRTdHlsZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0eWxlRnVuY3Rpb24gPSBmZWF0dXJlLmdldFN0eWxlRnVuY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcyA9IHN0eWxlRnVuY3Rpb24uY2FsbCgvKiogQHR5cGUge29sLkZlYXR1cmV9ICovKGZlYXR1cmUpLCByZXNvbHV0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlRnVuY3Rpb24gPSBsYXllci5nZXRTdHlsZUZ1bmN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3R5bGVGdW5jdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlcyA9IHN0eWxlRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRpcnR5ID0gdGhpcy5yZW5kZXJGZWF0dXJlKGZlYXR1cmUsIHNxdWFyZWRUb2xlcmFuY2UsIHN0eWxlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxheUdyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXJ0eV8gPSB0aGlzLmRpcnR5XyB8fCBkaXJ0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3RhdGUuZGlydHkgPSByZXBsYXlTdGF0ZS5kaXJ0eSB8fCBkaXJ0eTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpbnN0cnVjdHM7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZXM7XHJcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlVGlsZS5mZWF0dXJlc0FuZEluc3RydWN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RydWN0cyA9IHNvdXJjZVRpbGUuZmVhdHVyZXNBbmRJbnN0cnVjdHNbXCJpbnN0cnVjdHNcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMgPSBzb3VyY2VUaWxlLmZlYXR1cmVzQW5kSW5zdHJ1Y3RzW1wiZmVhdHVyZXNcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZS5pc011bHRpdGhyZWFkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGV0IHJlbmRlciA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGVQcm9qZWN0aW9uLmdldFVuaXRzKCkgPT09ICg8YW55Pm9sLnByb2opLlVuaXRzLlRJTEVfUElYRUxTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVQcm9qZWN0aW9uLnNldFdvcmxkRXh0ZW50KHNvdXJjZVRpbGVFeHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbi5zZXRFeHRlbnQoc291cmNlVGlsZS5nZXRFeHRlbnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlUHJvamVjdGlvbkluZm8gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIGluIHRpbGVQcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGlsZVByb2plY3Rpb25bbmFtZV0gIT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVByb2plY3Rpb25JbmZvW25hbWVdID0gdGlsZVByb2plY3Rpb25bbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb2plY3RJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBwcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvamVjdGlvbltuYW1lXSAhPT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SW5mb1tuYW1lXSA9IHByb2plY3Rpb25bbmFtZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZW9TdHlsZXMgPSBzb3VyY2UuZ2V0R2VvRm9ybWF0KCkuc3R5bGVKc29uQ2FjaGUuZ2VvU3R5bGVzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZXMgJiYgaW5zdHJ1Y3RzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdHJ1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZ2VvU3R5bGVJZCA9IGluc3RydWN0c1tpXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnZW9TdHlsZSA9IGdlb1N0eWxlc1tnZW9TdHlsZUlkXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZUluZm8gPSBmZWF0dXJlc1tpbnN0cnVjdHNbaV1bMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZlYXR1cmUgPSBuZXcgKDxhbnk+b2wucmVuZGVyKS5GZWF0dXJlKGZlYXR1cmVJbmZvLnR5cGVfLCBmZWF0dXJlSW5mby5mbGF0Q29vcmRpbmF0ZXNfLCBmZWF0dXJlSW5mby5lbmRzXywgZmVhdHVyZUluZm8ucHJvcGVydGllc18pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlSW5mb1tcInByb2plY3RlZFwiXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbGVQcm9qZWN0aW9uLmdldFVuaXRzKCkgPT09ICg8YW55Pm9sLnByb2opLlVuaXRzLlRJTEVfUElYRUxTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb2plY3RlZCB0aWxlIGV4dGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbi5zZXRXb3JsZEV4dGVudChzb3VyY2VUaWxlRXh0ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGlsZSBleHRlbnQgaW4gdGlsZSBwaXhlbCBzcGFjZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbi5zZXRFeHRlbnQoc291cmNlVGlsZS5nZXRFeHRlbnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS50cmFuc2Zvcm0odGlsZVByb2plY3Rpb24sIHByb2plY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuZXh0ZW50XyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZUluZm9bXCJwcm9qZWN0ZWRcIl0gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVbXCJ0ZW1wVHJlZVppbmRleFwiXSA9IGluc3RydWN0c1tpXVsyXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVbXCJzdHlsZUlkXCJdID0gZ2VvU3R5bGVJZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckZlYXR1cmUuY2FsbCh0aGlzLCBmZWF0dXJlLCBbZ2VvU3R5bGVdLCB7IHN0cmF0ZWd5VHJlZTogc3RyYXRlZ3lUcmVlLCBmcmFtZVN0YXRlOiBmcmFtZVN0YXRlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlRGF0YSA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgWzAsIHRpbGVFeHRlbnQsIHJlc29sdXRpb24sIHBpeGVsUmF0aW8sIHNvdXJjZS5nZXRPdmVybGFwcygpLCB0aGlzLmRlY2x1dHRlclRyZWVfLCBsYXllci5nZXRSZW5kZXJCdWZmZXIoKSwgc291cmNlLmdldEdlb0Zvcm1hdCgpLm1pbmltYWxpc3RdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VUaWxlLnJlcXVlc3RUaWxlQ29vcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVRpbGUudGlsZUNvb3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbkluZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2plY3RJbmZvLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcXVhcmVkVG9sZXJhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKDxhbnk+b2wpLmdldFVpZChzb3VyY2UuZ2V0R2VvRm9ybWF0KCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZVN0YXRlW1wiY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm1cIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRHZW9Gb3JtYXQoKS5tYXhEYXRhWm9vbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlW1widmVjdG9yVGlsZURhdGFDYWhjZVNpemVcIl0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lU3RhdGVbXCJwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybVwiXSxcclxuICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZW5kZXJhID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2FsbGFiY2sgPSBmdW5jdGlvbiAobWVzc2FnZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGxheXNCeVpJbmRleF8gPSBtZXNzYWdlRGF0YVtcInJlcGxheXNcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IG1lc3NhZ2VEYXRhW1wiZmVhdHVyZXNcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnN0cnVjdHMgPSBtZXNzYWdlRGF0YVtcImluc3RydWN0c1wiXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlcyAmJiBpbnN0cnVjdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zdHJ1Y3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdlb1N0eWxlSWQgPSBpbnN0cnVjdHNbaV1bMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdlb1N0eWxlID0gZ2VvU3R5bGVzW2dlb1N0eWxlSWRdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmVhdHVyZUluZm8gPSBmZWF0dXJlc1tpbnN0cnVjdHNbaV1bMF1dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlID0gbmV3ICg8YW55Pm9sLnJlbmRlcikuRmVhdHVyZShmZWF0dXJlSW5mby50eXBlXywgZmVhdHVyZUluZm8uZmxhdENvb3JkaW5hdGVzXywgZmVhdHVyZUluZm8uZW5kc18sIGZlYXR1cmVJbmZvLnByb3BlcnRpZXNfKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlW1widGVtcFRyZWVaaW5kZXhcIl0gPSBpbnN0cnVjdHNbaV1bMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVtcInN0eWxlSWRcIl0gPSBnZW9TdHlsZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckZlYXR1cmUuY2FsbChyZW5kZXJhLCBmZWF0dXJlLCBbZ2VvU3R5bGVdLCB7IHN0cmF0ZWd5VHJlZTogc3RyYXRlZ3lUcmVlLCBmcmFtZVN0YXRlOiBmcmFtZVN0YXRlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXBsYXlHcm91cC5nZXRSZXBsYXlzTWVyZ2VkKHJlcGxheXNCeVpJbmRleF8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB6aW5kZXggaW4gcmVwbGF5c0J5WkluZGV4Xykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcmVwbGF5VHlwZSBpbiByZXBsYXlzQnlaSW5kZXhfW3ppbmRleF0pIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIHdvcmtlciB0byBtYWluIHdpdGggcmVwbGF5c0J5WkluZGV4X1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXBsYXkgPSByZXBsYXlHcm91cC5nZXRSZXBsYXkoemluZGV4LCByZXBsYXlUeXBlKTsgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdvcmtlclJlcGxheSA9IHJlcGxheXNCeVpJbmRleF9bemluZGV4XVtyZXBsYXlUeXBlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGtleSBpbiB3b3JrZXJSZXBsYXkpeyAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZihrZXkgPT09ICdpbmRpY2VzJyB8fCBrZXkgPT09ICd2ZXJ0aWNlcycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmVwbGF5W2tleV0gPSBuZXcgSW50MzJBcnJheSh3b3JrZXJSZXBsYXlba2V5XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1lbHNlIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihrZXkgIT09ICdsaW5lU3RyaW5nUmVwbGF5Jyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBsYXlba2V5XSA9IHdvcmtlclJlcGxheVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHdvcmtlclJlcGxheVsnbGluZVN0cmluZ1JlcGxheSddKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBsaW5lU3RyaW5nS2V5IGluIHdvcmtlclJlcGxheVsnbGluZVN0cmluZ1JlcGxheSddKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxheVsnbGluZVN0cmluZ1JlcGxheSddW2xpbmVTdHJpbmdLZXldID0gd29ya2VyUmVwbGF5WydsaW5lU3RyaW5nUmVwbGF5J11bbGluZVN0cmluZ0tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZm9yIChsZXQgciBpbiByZXBsYXlHcm91cC5nZXRSZXBsYXlzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHpJbmRleEtleXNbcl0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9ICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBsYXlHcm91cC5maW5pc2goZnJhbWVTdGF0ZVsnY29udGV4dCddKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZUxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZVRpbGUuc3RhdGUgPSAoPGFueT5vbCkuVGlsZVN0YXRlLkxPQURFRDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZVRpbGVbXCJyZXVzZVZlY3RvckltYWdlVGlsZVwiXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzb3VyY2VUaWxlW1wicmV1c2VWZWN0b3JJbWFnZVRpbGVcIl0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmV1c2VkVmVjdG9ySW1hZ2VUaWxlID0gc291cmNlVGlsZVtcInJldXNlVmVjdG9ySW1hZ2VUaWxlXCJdW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzb3VyY2VUaWxlW1wicmV1c2VWZWN0b3JJbWFnZVRpbGVcIl1baV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZlY3RvckltYWdlVGlsZVJlcGxheVN0YXRlID0gcmV1c2VkVmVjdG9ySW1hZ2VUaWxlLmdldFJlcGxheVN0YXRlKGxheWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWN0b3JJbWFnZVRpbGVSZXBsYXlTdGF0ZS5yZW5kZXJlZFJldmlzaW9uID0gcmV2aXNpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjdG9ySW1hZ2VUaWxlUmVwbGF5U3RhdGUucmVuZGVyZWRSZW5kZXJPcmRlciA9IHJlbmRlck9yZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlY3RvckltYWdlVGlsZVJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZUxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV1c2VkVmVjdG9ySW1hZ2VUaWxlLnNldFN0YXRlKCg8YW55Pm9sKS5UaWxlU3RhdGUuTE9BREVEKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKDxhbnk+dGlsZSkuc2V0U3RhdGUoKDxhbnk+b2wpLlRpbGVTdGF0ZS5MT0FERUQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldXNlIHJlcGxheUdyb3VwIG9mIHNvdXJjZSBUaWxlIHRvIHJlZHVjZSB0aGUgbWVtb3J5LlxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRpbGUuc2V0UmVwbGF5R3JvdXAobGF5ZXIsIHNvdXJjZVRpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCksIHJlcGxheUdyb3VwKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZS5nZXRHZW9Gb3JtYXQoKS53b3JrZXJNYW5hZ2VyLnBvc3RNZXNzYWdlKHNvdXJjZVRpbGUudGlsZUNvb3JkICsgKDxhbnk+b2wpLmdldFVpZChjYWxsYWJjayksIFwiY3JlYXRlUmVwbGF5XCIsIG1lc3NhZ2VEYXRhLCBjYWxsYWJjaywgc291cmNlVGlsZS53b3JrZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3RhdGUucmVuZGVyZWRSZXZpc2lvbiA9IHJldmlzaW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZUxvYWRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RydWN0cyAmJiBpbnN0cnVjdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluc3RydWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZlYXR1cmVJbmRleCA9IGluc3RydWN0c1tpXVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlID0gZmVhdHVyZXNbZmVhdHVyZUluZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlW1wicHJvamVjdGVkXCJdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwcm9qZWN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aWxlUHJvamVjdGlvbi5nZXRVbml0cygpID09PSAoPGFueT5vbC5wcm9qKS5Vbml0cy5USUxFX1BJWEVMUykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcHJvamVjdGVkIHRpbGUgZXh0ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUHJvamVjdGlvbi5zZXRXb3JsZEV4dGVudChzb3VyY2VUaWxlRXh0ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRpbGUgZXh0ZW50IGluIHRpbGUgcGl4ZWwgc3BhY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVQcm9qZWN0aW9uLnNldEV4dGVudChzb3VyY2VUaWxlLmdldEV4dGVudCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmdldEdlb21ldHJ5KCkudHJhbnNmb3JtKHRpbGVQcm9qZWN0aW9uLCBwcm9qZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5leHRlbnRfID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5nZXRFeHRlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVtcInByb2plY3RlZFwiXSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlW1widGVtcFRyZWVaaW5kZXhcIl0gPSBpbnN0cnVjdHNbaV1bMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJGZWF0dXJlLmNhbGwodGhpcywgZmVhdHVyZSwgW2luc3RydWN0c1tpXVsxXV0sIHsgc3RyYXRlZ3lUcmVlOiBzdHJhdGVneVRyZWUsIGZyYW1lU3RhdGU6IGZyYW1lU3RhdGUgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwbGF5R3JvdXAuZmluaXNoKGZyYW1lU3RhdGVbJ2NvbnRleHQnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIChsZXQgciBpbiByZXBsYXlHcm91cC5nZXRSZXBsYXlzKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgekluZGV4S2V5c1tyXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZVRpbGUuc2V0UmVwbGF5R3JvdXAobGF5ZXIsIHNvdXJjZVRpbGUudGlsZUNvb3JkLnRvU3RyaW5nKCksIHJlcGxheUdyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFJldmlzaW9uID0gcmV2aXNpb247XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwbGF5U3RhdGUucmVuZGVyZWRSZW5kZXJPcmRlciA9IHJlbmRlck9yZGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZUxvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlclRpbGVJbWFnZUN1c3RvbSh0aWxlLCBmcmFtZVN0YXRlLCBsYXllclN0YXRlKSB7XHJcbiAgICAgICAgbGV0IGxheWVyID0gdGhpcy5nZXRMYXllcigpO1xyXG4gICAgICAgIGxldCByZXBsYXlTdGF0ZSA9IHRpbGUuZ2V0UmVwbGF5U3RhdGUobGF5ZXIpO1xyXG4gICAgICAgIGxldCByZXZpc2lvbiA9IGxheWVyLmdldFJldmlzaW9uKCk7XHJcbiAgICAgICAgbGV0IHJlcGxheXMgPSAoPGFueT5vbCkucmVuZGVyZXIuY2FudmFzLlZlY3RvclRpbGVMYXllci5JTUFHRV9SRVBMQVlTW2xheWVyLmdldFJlbmRlck1vZGUoKV07XHJcbiAgICAgICAgaWYgKHJlcGxheXMgJiYgcmVwbGF5U3RhdGUucmVuZGVyZWRUaWxlTG9hZGVkICYmIHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZVJldmlzaW9uICE9PSByZXZpc2lvbikge1xyXG4gICAgICAgICAgICByZXBsYXlTdGF0ZS5yZW5kZXJlZFRpbGVSZXZpc2lvbiA9IHJldmlzaW9uO1xyXG4gICAgICAgICAgICBsZXQgdGlsZUNvb3JkID0gdGlsZS53cmFwcGVkVGlsZUNvb3JkO1xyXG4gICAgICAgICAgICBsZXQgeiA9IHRpbGVDb29yZFswXTtcclxuICAgICAgICAgICAgbGV0IHBpeGVsUmF0aW8gPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XHJcbiAgICAgICAgICAgIGxldCBzb3VyY2UgPSAvKiogQHR5cGUge29sLnNvdXJjZS5WZWN0b3JUaWxlfSAqLyAobGF5ZXIuZ2V0U291cmNlKCkpO1xyXG4gICAgICAgICAgICBsZXQgdGlsZUdyaWQgPSBzb3VyY2UuZ2V0VGlsZUdyaWRGb3JQcm9qZWN0aW9uKGZyYW1lU3RhdGUudmlld1N0YXRlLnByb2plY3Rpb24pO1xyXG4gICAgICAgICAgICBsZXQgcmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oeik7XHJcbiAgICAgICAgICAgIGxldCBjb250ZXh0ID0gdGlsZS5nZXRDb250ZXh0KGxheWVyKTtcclxuICAgICAgICAgICAgbGV0IHNpemUgPSBzb3VyY2UuZ2V0VGlsZVBpeGVsU2l6ZSh6LCBwaXhlbFJhdGlvLCBmcmFtZVN0YXRlLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKTtcclxuICAgICAgICAgICAgY29udGV4dC5jYW52YXMud2lkdGggPSBzaXplWzBdO1xyXG4gICAgICAgICAgICBjb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBzaXplWzFdO1xyXG4gICAgICAgICAgICBsZXQgdGlsZUV4dGVudCA9IHRpbGVHcmlkLmdldFRpbGVDb29yZEV4dGVudCh0aWxlQ29vcmQpO1xyXG4gICAgICAgICAgICBpZiAobGF5ZXIuYmFja2dyb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5yZWN0KDAsIDAsIHNpemVbMF0sIHNpemVbMV0pO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBsYXllci5iYWNrZ3JvdW5kO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGlpID0gdGlsZS50aWxlS2V5cy5sZW5ndGg7IGkgPCBpaTsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlVGlsZSA9IHRpbGUuZ2V0VGlsZSh0aWxlLnRpbGVLZXlzW2ldKTtcclxuICAgICAgICAgICAgICAgIGlmIChzb3VyY2VUaWxlLmdldFN0YXRlKCkgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuRVJST1IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBwaXhlbFNjYWxlID0gcGl4ZWxSYXRpbyAvIHJlc29sdXRpb247XHJcbiAgICAgICAgICAgICAgICBsZXQgdHJhbnNmb3JtID0gKDxhbnk+b2wpLnRyYW5zZm9ybS5yZXNldCh0aGlzLnRtcFRyYW5zZm9ybV8pO1xyXG4gICAgICAgICAgICAgICAgKDxhbnk+b2wpLnRyYW5zZm9ybS5zY2FsZSh0cmFuc2Zvcm0sIHBpeGVsU2NhbGUsIC1waXhlbFNjYWxlKTtcclxuICAgICAgICAgICAgICAgICg8YW55Pm9sKS50cmFuc2Zvcm0udHJhbnNsYXRlKHRyYW5zZm9ybSwgLXRpbGVFeHRlbnRbMF0sIC10aWxlRXh0ZW50WzNdKTtcclxuICAgICAgICAgICAgICAgIC8vIHJldXNlIHJlcGxheUdyb3VwIG9mIHNvdXJjZSBUaWxlIHRvIHJlZHVjZSB0aGUgbWVtb3J5LlxyXG4gICAgICAgICAgICAgICAgbGV0IHJlcGxheUdyb3VwID0gc291cmNlVGlsZS5nZXRSZXBsYXlHcm91cChsYXllciwgdGlsZUNvb3JkKTtcclxuICAgICAgICAgICAgICAgIHJlcGxheUdyb3VwLnJlcGxheShjb250ZXh0LCB0cmFuc2Zvcm0sIDAsIHt9LCByZXBsYXlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGhhbmRsZXModHlwZTogc3RyaW5nLCBsYXllcjogb2wubGF5ZXIuTGF5ZXIpIHtcclxuICAgICAgICByZXR1cm4gdHlwZSA9PT0gKDxhbnk+b2wpLnJlbmRlcmVyLlR5cGUuQ0FOVkFTICYmICg8YW55PmxheWVyKS5nZXRUeXBlKCkgPT09ICg8YW55Pm9sKS5MYXllclR5cGUuTUFQU1VJVEVfVkVDVE9SVElMRTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZShtYXBSZW5kZXJlcjogYW55LCBsYXllcjogb2wubGF5ZXIuVGlsZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgR2VvVmVjdG9yVGlsZUxheWVyUmVuZGVyKDxhbnk+bGF5ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3Bvc2VJbnRlcm5hbCgpIHtcclxuICAgICAgICAoPGFueT5vbCkuZXZlbnRzLnVubGlzdGVuKCg8YW55Pm9sLnJlbmRlcikuY2FudmFzLmxhYmVsQ2FjaGUsICg8YW55Pm9sKS5ldmVudHMuRXZlbnRUeXBlLkNMRUFSLCB0aGlzLmhhbmRsZUZvbnRzQ2hhbmdlZF8sIHRoaXMpO1xyXG4gICAgICAgIHZhciB3b3JrZXJNYW5hZ2VyID0gdGhpcy5nZXRMYXllcigpLmdldFNvdXJjZSgpLmdldEdlb0Zvcm1hdCgpLndvcmtlck1hbmFnZXI7XHJcbiAgICAgICAgd29ya2VyTWFuYWdlci5jbG9zZSgpO1xyXG4gICAgICAgICg8YW55Pm9sKS5yZW5kZXJlci5jYW52YXMuVGlsZUxheWVyLnByb3RvdHlwZS5kaXNwb3NlSW50ZXJuYWwuY2FsbCh0aGlzKTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGNyZWF0ZUxvYWRlZFRpbGVGaW5kZXIoc291cmNlLCBwcm9qZWN0aW9uLCB0aWxlcywgdGlsZUxheWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB6b29tIFpvb20gbGV2ZWwuXHJcbiAgICAgICAgICAgICAqIEBwYXJhbSB7b2wuVGlsZVJhbmdlfSB0aWxlUmFuZ2UgVGlsZSByYW5nZS5cclxuICAgICAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVGhlIHRpbGUgcmFuZ2UgaXMgZnVsbHkgbG9hZGVkLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZnVuY3Rpb24gKHpvb20sIHRpbGVSYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY2FsbGJhY2sodGlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGlsZXNbem9vbV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZXNbem9vbV0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGlsZXNbem9vbV1bdGlsZS50aWxlQ29vcmQudG9TdHJpbmcoKV0gPSB0aWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZS5mb3JFYWNoTG9hZGVkVGlsZShwcm9qZWN0aW9uLCB6b29tLCB0aWxlUmFuZ2UsIGNhbGxiYWNrLCB0aWxlTGF5ZXIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgUmVwbGF5R3JvdXBDdXN0b20gZXh0ZW5kcyAoKDxhbnk+b2wpLnJlbmRlci53ZWJnbC5SZXBsYXlHcm91cCBhcyB7IG5ldyh0b2xlcmFuY2U6IG51bWJlciwgbWF4RXh0ZW50OiBhbnksIG9wdF9yZW5kZXJCdWZmZXI6IG51bWJlcikgfSkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRvbGVyYW5jZTogbnVtYmVyLCBtYXhFeHRlbnQ6IGFueSwgb3B0X3JlbmRlckJ1ZmZlcjogbnVtYmVyLCBkZWNsdXR0ZXJUcmVlOiBhbnkpIHtcclxuICAgICAgICBzdXBlcih0b2xlcmFuY2UsIG1heEV4dGVudCwgb3B0X3JlbmRlckJ1ZmZlcik7XHJcbiAgICAgICAgdGhpcy5nZXRSZXBsYXkgPSB0aGlzLmdldFJlcGxheUN1c3RvbTtcclxuICAgICAgICB0aGlzLkJBVENIX0NPTlNUUlVDVE9SU18gPSB0aGlzLkJBVENIX0NPTlNUUlVDVE9SU19DVVNUT007XHJcbiAgICAgICAgdGhpcy5yZXBsYXkgPSB0aGlzLnJlcGxheUN1c3RvbTtcclxuICAgICAgICB0aGlzLmRlY2x1dHRlclRyZWUgPSBkZWNsdXR0ZXJUcmVlO1xyXG4gICAgICAgIC8vIHRoaXMuZm9yRWFjaEZlYXR1cmVBdENvb3JkaW5hdGUgPSB0aGlzLmZvckVhY2hGZWF0dXJlQXRDb29yZGluYXRlQ3VzdG9tO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmb3JFYWNoRmVhdHVyZUF0Q29vcmRpbmF0ZUN1c3RvbShjb29yZGluYXRlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgcm90YXRpb246IG51bWJlciwgaGl0VG9sZXJhbmNlOiBudW1iZXIsIHNraXBwZWRGZWF0dXJlc0hhc2g6IGFueSwgY2FsbGJhY2s6IGFueSwgZGVjbHV0dGVyUmVwbGF5czogYW55KSB7XHJcbiAgICAgICAgaGl0VG9sZXJhbmNlID0gTWF0aC5yb3VuZChoaXRUb2xlcmFuY2UpO1xyXG4gICAgICAgIGxldCBjb250ZXh0U2l6ZSA9IGhpdFRvbGVyYW5jZSAqIDIgKyAxO1xyXG4gICAgICAgIGxldCB0cmFuc2Zvcm0gPSAoPGFueT5vbCkudHJhbnNmb3JtLmNvbXBvc2UodGhpcy5oaXREZXRlY3Rpb25UcmFuc2Zvcm1fLFxyXG4gICAgICAgICAgICBoaXRUb2xlcmFuY2UgKyAwLjUsIGhpdFRvbGVyYW5jZSArIDAuNSxcclxuICAgICAgICAgICAgMSAvIHJlc29sdXRpb24sIC0xIC8gcmVzb2x1dGlvbixcclxuICAgICAgICAgICAgLXJvdGF0aW9uLFxyXG4gICAgICAgICAgICAtY29vcmRpbmF0ZVswXSwgLWNvb3JkaW5hdGVbMV0pO1xyXG4gICAgICAgIGxldCBjb250ZXh0ID0gdGhpcy5oaXREZXRlY3Rpb25Db250ZXh0XztcclxuXHJcbiAgICAgICAgaWYgKGNvbnRleHQuY2FudmFzLndpZHRoICE9PSBjb250ZXh0U2l6ZSB8fCBjb250ZXh0LmNhbnZhcy5oZWlnaHQgIT09IGNvbnRleHRTaXplKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY2FudmFzLndpZHRoID0gY29udGV4dFNpemU7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY2FudmFzLmhlaWdodCA9IGNvbnRleHRTaXplO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNvbnRleHRTaXplLCBjb250ZXh0U2l6ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7b2wuRXh0ZW50fVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxldCBoaXRFeHRlbnQ7XHJcbiAgICAgICAgaWYgKHRoaXMucmVuZGVyQnVmZmVyXyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGhpdEV4dGVudCA9IG9sLmV4dGVudC5jcmVhdGVFbXB0eSgpO1xyXG4gICAgICAgICAgICAoPGFueT5vbC5leHRlbnQpLmV4dGVuZENvb3JkaW5hdGUoaGl0RXh0ZW50LCBjb29yZGluYXRlKTtcclxuICAgICAgICAgICAgb2wuZXh0ZW50LmJ1ZmZlcihoaXRFeHRlbnQsIHJlc29sdXRpb24gKiAodGhpcy5yZW5kZXJCdWZmZXJfICsgaGl0VG9sZXJhbmNlKSwgaGl0RXh0ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtYXNrID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuUmVwbGF5R3JvdXAuZ2V0Q2lyY2xlQXJyYXlfKGhpdFRvbGVyYW5jZSk7XHJcbiAgICAgICAgbGV0IGRlY2x1dHRlcmVkRmVhdHVyZXM7XHJcbiAgICAgICAgLy8gaWYgKHRoaXMuZGVjbHV0dGVyVHJlZV8pIHtcclxuICAgICAgICAvLyAgICAgZGVjbHV0dGVyZWRGZWF0dXJlcyA9IHRoaXMuZGVjbHV0dGVyVHJlZV8uYWxsKCkubWFwKGZ1bmN0aW9uIChlbnRyeSkge1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlO1xyXG4gICAgICAgIC8vICAgICB9KTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2wuRmVhdHVyZXxvbC5yZW5kZXIuRmVhdHVyZX0gZmVhdHVyZSBGZWF0dXJlLlxyXG4gICAgICAgICAqIEByZXR1cm4gez99IENhbGxiYWNrIHJlc3VsdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBoaXREZXRlY3Rpb25DYWxsYmFjayhmZWF0dXJlKSB7XHJcbiAgICAgICAgICAgIGxldCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBjb250ZXh0U2l6ZSwgY29udGV4dFNpemUpLmRhdGE7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGV4dFNpemU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb250ZXh0U2l6ZTsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hc2tbaV1bal0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlRGF0YVsoaiAqIGNvbnRleHRTaXplICsgaSkgKiA0ICsgM10gPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFkZWNsdXR0ZXJlZEZlYXR1cmVzIHx8IGRlY2x1dHRlcmVkRmVhdHVyZXMuaW5kZXhPZihmZWF0dXJlKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBjYWxsYmFjayhmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjb250ZXh0U2l6ZSwgY29udGV4dFNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxheUhpdERldGVjdGlvbl8oY29udGV4dCwgdHJhbnNmb3JtLCByb3RhdGlvbixcclxuICAgICAgICAgICAgc2tpcHBlZEZlYXR1cmVzSGFzaCwgaGl0RGV0ZWN0aW9uQ2FsbGJhY2ssIGhpdEV4dGVudCwgZGVjbHV0dGVyUmVwbGF5cyk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHB1YmxpYyByZXBsYXlDdXN0b20oY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB0cmFuc2Zvcm06IGFueSwgdmlld1JvdGF0aW9uOiBudW1iZXIsIHNraXBwZWRGZWF0dXJlc0hhc2g6IGFueSwgb3B0X3JlcGxheVR5cGVzOiBhbnksIG9wdF9kZWNsdXR0ZXJSZXBsYXlzOiBhbnksIHNjcmVlblhZOiBhbnkpIHtcclxuICAgICAgICAvKiogQHR5cGUge0FycmF5LjxudW1iZXI+fSAqL1xyXG4gICAgICAgIGxldCB6cyA9IE9iamVjdC5rZXlzKHRoaXMucmVwbGF5c0J5WkluZGV4XykubWFwKE51bWJlcik7XHJcbiAgICAgICAgenMuc29ydCgoPGFueT5vbCkuYXJyYXkubnVtYmVyU2FmZUNvbXBhcmVGdW5jdGlvbik7XHJcblxyXG4gICAgICAgIC8vIHNldHVwIGNsaXBwaW5nIHNvIHRoYXQgdGhlIHBhcnRzIG9mIG92ZXItc2ltcGxpZmllZCBnZW9tZXRyaWVzIGFyZSBub3RcclxuICAgICAgICAvLyB2aXNpYmxlIG91dHNpZGUgdGhlIGN1cnJlbnQgZXh0ZW50IHdoZW4gcGFubmluZ1xyXG4gICAgICAgIC8vIGNvbnRleHQuc2F2ZSgpO1xyXG4gICAgICAgIC8vIHRoaXMuY2xpcChjb250ZXh0LCB0cmFuc2Zvcm0pO1xyXG4gICAgICAgIGxldCByZXBsYXlUeXBlcyA9IG9wdF9yZXBsYXlUeXBlcyA/IG9wdF9yZXBsYXlUeXBlcyA6ICg8YW55Pm9sLnJlbmRlcikucmVwbGF5Lk9SREVSO1xyXG4gICAgICAgIGxldCBpLCBpaSwgaiwgamosIHJlcGxheXMsIHJlcGxheTtcclxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHpzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcclxuICAgICAgICAgICAgbGV0IHpJbmRleEtleSA9IHpzW2ldLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHJlcGxheXMgPSB0aGlzLnJlcGxheXNCeVpJbmRleF9bekluZGV4S2V5XTtcclxuICAgICAgICAgICAgZm9yIChqID0gMCwgamogPSByZXBsYXlUeXBlcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGF5VHlwZSA9IHJlcGxheVR5cGVzW2pdO1xyXG4gICAgICAgICAgICAgICAgcmVwbGF5ID0gcmVwbGF5c1tyZXBsYXlUeXBlXTtcclxuICAgICAgICAgICAgICAgIC8vIGlmIChyZXBsYXkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChvcHRfZGVjbHV0dGVyUmVwbGF5cyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAocmVwbGF5VHlwZSA9PT0gKDxhbnk+b2wucmVuZGVyKS5SZXBsYXlUeXBlLklNQUdFIHx8IHJlcGxheVR5cGUgPT09ICg8YW55Pm9sLnJlbmRlcikuUmVwbGF5VHlwZS5URVhUKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAvLyBkZWJ1Z2dlclxyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgbGV0IGRlY2x1dHRlciA9IG9wdF9kZWNsdXR0ZXJSZXBsYXlzW3pJbmRleEtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmICghZGVjbHV0dGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBvcHRfZGVjbHV0dGVyUmVwbGF5c1t6SW5kZXhLZXldID0gW3JlcGxheSwgdHJhbnNmb3JtLnNsaWNlKDApLCBzY3JlZW5YWV07XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBkZWNsdXR0ZXIucHVzaChyZXBsYXksIHRyYW5zZm9ybS5zbGljZSgwKSwgc2NyZWVuWFkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIHsgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlcGxheSBpbnN0YW5jZW9mICg8YW55Pm9sKS5yZW5kZXIud2ViZ2wuVGV4dFJlcGxheSB8fCByZXBsYXkgaW5zdGFuY2VvZiAoPGFueT5vbCkucmVuZGVyLndlYmdsLkltYWdlUmVwbGF5KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxheS5kZWNsdXR0ZXJSZXBlYXRfKGNvbnRleHQsIHNjcmVlblhZKTsgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXBsYXkuekluZGV4ID0genNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcGxheS5yZXBsYXkoY29udGV4dCwgdHJhbnNmb3JtLCB2aWV3Um90YXRpb24sIHNraXBwZWRGZWF0dXJlc0hhc2gsIHNjcmVlblhZKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGRyYXdcclxuICAgICAgICBmb3IgKGkgPSAwLCBpaSA9IHpzLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcclxuICAgICAgICAgICAgbGV0IHpJbmRleEtleSA9IHpzW2ldLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHJlcGxheXMgPSB0aGlzLnJlcGxheXNCeVpJbmRleF9bekluZGV4S2V5XTtcclxuICAgICAgICAgICAgZm9yIChqID0gMCwgamogPSByZXBsYXlUeXBlcy5sZW5ndGg7IGogPCBqajsgKytqKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVwbGF5VHlwZSA9IHJlcGxheVR5cGVzW2pdO1xyXG4gICAgICAgICAgICAgICAgcmVwbGF5ID0gcmVwbGF5c1tyZXBsYXlUeXBlXTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXBsYXkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxheS56SW5kZXggPSB6c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZXBsYXkgaW5zdGFuY2VvZiAoPGFueT5vbCkucmVuZGVyLndlYmdsLlRleHRSZXBsYXkgfHwgcmVwbGF5IGluc3RhbmNlb2YgKDxhbnk+b2wpLnJlbmRlci53ZWJnbC5JbWFnZVJlcGxheSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxheS5maW5pc2goY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcGxheS5yZXBsYXkoY29udGV4dCwgdHJhbnNmb3JtLCB2aWV3Um90YXRpb24sIHNraXBwZWRGZWF0dXJlc0hhc2gsIHNjcmVlblhZKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjb250ZXh0LnJlc3RvcmUoKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0UmVwbGF5Q3VzdG9tKHpJbmRleDogYW55LCByZXBsYXlUeXBlOiBhbnkpIHtcclxuICAgICAgICBsZXQgekluZGV4S2V5ID0gekluZGV4ICE9PSB1bmRlZmluZWQgPyB6SW5kZXgudG9TdHJpbmcoKSA6IFwiMFwiO1xyXG4gICAgICAgIGxldCByZXBsYXlzID0gdGhpcy5yZXBsYXlzQnlaSW5kZXhfW3pJbmRleEtleV07XHJcbiAgICAgICAgaWYgKHJlcGxheXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXBsYXlzID0ge307XHJcbiAgICAgICAgICAgIHRoaXMucmVwbGF5c0J5WkluZGV4X1t6SW5kZXhLZXldID0gcmVwbGF5cztcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlcGxheSA9IHJlcGxheXNbcmVwbGF5VHlwZV07XHJcbiAgICAgICAgaWYgKHJlcGxheSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxldCBDb25zdHJ1Y3RvciA9IHRoaXMuQkFUQ0hfQ09OU1RSVUNUT1JTX1tyZXBsYXlUeXBlXTtcclxuICAgICAgICAgICAgcmVwbGF5ID0gbmV3IENvbnN0cnVjdG9yKHRoaXMudG9sZXJhbmNlXywgdGhpcy5tYXhFeHRlbnRfLCB0aGlzLmRlY2x1dHRlclRyZWUpO1xyXG5cclxuICAgICAgICAgICAgcmVwbGF5c1tyZXBsYXlUeXBlXSA9IHJlcGxheTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXBsYXk7XHJcbiAgICB9XHJcblxyXG4gICAgQkFUQ0hfQ09OU1RSVUNUT1JTX0NVU1RPTSA9IHtcclxuICAgICAgICBcIkNpcmNsZVwiOiAoPGFueT5vbC5yZW5kZXIpLndlYmdsLlBvbHlnb25SZXBsYXksXHJcbiAgICAgICAgXCJEZWZhdWx0XCI6ICg8YW55Pm9sLnJlbmRlcikud2ViZ2wuUmVwbGF5LFxyXG4gICAgICAgIFwiSW1hZ2VcIjogKDxhbnk+b2wucmVuZGVyKS53ZWJnbC5JbWFnZVJlcGxheSxcclxuICAgICAgICBcIkxpbmVTdHJpbmdcIjogKDxhbnk+b2wucmVuZGVyKS53ZWJnbC5MaW5lU3RyaW5nUmVwbGF5LFxyXG4gICAgICAgIFwiUG9seWdvblwiOiAoPGFueT5vbC5yZW5kZXIpLndlYmdsLlBvbHlnb25SZXBsYXksXHJcbiAgICAgICAgXCJUZXh0XCI6ICg8YW55Pm9sLnJlbmRlcikud2ViZ2wuVGV4dFJlcGxheVxyXG4gICAgfTtcclxufSIsIlxyXG5leHBvcnQgY2xhc3MgR2VvVmVjdG9yVGlsZVNvdXJjZSBleHRlbmRzIChvbC5zb3VyY2UuVmVjdG9yVGlsZSBhcyB7IG5ldyhwOiBvbHguc291cmNlLlZlY3RvclRpbGVPcHRpb25zKTogYW55OyB9KSB7XHJcbiAgICBnZW9Gb3JtYXQ6IGFueTtcclxuICAgIGlzTXVsdGl0aHJlYWQ6IGJvb2xlYW47XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XHJcbiAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5tYXhEYXRhWm9vbSA9IG9wdGlvbnMubWF4RGF0YVpvb207XHJcbiAgICAgICAgaWYgKG9wdGlvbnNbXCJ0aWxlVXJsRnVuY3Rpb25cIl0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRpbGVVcmxGdW5jdGlvbih0aGlzLmdldEdlb1RpbGVVcmxGdW5jdGlvbigpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IG9wdGlvbnMuY2xpZW50SWQ7XHJcbiAgICAgICAgdGhpcy5jbGllbnRTZWNyZXQgPSBvcHRpb25zLmNsaWVudFNlY3JldDtcclxuICAgICAgICB0aGlzLmdlb0Zvcm1hdCA9IG9wdGlvbnMuZm9ybWF0O1xyXG4gICAgICAgIHRoaXMudGlsZUxvYWRGdW5jdGlvbiA9IHRoaXMudmVjdG9yVGlsZUxvYWRGdW5jdGlvbi5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaXNNdWx0aXRocmVhZCA9IG9wdGlvbnNbXCJtdWx0aXRocmVhZFwiXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdGlvbnNbXCJtdWx0aXRocmVhZFwiXTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRHZW9Gb3JtYXQoKTogYW55IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZW9Gb3JtYXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldEdlb1RpbGVVcmxGdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgelJlZ0V4ID0gL1xce3pcXH0vZztcclxuICAgICAgICBsZXQgeFJlZ0V4ID0gL1xce3hcXH0vZztcclxuICAgICAgICBsZXQgeVJlZ0V4ID0gL1xce3lcXH0vZztcclxuICAgICAgICBsZXQgZGFzaFlSZWdFeCA9IC9cXHsteVxcfS9nO1xyXG4gICAgICAgIGxldCB1cmxzID0gdGhpcy51cmxzO1xyXG4gICAgICAgIGxldCB0aWxlR3JpZCA9IHRoaXMudGlsZUdyaWQ7XHJcbiAgICAgICAgbGV0IG1heERhdGFab29tID0gdGhpcy5tYXhEYXRhWm9vbTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0aWxlQ29vcmQpIHtcclxuICAgICAgICAgICAgaWYgKCF0aWxlQ29vcmQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdENvb3JkID0gW3RpbGVDb29yZFswXSwgdGlsZUNvb3JkWzFdLCB0aWxlQ29vcmRbMl1dO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1heERhdGFab29tICYmIHJlcXVlc3RDb29yZFswXSA+IG1heERhdGFab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHJlcXVlc3RDb29yZFswXSAhPT0gbWF4RGF0YVpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdENvb3JkWzBdIC09IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb29yZFsxXSA9IE1hdGguZmxvb3IocmVxdWVzdENvb3JkWzFdIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb29yZFsyXSA9IE1hdGguZmxvb3IocmVxdWVzdENvb3JkWzJdIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGggPSAoPGFueT5vbCkudGlsZWNvb3JkLmhhc2godGlsZUNvb3JkKTtcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9ICg8YW55Pm9sKS5tYXRoLm1vZHVsbyhoLCB1cmxzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSB1cmxzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKHpSZWdFeCwgcmVxdWVzdENvb3JkWzBdLnRvU3RyaW5nKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoeFJlZ0V4LCByZXF1ZXN0Q29vcmRbMV0udG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSh5UmVnRXgsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHkgPSAtcmVxdWVzdENvb3JkWzJdIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKGRhc2hZUmVnRXgsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHogPSByZXF1ZXN0Q29vcmRbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByYW5nZSA9IHRpbGVHcmlkLmdldEZ1bGxUaWxlUmFuZ2Uoeik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICg8YW55Pm9sKS5hc3NlcnRzLmFzc2VydChyYW5nZSwgNTUpOyAvLyBUaGUgey15fSBwbGFjZWhvbGRlciByZXF1aXJlcyBhIHRpbGUgZ3JpZCB3aXRoIGV4dGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeSA9IHJhbmdlLmdldEhlaWdodCgpICsgcmVxdWVzdENvb3JkWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdmVjdG9yVGlsZUxvYWRGdW5jdGlvbih0aWxlOiBvbC5WZWN0b3JUaWxlLCB1cmw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBsb2FkZXIgPSB0aGlzLmxvYWRGZWF0dXJlc1hocihcclxuICAgICAgICAgICAgdXJsLFxyXG4gICAgICAgICAgICB0aWxlLmdldEZvcm1hdCgpLFxyXG4gICAgICAgICAgICAoPGFueT50aWxlKS5vbkxvYWQuYmluZCh0aWxlKSxcclxuICAgICAgICAgICAgKDxhbnk+dGlsZSkub25FcnJvci5iaW5kKHRpbGUpLFxyXG4gICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0aWxlLnNldExvYWRlcihsb2FkZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRJREFuZFNlY3JldChzZWxmKSB7XHJcbiAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgIGxldCB1cmwgPSAnaHR0cHM6Ly9naXNzZXJ2ZXIudGhpbmtnZW8uY29tL2FwaS92MS9hdXRoL3Rva2VuJztcclxuICAgICAgICBsZXQgY29udGVudCA9ICdBcGlLZXk9JyArIHNlbGYuY2xpZW50SWQgKyAnJkFwaVNlY3JldD0nICsgc2VsZi5jbGllbnRTZWNyZXQ7XHJcblxyXG4gICAgICAgIHhoci5vcGVuKFwiUE9TVFwiLCB1cmwsIGZhbHNlKTtcclxuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xyXG4gICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoZXZlbnQ6IGFueSkge1xyXG4gICAgICAgICAgICBpZiAoIXhoci5zdGF0dXMgfHwgeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRva2VuID0gSlNPTi5wYXJzZSg8YW55Pnhoci5yZXNwb25zZVRleHQpLmRhdGEuYWNjZXNzX3Rva2VuO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50b2tlbiA9IHRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIH0uYmluZCh0aGlzKTtcclxuICAgICAgICB4aHIuc2VuZChjb250ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9hZEZlYXR1cmVzWGhyKHVybDogc3RyaW5nLCBmb3JtYXQ6IGFueSwgc3VjY2VzczogYW55LCBmYWlsdXJlOiBhbnksIHNlbGY6IGFueSkge1xyXG5cclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoZXh0ZW50OiBhbnksIHJlc29sdXRpb246IGFueSwgcHJvamVjdGlvbjogYW55KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlVGlsZSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF4RGF0YVpvb20gPSBmb3JtYXQubWF4RGF0YVpvb207XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdFRpbGVDb29yZCA9IFt0aGlzLnRpbGVDb29yZFswXSwgdGhpcy50aWxlQ29vcmRbMV0sIHRoaXMudGlsZUNvb3JkWzJdXTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXhEYXRhWm9vbSAmJiByZXF1ZXN0VGlsZUNvb3JkWzBdID4gbWF4RGF0YVpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAocmVxdWVzdFRpbGVDb29yZFswXSAhPT0gbWF4RGF0YVpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFRpbGVDb29yZFswXSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0VGlsZUNvb3JkWzFdID0gTWF0aC5mbG9vcihyZXF1ZXN0VGlsZUNvb3JkWzFdIC8gMik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RUaWxlQ29vcmRbMl0gPSBNYXRoLmZsb29yKHJlcXVlc3RUaWxlQ29vcmRbMl0gLyAyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlcXVlc3RUaWxlQ29vcmQgPSByZXF1ZXN0VGlsZUNvb3JkO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCB0aWxlR3JpZD1zZWxmLmdldFRpbGVHcmlkKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGlsZUV4dGVudD0gdGlsZUdyaWQuZ2V0VGlsZUNvb3JkRXh0ZW50KHNvdXJjZVRpbGUudGlsZUNvb3JkKTtcclxuICAgICAgICAgICAgICAgIGxldCB0aWxlUmVzb2x1dGlvbiA9IHRpbGVHcmlkLmdldFJlc29sdXRpb24oc291cmNlVGlsZS50aWxlQ29vcmRbMF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjYWxsYmFjayA9IGZ1bmN0aW9uICh0aWxlLCBjYWxsYmFja0Z1bmN0aW9uLCBzb3VyY2VQcm9qZWN0aW9uLCBsYXN0RXh0ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tGdW5jdGlvbi5jYWxsKHRpbGUsIHNvdXJjZVByb2plY3Rpb24sIGxhc3RFeHRlbnQpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgaGFzUmVxdWVzdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaGFzUmVxdWVzdGVkID0gZm9ybWF0LnJlZ2lzdGVyVGlsZUxvYWRFdmVudCh0aGlzLCBzdWNjZXNzLCBmYWlsdXJlLCBjYWxsYmFjayk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXNSZXF1ZXN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDbGllbnQgSUQgYW5kIENsaWVudCBTZWNyZXQgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAodXJsLmluZGV4T2YoJ2FwaUtleScpID09PSAtMSAmJiBzZWxmLmNsaWVudElkICYmIHNlbGYuY2xpZW50U2VjcmV0ICYmICFzZWxmLnRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZ2V0SURBbmRTZWNyZXQoc2VsZik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0LmlzTXVsdGl0aHJlYWQgJiYgZm9ybWF0Lndvcmtlck1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlcXVlc3RJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB0eXBlb2YgdXJsID09PSBcImZ1bmN0aW9uXCIgPyAoPGFueT51cmwpKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikgOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBmb3JtYXQuZ2V0VHlwZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlsZUNvb3JkOiB0aGlzLnRpbGVDb29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RDb29yZDogcmVxdWVzdFRpbGVDb29yZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltYWxpc3Q6IGZvcm1hdC5taW5pbWFsaXN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4RGF0YVpvb206IGZvcm1hdC5tYXhEYXRhWm9vbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdElkOiAoPGFueT5vbCkuZ2V0VWlkKGZvcm1hdCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllck5hbWU6IGZvcm1hdC5sYXllck5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbjogc2VsZi50b2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlY3RvclRpbGVEYXRhQ2FoY2VTaXplOiBmb3JtYXRbXCJ2ZWN0b3JUaWxlRGF0YUNhaGNlU2l6ZVwiXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVSYW5nZTogc291cmNlVGlsZS50aWxlUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aWxlQ29vcmRXaXRoU291cmNlQ29vcmQ6IHNvdXJjZVRpbGUudGlsZUNvb3JkV2l0aFNvdXJjZUNvb3JkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjdG9ySW1hZ2VUaWxlQ29vcmQ6IHNvdXJjZVRpbGUudmVjdG9ySW1hZ2VUaWxlQ29vcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlRXh0ZW50OnRpbGVFeHRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWxlUmVzb2x1dGlvbjp0aWxlUmVzb2x1dGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTaXplOiB0aGlzLmZvcm1hdF8uc291cmNlLnRpbGVHcmlkLnRpbGVTaXplXyAqIHNvdXJjZVRpbGUucGl4ZWxSYXRpb1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxvYWRlZENhbGxiYWNrID0gZnVuY3Rpb24gKGRhdGEsIG1ldGhvZEluZm8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZXF1ZXN0S2V5ID0gZGF0YS5yZXF1ZXN0S2V5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVMb2FkRXZlbnRJbmZvcyA9IGZvcm1hdC5yZWdpc3RlcmVkTG9hZEV2ZW50c1tyZXF1ZXN0S2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmb3JtYXQucmVnaXN0ZXJlZExvYWRFdmVudHNbcmVxdWVzdEtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRpbGVMb2FkRXZlbnRJbmZvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsb2FkRXZlbnRJbmZvID0gdGlsZUxvYWRFdmVudEluZm9zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFdmVudEluZm8udGlsZS53b3JrZXJJZCA9IG1ldGhvZEluZm8ud29ya2VySWQ7IC8vIEN1cnJlbnRseSwgd2UganVzdCBvbmUgd2ViIHdvcmtlciBmb3Igb25lIGxheWVyLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxldCB0aWxlS2V5ID0gXCJcIiArIGxvYWRFdmVudEluZm8udGlsZS50aWxlQ29vcmRbMV0gKyBcIixcIiArIGxvYWRFdmVudEluZm8udGlsZS50aWxlQ29vcmRbMl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUUgRXJpY1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gXCJjYW5jZWxcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2FkRXZlbnRJbmZvLnRpbGUuc2V0U3RhdGUoKDxhbnk+b2wpLlRpbGVTdGF0ZS5DQU5DRUwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5zdGF0dXMgPT09IFwic3VjY2VlZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFdmVudEluZm8uY2FsbGJhY2sobG9hZEV2ZW50SW5mby50aWxlLCBsb2FkRXZlbnRJbmZvLnN1Y2Nlc3NGdW5jdGlvbiwgZm9ybWF0LnJlYWRQcm9qZWN0aW9uKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEV2ZW50SW5mby5jYWxsYmFjayhsb2FkRXZlbnRJbmZvLnRpbGUsIGxvYWRFdmVudEluZm8uZmFpbHVyZUZ1bmN0aW9uLCBmb3JtYXQucmVhZFByb2plY3Rpb24oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQud29ya2VyTWFuYWdlci5wb3N0TWVzc2FnZSh0aGlzLnRpbGVDb29yZCArICg8YW55Pm9sKS5nZXRVaWQobG9hZGVkQ2FsbGJhY2spLCBcInJlcXVlc3RcIiwgcmVxdWVzdEluZm8sIGxvYWRlZENhbGxiYWNrLCB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aWxlQ29vcmQgPSB0aGlzLnRpbGVDb29yZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGUgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlb2YgdXJsID09PSBcImZ1bmN0aW9uXCIgPyAoPGFueT51cmwpKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikgOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQXV0aG9yaXphdGlvbicsICdCZWFyZXIgJyArIHNlbGYudG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZm9ybWF0LmdldFR5cGUoKSA9PT0gKDxhbnk+b2wpLmZvcm1hdC5Gb3JtYXRUeXBlLkFSUkFZX0JVRkZFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IFwiYXJyYXlidWZmZXJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXhoci5zdGF0dXMgfHwgeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8IDMwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0eXBlID0gZm9ybWF0LmdldFR5cGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiogQHR5cGUge0RvY3VtZW50fE5vZGV8T2JqZWN0fHN0cmluZ3x1bmRlZmluZWR9ICovXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNvdXJjZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gKDxhbnk+b2wpLmZvcm1hdC5Gb3JtYXRUeXBlLkpTT04gfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZSA9PT0gKDxhbnk+b2wpLmZvcm1hdC5Gb3JtYXRUeXBlLlRFWFQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0geGhyLnJlc3BvbnNlVGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICg8YW55Pm9sKS5mb3JtYXQuRm9ybWF0VHlwZS5YTUwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0geGhyLnJlc3BvbnNlWE1MO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlID0gKDxhbnk+b2wpLnhtbC5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gKDxhbnk+b2wpLmZvcm1hdC5Gb3JtYXRUeXBlLkFSUkFZX0JVRkZFUikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSAvKiogQHR5cGUge0FycmF5QnVmZmVyfSAqLyAoeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZEZlYXR1cmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBmb3JtYXQucmVhZEZlYXR1cmVzQW5kQ3JlYXRlSW5zdHJ1Y3RzTmV3KHNvdXJjZSwgcmVxdWVzdFRpbGVDb29yZCwgdGlsZUNvb3JkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbGwgTG9hZCBFdmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVxdWVzdEtleSA9IHRpbGUucmVxdWVzdFRpbGVDb29yZC5qb2luKFwiLFwiKSArIFwiLFwiICsgdGlsZS50aWxlQ29vcmRbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aWxlTG9hZEV2ZW50SW5mb3MgPSBmb3JtYXQucmVnaXN0ZXJlZExvYWRFdmVudHNbcmVxdWVzdEtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBmb3JtYXQucmVnaXN0ZXJlZExvYWRFdmVudHNbcmVxdWVzdEtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGlsZUxvYWRFdmVudEluZm9zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbG9hZEV2ZW50SW5mbyA9IHRpbGVMb2FkRXZlbnRJbmZvc1tpXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGlsZUtleSA9IFwiXCIgKyBsb2FkRXZlbnRJbmZvLnRpbGUudGlsZUNvb3JkWzFdICsgXCIsXCIgKyBsb2FkRXZlbnRJbmZvLnRpbGUudGlsZUNvb3JkWzJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZEV2ZW50SW5mby50aWxlLmZlYXR1cmVzQW5kSW5zdHJ1Y3RzID0geyBmZWF0dXJlczogZGF0YVswXSwgaW5zdHJ1Y3RzOiBkYXRhWzFdW3RpbGVLZXldIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRFdmVudEluZm8uY2FsbGJhY2sobG9hZEV2ZW50SW5mby50aWxlLCBsb2FkRXZlbnRJbmZvLnN1Y2Nlc3NGdW5jdGlvbiwgZm9ybWF0LnJlYWRQcm9qZWN0aW9uKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmUuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmUuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhaWx1cmUuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW1wieGhyXCJdID0geGhyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXQuc291cmNlLmRpc3BhdGNoRXZlbnQobmV3ICg8YW55Pm9sLlZlY3RvclRpbGUpLkV2ZW50KFwic2VuZGluZ1RpbGVSZXF1ZXN0XCIsIHhocikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZm9yRWFjaExvYWRlZFRpbGUocHJvamVjdGlvbiwgeiwgdGlsZVJhbmdlLCBjYWxsYmFjaywgbGF5ZXIpIHtcclxuICAgICAgICBsZXQgdGlsZUNhY2hlID0gdGhpcy5nZXRUaWxlQ2FjaGVGb3JQcm9qZWN0aW9uKHByb2plY3Rpb24pO1xyXG4gICAgICAgIGlmICghdGlsZUNhY2hlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGxldCBjb3ZlcmVkID0gdHJ1ZTtcclxuICAgICAgICBsZXQgY292ZXJlZCA9IGZhbHNlO1xyXG4gICAgICAgIGxldCB0aWxlLCB0aWxlQ29vcmRLZXksIGxvYWRlZDtcclxuICAgICAgICBmb3IgKGxldCB4ID0gdGlsZVJhbmdlLm1pblg7IHggPD0gdGlsZVJhbmdlLm1heFg7ICsreCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCB5ID0gdGlsZVJhbmdlLm1pblk7IHkgPD0gdGlsZVJhbmdlLm1heFk7ICsreSkge1xyXG4gICAgICAgICAgICAgICAgdGlsZUNvb3JkS2V5ID0gKDxhbnk+b2wpLnRpbGVjb29yZC5nZXRLZXlaWFkoeiwgeCwgeSk7XHJcbiAgICAgICAgICAgICAgICBsb2FkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aWxlQ2FjaGUuY29udGFpbnNLZXkodGlsZUNvb3JkS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbGUgPSAvKiogQHR5cGUgeyFvbC5UaWxlfSAqLyAodGlsZUNhY2hlLmdldCh0aWxlQ29vcmRLZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkZWQgPSB0aWxlLmdldFN0YXRlKCkgPT09ICg8YW55Pm9sKS5UaWxlU3RhdGUuTE9BREVEO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVwbGF5U3RhdGUgPSB0aWxlLmdldFJlcGxheVN0YXRlKGxheWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZCA9IHJlcGxheVN0YXRlLnJlbmRlcmVkVGlsZUxvYWRlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRlZCA9IChjYWxsYmFjayh0aWxlKSAhPT0gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBpZiAoIWxvYWRlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGNvdmVyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY292ZXJlZDtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFRleHRMYWJlbGluZ1N0cmF0ZWd5IH0gZnJvbSBcIi4vdGV4dExhYmVsaW5nU3RyYXRlZ3lcIjtcclxuaW1wb3J0IHsgR2VvVGV4dFN0eWxlIH0gZnJvbSBcIi4vZ2VvVGV4dFN0eWxlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3kgZXh0ZW5kcyBUZXh0TGFiZWxpbmdTdHJhdGVneSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMubWFya0xvY2F0aW9uQ29yZSA9IHRoaXMubWFya0xvY2F0aW9uQ29yZUN1c3RvbTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgbWFya0xvY2F0aW9uQ29yZUN1c3RvbShmbGF0Q29vcmRpbmF0ZXM6IGFueSwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIHJlc29sdXRpb246IGFueSwgZ2VvbWV0cnlUeXBlOiBhbnksIHRleHRTdHlsZTogR2VvVGV4dFN0eWxlLCBncmlkOiBhbnksIGZyYW1lU3RhdGU6IG9seC5GcmFtZVN0YXRlKSB7XHJcbiAgICAgICAgc3dpdGNoIChnZW9tZXRyeVR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuUE9JTlQ6XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UOlxyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5DSVJDTEU6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc092ZXJsYXBwaW5nKGZsYXRDb29yZGluYXRlcywgd2lkdGgsIGhlaWdodCwgdGV4dFN0eWxlLm1hcmdpbiwgdGV4dFN0eWxlLm1pbkRpc3RhbmNlLCB0ZXh0U3R5bGUubWluUGFkZGluZywgdGV4dFN0eWxlLnNwYWNpbmcsIGdyaWQsIGZyYW1lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gdGhpcy5tb3ZlUG9pbnRMYWJlbChmbGF0Q29vcmRpbmF0ZXMsIHdpZHRoLCBoZWlnaHQsIHJlc29sdXRpb24sIHRleHRTdHlsZSwgZ3JpZCwgZnJhbWVTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5QT0xZR09OOlxyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPdmVybGFwcGluZyhmbGF0Q29vcmRpbmF0ZXMsIHdpZHRoLCBoZWlnaHQsIHRleHRTdHlsZS5tYXJnaW4sIHRleHRTdHlsZS5taW5EaXN0YW5jZSwgdGV4dFN0eWxlLm1pblBhZGRpbmcsIHRleHRTdHlsZS5zcGFjaW5nLCBncmlkLCBmcmFtZVN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbW92ZVBvaW50TGFiZWwoZmxhdENvb3JkaW5hdGVzOiBhbnksIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCByZXNvbHV0aW9uOiBhbnksIHRleHRTdHlsZTogR2VvVGV4dFN0eWxlLCBncmlkOiBhbnksIGZyYW1lU3RhdGU6IG9seC5GcmFtZVN0YXRlKSB7XHJcbiAgICAgICAgbGV0IGdyaWRTaXplID0gNTA7XHJcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gZ3JpZFNpemUgKiByZXNvbHV0aW9uO1xyXG5cclxuICAgICAgICBpZiAodGV4dFN0eWxlLnBsYWNlbWVudHMpIHtcclxuICAgICAgICAgICAgbGV0IHBsYWNlbWVudHMgPSB0ZXh0U3R5bGUucGxhY2VtZW50cy5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHBsYWNlbWVudCBvZiBwbGFjZW1lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gdGhpcy5nZXRNb3ZlZFBvc2l0aW9uKGZsYXRDb29yZGluYXRlcywgcGxhY2VtZW50LCBkaXN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNPdmVybGFwcGluZyhuZXdGbGF0Q29vcmRpbmF0ZXMsIHdpZHRoLCBoZWlnaHQsIHRleHRTdHlsZS5tYXJnaW4sIHRleHRTdHlsZS5taW5EaXN0YW5jZSwgdGV4dFN0eWxlLm1pblBhZGRpbmcsIHRleHRTdHlsZS5zcGFjaW5nLCBncmlkLCBmcmFtZVN0YXRlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdGbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TW92ZWRQb3NpdGlvbihmbGF0Q29vcmRpbmF0ZXM6IGFueSwgcGxhY2VtZW50OiBzdHJpbmcsIGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzOiBhbnk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAocGxhY2VtZW50KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJVUlwiOlxyXG4gICAgICAgICAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzID0gdGhpcy5tb3ZlVG9VUihmbGF0Q29vcmRpbmF0ZXMsIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiVVwiOlxyXG4gICAgICAgICAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzID0gdGhpcy5tb3ZlVG9VKGZsYXRDb29yZGluYXRlcywgZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJVTFwiOlxyXG4gICAgICAgICAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzID0gdGhpcy5tb3ZlVG9VTChmbGF0Q29vcmRpbmF0ZXMsIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQlwiOlxyXG4gICAgICAgICAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzID0gdGhpcy5tb3ZlVG9CKGZsYXRDb29yZGluYXRlcywgZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJCUlwiOlxyXG4gICAgICAgICAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzID0gdGhpcy5tb3ZlVG9CUihmbGF0Q29vcmRpbmF0ZXMsIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQkxcIjpcclxuICAgICAgICAgICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcyA9IHRoaXMubW92ZVRvQkwoZmxhdENvb3JkaW5hdGVzLCBkaXN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkxcIjpcclxuICAgICAgICAgICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcyA9IHRoaXMubW92ZVRvTChmbGF0Q29vcmRpbmF0ZXMsIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiUlwiOlxyXG4gICAgICAgICAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzID0gdGhpcy5tb3ZlVG9SKGZsYXRDb29yZGluYXRlcywgZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbmV3RmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUb1VSKGZsYXRDb29yZGluYXRlczogYW55LCBkaXN0YW5jZTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IG5ld0ZsYXRDb29yZGluYXRlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1swXSArIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMV0gKyBkaXN0YW5jZSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdKTtcclxuICAgICAgICByZXR1cm4gbmV3RmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUb1UoZmxhdENvb3JkaW5hdGVzOiBhbnksIGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMV0gKyBkaXN0YW5jZSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdKTtcclxuICAgICAgICByZXR1cm4gbmV3RmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUb1VMKGZsYXRDb29yZGluYXRlczogYW55LCBkaXN0YW5jZTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IG5ld0ZsYXRDb29yZGluYXRlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1swXSAtIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMV0gKyBkaXN0YW5jZSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdKTtcclxuICAgICAgICByZXR1cm4gbmV3RmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUb0IoZmxhdENvb3JkaW5hdGVzOiBhbnksIGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMV0gLSBkaXN0YW5jZSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdKTtcclxuICAgICAgICByZXR1cm4gbmV3RmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUb0JSKGZsYXRDb29yZGluYXRlczogYW55LCBkaXN0YW5jZTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IG5ld0ZsYXRDb29yZGluYXRlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1swXSArIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMV0gLSBkaXN0YW5jZSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdKTtcclxuICAgICAgICByZXR1cm4gbmV3RmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUb0JMKGZsYXRDb29yZGluYXRlczogYW55LCBkaXN0YW5jZTogbnVtYmVyKSB7XHJcbiAgICAgICAgbGV0IG5ld0ZsYXRDb29yZGluYXRlcyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1swXSAtIGRpc3RhbmNlKTtcclxuICAgICAgICBuZXdGbGF0Q29vcmRpbmF0ZXMucHVzaChmbGF0Q29vcmRpbmF0ZXNbMV0gLSBkaXN0YW5jZSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdKTtcclxuICAgICAgICByZXR1cm4gbmV3RmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUb0woZmxhdENvb3JkaW5hdGVzOiBhbnksIGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdIC0gZGlzdGFuY2UpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1sxXSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdKTtcclxuICAgICAgICByZXR1cm4gbmV3RmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG5cclxuICAgIG1vdmVUb1IoZmxhdENvb3JkaW5hdGVzOiBhbnksIGRpc3RhbmNlOiBudW1iZXIpIHtcclxuICAgICAgICBsZXQgbmV3RmxhdENvb3JkaW5hdGVzID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzBdICsgZGlzdGFuY2UpO1xyXG4gICAgICAgIG5ld0ZsYXRDb29yZGluYXRlcy5wdXNoKGZsYXRDb29yZGluYXRlc1sxXSk7XHJcbiAgICAgICAgbmV3RmxhdENvb3JkaW5hdGVzLnB1c2goZmxhdENvb3JkaW5hdGVzWzJdKTtcclxuICAgICAgICByZXR1cm4gbmV3RmxhdENvb3JkaW5hdGVzO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgR2VvU3R5bGUgfSBmcm9tIFwiLi9nZW9TdHlsZVwiO1xyXG5pbXBvcnQgeyBHZW9CcnVzaCB9IGZyb20gXCIuLi9zdHlsZS9nZW9CcnVzaFwiO1xyXG5pbXBvcnQgeyBHZW9CcnVzaFR5cGUgfSBmcm9tIFwiLi9nZW9CcnVzaFR5cGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9BcmVhU3R5bGUgZXh0ZW5kcyBHZW9TdHlsZSB7XHJcblxyXG4gICAgc3RhdGljIGFyZWFTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoe30pLFxyXG4gICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZSh7fSlcclxuICAgIH0pO1xyXG5cclxuICAgIHN0YXRpYyBhcmVhU2hhZG93U3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHt9KSxcclxuICAgIH0pO1xyXG5cclxuICAgIGJydXNoVHlwZTogc3RyaW5nO1xyXG4gICAgcm90YXRlQW5nbGU6IG51bWJlcjtcclxuICAgIGR4OiBudW1iZXI7XHJcbiAgICBkeTogbnVtYmVyO1xyXG4gICAgZmlsbDogc3RyaW5nO1xyXG4gICAgZm9yZWdyb3VuZEZpbGw6IHN0cmluZztcclxuICAgIGdhbW1hOiBzdHJpbmc7XHJcbiAgICBnZW9tZXRyeVRyYW5zZm9ybTogc3RyaW5nO1xyXG4gICAgaGF0Y2hTdHlsZTogc3RyaW5nO1xyXG4gICAgb3BhY2l0eTogbnVtYmVyO1xyXG4gICAgb3V0bGluZUNvbG9yOiBzdHJpbmc7XHJcbiAgICBvdXRsaW5lRGFzaEFycmF5OiBhbnk7XHJcbiAgICBvdXRsaW5lT3BhY2l0eTogbnVtYmVyO1xyXG4gICAgb3V0bGluZVdpZHRoOiBudW1iZXI7XHJcbiAgICBsaW5lYXJHcmFkaWVudDogc3RyaW5nO1xyXG4gICAgcmFkaWFsR3JhZGllbnQ6IHN0cmluZztcclxuICAgIHRleHR1cmVGaWxlOiBzdHJpbmc7XHJcbiAgICBzaGFkb3dDb2xvcjogc3RyaW5nO1xyXG4gICAgc2hhZG93RHg6IG51bWJlcjtcclxuICAgIHNoYWRvd0R5OiBudW1iZXI7XHJcblxyXG4gICAgYnJ1c2hPcHRpb25zOiBhbnk7XHJcbiAgICBnZW9CcnVzaDogc3RyaW5nO1xyXG4gICAgY29udmVydGVkT3V0bGluZUNvbG9yOiBzdHJpbmc7XHJcbiAgICBjb252ZXJ0ZWRPdXRsaW5lRGFzaEFycmF5OiBudW1iZXJbXTtcclxuICAgIGNvbnZlcnRlZFNoYWRvd0NvbG9yOiBzdHJpbmc7XHJcbiAgICBnZW9tZXRyeVRyYW5zZm9ybVZhbHVlOiBhbnk7XHJcbiAgICBzaGFkb3dUcmFuc2xhdGU6IHN0cmluZztcclxuICAgIHNoYWRvd1RyYW5zbGF0ZVZhbHVlQnlSZXNvbHV0aW9uOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVKc29uPzogYW55KSB7XHJcbiAgICAgICAgc3VwZXIoc3R5bGVKc29uKTtcclxuICAgICAgICBpZiAoc3R5bGVKc29uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnJ1c2hUeXBlID0gc3R5bGVKc29uW1wicG9seWdvbi1icnVzaC10eXBlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUFuZ2xlID0gc3R5bGVKc29uW1wicG9seWdvbi1yb3RhdGUtYW5nbGVcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZHggPSBzdHlsZUpzb25bXCJwb2x5Z29uLWR4XCJdO1xyXG4gICAgICAgICAgICB0aGlzLmR5ID0gc3R5bGVKc29uW1wicG9seWdvbi1keVwiXTtcclxuICAgICAgICAgICAgdGhpcy5maWxsID0gc3R5bGVKc29uW1wicG9seWdvbi1maWxsXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmZvcmVncm91bmRGaWxsID0gc3R5bGVKc29uW1wicG9seWdvbi1mb3JlZ3JvdW5kLWZpbGxcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtbWEgPSBzdHlsZUpzb25bXCJwb2x5Z29uLWdhbW1hXCJdID8gc3R5bGVKc29uW1wicG9seWdvbi1nYW1tYVwiXSA6IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0gPSBzdHlsZUpzb25bXCJwb2x5Z29uLWdlb21ldHJ5LXRyYW5zZm9ybVwiXTtcclxuICAgICAgICAgICAgdGhpcy5oYXRjaFN0eWxlID0gc3R5bGVKc29uW1wicG9seWdvbi1oYXRjaC1zdHlsZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5vcGFjaXR5ID0gc3R5bGVKc29uW1wicG9seWdvbi1vcGFjaXR5XCJdO1xyXG4gICAgICAgICAgICB0aGlzLm91dGxpbmVDb2xvciA9IHN0eWxlSnNvbltcInBvbHlnb24tb3V0bGluZS1jb2xvclwiXTtcclxuICAgICAgICAgICAgdGhpcy5vdXRsaW5lRGFzaEFycmF5ID0gc3R5bGVKc29uW1wicG9seWdvbi1vdXRsaW5lLWRhc2hhcnJheVwiXTtcclxuICAgICAgICAgICAgdGhpcy5vdXRsaW5lT3BhY2l0eSA9IHN0eWxlSnNvbltcInBvbHlnb24tb3V0bGluZS1vcGFjaXR5XCJdO1xyXG4gICAgICAgICAgICB0aGlzLm91dGxpbmVXaWR0aCA9IHN0eWxlSnNvbltcInBvbHlnb24tb3V0bGluZS13aWR0aFwiXTtcclxuICAgICAgICAgICAgdGhpcy5saW5lYXJHcmFkaWVudCA9IHN0eWxlSnNvbltcInBvbHlnb24tbGluZWFyLWdyYWRpZW50XCJdO1xyXG4gICAgICAgICAgICB0aGlzLnJhZGlhbEdyYWRpZW50ID0gc3R5bGVKc29uW1wicG9seWdvbi1yYWRpYWwtZ3JhZGllbnRcIl07XHJcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZUZpbGUgPSBzdHlsZUpzb25bXCJwb2x5Z29uLXRleHR1cmUtZmlsZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5zaGFkb3dDb2xvciA9IHN0eWxlSnNvbltcInBvbHlnb24tc2hhZG93LWNvbG9yXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnNoYWRvd0R4ID0gc3R5bGVKc29uW1wicG9seWdvbi1zaGFkb3ctZHhcIl07XHJcbiAgICAgICAgICAgIHRoaXMuc2hhZG93RHkgPSBzdHlsZUpzb25bXCJwb2x5Z29uLXNoYWRvdy1keVwiXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhbGl6ZUNvcmUoKSB7XHJcbiAgICAgICAgdGhpcy5icnVzaFR5cGUgPSB0aGlzLmJydXNoVHlwZSB8fCBcInNvbGlkXCI7XHJcbiAgICAgICAgdGhpcy5icnVzaE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGZpbGxDb2xvcjogdGhpcy5maWxsLFxyXG4gICAgICAgICAgICBmaWxsT3BhY2l0eTogdGhpcy5vcGFjaXR5LFxyXG4gICAgICAgICAgICBsaW5lYXJHcmFkaWVudDogdGhpcy5saW5lYXJHcmFkaWVudCxcclxuICAgICAgICAgICAgcmFkaWFsR3JhZGllbnQ6IHRoaXMucmFkaWFsR3JhZGllbnQsXHJcbiAgICAgICAgICAgIHRleHR1cmVGaWxlOiB0aGlzLnRleHR1cmVGaWxlLFxyXG4gICAgICAgICAgICBmb3JlZ3JvdW5kRmlsbDogdGhpcy5mb3JlZ3JvdW5kRmlsbCxcclxuICAgICAgICAgICAgaGF0Y2hTdHlsZTogdGhpcy5oYXRjaFN0eWxlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgdGhpcy5nZW9tZXRyeVRyYW5zZm9ybVZhbHVlID0gdGhpcy5nZXRUcmFuc2Zvcm1WYWx1ZXModGhpcy5nZW9tZXRyeVRyYW5zZm9ybSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5icnVzaFR5cGUgPT09IFwic29saWRcIiB8fCB0aGlzLmJydXNoVHlwZSA9PT0gXCJoYXRjaFwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VvQnJ1c2ggPSBHZW9CcnVzaC5jcmVhdGVCcnVzaEJ5VHlwZSh0aGlzLmJydXNoVHlwZSwgbnVsbCwgbnVsbCwgdGhpcy5icnVzaE9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3V0bGluZUNvbG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udmVydGVkT3V0bGluZUNvbG9yID0gR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5vdXRsaW5lQ29sb3IsIHRoaXMub3V0bGluZU9wYWNpdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5vdXRsaW5lRGFzaEFycmF5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udmVydGVkT3V0bGluZURhc2hBcnJheSA9IHRoaXMub3V0bGluZURhc2hBcnJheS5zcGxpdChcIixcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnNoYWRvd0NvbG9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udmVydGVkU2hhZG93Q29sb3IgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLnNoYWRvd0NvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zaGFkb3dUcmFuc2xhdGVWYWx1ZUJ5UmVzb2x1dGlvbiA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRyYW5zZm9ybVZhbHVlcyh0cmFuc2Zvcm06IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgLy8gZ2V0IHRyYW5zZm9ybSB2YWx1ZXMgd2hpY2ggbG9vayBsaWtlIHRyYW5zZm9ybSh2YWx1ZTEsIHZhbHVlMilcclxuICAgICAgICBsZXQgc3RhcnQgPSB0cmFuc2Zvcm0uaW5kZXhPZihcIihcIik7XHJcbiAgICAgICAgbGV0IGVuZCA9IHRyYW5zZm9ybS5pbmRleE9mKFwiKVwiKTtcclxuICAgICAgICBsZXQgdmFsdWVTdHJpbmcgPSB0cmFuc2Zvcm0uc3Vic3RyaW5nKHN0YXJ0ICsgMSwgZW5kKTtcclxuXHJcbiAgICAgICAgbGV0IHZhbHVlcyA9IFtdO1xyXG4gICAgICAgIGlmICh2YWx1ZVN0cmluZy5pbmNsdWRlcyhcIixcIikpIHtcclxuICAgICAgICAgICAgdmFsdWVzID0gdmFsdWVTdHJpbmcuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHZhbHVlU3RyaW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB2YWx1ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgR2V0VHJhbnNmb3JtZWRDb29yZGluYXRlcyhmZWF0dXJlKSB7XHJcbiAgICAgICAgbGV0IHRtcEZsYXRDb29yZGluYXRlcyA9IGZlYXR1cmUuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgbGV0IHRtcENvb3JkaW5hdGVzOiBvbC5Db29yZGluYXRlW11bXSA9IFtbXV07XHJcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRtcEZsYXRDb29yZGluYXRlcy5sZW5ndGg7IGkgKz0gMikge1xyXG4gICAgICAgICAgICB0bXBDb29yZGluYXRlc1tpbmRleF0gfHwgKHRtcENvb3JkaW5hdGVzW2luZGV4XSA9IFtdKTtcclxuICAgICAgICAgICAgdG1wQ29vcmRpbmF0ZXNbaW5kZXhdLnB1c2goW3RtcEZsYXRDb29yZGluYXRlc1tpXSwgdG1wRmxhdENvb3JkaW5hdGVzW2kgKyAxXV0pO1xyXG4gICAgICAgICAgICBpZiAodG1wQ29vcmRpbmF0ZXNbaW5kZXhdLmxlbmd0aCA+IDMgJiYgdG1wQ29vcmRpbmF0ZXNbaW5kZXhdWzBdWzBdID09PSB0bXBGbGF0Q29vcmRpbmF0ZXNbaV0gJiYgdG1wQ29vcmRpbmF0ZXNbaW5kZXhdWzBdWzFdID09PSB0bXBGbGF0Q29vcmRpbmF0ZXNbaSArIDFdKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBnZW9tZXRyeSA9IG5ldyBvbC5nZW9tLlBvbHlnb24odG1wQ29vcmRpbmF0ZXMsIFwiWFlcIik7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJ0cmFuc2xhdGVcIikgPT09IDApIHtcclxuICAgICAgICAgICAgZ2VvbWV0cnkudHJhbnNsYXRlKCt0aGlzLmdlb21ldHJ5VHJhbnNmb3JtVmFsdWVbMF0udHJpbSgpLCArdGhpcy5nZW9tZXRyeVRyYW5zZm9ybVZhbHVlWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0uaW5kZXhPZihcInNjYWxlXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGdlb21ldHJ5LnNjYWxlKCt0aGlzLmdlb21ldHJ5VHJhbnNmb3JtVmFsdWVbMF0udHJpbSgpLCArdGhpcy5nZW9tZXRyeVRyYW5zZm9ybVZhbHVlWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0uaW5kZXhPZihcInJvdGF0ZVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICBsZXQgY2VudGVyID0gb2wuZXh0ZW50LmdldENlbnRlcihnZW9tZXRyeS5nZXRFeHRlbnQoKSk7XHJcbiAgICAgICAgICAgIGxldCBhbmdsZSA9ICt0aGlzLmdlb21ldHJ5VHJhbnNmb3JtVmFsdWVbMF0udHJpbSgpICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICAgICAgZ2VvbWV0cnkucm90YXRlKGFuZ2xlLCBjZW50ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJza2V3XCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2tld0dlb21ldHJ5KGdlb21ldHJ5LCArdGhpcy5nZW9tZXRyeVRyYW5zZm9ybVZhbHVlWzBdLnRyaW0oKSwgK3RoaXMuZ2VvbWV0cnlUcmFuc2Zvcm1WYWx1ZVsxXS50cmltKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICg8YW55Pmdlb21ldHJ5KS5mbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udmVydGVkU3R5bGVDb3JlKGZlYXR1cmU6IGFueSwgcmVzb2x1dGlvbjogbnVtYmVyLCBvcHRpb25zKTogb2wuc3R5bGUuU3R5bGVbXSB7XHJcbiAgICAgICAgbGV0IGxlbmd0aCA9IDA7XHJcbiAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcclxuICAgICAgICBpZiAodGhpcy5maWxsIHx8ICh0aGlzLm91dGxpbmVDb2xvciAmJiB0aGlzLm91dGxpbmVXaWR0aCkgfHwgdGhpcy5saW5lYXJHcmFkaWVudCB8fCB0aGlzLnJhZGlhbEdyYWRpZW50KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLmZsYXRDb29yZGluYXRlc18gPSB0aGlzLkdldFRyYW5zZm9ybWVkQ29vcmRpbmF0ZXMoZmVhdHVyZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNoYWRvd0R4IHx8IHRoaXMuc2hhZG93RHkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzaGFkb3dUcmFuc2xhdGVWYWx1ZSA9IHRoaXMuc2hhZG93VHJhbnNsYXRlVmFsdWVCeVJlc29sdXRpb25bcmVzb2x1dGlvbl07XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hhZG93VHJhbnNsYXRlVmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0bXBSZXNvbHV0aW9uID0gTWF0aC5yb3VuZChyZXNvbHV0aW9uICogMTAwMDAwMDAwKSAvIDEwMDAwMDAwMDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNoYWRvd1RyYW5zbGF0ZSA9IChgdHJhbnNsYXRlKCR7KHRoaXMuc2hhZG93RHggPyB0aGlzLnNoYWRvd0R4IDogMCkgKiB0bXBSZXNvbHV0aW9ufSwkeyh0aGlzLnNoYWRvd0R5ID8gdGhpcy5zaGFkb3dEeSA6IDApICogdG1wUmVzb2x1dGlvbn0pYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hhZG93VHJhbnNsYXRlVmFsdWUgPSB0aGlzLmdldFRyYW5zZm9ybVZhbHVlcyh0aGlzLnNoYWRvd1RyYW5zbGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFkb3dUcmFuc2xhdGVWYWx1ZUJ5UmVzb2x1dGlvbltyZXNvbHV0aW9uXSA9IHNoYWRvd1RyYW5zbGF0ZVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCB0bXBGbGF0Q29vcmRpbmF0ZXMgPSBmZWF0dXJlLmdldEZsYXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5ld0ZsYXRDb29yZGluYXRlcyA9ICg8YW55Pm9sLmdlb20pLmZsYXQudHJhbnNmb3JtLnRyYW5zbGF0ZSh0bXBGbGF0Q29vcmRpbmF0ZXMsIDAsIHRtcEZsYXRDb29yZGluYXRlcy5sZW5ndGgsIDIsICtzaGFkb3dUcmFuc2xhdGVWYWx1ZVswXS50cmltKCksICtzaGFkb3dUcmFuc2xhdGVWYWx1ZVsxXS50cmltKCksIHVuZGVmaW5lZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHRtcENvb3JkaW5hdGVzOiBvbC5Db29yZGluYXRlW11bXSA9IFtbXV07XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXdGbGF0Q29vcmRpbmF0ZXMubGVuZ3RoOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0bXBDb29yZGluYXRlc1tpbmRleF0gfHwgKHRtcENvb3JkaW5hdGVzW2luZGV4XSA9IFtdKTtcclxuICAgICAgICAgICAgICAgICAgICB0bXBDb29yZGluYXRlc1tpbmRleF0ucHVzaChbbmV3RmxhdENvb3JkaW5hdGVzW2ldLCBuZXdGbGF0Q29vcmRpbmF0ZXNbaSArIDFdXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRtcENvb3JkaW5hdGVzW2luZGV4XS5sZW5ndGggPiAzICYmIHRtcENvb3JkaW5hdGVzW2luZGV4XVswXVswXSA9PT0gbmV3RmxhdENvb3JkaW5hdGVzW2ldICYmIHRtcENvb3JkaW5hdGVzW2luZGV4XVswXVsxXSA9PT0gbmV3RmxhdENvb3JkaW5hdGVzW2kgKyAxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBnZW9tZXRyeSA9IG5ldyBvbC5nZW9tLlBvbHlnb24odG1wQ29vcmRpbmF0ZXMsIFwiWFlcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgR2VvQXJlYVN0eWxlLmFyZWFTaGFkb3dTdHlsZS5nZXRGaWxsKCkuc2V0Q29sb3IodGhpcy5jb252ZXJ0ZWRTaGFkb3dDb2xvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgR2VvQXJlYVN0eWxlLmFyZWFTaGFkb3dTdHlsZS5zZXRHZW9tZXRyeShnZW9tZXRyeSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlc1tsZW5ndGgrK10gPSBHZW9BcmVhU3R5bGUuYXJlYVNoYWRvd1N0eWxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5maWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlb0JydXNoID0gR2VvQnJ1c2guY3JlYXRlQnJ1c2hCeVR5cGUodGhpcy5icnVzaFR5cGUsIGZlYXR1cmUsIHJlc29sdXRpb24sIHRoaXMuYnJ1c2hPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIEdlb0FyZWFTdHlsZS5hcmVhU3R5bGUuZ2V0RmlsbCgpLnNldENvbG9yKHRoaXMuZ2VvQnJ1c2gpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzdHJva2UgdG8gaGFuZGxlIG91dGxpbmVDb2xvciwgb3V0bGluZURhc2hBcnJheSwgb3V0bGluZU9wYWNpdHkgYW5kIG91dGxpbmVXaWR0aFxyXG4gICAgICAgICAgICBpZiAodGhpcy5vdXRsaW5lQ29sb3IgfHwgdGhpcy5vdXRsaW5lRGFzaEFycmF5IHx8IHRoaXMub3V0bGluZVdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3U3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgbmV3U3Ryb2tlLnNldENvbG9yKHRoaXMuY29udmVydGVkT3V0bGluZUNvbG9yKTtcclxuICAgICAgICAgICAgICAgIG5ld1N0cm9rZS5zZXRMaW5lRGFzaCh0aGlzLmNvbnZlcnRlZE91dGxpbmVEYXNoQXJyYXkpO1xyXG4gICAgICAgICAgICAgICAgbmV3U3Ryb2tlLnNldFdpZHRoKHRoaXMub3V0bGluZVdpZHRoKTtcclxuICAgICAgICAgICAgICAgIEdlb0FyZWFTdHlsZS5hcmVhU3R5bGUuc2V0U3Ryb2tlKG5ld1N0cm9rZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBHZW9BcmVhU3R5bGUuYXJlYVN0eWxlLnNldFN0cm9rZSh1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBHZW9BcmVhU3R5bGUuYXJlYVN0eWxlLnNldEdlb21ldHJ5KGZlYXR1cmUpO1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlc1tsZW5ndGgrK10gPSBHZW9BcmVhU3R5bGUuYXJlYVN0eWxlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtbWEgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGVHYW1tYSA9IHRoaXMuZ2FtbWE7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmxheWVyLm9uKFwicHJlY29tcG9zZVwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LmNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gc3R5bGVHYW1tYTtcclxuICAgICAgICAgICAgICAgICAgICBldnQuY29udGV4dC53ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBzdHlsZUdhbW1hO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5jb250ZXh0Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHN0eWxlR2FtbWE7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LmNvbnRleHQubXNJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBzdHlsZUdhbW1hO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlcztcclxuICAgIH1cclxufSIsImltcG9ydCB7IEJydXNoVHlwZU9wdGlvbnMgfSBmcm9tIFwiLi9icnVzaFR5cGVPcHRpb25zXCI7XHJcbmltcG9ydCB7IEdlb1N0eWxlIH0gZnJvbSBcIi4vZ2VvU3R5bGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9CcnVzaCB7XHJcbiAgICBzdGF0aWMgZ2VvQnJ1c2hGdW5jdGlvbnMgPSB7XHJcbiAgICAgICAgc29saWQ6IEdlb0JydXNoLmNyZWF0ZUdlb1NvbGlkQnJ1c2gsXHJcbiAgICAgICAgcmFkaWFsZ3JhZGllbnQ6IEdlb0JydXNoLmNyZWF0ZVJhZGlhbEdyYWRpZW50Q29sb3IsXHJcbiAgICAgICAgbGluZWFyZ3JhZGllbnQ6IEdlb0JydXNoLmNyZWF0ZUxpbmVhckdyYWRpZW50Q29sb3IsXHJcbiAgICAgICAgaGF0Y2g6IEdlb0JydXNoLmNyZWF0ZVBhdHRlcm5Db2xvcixcclxuICAgICAgICB0ZXh0dXJlOiBHZW9CcnVzaC5jcmVhdGVJbWFnZUNhbnZhc1BhdHRlcm5cclxuICAgIH07XHJcblxyXG4gICAgc3RhdGljIGdlb1BhdHRlcm5GdW5jdGlvbnMgPSB7XHJcbiAgICAgICAgQ3Jvc3M6IEdlb0JydXNoLmdldENyb3NzUGF0dGVybixcclxuICAgICAgICBIb3Jpem9udGFsOiBHZW9CcnVzaC5nZXRIb3Jpem9udGFsUGF0dGVybixcclxuICAgICAgICBWZXJ0aWNhbDogR2VvQnJ1c2guZ2V0VmVydGljYWxQYXR0ZXJuLFxyXG4gICAgICAgIEZvcndhcmREaWFnb25hbDogR2VvQnJ1c2guZ2V0Rm9yd2FyZERpYWdvbmFsUGF0dGVybixcclxuICAgICAgICBCYWNrd2FyZERpYWdvbmFsOiBHZW9CcnVzaC5nZXRCYWNrd2FyZERpYWdvbmFsUGF0dGVybixcclxuICAgICAgICBMYXJnZUdyaWQ6IEdlb0JydXNoLmdldExhcmdlR3JpZFBhdHRlcm4sXHJcbiAgICAgICAgRGlhZ29uYWxDcm9zczogR2VvQnJ1c2guZ2V0RGlhZ29uYWxDcm9zc1BhdHRlcm4sXHJcbiAgICAgICAgUGVyY2VudDA1OiBHZW9CcnVzaC5nZXRQZXJjZW50MDVQYXR0ZXJuLFxyXG4gICAgICAgIFBlcmNlbnQxMDogR2VvQnJ1c2guZ2V0UGVyY2VudDEwUGF0dGVybixcclxuICAgICAgICBQZXJjZW50MjA6IEdlb0JydXNoLmdldFBlcmNlbnQyMFBhdHRlcm4sXHJcbiAgICAgICAgUGVyY2VudDI1OiBHZW9CcnVzaC5nZXRQZXJjZW50MjVQYXR0ZXJuLFxyXG4gICAgICAgIFBlcmNlbnQzMDogR2VvQnJ1c2guZ2V0UGVyY2VudDMwUGF0dGVybixcclxuICAgICAgICBQZXJjZW50NDA6IEdlb0JydXNoLmdldFBlcmNlbnQ0MFBhdHRlcm4sXHJcbiAgICAgICAgUGVyY2VudDUwOiBHZW9CcnVzaC5nZXRQZXJjZW50NTBQYXR0ZXJuLFxyXG4gICAgICAgIFBlcmNlbnQ2MDogR2VvQnJ1c2guZ2V0UGVyY2VudDYwUGF0dGVybixcclxuICAgICAgICBQZXJjZW50NzA6IEdlb0JydXNoLmdldFBlcmNlbnQ3MFBhdHRlcm4sXHJcbiAgICAgICAgUGVyY2VudDc1OiBHZW9CcnVzaC5nZXRQZXJjZW50NzVQYXR0ZXJuLFxyXG4gICAgICAgIFBlcmNlbnQ4MDogR2VvQnJ1c2guZ2V0UGVyY2VudDgwUGF0dGVybixcclxuICAgICAgICBQZXJjZW50OTA6IEdlb0JydXNoLmdldFBlcmNlbnQ5MFBhdHRlcm4sXHJcbiAgICB9O1xyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVCcnVzaEJ5VHlwZShicnVzaFR5cGU6IGFueSwgZmVhdHVyZTogYW55LCByZXNvbHV0aW9uOiBudW1iZXIsIGJydXNoVHlwZU9wdGlvbnM/OiBCcnVzaFR5cGVPcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IGdlb0JydXNoRnVuY3Rpb24gPSB0aGlzLmdlb0JydXNoRnVuY3Rpb25zW2JydXNoVHlwZV07XHJcbiAgICAgICAgaWYgKHR5cGVvZiBnZW9CcnVzaEZ1bmN0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGdlb0JydXNoRnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbiwgYnJ1c2hUeXBlT3B0aW9ucyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyByZWdpc3Rlckdlb0JydXNoRnVuY3Rpb24oa2V5OiBzdHJpbmcsIGdlb0JydXNoRnVuY3Rpb246IGFueSkge1xyXG4gICAgICAgIHRoaXMuZ2VvQnJ1c2hGdW5jdGlvbnNba2V5XSA9IGdlb0JydXNoRnVuY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZUdlb1NvbGlkQnJ1c2goZmVhdHVyZTogYW55LCByZXNvbHV0aW9uOiBudW1iZXIsIGdlb0JydXNoT3B0aW9uczogQnJ1c2hUeXBlT3B0aW9ucykge1xyXG4gICAgICAgIGlmIChnZW9CcnVzaE9wdGlvbnMuZmlsbENvbG9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBHZW9TdHlsZS50b1JHQkFDb2xvcihnZW9CcnVzaE9wdGlvbnMuZmlsbENvbG9yLCBnZW9CcnVzaE9wdGlvbnMuZmlsbE9wYWNpdHkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlUmFkaWFsR3JhZGllbnRDb2xvcihmZWF0dXJlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgZ2VvQnJ1c2hPcHRpb25zOiBCcnVzaFR5cGVPcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IGV4dGVudCA9IGZlYXR1cmUuZ2V0RXh0ZW50KCk7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IHRyeSB0byBjcmVhdGUgaXQgd2hlbiBjcmVhdGluZyB0aGUgR2VvU3R5bGUuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG5cclxuICAgICAgICAvLyBUT0RPOiBjaGVjayBpZiB0aGVyZSBpcyBhIGRpZmZlcmVuY2UgYnkgc3JpZC5cclxuICAgICAgICBsZXQgd2lkdGggPSBvbC5leHRlbnQuZ2V0V2lkdGgoZXh0ZW50KSAvIHJlc29sdXRpb24gKiBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG4gICAgICAgIGxldCBoZWlnaHQgPSBvbC5leHRlbnQuZ2V0SGVpZ2h0KGV4dGVudCkgLyByZXNvbHV0aW9uICogb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuICAgICAgICAvLyBUT0RPOiB0aGUgKHgwLHkwKSBpcyB0aGUgY2VudGVyIG9mIGZlYXR1cmUgZXh0ZW50LCBvcHRpbWl6ZSBpdFxyXG4gICAgICAgIGxldCB4MCA9IHdpZHRoIC8gMjtcclxuICAgICAgICBsZXQgeTAgPSBoZWlnaHQgLyAyO1xyXG4gICAgICAgIGxldCByMSA9IHgwO1xyXG4gICAgICAgIGxldCBncmQgPSBjb250ZXh0LmNyZWF0ZVJhZGlhbEdyYWRpZW50KHgwLCB5MCwgMCwgeDAsIHkwLCByMSk7XHJcblxyXG4gICAgICAgIGxldCBncmFkaWVudENvbG9ycyA9IGdlb0JydXNoT3B0aW9ucy5yYWRpYWxHcmFkaWVudC5zcGxpdChcIixcIik7XHJcbiAgICAgICAgZm9yIChsZXQgZ3JhZGllbnRDb2xvciBvZiBncmFkaWVudENvbG9ycykge1xyXG4gICAgICAgICAgICBncmFkaWVudENvbG9yID0gZ3JhZGllbnRDb2xvci50cmltKCk7XHJcbiAgICAgICAgICAgIGxldCBjb2xvclN0b3AgPSBncmFkaWVudENvbG9yLnN1YnN0cigxLCBncmFkaWVudENvbG9yLmxlbmd0aCAtIDIpO1xyXG4gICAgICAgICAgICBsZXQgY3MgPSBjb2xvclN0b3Auc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKE51bWJlcihjc1swXS50cmltKCkpLCBHZW9TdHlsZS50b1JHQkFDb2xvcihjc1sxXS50cmltKCksIGdlb0JydXNoT3B0aW9ucy5maWxsT3BhY2l0eSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGdyZDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlTGluZWFyR3JhZGllbnRDb2xvcihmZWF0dXJlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgZ2VvQnJ1c2hPcHRpb25zOiBCcnVzaFR5cGVPcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IGV4dGVudCA9IGZlYXR1cmUuZ2V0RXh0ZW50KCk7XHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIC8vIFRPRE86IHRoZSBkaXJlY3Rpb24gQW5nbGUgYnkgeDAseTAseDEseTEuIHRoaXMuZGlyZWN0aW9uQW5nbGVcclxuICAgICAgICBsZXQgZ3JkID0gY29udGV4dC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCAwLCBvbC5leHRlbnQuZ2V0V2lkdGgoZXh0ZW50KSAvIHJlc29sdXRpb24gKiBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPLCBvbC5leHRlbnQuZ2V0SGVpZ2h0KGV4dGVudCkgLyByZXNvbHV0aW9uICogb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTyk7XHJcblxyXG4gICAgICAgIGxldCBncmFkaWVudENvbG9ycyA9IGdlb0JydXNoT3B0aW9ucy5saW5lYXJHcmFkaWVudC5zcGxpdChcIixcIik7XHJcbiAgICAgICAgZm9yIChsZXQgZ3JhZGllbnRDb2xvciBvZiBncmFkaWVudENvbG9ycykge1xyXG4gICAgICAgICAgICBncmFkaWVudENvbG9yID0gZ3JhZGllbnRDb2xvci50cmltKCk7XHJcbiAgICAgICAgICAgIGxldCBjb2xvclN0b3AgPSBncmFkaWVudENvbG9yLnN1YnN0cigxLCBncmFkaWVudENvbG9yLmxlbmd0aCAtIDIpO1xyXG4gICAgICAgICAgICBsZXQgY3MgPSBjb2xvclN0b3Auc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgICAgICBncmQuYWRkQ29sb3JTdG9wKE51bWJlcihjc1swXS50cmltKCkpLCBHZW9TdHlsZS50b1JHQkFDb2xvcihjc1sxXS50cmltKCksIGdlb0JydXNoT3B0aW9ucy5maWxsT3BhY2l0eSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGdyZDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgY3JlYXRlSW1hZ2VDYW52YXNQYXR0ZXJuKGZlYXR1cmU6IGFueSwgcmVzb2x1dGlvbjogbnVtYmVyLCBnZW9CcnVzaE9wdGlvbnM6IEJydXNoVHlwZU9wdGlvbnMpIHtcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgbGV0IGltYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgaW1hZ2VFbGVtZW50LnNyYyA9IGdlb0JydXNoT3B0aW9ucy50ZXh0dXJlRmlsZTtcclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGltYWdlRWxlbWVudCwgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZVBhdHRlcm5Db2xvcihmZWF0dXJlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgZ2VvQnJ1c2hPcHRpb25zOiBCcnVzaFR5cGVPcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IGNyZWF0ZVBhdHRlcm5GdW5jdGlvbiA9IEdlb0JydXNoLmdlb1BhdHRlcm5GdW5jdGlvbnNbZ2VvQnJ1c2hPcHRpb25zLmhhdGNoU3R5bGVdO1xyXG4gICAgICAgIGlmICh0eXBlb2YgY3JlYXRlUGF0dGVybkZ1bmN0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVBhdHRlcm5GdW5jdGlvbihnZW9CcnVzaE9wdGlvbnMuZmlsbENvbG9yLCBnZW9CcnVzaE9wdGlvbnMuZm9yZWdyb3VuZEZpbGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIEdlb1N0eWxlLnRvUkdCQUNvbG9yKFxyXG4gICAgICAgICAgICAgICAgZ2VvQnJ1c2hPcHRpb25zLmZpbGxDb2xvcixcclxuICAgICAgICAgICAgICAgIGdlb0JydXNoT3B0aW9ucy5maWxsT3BhY2l0eVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0Q3Jvc3NQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNjtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqIDIgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqIDIgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIGhvcml6b24gbGluZVxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCBjYW52YXMuaGVpZ2h0IC8gMiwgY2FudmFzLndpZHRoLCAxKTtcclxuXHJcbiAgICAgICAgLy8gdmVydGljYWwgbGluZVxyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoY2FudmFzLndpZHRoIC8gMiwgMCwgMSwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0SG9yaXpvbnRhbFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA2O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAyICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAyICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBob3Jpem9uIGxpbmVcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgY2FudmFzLmhlaWdodCAvIDIsIGNhbnZhcy53aWR0aCwgMSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0VmVydGljYWxQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNjtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogMiAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogMiAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gdmVydGljYWwgbGluZVxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdChjYW52YXMud2lkdGggLyAyLCAwLCAxLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRGb3J3YXJkRGlhZ29uYWxQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNjtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogMiAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogMiAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gdmVydGljYWwgbGluZVxyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbygwLCAwKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIC8vIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgLy8gY29udGV4dC5tb3ZlVG8oLTEsIC0xKTtcclxuICAgICAgICAvLyBjb250ZXh0LmxpbmVUbygxLCAtMSk7XHJcbiAgICAgICAgLy8gY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICsgMSwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgLy8gY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICsgMSwgY2FudmFzLmhlaWdodCArIDEpO1xyXG4gICAgICAgIC8vIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCArIDEpO1xyXG4gICAgICAgIC8vIGNvbnRleHQubGluZVRvKC0xLCAwKTtcclxuICAgICAgICAvLyBjb250ZXh0LmxpbmVUbygtMSwgLTEpO1xyXG4gICAgICAgIC8vIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgLy8gY29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0QmFja3dhcmREaWFnb25hbFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA2O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAyICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAyICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyB2ZXJ0aWNhbCBsaW5lXHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKGNhbnZhcy53aWR0aCwgMCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oMCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQZXJjZW50MDVQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNTtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogKDIgKiAwLjk1ICsgMSkgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqICgyICogMC45NSArIDEpICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjQ1KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjU1LCBjYW52YXMuaGVpZ2h0ICogMC41KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjU1KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjQ1LCBjYW52YXMuaGVpZ2h0ICogMC41KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjQ1KTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBlcmNlbnQxMFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA1O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAoMiAqIDAuOSArIDEpICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAoMiAqIDAuOSArIDEpICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjQpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNiwgY2FudmFzLmhlaWdodCAqIDAuNSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC41LCBjYW52YXMuaGVpZ2h0ICogMC42KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjQsIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuNCk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQZXJjZW50MjBQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNTtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogKDIgKiAwLjggKyAxKSAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogKDIgKiAwLjggKyAxKSAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gcGVyY2VudGFnZSByZWdpb25cclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oY2FudmFzLndpZHRoICogMC41LCBjYW52YXMuaGVpZ2h0ICogMC4zKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjcsIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuNyk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC4zLCBjYW52YXMuaGVpZ2h0ICogMC41KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjMpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0UGVyY2VudDI1UGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDU7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqIDAuNCAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogMC40ICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5lbGxpcHNlKFxyXG4gICAgICAgICAgICBjYW52YXMud2lkdGggKiAwLjI1LFxyXG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0ICogMC4yNSxcclxuICAgICAgICAgICAgMC44LFxyXG4gICAgICAgICAgICAwLjgsXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIDAsXHJcbiAgICAgICAgICAgIDIgKiBNYXRoLlBJXHJcbiAgICAgICAgKTtcclxuICAgICAgICAvLyBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBlcmNlbnQzMFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA1O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAoMiAqIDAuNyArIDEpICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAoMiAqIDAuNyArIDEpICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjIpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuOCwgY2FudmFzLmhlaWdodCAqIDAuNSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC41LCBjYW52YXMuaGVpZ2h0ICogMC44KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjIsIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuMik7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQZXJjZW50NDBQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNTtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogKDIgKiAwLjQgKyAxKSAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogKDIgKiAwLjQgKyAxKSAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gcGVyY2VudGFnZSByZWdpb25cclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oY2FudmFzLndpZHRoICogMC41LCBjYW52YXMuaGVpZ2h0ICogMC4xKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjksIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgY2FudmFzLmhlaWdodCAqIDAuOSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC4xLCBjYW52YXMuaGVpZ2h0ICogMC41KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQgKiAwLjEpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0UGVyY2VudDUwUGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDU7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqICgyICogMC41ICsgMSkgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqICgyICogMC41ICsgMSkgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIHBlcmNlbnRhZ2UgcmVnaW9uXHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgMCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0ICogMC41KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjUsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKDAsIGNhbnZhcy5oZWlnaHQgKiAwLjUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNSwgMCk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQZXJjZW50NjBQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNTtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogKDIgKiAwLjQgKyAxKSAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogKDIgKiAwLjQgKyAxKSAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gcGVyY2VudGFnZSByZWdpb25cclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oY2FudmFzLndpZHRoICogMC40LCAwKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjYsIDApO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCAqIDAuNCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0ICogMC42KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjYsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNCwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oMCwgY2FudmFzLmhlaWdodCAqIDAuNik7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oMCwgY2FudmFzLmhlaWdodCAqIDAuNCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC40LCAwKTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBlcmNlbnQ3MFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA1O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAoMiAqIDAuMyArIDEpICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAoMiAqIDAuMyArIDEpICogcmF0aW87XHJcblxyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGw7XHJcbiAgICAgICAgY29udGV4dC5maWxsUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG5cclxuICAgICAgICAvLyBwZXJjZW50YWdlIHJlZ2lvblxyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZm9yZWdyb3VuZEZpbGw7XHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjYW52YXMud2lkdGggKiAwLjMsIDApO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNywgMCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0ICogMC4zKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQgKiAwLjcpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKGNhbnZhcy53aWR0aCAqIDAuNywgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC4zLCBjYW52YXMuaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbygwLCBjYW52YXMuaGVpZ2h0ICogMC43KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbygwLCBjYW52YXMuaGVpZ2h0ICogMC4zKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjMsIDApO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5maWxsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0UGVyY2VudDc1UGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDU7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqICgyICogMC4yNSArIDEpICogcmF0aW87XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemUgKiAoMiAqIDAuMjUgKyAxKSAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gcGVyY2VudGFnZSByZWdpb25cclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oY2FudmFzLndpZHRoICogMC4yNSwgMCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC43NSwgMCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0ICogMC4yNSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0ICogMC43NSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC43NSwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oY2FudmFzLndpZHRoICogMC4yNSwgY2FudmFzLmhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oMCwgY2FudmFzLmhlaWdodCAqIDAuNzUpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKDAsIGNhbnZhcy5oZWlnaHQgKiAwLjI1KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGggKiAwLjI1LCAwKTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5jcmVhdGVQYXR0ZXJuKGNhbnZhcywgXCJyZXBlYXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFBlcmNlbnQ4MFBhdHRlcm4oZmlsbDogc3RyaW5nLCBmb3JlZ3JvdW5kRmlsbDogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHNpemUgPSA1O1xyXG4gICAgICAgIGxldCByYXRpbyA9IG9sLmhhcy5ERVZJQ0VfUElYRUxfUkFUSU87XHJcblxyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHNpemUgKiAwLjggKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqIDAuOCAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gcGVyY2VudGFnZSByZWdpb25cclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuZWxsaXBzZShjYW52YXMud2lkdGggKiAwLjEsIGNhbnZhcy5oZWlnaHQgKiAwLjEsIDAuOCwgMC44LCAwLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgLy8gY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQZXJjZW50OTBQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNTtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogKDIgKiAwLjEgKyAxKSAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogKDIgKiAwLjEgKyAxKSAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gcGVyY2VudGFnZSByZWdpb25cclxuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQuZWxsaXBzZShjYW52YXMud2lkdGggKiAwLjEsIGNhbnZhcy5oZWlnaHQgKiAwLjEsIDAuNCwgMC40LCAwLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgLy8gY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRMYXJnZUdyaWRQYXR0ZXJuKGZpbGw6IHN0cmluZywgZm9yZWdyb3VuZEZpbGw6IHN0cmluZykge1xyXG4gICAgICAgIGxldCBzaXplID0gNjtcclxuICAgICAgICBsZXQgcmF0aW8gPSBvbC5oYXMuREVWSUNFX1BJWEVMX1JBVElPO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBjYW52YXMud2lkdGggPSBzaXplICogMiAqIHJhdGlvO1xyXG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzaXplICogMiAqIHJhdGlvO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgLy8gZ3JpZCByZWN0XHJcbiAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IGZvcmVncm91bmRGaWxsO1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlUmVjdChcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgMCxcclxuICAgICAgICAgICAgY2FudmFzLndpZHRoLFxyXG4gICAgICAgICAgICBjYW52YXMuaGVpZ2h0XHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuY3JlYXRlUGF0dGVybihjYW52YXMsIFwicmVwZWF0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXREaWFnb25hbENyb3NzUGF0dGVybihmaWxsOiBzdHJpbmcsIGZvcmVncm91bmRGaWxsOiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgc2l6ZSA9IDY7XHJcbiAgICAgICAgbGV0IHJhdGlvID0gb2wuaGFzLkRFVklDRV9QSVhFTF9SQVRJTztcclxuXHJcbiAgICAgICAgbGV0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZSAqIDIgKiByYXRpbztcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gc2l6ZSAqIDIgKiByYXRpbztcclxuXHJcbiAgICAgICAgbGV0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbDtcclxuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XHJcblxyXG4gICAgICAgIC8vIGxlZnQgdG8gcmlnaHQgZGlhZ29uYWwgbGluZVxyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbygwLCAwKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIC8vIHJpZ2h0IHRvIGxlZnQgZGlhZ29uYWwgbGluZVxyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBmb3JlZ3JvdW5kRmlsbDtcclxuICAgICAgICBjb250ZXh0Lm1vdmVUbyhjYW52YXMud2lkdGgsIDApO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKDAsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNyZWF0ZVBhdHRlcm4oY2FudmFzLCBcInJlcGVhdFwiKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEdlb1N0eWxlIH0gZnJvbSBcIi4vZ2VvU3R5bGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9MaW5lU3R5bGUgZXh0ZW5kcyBHZW9TdHlsZSB7XHJcbiAgICBnZW9tZXRyeUxpbmVDYXBzID0gW1xyXG4gICAgICAgIFwidHJpYW5nbGVcIixcclxuICAgICAgICBcInNxdWFyZWFuY2hvclwiLFxyXG4gICAgICAgIFwicm91bmRhbmNob3JcIixcclxuICAgICAgICBcImRpYW1vbmRhbmNob3JcIixcclxuICAgICAgICBcImFycm93YW5jaG9yXCJcclxuICAgIF07XHJcbiAgICBvbExpbmVDYXBzTWFwID0ge1xyXG4gICAgICAgIGJ1dHQ6IFwiYnV0dFwiLFxyXG4gICAgICAgIGZsYXQ6IFwic3F1YXJlXCIsXHJcbiAgICAgICAgc3F1YXJlOiBcInNxdWFyZVwiLFxyXG4gICAgICAgIHJvdW5kOiBcInJvdW5kXCIsXHJcbiAgICAgICAgbm9hbmNob3I6IFwic3F1YXJlXCIsXHJcbiAgICAgICAgYW5jaG9ybWFzazogXCJzcXVhcmVcIixcclxuICAgICAgICBjdXN0b206IFwic3F1YXJlXCJcclxuICAgIH07XHJcblxyXG4gICAgbGluZUNhcDogc3RyaW5nO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIGRhc2hBcnJheTogYW55O1xyXG4gICAgZ2FtbWE6IHN0cmluZztcclxuICAgIGdlb21ldHJ5VHJhbnNmb3JtOiBzdHJpbmc7XHJcbiAgICBsaW5lSm9pbjogc3RyaW5nO1xyXG4gICAgbWl0ZXJMaW1pdDogbnVtYmVyO1xyXG4gICAgb2Zmc2V0OiBzdHJpbmc7XHJcbiAgICBvcGFjaXR5OiBudW1iZXI7XHJcbiAgICB3aWR0aDogbnVtYmVyO1xyXG4gICAgb25ld2F5U3ltYm9sOiBhbnk7XHJcblxyXG4gICAgbGluZUNhcElubmVyOiBzdHJpbmc7XHJcbiAgICBjb2xvcklubmVyOiBzdHJpbmc7XHJcbiAgICBkYXNoQXJyYXlJbm5lcjogYW55O1xyXG4gICAgbGluZUpvaW5Jbm5lcjogc3RyaW5nO1xyXG4gICAgbWl0ZXJMaW1pdElubmVyOiBudW1iZXI7XHJcbiAgICB3aWR0aElubmVyOiBudW1iZXI7XHJcblxyXG4gICAgbGluZUNhcENlbnRlcjogc3RyaW5nO1xyXG4gICAgY29sb3JDZW50ZXI6IHN0cmluZztcclxuICAgIGRhc2hBcnJheUNlbnRlcjogYW55O1xyXG4gICAgbGluZUpvaW5DZW50ZXI6IHN0cmluZztcclxuICAgIG1pdGVyTGltaXRDZW50ZXI6IG51bWJlcjtcclxuICAgIHdpZHRoQ2VudGVyOiBudW1iZXI7XHJcblxyXG4gICAgb2xDb2xvcjogc3RyaW5nO1xyXG4gICAgY29udmVydGVkRGFzaEFycmF5OiBudW1iZXJbXSA9IG5ldyBBcnJheTxudW1iZXI+KCk7XHJcblxyXG4gICAgb2xJbm5lckNvbG9yOiBzdHJpbmc7XHJcbiAgICBjb252ZXJ0ZWRJbm5lckRhc2hBcnJheTogbnVtYmVyW10gPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xyXG5cclxuICAgIG9sQ2VudGVyQ29sb3I6IHN0cmluZztcclxuICAgIGNvbnZlcnRlZENlbnRlckRhc2hBcnJheTogbnVtYmVyW10gPSBuZXcgQXJyYXk8bnVtYmVyPigpO1xyXG5cclxuICAgIGxpbmVTdHJva2U6IGFueTtcclxuICAgIGxpbmVTdHlsZTogYW55O1xyXG5cclxuICAgIGxpbmVDYXBGaWxsOiBhbnk7XHJcbiAgICBsaW5lQ2FwU3R5bGU6IGFueTtcclxuXHJcbiAgICBsaW5lSW5uZXJTdHJva2U6IGFueTtcclxuICAgIGxpbmVJbm5lclN0eWxlOiBhbnk7XHJcblxyXG4gICAgbGluZUNhcElubmVyRmlsbDogYW55O1xyXG4gICAgbGluZUNhcElubmVyU3R5bGU6IGFueTtcclxuXHJcbiAgICBsaW5lQ2VudGVyU3Ryb2tlOiBhbnk7XHJcbiAgICBsaW5lQ2VudGVyU3R5bGU6IGFueTtcclxuXHJcbiAgICBsaW5lQ2FwQ2VudGVyRmlsbDogYW55O1xyXG4gICAgbGluZUNhcENlbnRlclN0eWxlOiBhbnk7XHJcblxyXG4gICAgb25ld2F5SWNvbjogYW55O1xyXG4gICAgb25ld2F5U3R5bGU6IGFueTtcclxuXHJcbiAgICBzdGF0aWMgb25ld2F5SW1nOiBhbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVKc29uPzogYW55KSB7XHJcbiAgICAgICAgc3VwZXIoc3R5bGVKc29uKTtcclxuXHJcbiAgICAgICAgdGhpcy5saW5lU3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSgpO1xyXG4gICAgICAgIHRoaXMubGluZVN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHsgc3Ryb2tlOiB0aGlzLmxpbmVTdHJva2UgfSk7XHJcbiAgICAgICAgdGhpcy5saW5lQ2FwRmlsbCA9IG5ldyBvbC5zdHlsZS5GaWxsKCk7XHJcbiAgICAgICAgdGhpcy5saW5lQ2FwU3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoeyBmaWxsOiB0aGlzLmxpbmVDYXBGaWxsIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmxpbmVJbm5lclN0cm9rZSA9IG5ldyBvbC5zdHlsZS5TdHJva2UoKTtcclxuICAgICAgICB0aGlzLmxpbmVJbm5lclN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHsgc3Ryb2tlOiB0aGlzLmxpbmVJbm5lclN0cm9rZSB9KTtcclxuICAgICAgICB0aGlzLmxpbmVDYXBJbm5lckZpbGwgPSBuZXcgb2wuc3R5bGUuRmlsbCgpO1xyXG4gICAgICAgIHRoaXMubGluZUNhcElubmVyU3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgICAgICAgICBmaWxsOiB0aGlzLmxpbmVDYXBJbm5lckZpbGxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5saW5lQ2VudGVyU3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSgpO1xyXG4gICAgICAgIHRoaXMubGluZUNlbnRlclN0eWxlID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLmxpbmVDZW50ZXJTdHJva2VcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmxpbmVDYXBDZW50ZXJGaWxsID0gbmV3IG9sLnN0eWxlLkZpbGwoKTtcclxuICAgICAgICB0aGlzLmxpbmVDYXBDZW50ZXJTdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgICAgIGZpbGw6IHRoaXMubGluZUNhcENlbnRlckZpbGxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHN0eWxlSnNvbikge1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVDYXAgPSBzdHlsZUpzb25bXCJsaW5lLWNhcFwiXTtcclxuICAgICAgICAgICAgdGhpcy5jb2xvciA9IHN0eWxlSnNvbltcImxpbmUtY29sb3JcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZGFzaEFycmF5ID0gc3R5bGVKc29uW1wibGluZS1kYXNoYXJyYXlcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtbWEgPSBzdHlsZUpzb25bXCJsaW5lLWdhbW1hXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmdlb21ldHJ5VHJhbnNmb3JtID0gc3R5bGVKc29uW1wibGluZS1nZW9tZXRyeS10cmFuc2Zvcm1cIl07XHJcbiAgICAgICAgICAgIHRoaXMubGluZUpvaW4gPSBzdHlsZUpzb25bXCJsaW5lLWpvaW5cIl07XHJcbiAgICAgICAgICAgIHRoaXMubWl0ZXJMaW1pdCA9IHN0eWxlSnNvbltcImxpbmUtbWl0ZXJsaW1pdFwiXTtcclxuICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSBzdHlsZUpzb25bXCJsaW5lLW9mZnNldFwiXTtcclxuICAgICAgICAgICAgdGhpcy5vcGFjaXR5ID0gc3R5bGVKc29uW1wibGluZS1vcGFjaXR5XCJdO1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gc3R5bGVKc29uW1wibGluZS13aWR0aFwiXTtcclxuICAgICAgICAgICAgdGhpcy5saW5lQ2FwSW5uZXIgPSBzdHlsZUpzb25bXCJsaW5lLWNhcC1pbm5lclwiXTtcclxuICAgICAgICAgICAgdGhpcy5jb2xvcklubmVyID0gc3R5bGVKc29uW1wibGluZS1jb2xvci1pbm5lclwiXTtcclxuICAgICAgICAgICAgdGhpcy5kYXNoQXJyYXlJbm5lciA9IHN0eWxlSnNvbltcImxpbmUtZGFzaGFycmF5LWlubmVyXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVKb2luSW5uZXIgPSBzdHlsZUpzb25bXCJsaW5lLWpvaW4taW5uZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMubWl0ZXJMaW1pdElubmVyID0gc3R5bGVKc29uW1wibGluZS1taXRlcmxpbWl0LWlubmVyXCJdO1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoSW5uZXIgPSBzdHlsZUpzb25bXCJsaW5lLXdpZHRoLWlubmVyXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVDYXBDZW50ZXIgPSBzdHlsZUpzb25bXCJsaW5lLWNhcC1jZW50ZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMuY29sb3JDZW50ZXIgPSBzdHlsZUpzb25bXCJsaW5lLWNvbG9yLWNlbnRlclwiXTtcclxuICAgICAgICAgICAgdGhpcy5kYXNoQXJyYXlDZW50ZXIgPSBzdHlsZUpzb25bXCJsaW5lLWRhc2hhcnJheS1jZW50ZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMubGluZUpvaW5DZW50ZXIgPSBzdHlsZUpzb25bXCJsaW5lLWpvaW4tY2VudGVyXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm1pdGVyTGltaXRDZW50ZXIgPSBzdHlsZUpzb25bXCJsaW5lLW1pdGVybGltaXQtY2VudGVyXCJdO1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoQ2VudGVyID0gc3R5bGVKc29uW1wibGluZS13aWR0aC1jZW50ZXJcIl07XHJcbiAgICAgICAgICAgIHRoaXMub25ld2F5U3ltYm9sID0gc3R5bGVKc29uW1wibGluZS1vbmV3YXktc3ltYm9sXCJdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5pdGlhbGl6ZUNvcmUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5vbENvbG9yID0gR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5jb2xvciwgdGhpcy5vcGFjaXR5KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubGluZVN0cm9rZS5zZXRDb2xvcih0aGlzLm9sQ29sb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVDYXBGaWxsLnNldENvbG9yKHRoaXMub2xDb2xvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRhc2hBcnJheSkge1xyXG4gICAgICAgICAgICBsZXQgdG1wQXJyYXkgPSB0aGlzLmRhc2hBcnJheS5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGEgb2YgdG1wQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udmVydGVkRGFzaEFycmF5LnB1c2gocGFyc2VGbG9hdChhKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERyYXdpbmcgaW5uZXJcclxuICAgICAgICBpZiAodGhpcy5jb2xvcklubmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2xJbm5lckNvbG9yID0gR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5jb2xvcklubmVyLCB0aGlzLm9wYWNpdHkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5saW5lSW5uZXJTdHJva2Uuc2V0Q29sb3IodGhpcy5vbElubmVyQ29sb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVDYXBJbm5lckZpbGwuc2V0Q29sb3IodGhpcy5vbElubmVyQ29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kYXNoQXJyYXlJbm5lcikge1xyXG4gICAgICAgICAgICBsZXQgdG1wQXJyYXkgPSB0aGlzLmRhc2hBcnJheUlubmVyLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgYSBvZiB0bXBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZWRJbm5lckRhc2hBcnJheS5wdXNoKHBhcnNlRmxvYXQoYSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBEcmF3aW5nIGNlbnRlclxyXG4gICAgICAgIGlmICh0aGlzLmNvbG9yQ2VudGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMub2xDZW50ZXJDb2xvciA9IEdlb1N0eWxlLnRvUkdCQUNvbG9yKHRoaXMuY29sb3JDZW50ZXIsIHRoaXMub3BhY2l0eSk7XHJcbiAgICAgICAgICAgIHRoaXMubGluZUNlbnRlclN0cm9rZS5zZXRDb2xvcih0aGlzLm9sQ2VudGVyQ29sb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmxpbmVDYXBDZW50ZXJGaWxsLnNldENvbG9yKHRoaXMub2xDZW50ZXJDb2xvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRhc2hBcnJheUNlbnRlcikge1xyXG4gICAgICAgICAgICBsZXQgdG1wQXJyYXkgPSB0aGlzLmRhc2hBcnJheUNlbnRlci5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGEgb2YgdG1wQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udmVydGVkQ2VudGVyRGFzaEFycmF5LnB1c2gocGFyc2VGbG9hdChhKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm9uZXdheVN5bWJvbCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uZXdheUljb24gPSBuZXcgb2wuc3R5bGUuSWNvbih7XHJcbiAgICAgICAgICAgICAgICBzcmM6IHRoaXMub25ld2F5U3ltYm9sLFxyXG4gICAgICAgICAgICAgICAgaW1nU2l6ZTogWzE4LCA1XSxcclxuICAgICAgICAgICAgICAgIGFuY2hvcjogWzAuNSwgMC41XSxcclxuICAgICAgICAgICAgICAgIHJvdGF0ZVdpdGhWaWV3OiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMub25ld2F5U3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHRoaXMub25ld2F5SWNvblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VHJhbnNmb3JtVmFsdWVzKHRyYW5zZm9ybTogc3RyaW5nKTogYW55IHtcclxuICAgICAgICAvLyBnZXQgdHJhbnNmb3JtIHZhbHVlcyB3aGljaCBsb29rIGxpa2UgdHJhbnNmb3JtKHZhbHVlMSwgdmFsdWUyKVxyXG4gICAgICAgIGxldCBzdGFydCA9IHRyYW5zZm9ybS5pbmRleE9mKFwiKFwiKTtcclxuICAgICAgICBsZXQgZW5kID0gdHJhbnNmb3JtLmluZGV4T2YoXCIpXCIpO1xyXG4gICAgICAgIGxldCB2YWx1ZVN0cmluZyA9IHRyYW5zZm9ybS5zdWJzdHJpbmcoc3RhcnQgKyAxLCBlbmQpO1xyXG5cclxuICAgICAgICBsZXQgdmFsdWVzID0gW107XHJcbiAgICAgICAgaWYgKHZhbHVlU3RyaW5nLmluY2x1ZGVzKFwiLFwiKSkge1xyXG4gICAgICAgICAgICB2YWx1ZXMgPSB2YWx1ZVN0cmluZy5zcGxpdChcIixcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFsdWVzLnB1c2godmFsdWVTdHJpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb252ZXJ0ZWRTdHlsZUNvcmUoZmVhdHVyZTogYW55LCByZXNvbHV0aW9uOiBudW1iZXIsIG9wdGlvbnM6IGFueSk6IG9sLnN0eWxlLlN0eWxlW10ge1xyXG4gICAgICAgIGxldCBsZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMuc3R5bGVzID0gW107XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmNvbG9yICYmIHRoaXMud2lkdGgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2xMaW5lQ2Fwc01hcFt0aGlzLmxpbmVDYXBdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVTdHJva2Uuc2V0TGluZUNhcCh0aGlzLm9sTGluZUNhcHNNYXBbdGhpcy5saW5lQ2FwXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZVN0cm9rZS5zZXRDb2xvcih0aGlzLm9sQ29sb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQ2FwRmlsbC5zZXRDb2xvcih0aGlzLm9sQ29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhc2hBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lU3Ryb2tlLnNldExpbmVEYXNoKHRoaXMuY29udmVydGVkRGFzaEFycmF5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5saW5lSm9pbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lU3Ryb2tlLnNldExpbmVKb2luKHRoaXMubGluZUpvaW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1pdGVyTGltaXQgIT09IDQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZVN0cm9rZS5zZXRNaXRlckxpbWl0KHRoaXMubWl0ZXJMaW1pdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZVN0cm9rZS5zZXRXaWR0aCh0aGlzLndpZHRoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gU2V0IGlubmVyXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbG9ySW5uZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUlubmVyU3Ryb2tlLnNldENvbG9yKHRoaXMub2xJbm5lckNvbG9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUNhcElubmVyRmlsbC5zZXRDb2xvcih0aGlzLm9sSW5uZXJDb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZGFzaEFycmF5SW5uZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUlubmVyU3Ryb2tlLnNldExpbmVEYXNoKHRoaXMuY29udmVydGVkSW5uZXJEYXNoQXJyYXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpbmVKb2luSW5uZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUlubmVyU3Ryb2tlLnNldExpbmVKb2luKHRoaXMubGluZUpvaW5Jbm5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubWl0ZXJMaW1pdElubmVyICE9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVJbm5lclN0cm9rZS5zZXRNaXRlckxpbWl0KHRoaXMubWl0ZXJMaW1pdElubmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy53aWR0aElubmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVJbm5lclN0cm9rZS5zZXRXaWR0aCh0aGlzLndpZHRoSW5uZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgY2VudGVyXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbG9yQ2VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVDZW50ZXJTdHJva2Uuc2V0Q29sb3IodGhpcy5vbENlbnRlckNvbG9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUNhcENlbnRlckZpbGwuc2V0Q29sb3IodGhpcy5vbENlbnRlckNvbG9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUNlbnRlclN0cm9rZS5zZXRMaW5lQ2FwKFwiYnV0dFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXNoQXJyYXlDZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUNlbnRlclN0cm9rZS5zZXRMaW5lRGFzaCh0aGlzLmNvbnZlcnRlZENlbnRlckRhc2hBcnJheSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubGluZUpvaW5DZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZUNlbnRlclN0cm9rZS5zZXRMaW5lSm9pbih0aGlzLmxpbmVKb2luQ2VudGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5taXRlckxpbWl0Q2VudGVyICE9PSA0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVDZW50ZXJTdHJva2Uuc2V0TWl0ZXJMaW1pdCh0aGlzLm1pdGVyTGltaXRDZW50ZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndpZHRoQ2VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVDZW50ZXJTdHJva2Uuc2V0V2lkdGgodGhpcy53aWR0aENlbnRlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBnZW9tZXRyeUZ1bmN0aW9uID0gKGZlYXR1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeShmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWVzID0gdGhpcy5nZXRUcmFuc2Zvcm1WYWx1ZXModGhpcy5nZW9tZXRyeVRyYW5zZm9ybSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwidHJhbnNsYXRlXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS50cmFuc2xhdGUoK3ZhbHVlc1swXS50cmltKCksICt2YWx1ZXNbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJzY2FsZVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuc2NhbGUoK3ZhbHVlc1swXS50cmltKCksICt2YWx1ZXNbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJyb3RhdGVcIikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjZW50ZXIgPSBvbC5leHRlbnQuZ2V0Q2VudGVyKGdlb21ldHJ5LmdldEV4dGVudCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbmdsZSA9ICt2YWx1ZXNbMF0udHJpbSgpICogTWF0aC5QSSAvIDE4MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LnJvdGF0ZShhbmdsZSwgY2VudGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmdlb21ldHJ5VHJhbnNmb3JtLmluZGV4T2YoXCJza2V3XCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNrZXdHZW9tZXRyeShnZW9tZXRyeSwgK3ZhbHVlc1swXS50cmltKCksICt2YWx1ZXNbMV0udHJpbSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxpbmVTdHlsZS5zZXRHZW9tZXRyeShnZW9tZXRyeUZ1bmN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGVzW2xlbmd0aCsrXSA9IHRoaXMubGluZVN0eWxlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2FtbWEgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmxheWVyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGVHYW1tYSA9IHRoaXMuZ2FtbWE7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmxheWVyLm9uKFwicHJlY29tcG9zZVwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LmNvbnRleHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkID0gc3R5bGVHYW1tYTtcclxuICAgICAgICAgICAgICAgICAgICBldnQuY29udGV4dC53ZWJraXRJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBzdHlsZUdhbW1hO1xyXG4gICAgICAgICAgICAgICAgICAgIGV2dC5jb250ZXh0Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHN0eWxlR2FtbWE7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZ0LmNvbnRleHQubXNJbWFnZVNtb290aGluZ0VuYWJsZWQgPSBzdHlsZUdhbW1hO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdlb21ldHJ5TGluZUNhcHMuaW5jbHVkZXModGhpcy5saW5lQ2FwKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5RnVuY3Rpb24gPSAoZmVhdHVyZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoZmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdlb0xpbmVTdHlsZS5jcmVhdGVBbmNob3JlZEdlb21ldHJ5KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lQ2FwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQ2FwU3R5bGUuc2V0R2VvbWV0cnkoZ2VvbWV0cnlGdW5jdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlc1tsZW5ndGgrK10gPSB0aGlzLmxpbmVDYXBTdHlsZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRHJhd2luZyBpbm5lclxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb2xvcklubmVyICYmIHRoaXMud2lkdGhJbm5lcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5RnVuY3Rpb24gPSAoZmVhdHVyZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoZmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlcyA9IHRoaXMuZ2V0VHJhbnNmb3JtVmFsdWVzKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0uaW5kZXhPZihcInRyYW5zbGF0ZVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkudHJhbnNsYXRlKCt2YWx1ZXNbMF0udHJpbSgpLCArdmFsdWVzWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwic2NhbGVcIikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LnNjYWxlKCt2YWx1ZXNbMF0udHJpbSgpLCArdmFsdWVzWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwicm90YXRlXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2VudGVyID0gb2wuZXh0ZW50LmdldENlbnRlcihnZW9tZXRyeS5nZXRFeHRlbnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW5nbGUgPSArdmFsdWVzWzBdLnRyaW0oKSAqIE1hdGguUEkgLyAxODA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5yb3RhdGUoYW5nbGUsIGNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwic2tld1wiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5za2V3R2VvbWV0cnkoZ2VvbWV0cnksICt2YWx1ZXNbMF0udHJpbSgpLCArdmFsdWVzWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpbmVJbm5lclN0eWxlLnNldEdlb21ldHJ5KGdlb21ldHJ5RnVuY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXNbbGVuZ3RoKytdID0gdGhpcy5saW5lSW5uZXJTdHlsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZW9tZXRyeUxpbmVDYXBzLmluY2x1ZGVzKHRoaXMubGluZUNhcElubmVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZW9tZXRyeUZ1bmN0aW9uID0gKGZlYXR1cmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5ID0gdGhpcy5nZXRHZW9tZXRyeShmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEdlb0xpbmVTdHlsZS5jcmVhdGVBbmNob3JlZEdlb21ldHJ5KFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmVDYXBJbm5lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2lkdGhJbm5lcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGluZUNhcElubmVyU3R5bGUuc2V0R2VvbWV0cnkoZ2VvbWV0cnlGdW5jdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZXNbbGVuZ3RoKytdID0gdGhpcy5saW5lQ2FwSW5uZXJTdHlsZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRHJhd2luZyBjZW50ZXJcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29sb3JDZW50ZXIgJiYgdGhpcy53aWR0aENlbnRlcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGdlb21ldHJ5RnVuY3Rpb24gPSAoZmVhdHVyZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoZmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHZhbHVlcyA9IHRoaXMuZ2V0VHJhbnNmb3JtVmFsdWVzKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnlUcmFuc2Zvcm0uaW5kZXhPZihcInRyYW5zbGF0ZVwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkudHJhbnNsYXRlKCt2YWx1ZXNbMF0udHJpbSgpLCArdmFsdWVzWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwic2NhbGVcIikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LnNjYWxlKCt2YWx1ZXNbMF0udHJpbSgpLCArdmFsdWVzWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwicm90YXRlXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2VudGVyID0gb2wuZXh0ZW50LmdldENlbnRlcihnZW9tZXRyeS5nZXRFeHRlbnQoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgYW5nbGUgPSArdmFsdWVzWzBdLnRyaW0oKSAqIE1hdGguUEkgLyAxODA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5yb3RhdGUoYW5nbGUsIGNlbnRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5nZW9tZXRyeVRyYW5zZm9ybS5pbmRleE9mKFwic2tld1wiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5za2V3R2VvbWV0cnkoZ2VvbWV0cnksICt2YWx1ZXNbMF0udHJpbSgpLCArdmFsdWVzWzFdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQ2VudGVyU3R5bGUuc2V0R2VvbWV0cnkoZ2VvbWV0cnlGdW5jdGlvbik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlc1tsZW5ndGgrK10gPSB0aGlzLmxpbmVDZW50ZXJTdHlsZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZW9tZXRyeUxpbmVDYXBzLmluY2x1ZGVzKHRoaXMubGluZUNhcENlbnRlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZ2VvbWV0cnlGdW5jdGlvbiA9IChmZWF0dXJlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBnZW9tZXRyeSA9IHRoaXMuZ2V0R2VvbWV0cnkoZmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBHZW9MaW5lU3R5bGUuY3JlYXRlQW5jaG9yZWRHZW9tZXRyeShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lQ2FwQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aWR0aENlbnRlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb25cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGluZUNhcENlbnRlclN0eWxlLnNldEdlb21ldHJ5KGdlb21ldHJ5RnVuY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVzW2xlbmd0aCsrXSA9IHRoaXMubGluZUNhcENlbnRlclN0eWxlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5vbmV3YXlTeW1ib2wpIHtcclxuICAgICAgICAgICAgbGV0IGZsYXRDb29yZGluYXRlcyA9IGZlYXR1cmUuZ2V0RmxhdENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgIGxldCBsb25nZXN0ID0gMDtcclxuICAgICAgICAgICAgbGV0IGxvbmdlc3RJbmRleDtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gZmxhdENvb3JkaW5hdGVzLmxlbmd0aCAtIDQ7IGkgKz0gMikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRYID0gTWF0aC5hYnMoZmxhdENvb3JkaW5hdGVzW2ldIC0gZmxhdENvb3JkaW5hdGVzW2kgKyAyXSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZFkgPSBNYXRoLmFicyhmbGF0Q29vcmRpbmF0ZXNbaSArIDFdIC0gZmxhdENvb3JkaW5hdGVzW2kgKyAzXSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGlzdGFuY2UgPSBkWCArIGRZO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc3RhbmNlID4gbG9uZ2VzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvbmdlc3QgPSBkaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgICAgICBsb25nZXN0SW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBbZmxhdENvb3JkaW5hdGVzW2xvbmdlc3RJbmRleF0sIGZsYXRDb29yZGluYXRlc1tsb25nZXN0SW5kZXggKyAxXV07XHJcbiAgICAgICAgICAgIGxldCBlbmQgPSBbZmxhdENvb3JkaW5hdGVzW2xvbmdlc3RJbmRleCArIDJdLCBmbGF0Q29vcmRpbmF0ZXNbbG9uZ2VzdEluZGV4ICsgM11dO1xyXG4gICAgICAgICAgICBsZXQgZHggPSBlbmRbMF0gLSBzdGFydFswXTtcclxuICAgICAgICAgICAgbGV0IGR5ID0gZW5kWzFdIC0gc3RhcnRbMV07XHJcbiAgICAgICAgICAgIGxldCByb3RhdGlvbiA9IE1hdGguYXRhbjIoZHksIGR4KTtcclxuICAgICAgICAgICAgbGV0IGNlbnRlclBvaW50OiBbbnVtYmVyLCBudW1iZXJdID0gWyhzdGFydFswXSArIGVuZFswXSkgKiAwLjUsIChzdGFydFsxXSArIGVuZFsxXSkgKiAwLjVdO1xyXG4gICAgICAgICAgICBsZXQgZ2VvbWV0cnkgPSBuZXcgb2wuZ2VvbS5Qb2ludChjZW50ZXJQb2ludCwgXCJYWVwiKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub25ld2F5SWNvbi5yb3RhdGlvbl8gPSAtcm90YXRpb247XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uZXdheVN0eWxlLnNldEdlb21ldHJ5KGdlb21ldHJ5KTtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZXNbbGVuZ3RoKytdID0gdGhpcy5vbmV3YXlTdHlsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLnN0eWxlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRHZW9tZXRyeShmZWF0dXJlOiBhbnkpIHtcclxuICAgICAgICBsZXQgdG1wRmxhdENvb3JkaW5hdGVzID0gZmVhdHVyZS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICBsZXQgdG1wQ29vcmRpbmF0ZXM6IG9sLkNvb3JkaW5hdGVbXSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG1wRmxhdENvb3JkaW5hdGVzLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIHRtcENvb3JkaW5hdGVzLnB1c2goW3RtcEZsYXRDb29yZGluYXRlc1tpXSwgdG1wRmxhdENvb3JkaW5hdGVzW2kgKyAxXV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IG9sLmdlb20uTGluZVN0cmluZyh0bXBDb29yZGluYXRlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGNyZWF0ZUFuY2hvcmVkR2VvbWV0cnkoZ2VvbWV0cnk6IG9sLmdlb20uR2VvbWV0cnksIGxpbmVDYXA6IHN0cmluZywgbGluZVdpZHRoOiBudW1iZXIsIHJlc29sdXRpb246IG51bWJlcikge1xyXG4gICAgICAgIGxldCBzZWdtZW50cyA9IEdlb0xpbmVTdHlsZS5nZXRUZXJtaW5hbFNlZ21lbnRzKGdlb21ldHJ5KTtcclxuICAgICAgICBsZXQgbGluZWFyUmluZzogb2wuZ2VvbS5MaW5lYXJSaW5nID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBtdWx0aVBvbHlnb24gPSBuZXcgb2wuZ2VvbS5NdWx0aVBvbHlnb24oW10pO1xyXG4gICAgICAgIGZvciAobGV0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcclxuICAgICAgICAgICAgbGV0IGZpcnN0ID0gc2VnbWVudFswXTtcclxuICAgICAgICAgICAgbGV0IGxhc3QgPSBzZWdtZW50WzFdO1xyXG4gICAgICAgICAgICBsZXQgZGVsdGEgPSBsaW5lV2lkdGggKiByZXNvbHV0aW9uIC8gMjtcclxuICAgICAgICAgICAgbGV0IHRyYW5zbGF0ZURlbHRhID0gKGxpbmVXaWR0aCAtIDEpICogcmVzb2x1dGlvbiAvIDI7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobGluZUNhcCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInRyaWFuZ2xlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZyA9IG5ldyBvbC5nZW9tLkxpbmVhclJpbmcoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSwgbGFzdFsxXSArIGRlbHRhXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgW2xhc3RbMF0gKyBkZWx0YSwgbGFzdFsxXV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdLCBsYXN0WzFdIC0gZGVsdGFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSwgbGFzdFsxXSArIGRlbHRhXVxyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNxdWFyZWFuY2hvclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhICo9IDEuNTtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lYXJSaW5nID0gbmV3IG9sLmdlb20uTGluZWFyUmluZyhbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdIC0gZGVsdGEsIGxhc3RbMV0gKyBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdICsgZGVsdGEsIGxhc3RbMV0gKyBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdICsgZGVsdGEsIGxhc3RbMV0gLSBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdIC0gZGVsdGEsIGxhc3RbMV0gLSBkZWx0YV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdIC0gZGVsdGEsIGxhc3RbMV0gKyBkZWx0YV1cclxuICAgICAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyb3VuZGFuY2hvclwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhICo9IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhZGl1c0RlbHRhID0gTWF0aC5QSSAvIDE4O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb29yZGluYXRlczogb2wuQ29vcmRpbmF0ZVtdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJhZGl1cyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvb3JkaW5hdGVzLnB1c2goW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5jb3MocmFkaXVzKSAqIGRlbHRhICsgbGFzdFswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguc2luKHJhZGl1cykgKiBkZWx0YSArIGxhc3RbMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1cyArPSByYWRpdXNEZWx0YTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29vcmRpbmF0ZXMucHVzaChjb29yZGluYXRlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZyA9IG5ldyBvbC5nZW9tLkxpbmVhclJpbmcoY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImRpYW1vbmRhbmNob3JcIjpcclxuICAgICAgICAgICAgICAgICAgICBkZWx0YSAqPSAxLjU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZyA9IG5ldyBvbC5nZW9tLkxpbmVhclJpbmcoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSAtIGRlbHRhLCBsYXN0WzFdICsgZGVsdGFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSArIGRlbHRhLCBsYXN0WzFdICsgZGVsdGFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSArIGRlbHRhLCBsYXN0WzFdIC0gZGVsdGFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSAtIGRlbHRhLCBsYXN0WzFdIC0gZGVsdGFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSAtIGRlbHRhLCBsYXN0WzFdICsgZGVsdGFdXHJcbiAgICAgICAgICAgICAgICAgICAgXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy5yb3RhdGUoTWF0aC5QSSAvIDQsIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImFycm93YW5jaG9yXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgKj0gMjtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lYXJSaW5nID0gbmV3IG9sLmdlb20uTGluZWFyUmluZyhbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdLCBsYXN0WzFdICsgZGVsdGFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSArIGRlbHRhICogTWF0aC5jb3MoTWF0aC5QSSAvIDYpICogMiwgbGFzdFsxXV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtsYXN0WzBdLCBsYXN0WzFdIC0gZGVsdGFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBbbGFzdFswXSwgbGFzdFsxXSArIGRlbHRhXVxyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmaXJzdFswXSA9PT0gbGFzdFswXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0WzFdID4gbGFzdFsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcucm90YXRlKC1NYXRoLlBJIC8gMiwgbGFzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy50cmFuc2xhdGUoMCwgLXRyYW5zbGF0ZURlbHRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy5yb3RhdGUoTWF0aC5QSSAvIDIsIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcudHJhbnNsYXRlKDAsIHRyYW5zbGF0ZURlbHRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChmaXJzdFsxXSA9PT0gbGFzdFsxXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RbMF0gPCBmaXJzdFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcucm90YXRlKE1hdGguUEksIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcudHJhbnNsYXRlKC10cmFuc2xhdGVEZWx0YSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcudHJhbnNsYXRlKHRyYW5zbGF0ZURlbHRhLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBkeCA9IGxhc3RbMF0gLSBmaXJzdFswXTtcclxuICAgICAgICAgICAgICAgIGxldCBkeSA9IGxhc3RbMV0gLSBmaXJzdFsxXTtcclxuICAgICAgICAgICAgICAgIGxldCByYWRpYW5zID0gTWF0aC5hdGFuKGR5IC8gZHgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3RbMF0gPiBmaXJzdFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcucm90YXRlKHJhZGlhbnMsIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmNvcyhyYWRpYW5zKSAqIHRyYW5zbGF0ZURlbHRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnNpbihyYWRpYW5zKSAqIHRyYW5zbGF0ZURlbHRhXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZWFyUmluZy5yb3RhdGUocmFkaWFucyArIE1hdGguUEksIGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVhclJpbmcudHJhbnNsYXRlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAtTWF0aC5jb3MocmFkaWFucykgKiB0cmFuc2xhdGVEZWx0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLU1hdGguc2luKHJhZGlhbnMpICogdHJhbnNsYXRlRGVsdGFcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgcG9seWdvbiA9IG5ldyBvbC5nZW9tLlBvbHlnb24oW10pO1xyXG4gICAgICAgICAgICBwb2x5Z29uLmFwcGVuZExpbmVhclJpbmcobGluZWFyUmluZyk7XHJcbiAgICAgICAgICAgIG11bHRpUG9seWdvbi5hcHBlbmRQb2x5Z29uKHBvbHlnb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbXVsdGlQb2x5Z29uO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRUZXJtaW5hbFNlZ21lbnRzKGdlb21ldHJ5OiBvbC5nZW9tLkdlb21ldHJ5KSB7XHJcbiAgICAgICAgbGV0IHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSBbXTtcclxuICAgICAgICBsZXQgZ2VvbWV0cnlUeXBlID0gKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIGdlb21ldHJ5VHlwZS5MSU5FX1NUUklORzpcclxuICAgICAgICAgICAgICAgIGxldCBjb29yZHMgPSAoPGFueT5nZW9tZXRyeSkuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgICAgIGxldCBzdGFydCA9IFtjb29yZHNbMV0sIGNvb3Jkc1swXV07XHJcbiAgICAgICAgICAgICAgICBsZXQgZW5kID0gW2Nvb3Jkc1tjb29yZHMubGVuZ3RoIC0gMl0sIGNvb3Jkc1tjb29yZHMubGVuZ3RoIC0gMV1dO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHN0YXJ0KTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChlbmQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZ2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmVzID0gKDxhbnk+Z2VvbWV0cnkpLmdldExpbmVTdHJpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0cywgR2VvTGluZVN0eWxlLmdldFRlcm1pbmFsU2VnbWVudHMobGluZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgZ2VvbWV0cnlUeXBlLkdFT01FVFJZX0NPTExFQ1RJT046XHJcbiAgICAgICAgICAgICAgICBsZXQgZ2VvbWV0cmllcyA9ICg8YW55Pmdlb21ldHJ5KS5nZXRHZW9tZXRyaWVzKCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBnZW9tIG9mIGdlb21ldHJpZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHRzLCBHZW9MaW5lU3R5bGUuZ2V0VGVybWluYWxTZWdtZW50cyhnZW9tKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBHZW9TdHlsZSB9IGZyb20gXCIuL2dlb1N0eWxlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgR2VvUG9pbnRTdHlsZSBleHRlbmRzIEdlb1N0eWxlIHtcclxuICAgIHN0YXRpYyBsaW5lYXJHcmFkaWVudERpY3Rpb25hcnk6IHsgW2luZGV4OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xyXG4gICAgc3RhdGljIHJhZGlhbEdyYWRpZW50RGljdGlvbmFyeTogeyBbaW5kZXg6IHN0cmluZ106IGFueSB9ID0ge307XHJcblxyXG4gICAgYnJ1c2hPcHRpb25zOiBhbnk7XHJcblxyXG4gICAgYnJ1c2hUeXBlOiBzdHJpbmc7XHJcbiAgICBnbHlwaDogc3RyaW5nO1xyXG4gICAgZmlsbDogc3RyaW5nO1xyXG4gICAgbGluZWFyR3JhZGllbnQ6IHN0cmluZztcclxuICAgIHJhZGlhbEdyYWRpZW50OiBzdHJpbmc7XHJcbiAgICBnbHlwaE5hbWU6IHN0cmluZztcclxuICAgIGdseXBoTWFza0NvbG9yOiBzdHJpbmc7XHJcbiAgICBnbHlwaE1hc2tNYXJnaW46IHN0cmluZztcclxuICAgIGdseXBoTWFza091dGxpbmVDb2xvcjogc3RyaW5nXHJcbiAgICBnbHlwaE1hc2tPdXRsaW5lV2lkdGg6IG51bWJlcjtcclxuICAgIGdseXBoTWFza1R5cGU6IHN0cmluZ1xyXG4gICAgb3V0bGluZUNvbG9yOiBzdHJpbmc7XHJcbiAgICBvdXRsaW5lV2lkdGg6IG51bWJlcjtcclxuICAgIHNpemU6IG51bWJlcjtcclxuICAgIGFuZ2xlOiBudW1iZXI7XHJcbiAgICBkeDogbnVtYmVyO1xyXG4gICAgZHk6IG51bWJlcjtcclxuICAgIHBvaW50RmlsZTogc3RyaW5nO1xyXG4gICAgb3BhY2l0eTogbnVtYmVyO1xyXG4gICAgc3ltYm9sVHlwZTogc3RyaW5nO1xyXG4gICAgdHJhbnNmb3JtOiBzdHJpbmc7XHJcbiAgICBwb2ludFR5cGU6IHN0cmluZztcclxuICAgIGltYWdlU3R5bGU6IG9sLnN0eWxlLkltYWdlO1xyXG5cclxuICAgIC8vIHN0YXRpYyBnbHlwaENhY2hlOiBhbnkgPSB7fTtcclxuXHJcbiAgICBjb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvcjogc3RyaW5nO1xyXG4gICAgY29udmVydGVkR2x5cGhGaWxsOiBhbnk7XHJcblxyXG4gICAgc3R5bGU6IG9sLnN0eWxlLlN0eWxlO1xyXG4gICAgdGV4dFN0eWxlOiBvbC5zdHlsZS5UZXh0O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0eWxlSnNvbj86IGFueSkge1xyXG4gICAgICAgIHN1cGVyKHN0eWxlSnNvbik7XHJcbiAgICAgICAgaWYgKHN0eWxlSnNvbikge1xyXG4gICAgICAgICAgICB0aGlzLmdseXBoID0gc3R5bGVKc29uW1wicG9pbnQtZ2x5cGhcIl07XHJcbiAgICAgICAgICAgIHRoaXMubGluZWFyR3JhZGllbnQgPSBzdHlsZUpzb25bXCJwb2ludC1saW5lYXItZ3JhZGllbnRcIl07XHJcbiAgICAgICAgICAgIHRoaXMucmFkaWFsR3JhZGllbnQgPSBzdHlsZUpzb25bXCJwb2ludC1yYWRpYWwtZ3JhZGllbnRcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZmlsbCA9IHN0eWxlSnNvbltcInBvaW50LWZpbGxcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZ2x5cGhOYW1lID0gc3R5bGVKc29uW1wicG9pbnQtZ2x5cGgtbmFtZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5nbHlwaE1hc2tDb2xvciA9IHN0eWxlSnNvbltcInBvaW50LWdseXBoLW1hc2stY29sb3JcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZ2x5cGhNYXNrTWFyZ2luID0gc3R5bGVKc29uW1wicG9pbnQtZ2x5cGgtbWFzay1tYXJnaW5cIl07XHJcbiAgICAgICAgICAgIHRoaXMuZ2x5cGhNYXNrT3V0bGluZUNvbG9yID0gc3R5bGVKc29uW1wicG9pbnQtZ2x5cGgtbWFzay1vdXRsaW5lLWNvbG9yXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmdseXBoTWFza091dGxpbmVXaWR0aCA9IHN0eWxlSnNvbltcInBvaW50LWdseXBoLW1hc2stb3V0bGluZS13aWR0aFwiXTtcclxuICAgICAgICAgICAgdGhpcy5nbHlwaE1hc2tUeXBlID0gc3R5bGVKc29uW1wicG9pbnQtZ2x5cGgtbWFzay10eXBlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm91dGxpbmVDb2xvciA9IHN0eWxlSnNvbltcInBvaW50LW91dGxpbmUtY29sb3JcIl07XHJcbiAgICAgICAgICAgIHRoaXMub3V0bGluZVdpZHRoID0gc3R5bGVKc29uW1wicG9pbnQtb3V0bGluZS13aWR0aFwiXTtcclxuICAgICAgICAgICAgdGhpcy5zaXplID0gc3R5bGVKc29uW1wicG9pbnQtc2l6ZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5hbmdsZSA9IHN0eWxlSnNvbltcInBvaW50LXJvdGF0ZS1hbmdsZVwiXSA/IHN0eWxlSnNvbltcInBvaW50LXJvdGF0ZS1hbmdsZVwiXSA6IDA7XHJcbiAgICAgICAgICAgIHRoaXMuZHggPSBzdHlsZUpzb25bXCJwb2ludC1keFwiXTtcclxuICAgICAgICAgICAgdGhpcy5keSA9IHN0eWxlSnNvbltcInBvaW50LWR5XCJdO1xyXG4gICAgICAgICAgICB0aGlzLnBvaW50RmlsZSA9IHN0eWxlSnNvbltcInBvaW50LWZpbGVcIl07XHJcbiAgICAgICAgICAgIHRoaXMub3BhY2l0eSA9IHN0eWxlSnNvbltcInBvaW50LW9wYWNpdHlcIl07XHJcbiAgICAgICAgICAgIHRoaXMuc3ltYm9sVHlwZSA9IHN0eWxlSnNvbltcInBvaW50LXN5bWJvbC10eXBlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHN0eWxlSnNvbltcInBvaW50LXRyYW5zZm9ybVwiXTtcclxuICAgICAgICAgICAgdGhpcy5wb2ludFR5cGUgPSBzdHlsZUpzb25bXCJwb2ludC10eXBlXCJdO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3V0bGluZUNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRlZEdseXBoT3V0TGluZUNvbG9yID0gR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5vdXRsaW5lQ29sb3IsIHRoaXMub3BhY2l0eSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udmVydGVkR2x5cGhGaWxsID0gR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5maWxsLCB0aGlzLm9wYWNpdHkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5saW5lYXJHcmFkaWVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKEdlb1BvaW50U3R5bGUubGluZWFyR3JhZGllbnREaWN0aW9uYXJ5Lmhhc093blByb3BlcnR5KHRoaXMubGluZWFyR3JhZGllbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGwgPSBHZW9Qb2ludFN0eWxlLmxpbmVhckdyYWRpZW50RGljdGlvbmFyeVt0aGlzLmxpbmVhckdyYWRpZW50XTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGwgPSBHZW9TdHlsZS50b09MTGluZWFyR3JhZGllbnQodGhpcy5saW5lYXJHcmFkaWVudCwgdGhpcy5vcGFjaXR5LCB0aGlzLnNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIEdlb1BvaW50U3R5bGUubGluZWFyR3JhZGllbnREaWN0aW9uYXJ5W3RoaXMubGluZWFyR3JhZGllbnRdID0gdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJhZGlhbEdyYWRpZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoR2VvUG9pbnRTdHlsZS5yYWRpYWxHcmFkaWVudERpY3Rpb25hcnkuaGFzT3duUHJvcGVydHkodGhpcy5yYWRpYWxHcmFkaWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbCA9IEdlb1BvaW50U3R5bGUucmFkaWFsR3JhZGllbnREaWN0aW9uYXJ5W3RoaXMucmFkaWFsR3JhZGllbnRdO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbCA9IEdlb1N0eWxlLnRvT0xSYWRpYWxHcmFkaWVudCh0aGlzLnJhZGlhbEdyYWRpZW50LCB0aGlzLm9wYWNpdHksIHRoaXMuc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgR2VvUG9pbnRTdHlsZS5yYWRpYWxHcmFkaWVudERpY3Rpb25hcnlbdGhpcy5yYWRpYWxHcmFkaWVudF0gPSB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDb3JlKCkge1xyXG4gICAgICAgIHRoaXMuc3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoKTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMucG9pbnRUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFN5bWJvbFN0eWxlKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImltYWdlXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRCaXRtYXBTdHlsZSgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJnbHlwaFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0R2x5cGhTdHlsZSgpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wb2ludFR5cGUgPT09IFwiZ2x5cGhcIikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nbHlwaCAmJiB0aGlzLmdseXBoTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgKDxhbnk+dGhpcy50ZXh0U3R5bGUpLmxhYmVsID0gdGhpcy5nZXRHbHlwaEltYWdlKHRoaXMudGV4dFN0eWxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuc2V0SW1hZ2UobnVsbCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLnNldFRleHQodGhpcy50ZXh0U3R5bGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnN0eWxlLnNldEltYWdlKHRoaXMuaW1hZ2VTdHlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENvbnZlcnRlZFN0eWxlQ29yZShmZWF0dXJlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgb3B0aW9uczogYW55KTogb2wuc3R5bGUuU3R5bGVbXSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9pbnRUeXBlID09PSBcImdseXBoXCIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2x5cGggJiYgdGhpcy5nbHlwaE5hbWUpIHtcclxuICAgICAgICAgICAgICAgICg8YW55PnRoaXMudGV4dFN0eWxlKS5sYWJlbFBvc2l0aW9uID0gZmVhdHVyZS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZlYXR1cmVaaW5kZXggPSBmZWF0dXJlW1widGVtcFRyZWVaaW5kZXhcIl07XHJcbiAgICAgICAgaWYgKGZlYXR1cmVaaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBmZWF0dXJlWmluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zdHlsZS5zZXRaSW5kZXgoZmVhdHVyZVppbmRleCk7XHJcblxyXG4gICAgICAgIHRoaXMuc3R5bGVzID0gW107XHJcbiAgICAgICAgdGhpcy5zdHlsZXNbMF0gPSB0aGlzLnN0eWxlO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5zdHlsZXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0R2x5cGhJbWFnZSh0ZXh0U3RhdGU6IGFueSkge1xyXG4gICAgICAgIGxldCBmb250ID0gdGV4dFN0YXRlLmZvbnRfO1xyXG4gICAgICAgIGxldCBzdHJva2VDb2xvcjtcclxuICAgICAgICBsZXQgb3V0bGluZVdpZHRoID0gMDtcclxuICAgICAgICBsZXQgdGV4dFN0cm9rID0gdGV4dFN0YXRlLmdldFN0cm9rZSgpO1xyXG4gICAgICAgIGlmICh0ZXh0U3Ryb2spIHtcclxuICAgICAgICAgICAgc3Ryb2tlQ29sb3IgPSB0ZXh0U3Ryb2suZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgb3V0bGluZVdpZHRoID0gdGV4dFN0cm9rLmdldFdpZHRoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgc2NhbGUgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuXHJcbiAgICAgICAgLy8gaGVyZVxyXG4gICAgICAgIGxldCB3aWR0aCA9ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLlRleHRSZXBsYXkubWVhc3VyZVRleHRXaWR0aHMoZm9udCwgW3RleHRTdGF0ZS50ZXh0X10sIFtdKSArIG91dGxpbmVXaWR0aCAqIDI7XHJcbiAgICAgICAgbGV0IGhlaWdodCA9ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLm1lYXN1cmVUZXh0SGVpZ2h0KGZvbnQpICsgb3V0bGluZVdpZHRoICogMjtcclxuXHJcbiAgICAgICAgbGV0IHRtcE1hc2tNYXJnaW4gPSAodGhpcy5nbHlwaE1hc2tNYXJnaW4gPyB0aGlzLmdseXBoTWFza01hcmdpbiA6IFwiMFwiKS5zcGxpdCgnLCcpO1xyXG4gICAgICAgIGxldCB0bXBNYXNrSGVpZ2h0TWFyZ2luID0gMDtcclxuICAgICAgICBsZXQgdG1wTWFza1dpZHRoTWFyZ2luID0gMDtcclxuICAgICAgICBzd2l0Y2ggKHRtcE1hc2tNYXJnaW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHRtcE1hc2tIZWlnaHRNYXJnaW4gPSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSAqIDI7XHJcbiAgICAgICAgICAgICAgICB0bXBNYXNrV2lkdGhNYXJnaW4gPSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSAqIDI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgdG1wTWFza0hlaWdodE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICogMjtcclxuICAgICAgICAgICAgICAgIHRtcE1hc2tXaWR0aE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMV0pICogMjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICB0bXBNYXNrSGVpZ2h0TWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgKyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzJdKTtcclxuICAgICAgICAgICAgICAgIHRtcE1hc2tXaWR0aE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMV0pICogMjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICB0bXBNYXNrSGVpZ2h0TWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgKyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzJdKTtcclxuICAgICAgICAgICAgICAgIHRtcE1hc2tXaWR0aE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMV0pICsgcGFyc2VJbnQodG1wTWFza01hcmdpblszXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdG1wTWFza091dGxpbmVXaWR0aCA9ICh0aGlzLmdseXBoTWFza091dGxpbmVXaWR0aCA/IHRoaXMuZ2x5cGhNYXNrT3V0bGluZVdpZHRoIDogMCkgKiAyO1xyXG5cclxuICAgICAgICBsZXQgcmVuZGVyV2lkdGggPSB3aWR0aCArIHRtcE1hc2tXaWR0aE1hcmdpbjtcclxuICAgICAgICBsZXQgcmVuZGVySGVpZ2h0ID0gaGVpZ2h0ICsgdG1wTWFza1dpZHRoTWFyZ2luO1xyXG5cclxuICAgICAgICBsZXQgY2FudmFzV2lkdGggPSB3aWR0aCArIHRtcE1hc2tXaWR0aE1hcmdpbiArIHRtcE1hc2tPdXRsaW5lV2lkdGg7XHJcbiAgICAgICAgbGV0IGNhbnZhc0hlaWdodCA9IGhlaWdodCArIHRtcE1hc2tIZWlnaHRNYXJnaW4gKyB0bXBNYXNrT3V0bGluZVdpZHRoO1xyXG5cclxuICAgICAgICBsZXQgY29udGV4dCA9ICg8YW55Pm9sKS5kb20uY3JlYXRlQ2FudmFzQ29udGV4dDJEKGNhbnZhc1dpZHRoICogc2NhbGUsIGNhbnZhc0hlaWdodCAqIHNjYWxlKTtcclxuXHJcbiAgICAgICAgaWYgKHNjYWxlICE9PSAxKSB7IGNvbnRleHQuc2NhbGUoc2NhbGUsIHNjYWxlKTsgfVxyXG5cclxuICAgICAgICB0aGlzLmRyYXdNYXNrKGNvbnRleHQsIDAsIDAsIHJlbmRlcldpZHRoLCByZW5kZXJIZWlnaHQpO1xyXG5cclxuICAgICAgICBjb250ZXh0LmZvbnQgPSBmb250O1xyXG4gICAgICAgIGNvbnRleHQudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIjtcclxuICAgICAgICBjb250ZXh0LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcbiAgICAgICAgaWYgKHRleHRTdHJvaykge1xyXG4gICAgICAgICAgICBpZiAoc3Ryb2tlQ29sb3IgJiYgb3V0bGluZVdpZHRoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZUNvbG9yO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBvdXRsaW5lV2lkdGggKiAoKDxhbnk+b2wuaGFzKS5TQUZBUkkgPyBzY2FsZSA6IDEpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VUZXh0KHRleHRTdGF0ZS50ZXh0XywgY2FudmFzV2lkdGggLyAyLCBjYW52YXNIZWlnaHQgLyAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRleHRGaWxsID0gdGV4dFN0YXRlLmdldEZpbGwoKTtcclxuICAgICAgICBpZiAodGV4dEZpbGwpIHtcclxuICAgICAgICAgICAgbGV0IGNvbG9yID0gdGV4dEZpbGwuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgaWYgKGNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsVGV4dCh0ZXh0U3RhdGUudGV4dF8sIGNhbnZhc1dpZHRoIC8gMiwgY2FudmFzSGVpZ2h0IC8gMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb250ZXh0LmNhbnZhcztcclxuICAgIH1cclxuXHJcbiAgICBkcmF3TWFzayhjb250ZXh0OiBhbnksIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBmaWxsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBzdHJva2UgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdseXBoTWFza0NvbG9yKSB7XHJcbiAgICAgICAgICAgIGZpbGwgPSBuZXcgb2wuc3R5bGUuRmlsbCgpO1xyXG4gICAgICAgICAgICBmaWxsLnNldENvbG9yKEdlb1N0eWxlLnRvUkdCQUNvbG9yKHRoaXMuZ2x5cGhNYXNrQ29sb3IsIHRoaXMub3BhY2l0eSA/IHRoaXMub3BhY2l0eSA6IDEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmdseXBoTWFza091dGxpbmVDb2xvciAmJiB0aGlzLmdseXBoTWFza091dGxpbmVXaWR0aCkge1xyXG4gICAgICAgICAgICBzdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdseXBoTWFza091dGxpbmVDb2xvcikge1xyXG4gICAgICAgICAgICAgICAgc3Ryb2tlLnNldENvbG9yKEdlb1N0eWxlLnRvUkdCQUNvbG9yKHRoaXMuZ2x5cGhNYXNrT3V0bGluZUNvbG9yLCB0aGlzLm9wYWNpdHkgPyB0aGlzLm9wYWNpdHkgOiAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2x5cGhNYXNrT3V0bGluZVdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBzdHJva2Uuc2V0V2lkdGgodGhpcy5nbHlwaE1hc2tPdXRsaW5lV2lkdGggPyB0aGlzLmdseXBoTWFza091dGxpbmVXaWR0aCA6IDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmdseXBoTWFza1R5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImRlZmF1bHRcIjpcclxuICAgICAgICAgICAgY2FzZSBcIkRlZmF1bHRcIjpcclxuICAgICAgICAgICAgY2FzZSBcInJlY3RhbmdsZVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiUmVjdGFuZ2xlXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdSZWN0YW5nbGUoY29udGV4dCwgeCwgeSwgd2lkdGgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwicm91bmRlZENvcm5lcnNcIjpcclxuICAgICAgICAgICAgY2FzZSBcIlJvdW5kZWRDb3JuZXJzXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdSb3VuZFJlY3RhbmdsZShjb250ZXh0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyb3VuZGVkRW5kc1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwiUm91bmRlZEVuZHNcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JvdW5kZWRFbmRzKGNvbnRleHQsIHgsIHksIHdpZHRoLCBoZWlnaHQsIGZpbGwsIHN0cm9rZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImNpcmNsZVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiQ2lyY2xlXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdDaXJjbGUoY29udGV4dCwgeCwgeSwgd2lkdGgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBkcmF3UmVjdGFuZ2xlKGNvbnRleHQ6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBmaWxsOiBvbC5zdHlsZS5GaWxsLCBzdHJva2U6IG9sLnN0eWxlLlN0cm9rZSkge1xyXG4gICAgICAgIGlmIChmaWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbC5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGxSZWN0KHgsIHksIHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN0cm9rZSkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZS5nZXRXaWR0aCgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlUmVjdCh4ICsgc3Ryb2tlLmdldFdpZHRoKCksIHkgKyBzdHJva2UuZ2V0V2lkdGgoKSwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZHJhd1JvdW5kUmVjdGFuZ2xlKGNvbnRleHQ6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBmaWxsOiBvbC5zdHlsZS5GaWxsLCBzdHJva2U6IG9sLnN0eWxlLlN0cm9rZSkge1xyXG4gICAgICAgIGxldCByYWRpdXMgPSAod2lkdGggPCBoZWlnaHQgPyB3aWR0aCA6IGhlaWdodCkgKiAwLjM7XHJcbiAgICAgICAgLy8gd2lkdGggKj0gMC45O1xyXG4gICAgICAgIC8vIGhlaWdodCAqPSAwLjg7XHJcbiAgICAgICAgaWYgKHN0cm9rZSkge1xyXG4gICAgICAgICAgICB4ID0geCArIChzdHJva2UuZ2V0V2lkdGgoKSA/IHN0cm9rZS5nZXRXaWR0aCgpIDogMCk7XHJcbiAgICAgICAgICAgIHkgPSB5ICsgKHN0cm9rZS5nZXRXaWR0aCgpID8gc3Ryb2tlLmdldFdpZHRoKCkgOiAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgY29udGV4dC5tb3ZlVG8oeCArIHJhZGl1cywgeSk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oeCArIHdpZHRoIC0gcmFkaXVzLCB5KTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoLCB5LCB4ICsgd2lkdGgsIHkgKyByYWRpdXMpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKHggKyB3aWR0aCwgeSArIGhlaWdodCAtIHJhZGl1cyk7XHJcbiAgICAgICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCwgeSArIGhlaWdodCwgeCArIHdpZHRoIC0gcmFkaXVzLCB5ICsgaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyh4ICsgcmFkaXVzLCB5ICsgaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSArIGhlaWdodCwgeCwgeSArIGhlaWdodCAtIHJhZGl1cyk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oeCwgeSArIHJhZGl1cyk7XHJcbiAgICAgICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHksIHggKyByYWRpdXMsIHkpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGlmIChmaWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbC5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBzdHJva2UuZ2V0V2lkdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZS5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRyYXdSb3VuZGVkRW5kcyhjb250ZXh0OiBhbnksIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgZmlsbDogb2wuc3R5bGUuRmlsbCwgc3Ryb2tlOiBvbC5zdHlsZS5TdHJva2UpIHtcclxuICAgICAgICBsZXQgcmFkaXVzID0gKHdpZHRoIDwgaGVpZ2h0ID8gd2lkdGggOiBoZWlnaHQpICogMC4yO1xyXG4gICAgICAgIC8vIHdpZHRoICo9IDAuOTtcclxuICAgICAgICAvLyBoZWlnaHQgKj0gMC44O1xyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgeCA9IHggKyAoc3Ryb2tlLmdldFdpZHRoKCkgPyBzdHJva2UuZ2V0V2lkdGgoKSA6IDApO1xyXG4gICAgICAgICAgICB5ID0geSArIChzdHJva2UuZ2V0V2lkdGgoKSA/IHN0cm9rZS5nZXRXaWR0aCgpIDogMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKHggKyByYWRpdXMsIHkpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKHggKyB3aWR0aCAtIHJhZGl1cywgeSk7XHJcbiAgICAgICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCwgeSArIGhlaWdodCAqIDAuNSwgeCArIHdpZHRoIC0gcmFkaXVzLCB5ICsgaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyh4ICsgcmFkaXVzLCB5ICsgaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSArIGhlaWdodCAqIDAuNSwgeCArIHJhZGl1cywgeSk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgaWYgKGZpbGwpIHtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlLmdldFdpZHRoKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2UuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkcmF3Q2lyY2xlKGNvbnRleHQ6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBmaWxsOiBvbC5zdHlsZS5GaWxsLCBzdHJva2U6IG9sLnN0eWxlLlN0cm9rZSkge1xyXG4gICAgICAgIGxldCByYWRpdXMgPSAod2lkdGggPCBoZWlnaHQgPyB3aWR0aCA6IGhlaWdodCkgKiAwLjVcclxuICAgICAgICAvLyB3aWR0aCAqPSAwLjk7XHJcbiAgICAgICAgLy8gaGVpZ2h0ICo9IDAuODtcclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIHggPSB4ICsgKHN0cm9rZS5nZXRXaWR0aCgpID8gc3Ryb2tlLmdldFdpZHRoKCkgOiAwKTtcclxuICAgICAgICAgICAgeSA9IHkgKyAoc3Ryb2tlLmdldFdpZHRoKCkgPyBzdHJva2UuZ2V0V2lkdGgoKSA6IDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmFyYyh4ICsgd2lkdGggKiAwLjUsIHkgKyBoZWlnaHQgKiAwLjUsIHJhZGl1cywgMCwgMiAqIE1hdGguUEksIGZhbHNlKTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBpZiAoZmlsbCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGwuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlLmdldFdpZHRoKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2UuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHByaXZhdGUgaW5pdFN5bWJvbFN0eWxlKCkge1xyXG4gICAgICAgIGxldCByYWRpdXMgPSB0aGlzLnNpemUgLyAyO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zeW1ib2xUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjaXJjbGVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VTdHlsZSA9IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IHRoaXMuY29udmVydGVkR2x5cGhGaWxsICE9PSB1bmRlZmluZWQgPyBuZXcgb2wuc3R5bGUuRmlsbCgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGxcclxuICAgICAgICAgICAgICAgICAgICB9KSkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLmNvbnZlcnRlZEdseXBoT3V0TGluZUNvbG9yICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vdXRsaW5lV2lkdGggPiAwID8gbmV3IG9sLnN0eWxlLlN0cm9rZSgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMub3V0bGluZVdpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogcmFkaXVzXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic3F1YXJlXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlU3R5bGUgPSBuZXcgb2wuc3R5bGUuUmVndWxhclNoYXBlKHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbCAhPT0gdW5kZWZpbmVkID8gbmV3IG9sLnN0eWxlLkZpbGwoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydGVkR2x5cGhGaWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogdGhpcy5jb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvciAhPT0gdW5kZWZpbmVkICYmIHRoaXMub3V0bGluZVdpZHRoID4gMCA/IG5ldyBvbC5zdHlsZS5TdHJva2UoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydGVkR2x5cGhPdXRMaW5lQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLm91dGxpbmVXaWR0aFxyXG4gICAgICAgICAgICAgICAgICAgIH0pKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHM6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiByYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGU6IE1hdGguUEkgLyA0ICsgdGhpcy5hbmdsZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInRyaWFuZ2xlXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlU3R5bGUgPSBuZXcgb2wuc3R5bGUuUmVndWxhclNoYXBlKHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxsOiB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbCAhPT0gdW5kZWZpbmVkID8gbmV3IG9sLnN0eWxlLkZpbGwoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydGVkR2x5cGhGaWxsXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cm9rZTogdGhpcy5jb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvciAhPT0gdW5kZWZpbmVkICYmIHRoaXMub3V0bGluZVdpZHRoID4gMCA/IG5ldyBvbC5zdHlsZS5TdHJva2UoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydGVkR2x5cGhPdXRMaW5lQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLm91dGxpbmVXaWR0aFxyXG4gICAgICAgICAgICAgICAgICAgIH0pKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHM6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiByYWRpdXMsXHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGU6IHRoaXMuYW5nbGVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjcm9zc1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVN0eWxlID0gbmV3IG9sLnN0eWxlLlJlZ3VsYXJTaGFwZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsbDogdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGwgIT09IHVuZGVmaW5lZCA/IG5ldyBvbC5zdHlsZS5GaWxsKCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbnZlcnRlZEdseXBoRmlsbFxyXG4gICAgICAgICAgICAgICAgICAgIH0pKSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJva2U6IHRoaXMuY29udmVydGVkR2x5cGhPdXRMaW5lQ29sb3IgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm91dGxpbmVXaWR0aCA+IDAgPyBuZXcgb2wuc3R5bGUuU3Ryb2tlKCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbnZlcnRlZEdseXBoT3V0TGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5vdXRsaW5lV2lkdGhcclxuICAgICAgICAgICAgICAgICAgICB9KSkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiA0LFxyXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogcmFkaXVzLFxyXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czI6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGU6IHRoaXMuYW5nbGVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkaWFtb25kXCI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImRpYW1vbmQyXCI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInN0YXJcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VTdHlsZSA9IG5ldyBvbC5zdHlsZS5SZWd1bGFyU2hhcGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IHRoaXMuY29udmVydGVkR2x5cGhGaWxsICE9PSB1bmRlZmluZWQgPyBuZXcgb2wuc3R5bGUuRmlsbCgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGxcclxuICAgICAgICAgICAgICAgICAgICB9KSkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiB0aGlzLmNvbnZlcnRlZEdseXBoT3V0TGluZUNvbG9yICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vdXRsaW5lV2lkdGggPiAwID8gbmV3IG9sLnN0eWxlLlN0cm9rZSgoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0ZWRHbHlwaE91dExpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMub3V0bGluZVdpZHRoXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50czogNSxcclxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IHJhZGl1cyxcclxuICAgICAgICAgICAgICAgICAgICByYWRpdXMyOiByYWRpdXMgLyAyLjUsXHJcbiAgICAgICAgICAgICAgICAgICAgYW5nbGU6IHRoaXMuYW5nbGVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzdGFyMlwiOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5pdEJpdG1hcFN0eWxlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvaW50RmlsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmltYWdlU3R5bGUgPSBuZXcgb2wuc3R5bGUuSWNvbigoe1xyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogdGhpcy5vcGFjaXR5IHx8IDEsXHJcbiAgICAgICAgICAgICAgICBzcmM6IHRoaXMucG9pbnRGaWxlLFxyXG4gICAgICAgICAgICAgICAgcm90YXRpb246IHRoaXMuYW5nbGUgKiBNYXRoLlBJIC8gMTgwLFxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBbdGhpcy5keCwgLXRoaXMuZHldXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBpbml0R2x5cGhTdHlsZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5nbHlwaCkge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRTdHlsZSA9IG5ldyBvbC5zdHlsZS5UZXh0KCh7XHJcbiAgICAgICAgICAgICAgICBmb250OiBgJHt0aGlzLnNpemV9cHggJHt0aGlzLmdseXBofWAsXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRYOiB0aGlzLmR4LFxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0WTogdGhpcy5keSxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuZ2x5cGhOYW1lLFxyXG4gICAgICAgICAgICAgICAgZmlsbDogdGhpcy5jb252ZXJ0ZWRHbHlwaEZpbGwgIT09IHVuZGVmaW5lZCA/IG5ldyBvbC5zdHlsZS5GaWxsKCh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydGVkR2x5cGhGaWxsXHJcbiAgICAgICAgICAgICAgICB9KSkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBzdHJva2U6IHRoaXMuY29udmVydGVkR2x5cGhPdXRMaW5lQ29sb3IgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm91dGxpbmVXaWR0aCA+IDAgPyBuZXcgb2wuc3R5bGUuU3Ryb2tlKCh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydGVkR2x5cGhPdXRMaW5lQ29sb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMub3V0bGluZVdpZHRoXHJcbiAgICAgICAgICAgICAgICB9KSkgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICByb3RhdGlvbjogdGhpcy5hbmdsZSAqIE1hdGguUEkgLyAxODBcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFwcGx5VHJhbnNGb3JtKHN0eWxlOiBvbC5zdHlsZS5TdHlsZSkge1xyXG4gICAgICAgIGxldCB0cmFuc2Zvcm1SZ3ggPSAvKFthLXpdKylcXCgoLio/KVxcKS9pO1xyXG4gICAgICAgIGlmICh0aGlzLnRyYW5zZm9ybSAmJiB0cmFuc2Zvcm1SZ3gudGVzdCh0aGlzLnRyYW5zZm9ybSkpIHtcclxuICAgICAgICAgICAgbGV0IG1hdGNoZWRSZXN1bHRzID0gdGhpcy50cmFuc2Zvcm0ubWF0Y2godHJhbnNmb3JtUmd4KTtcclxuICAgICAgICAgICAgbGV0IHRyYW5zRm9ybVR5cGUgPSBtYXRjaGVkUmVzdWx0cy5sZW5ndGggPiAyID8gbWF0Y2hlZFJlc3VsdHNbMV0gOiBcIlwiO1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNGb3JtVmFsdWUgPSBtYXRjaGVkUmVzdWx0cy5sZW5ndGggPiAyID8gbWF0Y2hlZFJlc3VsdHNbMl0gOiBcIlwiO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRyYW5zRm9ybVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyb3RhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5nZXRJbWFnZSgpICYmIHN0eWxlLmdldEltYWdlKCkuc2V0Um90YXRpb24ocGFyc2VJbnQodHJhbnNGb3JtVmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5nZXRUZXh0KCkgJiYgc3R5bGUuZ2V0VGV4dCgpLnNldFJvdGF0aW9uKHBhcnNlSW50KHRyYW5zRm9ybVZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2NhbGVcIjpcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2NhbGUgPSBwYXJzZUludCh0cmFuc0Zvcm1WYWx1ZS5zcGxpdChcIixcIilbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmdldEltYWdlKCkgJiYgc3R5bGUuZ2V0SW1hZ2UoKS5zZXRTY2FsZShzY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZ2V0VGV4dCgpICYmIHN0eWxlLmdldFRleHQoKS5zZXRTY2FsZShzY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidHJhbnNsYXRlXCI6XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IFwibm90IHN1cHBvcnQgXCIgKyB0aGlzLnRyYW5zZm9ybTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIlxyXG5pbXBvcnQgeyBHZW9TdHlsZSB9IGZyb20gXCIuL2dlb1N0eWxlXCI7XHJcbmltcG9ydCB7IEdlb0JydXNoIH0gZnJvbSBcIi4uL3N0eWxlL2dlb0JydXNoXCI7XHJcblxyXG5pbXBvcnQgeyBUZXh0TGFiZWxpbmdTdHJhdGVneSB9IGZyb20gXCIuL3RleHRMYWJlbGluZ1N0cmF0ZWd5XCI7XHJcbmltcG9ydCB7IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5IH0gZnJvbSBcIi4vZGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3lcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9TaGllbGRTdHlsZSBleHRlbmRzIEdlb1N0eWxlIHtcclxuICAgIHRleHRBbGlnbnMgPSBbXCJsZWZ0XCIsIFwicmlnaHRcIiwgXCJjZW50ZXJcIiwgXCJlbmRcIiwgXCJzdGFydFwiXTtcclxuICAgIGFsaWduOiBzdHJpbmc7XHJcbiAgICAvLyBhdm9pZEVkZ2VzOiBib29sZWFuO1xyXG4gICAgZGF0ZUZvcm1hdDogc3RyaW5nO1xyXG4gICAgZHg6IG51bWJlcjtcclxuICAgIGR5OiBudW1iZXI7XHJcbiAgICBmYWNlTmFtZTogc3RyaW5nO1xyXG4gICAgZmlsbDogc3RyaW5nO1xyXG4gICAgZm9yY2VIb3Jpem9udGFsRm9yTGluZTogYm9vbGVhbjtcclxuICAgIGhhbG9GaWxsOiBzdHJpbmc7XHJcbiAgICBoYWxvUmFkaXVzOiBudW1iZXI7XHJcbiAgICBtYXJnaW46IG51bWJlcjtcclxuICAgIG1heENoYXJBbmdsZURlbHRhOiBzdHJpbmc7XHJcbiAgICBtaW5EaXN0YW5jZTogbnVtYmVyO1xyXG4gICAgbWluUGFkZGluZzogbnVtYmVyO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgZm9udDogc3RyaW5nO1xyXG4gICAgbnVtZXJpY0Zvcm1hdDogc3RyaW5nO1xyXG4gICAgYW5nbGU6IG51bWJlcjtcclxuICAgIG9wYWNpdHk6IG51bWJlcjtcclxuICAgIG9yaWVudGF0aW9uOiBudW1iZXI7XHJcbiAgICBwbGFjZW1lbnRzOiBzdHJpbmc7XHJcbiAgICBwbGFjZW1lbnRUeXBlOiBzdHJpbmc7XHJcbiAgICBwb2x5Z29uTGFiZWxpbmdMb2NhdGlvbk1vZGU6IHN0cmluZztcclxuICAgIHJhdGlvOiBzdHJpbmc7XHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICBzcGFjaW5nOiBudW1iZXI7XHJcbiAgICBzcGxpbmVUeXBlOiBzdHJpbmc7XHJcbiAgICB0ZXh0Rm9ybWF0OiBzdHJpbmc7XHJcbiAgICB3cmFwOiBzdHJpbmc7XHJcbiAgICB3cmFwV2lkdGg6IG51bWJlcjtcclxuICAgIGljb25UeXBlOiBzdHJpbmc7XHJcbiAgICBpY29uU2l6ZTogbnVtYmVyO1xyXG4gICAgaWNvblNyYzogc3RyaW5nO1xyXG4gICAgaWNvbkNvbG9yOiBzdHJpbmc7XHJcbiAgICBpY29uT3V0bGluZUNvbG9yOiBzdHJpbmc7XHJcbiAgICBpY29uT3V0bGluZVdpZHRoOiBudW1iZXI7XHJcbiAgICBpY29uU3ltYm9sVHlwZTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnZlcnRTeW1ib2xDb2xvcjogc3RyaW5nO1xyXG4gICAgY29udmVydFN5bWJvbE91dGxpbmVDb2xvcjogc3RyaW5nO1xyXG5cclxuICAgIHRleHRTdHlsZTogYW55O1xyXG4gICAgc3R5bGU6IGFueTtcclxuICAgIGltYWdlOiBhbnk7XHJcbiAgICBpbWFnZUNhY2hlOiBhbnk7XHJcbiAgICBsYWJlbEluZm9zOiBhbnk7XHJcblxyXG4gICAgY2hhcldpZHRoczogYW55O1xyXG5cclxuICAgIHN0YXRpYyBwb2lDYWNoZSA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0eWxlSnNvbj86IGFueSkge1xyXG4gICAgICAgIHN1cGVyKHN0eWxlSnNvbik7XHJcbiAgICAgICAgdGhpcy5pbWFnZUNhY2hlID0gW107XHJcbiAgICAgICAgdGhpcy5sYWJlbEluZm9zID0gIG5ldyAoPGFueT5vbCkuc3RydWN0cy5MUlVDYWNoZSg1MTIpO1xyXG4gICAgICAgIHRoaXMuY2hhcldpZHRocyA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoc3R5bGVKc29uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaWNvblR5cGUgPSBzdHlsZUpzb25bXCJzaGllbGQtaWNvbi10eXBlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmljb25TeW1ib2xUeXBlID0gc3R5bGVKc29uW1wic2hpZWxkLWljb24tc3ltYm9sLXR5cGVcIl07XHJcbiAgICAgICAgICAgIHRoaXMuaWNvblNpemUgPSBzdHlsZUpzb25bXCJzaGllbGQtaWNvbi1zaXplXCJdID8gc3R5bGVKc29uW1wic2hpZWxkLWljb24tc2l6ZVwiXSA6IDA7XHJcbiAgICAgICAgICAgIHRoaXMuaWNvblNyYyA9IHN0eWxlSnNvbltcInNoaWVsZC1pY29uLXNyY1wiXTtcclxuICAgICAgICAgICAgdGhpcy5pY29uQ29sb3IgPSBzdHlsZUpzb25bXCJzaGllbGQtaWNvbi1jb2xvclwiXTtcclxuICAgICAgICAgICAgdGhpcy5pY29uT3V0bGluZUNvbG9yID0gc3R5bGVKc29uW1wic2hpZWxkLWljb24tb3V0bGluZS1jb2xvclwiXTtcclxuICAgICAgICAgICAgdGhpcy5pY29uT3V0bGluZVdpZHRoID0gc3R5bGVKc29uW1wic2hpZWxkLWljb24tb3V0bGluZS13aWR0aFwiXSA/IHN0eWxlSnNvbltcInNoaWVsZC1pY29uLW91dGxpbmUtd2lkdGhcIl0gOiAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaWNvblNyYykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFHZW9TaGllbGRTdHlsZS5wb2lDYWNoZVt0aGlzLmljb25TcmNdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuaWNvblNyYztcclxuICAgICAgICAgICAgICAgICAgICBHZW9TaGllbGRTdHlsZS5wb2lDYWNoZVt0aGlzLmljb25TcmNdID0gaW1hZ2VFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBzdHlsZUpzb25bXCJzaGllbGQtbmFtZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5mb250ID0gc3R5bGVKc29uW1wic2hpZWxkLWZvbnRcIl07XHJcbiAgICAgICAgICAgIHRoaXMuYWxpZ24gPSBzdHlsZUpzb25bXCJzaGllbGQtYWxpZ25cIl07XHJcbiAgICAgICAgICAgIHRoaXMuYW5nbGUgPSBzdHlsZUpzb25bXCJzaGllbGQtcm90YXRlLWFuZ2xlXCJdID8gc3R5bGVKc29uW1wic2hpZWxkLXJvdGF0ZS1hbmdsZVwiXSA6IDA7XHJcblxyXG4gICAgICAgICAgICAvLyB0aGlzLmF2b2lkRWRnZXMgPSBzdHlsZUpzb25bXCJzaGllbGQtYXZvaWQtZWRnZXNcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9IHN0eWxlSnNvbltcInNoaWVsZC1kYXRlLWZvcm1hdFwiXTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE9cclxuICAgICAgICAgICAgdGhpcy5keCA9IHN0eWxlSnNvbltcInNoaWVsZC1keFwiXSA/IHN0eWxlSnNvbltcInNoaWVsZC1keFwiXSA6IDA7XHJcbiAgICAgICAgICAgIHRoaXMuZHkgPSBzdHlsZUpzb25bXCJzaGllbGQtZHlcIl0gPyBzdHlsZUpzb25bXCJzaGllbGQtZHlcIl0gOiAwO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mYWNlTmFtZSA9IHN0eWxlSnNvbltcInNoaWVsZC1mYWNlLW5hbWVcIl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZpbGwgPSBzdHlsZUpzb25bXCJzaGllbGQtZmlsbFwiXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaXMuZm9yY2VIb3Jpem9udGFsRm9yTGluZSA9IHN0eWxlSnNvbltcInNoaWVsZC1mb3JjZS1ob3Jpem9udGFsLWZvci1saW5lXCJdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oYWxvRmlsbCA9IHN0eWxlSnNvbltcInNoaWVsZC1oYWxvLWZpbGxcIl0gPyBzdHlsZUpzb25bXCJzaGllbGQtaGFsby1maWxsXCJdIDogXCJUcmFuc3BhcmVudFwiO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oYWxvUmFkaXVzID0gc3R5bGVKc29uW1wic2hpZWxkLWhhbG8tcmFkaXVzXCJdID8gc3R5bGVKc29uW1wic2hpZWxkLWhhbG8tcmFkaXVzXCJdIDogMDtcclxuXHJcbiAgICAgICAgICAgIC8vIHVzaW5nIGluIHN0cmF0ZWd5XHJcbiAgICAgICAgICAgIHRoaXMubWFyZ2luID0gc3R5bGVKc29uW1wic2hpZWxkLW1hcmdpblwiXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHRoaXMubWF4Q2hhckFuZ2xlRGVsdGEgPSBzdHlsZUpzb25bXCJzaGllbGQtbWF4LWNoYXItYW5nbGUtZGVsdGFcIl07XHJcblxyXG4gICAgICAgICAgICAvLyB1c2luZyBpbiBzdHJhdGVneVxyXG4gICAgICAgICAgICB0aGlzLm1pbkRpc3RhbmNlID0gc3R5bGVKc29uW1wic2hpZWxkLW1pbi1kaXN0YW5jZVwiXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHVzaW5nIGluIHN0cmF0ZWd5XHJcbiAgICAgICAgICAgIHRoaXMubWluUGFkZGluZyA9IHN0eWxlSnNvbltcInNoaWVsZC1taW4tcGFkZGluZ1wiXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IHN0eWxlSnNvbltcInNoaWVsZC1uYW1lXCJdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5udW1lcmljRm9ybWF0ID0gc3R5bGVKc29uW1wic2hpZWxkLW51bWVyaWMtZm9ybWF0XCJdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vcGFjaXR5ID0gc3R5bGVKc29uW1wic2hpZWxkLW9wYWNpdHlcIl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9yaWVudGF0aW9uID0gc3R5bGVKc29uW1wic2hpZWxkLW9yaWVudGF0aW9uXCJdO1xyXG5cclxuICAgICAgICAgICAgLy8gdXNpbmcgaW4gc3RyYXRlZ3lcclxuICAgICAgICAgICAgdGhpcy5wbGFjZW1lbnRzID0gc3R5bGVKc29uW1wic2hpZWxkLXBsYWNlbWVudHNcIl0gPyBzdHlsZUpzb25bXCJzaGllbGQtcGxhY2VtZW50c1wiXSA6IFwiVVIsVSxVTCxCLEJSLEJMLEwsUlwiO1xyXG5cclxuICAgICAgICAgICAgLy8gdXNpbmcgaW4gc3RyYXRlZ3lcclxuICAgICAgICAgICAgdGhpcy5wbGFjZW1lbnRUeXBlID0gc3R5bGVKc29uW1wic2hpZWxkLXBsYWNlbWVudC10eXBlXCJdID8gc3R5bGVKc29uW1wic2hpZWxkLXBsYWNlbWVudC10eXBlXCJdIDogXCJkZWZhdWx0XCI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNpemUgPSBzdHlsZUpzb25bXCJzaGllbGQtc2l6ZVwiXTtcclxuXHJcbiAgICAgICAgICAgIC8vIHVzaW5nIGluIHN0cmF0ZWd5XHJcbiAgICAgICAgICAgIHRoaXMuc3BhY2luZyA9IHN0eWxlSnNvbltcInNoaWVsZC1zcGFjaW5nXCJdICE9PSB1bmRlZmluZWQgPyBzdHlsZUpzb25bXCJzaGllbGQtc3BhY2luZ1wiXSA6IDEwO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50ZXh0Rm9ybWF0ID0gc3R5bGVKc29uW1wic2hpZWxkLXRleHQtZm9ybWF0XCJdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy53cmFwID0gc3R5bGVKc29uW1wic2hpZWxkLXdyYXAtYmVmb3JlXCJdID8gdHJ1ZSA6IHN0eWxlSnNvbltcInNoaWVsZC13cmFwLWJlZm9yZVwiXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMud3JhcFdpZHRoID0gc3R5bGVKc29uW1wic2hpZWxkLXdyYXAtd2lkdGhcIl07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDb3JlKCkge1xyXG4gICAgICAgIGxldCBmb250O1xyXG4gICAgICAgIGxldCBzaXplO1xyXG5cclxuICAgICAgICB0aGlzLnRleHRTdHlsZSA9IG5ldyBvbC5zdHlsZS5UZXh0KHtcclxuICAgICAgICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMudGV4dEFsaWducy5pbmRleE9mKHRoaXMuYWxpZ24pID49IDApIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0U3R5bGUuc2V0VGV4dEFsaWduKHRoaXMuYWxpZ24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZm9udCkge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRTdHlsZS5zZXRGb250KHRoaXMuZm9udCA/IHRoaXMuZm9udCA6IFwiMTBweCBzYW5zLXNlcmlmXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmlsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnRleHRTdHlsZS5nZXRGaWxsKCkuc2V0Q29sb3IoR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5maWxsLCB0aGlzLm9wYWNpdHkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGFsb0ZpbGwpIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0U3R5bGUuZ2V0U3Ryb2tlKCkuc2V0Q29sb3IoR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5oYWxvRmlsbCwgdGhpcy5vcGFjaXR5KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhhbG9SYWRpdXMpIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0U3R5bGUuZ2V0U3Ryb2tlKCkuc2V0V2lkdGgodGhpcy5oYWxvUmFkaXVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMub3JpZW50YXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy50ZXh0U3R5bGUuc2V0Um90YXRpb24odGhpcy5vcmllbnRhdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pY29uQ29sb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5jb252ZXJ0U3ltYm9sQ29sb3IgPSBHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLmljb25Db2xvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmljb25PdXRsaW5lQ29sb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5jb252ZXJ0U3ltYm9sT3V0bGluZUNvbG9yID0gR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5pY29uT3V0bGluZUNvbG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3R5bGUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgICAgICAgICB0ZXh0OiB0aGlzLnRleHRTdHlsZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgY2hhcnMgPSBcImFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVpcIjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhcldpZHRoc1tjaGFyc1tpXV0gPSAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5tZWFzdXJlVGV4dFdpZHRoKHRoaXMuZm9udCwgY2hhcnNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYXJXaWR0aHNbXCIgXCJdID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykubWVhc3VyZVRleHRXaWR0aCh0aGlzLmZvbnQsIFwiIFwiKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSA5OyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFyV2lkdGhzW2ldID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykubWVhc3VyZVRleHRXaWR0aCh0aGlzLmZvbnQsIGkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmljb25UeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJpbWFnZVwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiSW1hZ2VcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2hpbGVkSW1hZ2VJY29uKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInN5bWJvbFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiU3ltYm9sXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNoaWVsZFN5bWJvbEljb24oKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRDb252ZXJ0ZWRTdHlsZUNvcmUoZmVhdHVyZTogYW55LCByZXNvbHV0aW9uOiBudW1iZXIsIG9wdGlvbnM6IGFueSk6IG9sLnN0eWxlLlN0eWxlW10ge1xyXG4gICAgICAgIGxldCBmZWF0dXJlVGV4dCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICBmZWF0dXJlVGV4dCA9IGZlYXR1cmUuZ2V0KHRoaXMubmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZlYXR1cmVUZXh0ID0gdGhpcy5mb3JtYXRUZXh0KGZlYXR1cmVUZXh0KTtcclxuICAgICAgICBpZiAoZmVhdHVyZVRleHQgPT09IHVuZGVmaW5lZCB8fCBmZWF0dXJlVGV4dCA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnRleHRTdHlsZS5zZXRUZXh0KGZlYXR1cmVUZXh0KTtcclxuXHJcbiAgICAgICAgbGV0IGxhYmVsSW5mbyA9IHRoaXMuZ2V0TGFiZWxJbmZvKGZlYXR1cmVUZXh0KTtcclxuXHJcbiAgICAgICAgbGV0IGZsYXRDb29yZGluYXRlcyA9IHRoaXMuc2V0TGFiZWxQb3NpdGlvbihmZWF0dXJlLCByZXNvbHV0aW9uLCBsYWJlbEluZm8sIG9wdGlvbnMuc3RyYXRlZ3lUcmVlLCBvcHRpb25zLmZyYW1lU3RhdGUpO1xyXG4gICAgICAgIGlmIChmbGF0Q29vcmRpbmF0ZXMgPT09IHVuZGVmaW5lZCB8fCBmbGF0Q29vcmRpbmF0ZXMubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3R5bGUuc2V0R2VvbWV0cnkobmV3IG9sLmdlb20uUG9pbnQoZmxhdENvb3JkaW5hdGVzLCBcIlhZXCIpKTtcclxuXHJcbiAgICAgICAgbGV0IGxhYmVsaW1hZ2UgPSB0aGlzLmdldEltYWdlKGxhYmVsSW5mbyk7XHJcblxyXG4gICAgICAgIHRoaXMudGV4dFN0eWxlLmxhYmVsID0gbGFiZWxpbWFnZTtcclxuICAgICAgICB0aGlzLnRleHRTdHlsZS5sYWJlbFBvc2l0aW9uID0gZmxhdENvb3JkaW5hdGVzO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pbWFnZUNhY2hlW2ZlYXR1cmVUZXh0XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VDYWNoZVtmZWF0dXJlVGV4dF0gPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBmZWF0dXJlWmluZGV4ID0gZmVhdHVyZVtcInRlbXBUcmVlWmluZGV4XCJdO1xyXG4gICAgICAgIGlmIChmZWF0dXJlWmluZGV4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZmVhdHVyZVppbmRleCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3R5bGUuc2V0WkluZGV4KGZlYXR1cmVaaW5kZXgpO1xyXG5cclxuICAgICAgICByZXR1cm4gW3RoaXMuc3R5bGVdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFNoaWVsZFN5bWJvbEljb24oKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaWNvblN5bWJvbFR5cGUgIT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmljb25TeW1ib2xUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2lyY2xlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDaXJjbGVJY29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic3F1YXJlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTcXVhcmVJY29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidHJpYW5nbGVcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyaWFuZ2xlSWNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImNyb3NzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDcm9zc0ljb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzdGFyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGFySWNvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUuc2V0SW1hZ2UodGhpcy5pbWFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHNldFN0YXJJY29uKCkge1xyXG4gICAgICAgIGxldCBmaWxsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBzdHJva2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IHRoaXMuaWNvblNpemUgKiAwLjU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmljb25Db2xvcikge1xyXG4gICAgICAgICAgICBmaWxsID0gbmV3IG9sLnN0eWxlLkZpbGwoKHsgY29sb3I6IHRoaXMuY29udmVydFN5bWJvbENvbG9yIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbk91dGxpbmVDb2xvciB8fCB0aGlzLmljb25PdXRsaW5lV2lkdGgpIHtcclxuICAgICAgICAgICAgc3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSgoe1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydFN5bWJvbE91dGxpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmljb25PdXRsaW5lV2lkdGhcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBvbC5zdHlsZS5SZWd1bGFyU2hhcGUoe1xyXG4gICAgICAgICAgICBmaWxsOiBmaWxsLFxyXG4gICAgICAgICAgICBzdHJva2U6IHN0cm9rZSxcclxuICAgICAgICAgICAgcG9pbnRzOiA1LFxyXG4gICAgICAgICAgICByYWRpdXM6IHJhZGl1cyxcclxuICAgICAgICAgICAgcmFkaXVzMjogcmFkaXVzIC8gMi41LFxyXG4gICAgICAgICAgICBhbmdsZTogdGhpcy5hbmdsZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENyb3NzSWNvbigpIHtcclxuICAgICAgICBsZXQgZmlsbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgc3Ryb2tlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCByYWRpdXMgPSB0aGlzLmljb25TaXplICogMC41O1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pY29uQ29sb3IpIHtcclxuICAgICAgICAgICAgZmlsbCA9IG5ldyBvbC5zdHlsZS5GaWxsKCh7IGNvbG9yOiB0aGlzLmNvbnZlcnRTeW1ib2xDb2xvciB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmljb25PdXRsaW5lQ29sb3IgfHwgdGhpcy5pY29uT3V0bGluZVdpZHRoKSB7XHJcbiAgICAgICAgICAgIHN0cm9rZSA9IG5ldyBvbC5zdHlsZS5TdHJva2UoKHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiB0aGlzLmNvbnZlcnRTeW1ib2xPdXRsaW5lQ29sb3IsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpcy5pY29uT3V0bGluZVdpZHRoXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuaW1hZ2UgPSBuZXcgb2wuc3R5bGUuUmVndWxhclNoYXBlKHtcclxuICAgICAgICAgICAgZmlsbDogZmlsbCxcclxuICAgICAgICAgICAgc3Ryb2tlOiBzdHJva2UsXHJcbiAgICAgICAgICAgIHBvaW50czogNCxcclxuICAgICAgICAgICAgcmFkaXVzOiByYWRpdXMsXHJcbiAgICAgICAgICAgIHJhZGl1czI6IDAsXHJcbiAgICAgICAgICAgIGFuZ2xlOiB0aGlzLmFuZ2xlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VHJpYW5nbGVJY29uKCkge1xyXG4gICAgICAgIGxldCBmaWxsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBzdHJva2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IHRoaXMuaWNvblNpemUgKiAwLjU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmljb25Db2xvcikge1xyXG4gICAgICAgICAgICBmaWxsID0gbmV3IG9sLnN0eWxlLkZpbGwoKHsgY29sb3I6IHRoaXMuY29udmVydFN5bWJvbENvbG9yIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbk91dGxpbmVDb2xvciB8fCB0aGlzLmljb25PdXRsaW5lV2lkdGgpIHtcclxuICAgICAgICAgICAgc3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSgoe1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydFN5bWJvbE91dGxpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmljb25PdXRsaW5lV2lkdGhcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBvbC5zdHlsZS5SZWd1bGFyU2hhcGUoe1xyXG4gICAgICAgICAgICBmaWxsOiBmaWxsLFxyXG4gICAgICAgICAgICBzdHJva2U6IHN0cm9rZSxcclxuICAgICAgICAgICAgcG9pbnRzOiAzLFxyXG4gICAgICAgICAgICByYWRpdXM6IHJhZGl1cyxcclxuICAgICAgICAgICAgYW5nbGU6IHRoaXMuYW5nbGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRTcXVhcmVJY29uKCkge1xyXG4gICAgICAgIGxldCBmaWxsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBzdHJva2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IHRoaXMuaWNvblNpemUgKiAwLjU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmljb25Db2xvcikge1xyXG4gICAgICAgICAgICBmaWxsID0gbmV3IG9sLnN0eWxlLkZpbGwoKHsgY29sb3I6IHRoaXMuY29udmVydFN5bWJvbENvbG9yIH0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbk91dGxpbmVDb2xvciB8fCB0aGlzLmljb25PdXRsaW5lV2lkdGgpIHtcclxuICAgICAgICAgICAgc3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSgoe1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IHRoaXMuY29udmVydFN5bWJvbE91dGxpbmVDb2xvcixcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLmljb25PdXRsaW5lV2lkdGhcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBvbC5zdHlsZS5SZWd1bGFyU2hhcGUoe1xyXG4gICAgICAgICAgICBmaWxsOiBmaWxsLFxyXG4gICAgICAgICAgICBzdHJva2U6IHN0cm9rZSxcclxuICAgICAgICAgICAgcG9pbnRzOiA0LFxyXG4gICAgICAgICAgICByYWRpdXM6IHJhZGl1cyxcclxuICAgICAgICAgICAgYW5nbGU6IE1hdGguUEkgLyA0ICsgdGhpcy5hbmdsZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldENpcmNsZUljb24oKSB7XHJcbiAgICAgICAgbGV0IGZpbGwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgbGV0IHN0cm9rZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBsZXQgcmFkaXVzID0gdGhpcy5pY29uU2l6ZSAqIDAuNTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaWNvbkNvbG9yKSB7XHJcbiAgICAgICAgICAgIGZpbGwgPSBuZXcgb2wuc3R5bGUuRmlsbCgoeyBjb2xvcjogdGhpcy5jb252ZXJ0U3ltYm9sQ29sb3IgfSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5pY29uT3V0bGluZUNvbG9yIHx8IHRoaXMuaWNvbk91dGxpbmVXaWR0aCkge1xyXG4gICAgICAgICAgICBzdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCh7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogdGhpcy5jb252ZXJ0U3ltYm9sT3V0bGluZUNvbG9yLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuaWNvbk91dGxpbmVXaWR0aFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmltYWdlID0gbmV3IG9sLnN0eWxlLkNpcmNsZSh7XHJcbiAgICAgICAgICAgIGZpbGw6IGZpbGwsXHJcbiAgICAgICAgICAgIHN0cm9rZTogc3Ryb2tlLFxyXG4gICAgICAgICAgICByYWRpdXM6IHJhZGl1c1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFNoaWxlZEltYWdlSWNvbigpIHtcclxuICAgICAgICBpZiAodGhpcy5pY29uU3JjICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGV0IHBvaUltZyA9IEdlb1NoaWVsZFN0eWxlLnBvaUNhY2hlW3RoaXMuaWNvblNyY107XHJcbiAgICAgICAgICAgIGlmIChwb2lJbWcuY29tcGxldGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwb2lJbWcubmF0dXJhbFdpZHRoICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZSA9IG5ldyBvbC5zdHlsZS5JY29uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1nOiBwb2lJbWcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltZ1NpemU6IFtwb2lJbWcud2lkdGgsIHBvaUltZy5oZWlnaHRdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGlvbjogdGhpcy5hbmdsZSAqIE1hdGguUEkgLyAxODBcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlLnNldEltYWdlKHRoaXMuaW1hZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldExhYmVsSW5mbyh0ZXh0OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQga2V5PSB0ZXh0O1xyXG4gICAgICAgIGlmICghdGhpcy5sYWJlbEluZm9zLmNvbnRhaW5zS2V5KGtleSkpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IGZvbnQgPSB0aGlzLmZvcm1hdEZvbnQodGhpcy50ZXh0U3R5bGUuZ2V0Rm9udCgpKTtcclxuICAgICAgICAgICAgdGV4dCA9IHRoaXMud3JhcFRleHQodGV4dCwgZm9udCk7XHJcbiAgICBcclxuICAgICAgICAgICAgbGV0IGZpbGxTdGF0ZSA9IHRoaXMudGV4dFN0eWxlLmdldEZpbGwoKTtcclxuICAgICAgICAgICAgbGV0IHN0cm9rZVN0YXRlID0gdGhpcy50ZXh0U3R5bGUuZ2V0U3Ryb2tlKCk7XHJcbiAgICBcclxuICAgICAgICAgICAgbGV0IHBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICAgICAgbGV0IHNjYWxlID0gdGhpcy50ZXh0U3R5bGUuZ2V0U2NhbGUoKTtcclxuICAgICAgICAgICAgc2NhbGUgPSAoc2NhbGUgPyBzY2FsZSA6IDEpICogcGl4ZWxSYXRpbztcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgYWxpZ24gPSAoPGFueT5vbC5yZW5kZXIpLnJlcGxheS5URVhUX0FMSUdOW3RoaXMudGV4dFN0eWxlLmdldFRleHRBbGlnbigpIHx8ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLmRlZmF1bHRUZXh0QWxpZ25dO1xyXG4gICAgICAgICAgICBsZXQgc3Ryb2tlV2lkdGggPSBzdHJva2VTdGF0ZSAmJiBzdHJva2VTdGF0ZS5nZXRXaWR0aCgpID8gc3Ryb2tlU3RhdGUuZ2V0V2lkdGgoKSA6IDA7XHJcbiAgICBcclxuICAgICAgICAgICAgbGV0IGxpbmVzID0gdGV4dC5zcGxpdChcIlxcblwiKTtcclxuICAgICAgICAgICAgbGV0IG51bUxpbmVzID0gbGluZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICBsZXQgd2lkdGhzID0gW107XHJcbiAgICBcclxuICAgICAgICAgICAgLy8gbGV0IHdpZHRoID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuVGV4dFJlcGxheS5tZWFzdXJlVGV4dFdpZHRocyhmb250LCBsaW5lcywgd2lkdGhzKTtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gdGhpcy5nZXRFc3RpbWF0ZWRXaWR0aChmb250LCBsaW5lcywgd2lkdGhzKTtcclxuICAgICAgICAgICAgbGV0IHJlbmRlcldpZHRoID0gd2lkdGggKyBzdHJva2VXaWR0aDtcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgbGluZUhlaWdodCA9ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLm1lYXN1cmVUZXh0SGVpZ2h0KGZvbnQpO1xyXG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gbGluZUhlaWdodCAqIG51bUxpbmVzO1xyXG4gICAgXHJcbiAgICAgICAgICAgIC8vIGlmICh0aGlzLmR4KSB7IHRoaXMudGV4dFN0eWxlLnNldE9mZnNldFgodGhpcy5keCArIGhlaWdodCAvIDIpOyB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmR4KSB7IHRoaXMudGV4dFN0eWxlLnNldE9mZnNldFgodGhpcy5keCk7IH1cclxuICAgICAgICAgICAgLy8gaWYgKHRoaXMuZHkpIHsgdGhpcy50ZXh0U3R5bGUuc2V0T2Zmc2V0WSh0aGlzLmR5ICsgaGVpZ2h0IC8gMik7IH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuZHkpIHsgdGhpcy50ZXh0U3R5bGUuc2V0T2Zmc2V0WSh0aGlzLmR5KTsgfVxyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCBsYWJlbFdpZHRoID0gTWF0aC5jZWlsKHJlbmRlcldpZHRoICogc2NhbGUpO1xyXG4gICAgICAgICAgICBsZXQgbGFiZWxIZWlnaHQgPSBNYXRoLmNlaWwoKGhlaWdodCArIHN0cm9rZVdpZHRoKSAqIHNjYWxlKTtcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgbGFiZWxJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IGxhYmVsV2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGxhYmVsSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6IHNjYWxlLFxyXG4gICAgICAgICAgICAgICAgbnVtTGluZXM6IG51bUxpbmVzLFxyXG4gICAgICAgICAgICAgICAgbGluZXM6IGxpbmVzLFxyXG4gICAgICAgICAgICAgICAgd2lkdGhzOiB3aWR0aHMsXHJcbiAgICAgICAgICAgICAgICBsaW5lSGVpZ2h0OiBsaW5lSGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgZm9udDogZm9udFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmxhYmVsSW5mb3Muc2V0KGtleSxsYWJlbEluZm8pO1xyXG4gICAgICAgIH0gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB0aGlzLmxhYmVsSW5mb3MuZ2V0KGtleSk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0TGFiZWxQb3NpdGlvbihnZW9tZXRyeTogYW55LCByZXNvbHV0aW9uOiBhbnksIGxhYmVsSW5mbzogYW55LCBzdHJhdGVneVRyZWU6IGFueSwgZnJhbWVTdGF0ZTogb2x4LkZyYW1lU3RhdGUpIHtcclxuICAgICAgICBsZXQgZ2VvbWV0cnlUeXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xyXG4gICAgICAgIGxldCBmbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICAgICAgbGV0IGksIGlpO1xyXG5cclxuICAgICAgICBsZXQgQ29uc3RydWN0b3I6IGFueTtcclxuICAgICAgICBpZiAodGhpcy5wbGFjZW1lbnRUeXBlID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICBDb25zdHJ1Y3RvciA9IHRoaXMuQkFUQ0hfQ09OU1RSVUNUT1JTX0RFRkFVTFRbZ2VvbWV0cnlUeXBlXTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMucGxhY2VtZW50VHlwZSA9PT0gXCJkZXRlY3RcIikge1xyXG4gICAgICAgICAgICBDb25zdHJ1Y3RvciA9IHRoaXMuQkFUQ0hfQ09OU1RSVUNUT1JTX0RFVEVDVFtnZW9tZXRyeVR5cGVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHRleHRMYWJlbGluZ1N0cmF0ZWd5ID0gbmV3IENvbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgICAgIGxldCB3aWR0aCA9IGxhYmVsSW5mby53aWR0aDtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gbGFiZWxJbmZvLmhlaWdodDtcclxuICAgICAgICBzd2l0Y2ggKGdlb21ldHJ5VHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5QT0lOVDpcclxuICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTVVMVElfUE9JTlQ6XHJcbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5MSU5FX1NUUklORzpcclxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7b2wuZ2VvbS5MaW5lU3RyaW5nfSAqLyAoZ2VvbWV0cnkpLmdldEZsYXRNaWRwb2ludCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLkNJUkNMRTpcclxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7b2wuZ2VvbS5DaXJjbGV9ICovIChnZW9tZXRyeSkuZ2V0Q2VudGVyKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTVVMVElfTElORV9TVFJJTkc6XHJcbiAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge29sLmdlb20uTXVsdGlMaW5lU3RyaW5nfSAqLyAoZ2VvbWV0cnkpLmdldEZsYXRNaWRwb2ludHMoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5QT0xZR09OOlxyXG4gICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtvbC5nZW9tLlBvbHlnb259ICovIChnZW9tZXRyeSkuZ2V0RmxhdEludGVyaW9yUG9pbnQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5NVUxUSV9QT0xZR09OOlxyXG4gICAgICAgICAgICAgICAgbGV0IGludGVyaW9yUG9pbnRzID0gLyoqIEB0eXBlIHtvbC5nZW9tLk11bHRpUG9seWdvbn0gKi8gKGdlb21ldHJ5KS5nZXRGbGF0SW50ZXJpb3JQb2ludHMoKTtcclxuICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMCwgaWkgPSBpbnRlcmlvclBvaW50cy5sZW5ndGg7IGkgPCBpaTsgaSArPSAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudGV4dFN0eWxlLm92ZXJmbG93IHx8IGludGVyaW9yUG9pbnRzW2kgKyAyXSAvIHJlc29sdXRpb24gPj0gd2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzLnB1c2goaW50ZXJpb3JQb2ludHNbaV0sIGludGVyaW9yUG9pbnRzW2kgKyAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZsYXRDb29yZGluYXRlcyA9IHRleHRMYWJlbGluZ1N0cmF0ZWd5Lm1hcmtMb2NhdGlvbihmbGF0Q29vcmRpbmF0ZXMsIHdpZHRoLCBoZWlnaHQsIHJlc29sdXRpb24sIGdlb21ldHJ5VHlwZSwgdGhpcywgc3RyYXRlZ3lUcmVlLCBmcmFtZVN0YXRlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZsYXRDb29yZGluYXRlcztcclxuICAgIH1cclxuXHJcbiAgICBnZXRFc3RpbWF0ZWRXaWR0aChmb250LCBsaW5lcywgd2lkdGhzKSB7XHJcbiAgICAgICAgbGV0IG51bUxpbmVzID0gbGluZXMubGVuZ3RoO1xyXG4gICAgICAgIGxldCB3aWR0aCA9IDA7XHJcbiAgICAgICAgbGV0IGN1cnJlbnRXaWR0aCwgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtTGluZXM7ICsraSkge1xyXG4gICAgICAgICAgICBjdXJyZW50V2lkdGggPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxpbmVzW2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hhcldpZHRoID0gdGhpcy5jaGFyV2lkdGhzW2xpbmVzW2ldW2pdXTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFyV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2lkdGggKz0gY2hhcldpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFdpZHRoICs9IHRoaXMuY2hhcldpZHRoc1tcIldcIl07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2lkdGggPSBNYXRoLm1heCh3aWR0aCwgY3VycmVudFdpZHRoKTtcclxuICAgICAgICAgICAgd2lkdGhzLnB1c2goY3VycmVudFdpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHdpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEltYWdlKGxhYmVsSW5mbzogYW55KSB7XHJcbiAgICAgICAgaWYgKGxhYmVsSW5mby5sYWJlbCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250ZXh0ID0gKDxhbnk+b2wpLmRvbS5jcmVhdGVDYW52YXNDb250ZXh0MkQobGFiZWxJbmZvLndpZHRoLCBsYWJlbEluZm8uaGVpZ2h0KTtcclxuICAgICAgICAgICAgbGV0IGxhYmVsID0gY29udGV4dC5jYW52YXM7XHJcbiAgICAgICAgICAgIGlmIChsYWJlbEluZm8uc2NhbGUgIT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQuc2NhbGUobGFiZWxJbmZvLnNjYWxlLCBsYWJlbEluZm8uc2NhbGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0LmZvbnQgPSBsYWJlbEluZm8uZm9udDtcclxuXHJcbiAgICAgICAgICAgIGxldCBzdHJva2VTdGF0ZSA9IHRoaXMudGV4dFN0eWxlLmdldFN0cm9rZSgpO1xyXG4gICAgICAgICAgICBsZXQgc3Ryb2tlV2lkdGggPSBzdHJva2VTdGF0ZSAmJiBzdHJva2VTdGF0ZS5nZXRXaWR0aCgpID8gc3Ryb2tlU3RhdGUuZ2V0V2lkdGgoKSA6IDA7XHJcblxyXG4gICAgICAgICAgICBsZXQgZmlsbFN0YXRlID0gdGhpcy50ZXh0U3R5bGUuZ2V0RmlsbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHN0cm9rZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlU3RhdGUuZ2V0Q29sb3IoKSA/IHN0cm9rZVN0YXRlLmdldENvbG9yKCkgOiBcIlRyYW5zcGFyZW50XCI7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZVdpZHRoICogKCg8YW55Pm9sLmhhcykuU0FGQVJJID8gbGFiZWxJbmZvLnNjYWxlIDogMSk7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVDYXAgPSBzdHJva2VTdGF0ZS5nZXRMaW5lQ2FwKCk7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVKb2luID0gc3Ryb2tlU3RhdGUuZ2V0TGluZUpvaW4oKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQubWl0ZXJMaW1pdCA9IHN0cm9rZVN0YXRlLmdldE1pdGVyTGltaXQoKTtcclxuICAgICAgICAgICAgICAgIGxldCBsaW5lRGFzaCA9IHN0cm9rZVN0YXRlLmdldExpbmVEYXNoKCk7XHJcbiAgICAgICAgICAgICAgICBsaW5lRGFzaCA9IGxpbmVEYXNoID8gbGluZURhc2guc2xpY2UoKSA6ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLmRlZmF1bHRMaW5lRGFzaDtcclxuICAgICAgICAgICAgICAgIGlmICgoPGFueT5vbC5oYXMpLkNBTlZBU19MSU5FX0RBU0ggJiYgbGluZURhc2gubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zZXRMaW5lRGFzaChzdHJva2VTdGF0ZS5nZXRMaW5lRGFzaCgpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVEYXNoT2Zmc2V0ID0gKDxhbnk+c3Ryb2tlU3RhdGUpLmdldExpbmVEYXNoT2Zmc2V0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZpbGxTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsU3RhdGUuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250ZXh0LnRleHRCYXNlbGluZSA9IFwibWlkZGxlXCI7XHJcbiAgICAgICAgICAgIGNvbnRleHQudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgbGV0IGFsaWduID0gKDxhbnk+b2wucmVuZGVyKS5yZXBsYXkuVEVYVF9BTElHTlt0aGlzLnRleHRTdHlsZS5nZXRUZXh0QWxpZ24oKSB8fCAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5kZWZhdWx0VGV4dEFsaWduXTtcclxuICAgICAgICAgICAgbGV0IGxlZnRSaWdodCA9ICgwLjUgLSBhbGlnbik7XHJcbiAgICAgICAgICAgIGxldCB4ID0gYWxpZ24gKiBsYWJlbC53aWR0aCAvIGxhYmVsSW5mby5zY2FsZSArIGxlZnRSaWdodCAqIHN0cm9rZVdpZHRoO1xyXG4gICAgICAgICAgICBsZXQgaTtcclxuICAgICAgICAgICAgaWYgKHN0cm9rZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGFiZWxJbmZvLm51bUxpbmVzOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQobGFiZWxJbmZvLmxpbmVzW2ldLCB4ICsgbGVmdFJpZ2h0ICogbGFiZWxJbmZvLndpZHRoc1tpXSwgMC41ICogKHN0cm9rZVdpZHRoICsgbGFiZWxJbmZvLmxpbmVIZWlnaHQpICsgaSAqIGxhYmVsSW5mby5saW5lSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmlsbFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGFiZWxJbmZvLm51bUxpbmVzOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxUZXh0KGxhYmVsSW5mby5saW5lc1tpXSwgeCArIGxlZnRSaWdodCAqIGxhYmVsSW5mby53aWR0aHNbaV0sIDAuNSAqIChzdHJva2VXaWR0aCArIGxhYmVsSW5mby5saW5lSGVpZ2h0KSArIGkgKiBsYWJlbEluZm8ubGluZUhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGFiZWxJbmZvW1wibGFiZWxcIl0gPSBsYWJlbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxhYmVsSW5mb1tcImxhYmVsXCJdO1xyXG4gICAgfVxyXG5cclxuICAgIGZvcm1hdFRleHQoZmVhdHVyZVRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRoaXMubnVtZXJpY0Zvcm1hdCkge1xyXG4gICAgICAgICAgICBmZWF0dXJlVGV4dCA9IHRoaXMuZ2V0VGV4dFdpdGhOdW1lcmljRm9ybWF0KGZlYXR1cmVUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZUZvcm1hdCkge1xyXG4gICAgICAgICAgICBmZWF0dXJlVGV4dCA9IHRoaXMuZ2V0VGV4dFdpdGhEYXRlRm9ybWF0KGZlYXR1cmVUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudGV4dEZvcm1hdCkge1xyXG4gICAgICAgICAgICBmZWF0dXJlVGV4dCA9IHRoaXMuZ2V0VGV4dFdpdGhGb3JtYXQoZmVhdHVyZVRleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmVhdHVyZVRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldFRleHRXaXRoTnVtZXJpY0Zvcm1hdChmZWF0dXJlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgdG1wQXJndW1lbnRzID0gdGhpcy5udW1lcmljRm9ybWF0LnNwbGl0KFwiLFwiKTtcclxuICAgICAgICBsZXQgbnVtZXJpY0Zvcm1hdE9wdGlvbnMgPSB7fTtcclxuICAgICAgICBmb3IgKGxldCB0bXBBcmd1bWVudCBvZiB0bXBBcmd1bWVudHMpIHtcclxuICAgICAgICAgICAgbGV0IGtleVZhbHVlUGFpciA9IHRtcEFyZ3VtZW50LnNwbGl0KFwiOlwiKTtcclxuICAgICAgICAgICAgc3dpdGNoIChrZXlWYWx1ZVBhaXJbMF0udHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibG9jYWxlTWF0Y2hlclwiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5sb2NhbGVNYXRjaGVyID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzdHlsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5zdHlsZSA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiY3VycmVuY3lcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykuY3VycmVuY3kgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImN1cnJlbmN5RGlzcGxheVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5jdXJyZW5jeURpc3BsYXkgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInVzZUdyb3VwaW5nXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLnVzZUdyb3VwaW5nID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtaW5pbXVtSW50ZWdlckRpZ2l0c1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5taW5pbXVtSW50ZWdlckRpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWluaW11bUZyYWN0aW9uRGlnaXRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLm1pbmltdW1GcmFjdGlvbkRpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWF4aW11bUZyYWN0aW9uRGlnaXRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLm1heGltdW1GcmFjdGlvbkRpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWluaW11bVNpZ25pZmljYW50RGlnaXRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLm1pbmltdW1TaWduaWZpY2FudERpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWF4aW11bVNpZ25pZmljYW50RGlnaXRzXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLm1heGltdW1TaWduaWZpY2FudERpZ2l0cyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG51bWVyaWMgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQodG1wQXJndW1lbnRzWzBdLCBudW1lcmljRm9ybWF0T3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiBudW1lcmljLmZvcm1hdChOdW1iZXIoZmVhdHVyZVRleHQpKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRUZXh0V2l0aERhdGVGb3JtYXQoZmVhdHVyZVRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICg8YW55PihuZXcgRGF0ZShmZWF0dXJlVGV4dCkpKS5mb3JtYXQodGhpcy5kYXRlRm9ybWF0KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRUZXh0V2l0aEZvcm1hdChmZWF0dXJlVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gKDxhbnk+U3RyaW5nKS5mb3JtYXQoZmVhdHVyZVRleHQsIHRoaXMudGV4dEZvcm1hdCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UG9pbnRHZW9tZXRyeShmZWF0dXJlOiBvbC5GZWF0dXJlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcclxuICAgIH1cclxuXHJcbiAgICB3cmFwVGV4dCh0ZXh0OiBzdHJpbmcsIGZvbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHJlc3VsdFRleHQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgaWYgKHRleHQgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgbGV0IGxpbmVzID0gW3RleHRdO1xyXG4gICAgICAgICAgICBsZXQgd2lkdGhzID0gW107XHJcbiAgICAgICAgICAgIC8vIGxldCB3aWR0aCA9ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLlRleHRSZXBsYXkubWVhc3VyZVRleHRXaWR0aHMoZm9udCwgbGluZXMsIHdpZHRocyk7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IHRoaXMuZ2V0RXN0aW1hdGVkV2lkdGgoZm9udCwgbGluZXMsIHdpZHRocyk7XHJcblxyXG5cclxuICAgICAgICAgICAgbGV0IHdyYXBXaWR0aCA9IHRoaXMud3JhcFdpZHRoO1xyXG4gICAgICAgICAgICBsZXQgd3JhcENoYXJhY3RlciA9IFwiIFwiO1xyXG4gICAgICAgICAgICBsZXQgaXNXcmFwQmVmb3JlID0gdGhpcy53cmFwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdyYXBXaWR0aCA+IDAgJiYgd2lkdGggPiB3cmFwV2lkdGggJiYgdGV4dC5pbmNsdWRlcyh3cmFwQ2hhcmFjdGVyKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGluZXMgPSB0ZXh0LnNwbGl0KHdyYXBDaGFyYWN0ZXIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBXaWR0aFN1bSA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgdG1wV3JhcFdpZHRoOiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzV3JhcEJlZm9yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRtcExpbmUgPSBbbGluZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRtcFdyYXBXaWR0aCA9ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLlRleHRSZXBsYXkubWVhc3VyZVRleHRXaWR0aHMoZm9udCwgdG1wTGluZSwgd2lkdGhzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wV3JhcFdpZHRoID0gdGhpcy5nZXRFc3RpbWF0ZWRXaWR0aChmb250LCB0bXBMaW5lLCB3aWR0aHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFdpZHRoU3VtICs9IHRtcFdyYXBXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcFdyYXBXaWR0aCA+IHdyYXBXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGluZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBXaWR0aFN1bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdyYXBMaW5lcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod3JhcFdpZHRoU3VtID4gd3JhcFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzLnB1c2goXCJcXG5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dExpbmVzLnB1c2god3JhcExpbmVzLmpvaW4oXCJcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBXaWR0aFN1bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBMaW5lcy5wdXNoKFwiIFwiICsgbGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod3JhcExpbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dExpbmVzLnB1c2god3JhcExpbmVzLmpvaW4oXCJcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwTGluZXMucHVzaChcIiBcIiArIGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wTGluZSA9IFtsaW5lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG1wV3JhcFdpZHRoID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuVGV4dFJlcGxheS5tZWFzdXJlVGV4dFdpZHRocyhmb250LCB0bXBMaW5lLCB3aWR0aHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBXcmFwV2lkdGggPSB0aGlzLmdldEVzdGltYXRlZFdpZHRoKGZvbnQsIHRtcExpbmUsIHdpZHRocyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwV2lkdGhTdW0gKz0gdG1wV3JhcFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdyYXBXaWR0aFN1bSA+IHdyYXBXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzLnB1c2goXCJcXG5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGluZXMucHVzaCh3cmFwTGluZXMuam9pbihcIlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwTGluZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBXaWR0aFN1bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3cmFwTGluZXMubGVuZ3RoID4gMCkgeyB0ZXh0TGluZXMucHVzaCh3cmFwTGluZXMuam9pbihcIlwiKSk7IH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXN1bHRUZXh0ID0gdGV4dExpbmVzLmpvaW4oXCJcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0VGV4dC5sYXN0SW5kZXhPZihcIlxcblwiKSA9PT0gcmVzdWx0VGV4dC5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0VGV4dCA9IHJlc3VsdFRleHQuc3Vic3RyKDAsIHJlc3VsdFRleHQubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHRUZXh0ID0gdGV4dDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFRleHQ7XHJcbiAgICB9XHJcblxyXG4gICAgZm9ybWF0Rm9udChmb250OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCB0bXBGb250cyA9IGZvbnQuc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgIGxldCBmb3JtYXRlZEZvbnQ6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgIGlmICh0bXBGb250c1t0bXBGb250cy5sZW5ndGggLSAxXS5pbmNsdWRlcyhcImJvbGRcIikgfHwgdG1wRm9udHNbdG1wRm9udHMubGVuZ3RoIC0gMV0uaW5jbHVkZXMoXCJpdGFsaWNcIikpIHtcclxuICAgICAgICAgICAgZm9ybWF0ZWRGb250LnB1c2goYCR7dG1wRm9udHNbdG1wRm9udHMubGVuZ3RoIC0gMV19IGApO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRtcEZvbnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgZm9ybWF0ZWRGb250LnB1c2goYCR7dG1wRm9udHNbaV19IGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZvbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmb3JtYXRlZEZvbnQuam9pbihcIlwiKS50cmltKCk7XHJcbiAgICB9XHJcblxyXG4gICAgQkFUQ0hfQ09OU1RSVUNUT1JTX0RFRkFVTFQgPSB7XHJcbiAgICAgICAgUG9pbnQ6IFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIE11bHRpUG9pbnQ6IFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIExpbmVTdHJpbmc6IFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIENpcmNsZTogVGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTXVsdGlMaW5lU3RyaW5nOiBUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBQb2x5Z29uOiBUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBNdWx0aVBvbHlnb246IFRleHRMYWJlbGluZ1N0cmF0ZWd5XHJcbiAgICB9O1xyXG5cclxuICAgIEJBVENIX0NPTlNUUlVDVE9SU19ERVRFQ1QgPSB7XHJcbiAgICAgICAgUG9pbnQ6IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIE11bHRpUG9pbnQ6IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIExpbmVTdHJpbmc6IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIENpcmNsZTogRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTXVsdGlMaW5lU3RyaW5nOiBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBQb2x5Z29uOiBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBNdWx0aVBvbHlnb246IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5XHJcbiAgICB9O1xyXG59IiwiZXhwb3J0IGNsYXNzIEdlb1N0eWxlIHtcclxuICAgIHB1YmxpYyBpZDogc3RyaW5nO1xyXG4gICAgcHVibGljIHVpZDphbnk7XHJcbiAgICBwdWJsaWMgdmlzaWJsZTogdHJ1ZTtcclxuICAgIHB1YmxpYyBzdHlsZXM6IGFueVtdO1xyXG5cclxuICAgIHB1YmxpYyBpbml0aWFsaXplZDogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzdHlsZUpzb24/OiBvYmplY3QpIHtcclxuICAgICAgICB0aGlzLnN0eWxlcyA9IFtdO1xyXG4gICAgICAgIGlmIChzdHlsZUpzb24pIHtcclxuICAgICAgICAgICAgdGhpcy5pZCA9IHN0eWxlSnNvbltcImlkXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnVpZD0gKDxhbnk+b2wpLmdldFVpZCh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gc3R5bGVKc29uW1widmlzaWJsZVwiXSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IHN0eWxlSnNvbltcInZpc2libGVcIl07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvcmUoKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYWxpemVDb3JlKCkge1xyXG4gICAgfVxyXG5cclxuICAgIGdldFN0eWxlcyhmZWF0dXJlOiBvbC5GZWF0dXJlLCByZXNvbHV0aW9uOiBudW1iZXIsIG9wdGlvbnM6IGFueSk6IG9sLnN0eWxlLlN0eWxlW10ge1xyXG4gICAgICAgIGxldCByZXN1bHRzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMudmlzaWJsZSkge1xyXG4gICAgICAgICAgICByZXN1bHRzID0gdGhpcy5nZXRDb252ZXJ0ZWRTdHlsZShmZWF0dXJlLCByZXNvbHV0aW9uLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udmVydGVkU3R5bGUoZmVhdHVyZTogb2wuRmVhdHVyZSwgcmVzb2x1dGlvbjogbnVtYmVyLCBvcHRpb25zOiBhbnkpOiBvbC5zdHlsZS5TdHlsZVtdIHtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRDb252ZXJ0ZWRTdHlsZUNvcmUoZmVhdHVyZSwgcmVzb2x1dGlvbiwgb3B0aW9ucyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q29udmVydGVkU3R5bGVDb3JlKGZlYXR1cmU6IG9sLkZlYXR1cmUsIHJlc29sdXRpb246IG51bWJlciwgb3B0aW9uczogYW55KTogb2wuc3R5bGUuU3R5bGVbXSB7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHNrZXdHZW9tZXRyeShnZW9tZXRyeTogYW55LCB4RGVnOiBudW1iZXIsIHlEZWc6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBjZW50ZXIgPSBvbC5leHRlbnQuZ2V0Q2VudGVyKGdlb21ldHJ5LmdldEV4dGVudCgpKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW9tZXRyeS5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgbGV0IHggPSBnZW9tZXRyeS5mbGF0Q29vcmRpbmF0ZXNbaV07XHJcbiAgICAgICAgICAgIGxldCB5ID0gZ2VvbWV0cnkuZmxhdENvb3JkaW5hdGVzW2kgKyAxXTtcclxuICAgICAgICAgICAgbGV0IHJ4ID0gdGhpcy5za2V3WCh4LCB5LCBjZW50ZXJbMF0sIGNlbnRlclsxXSwgeERlZyk7XHJcbiAgICAgICAgICAgIGxldCByeSA9IHRoaXMuc2tld1koeCwgeSwgY2VudGVyWzBdLCBjZW50ZXJbMV0sIHlEZWcpO1xyXG4gICAgICAgICAgICBnZW9tZXRyeS5mbGF0Q29vcmRpbmF0ZXNbaV0gPSByeDtcclxuICAgICAgICAgICAgZ2VvbWV0cnkuZmxhdENvb3JkaW5hdGVzW2kgKyAxXSA9IHJ5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBza2V3WCh4OiBudW1iZXIsIHk6IG51bWJlciwgY3g6IG51bWJlciwgY3k6IG51bWJlciwgeERlZzogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgcnggPSB4O1xyXG5cclxuICAgICAgICBpZiAoeERlZyAhPT0gMCkge1xyXG4gICAgICAgICAgICBsZXQgeFJlc29sdXRpb24gPSBNYXRoLnRhbigxLjAgKiB4RGVnICogTWF0aC5QSSAvIDE4MCk7XHJcbiAgICAgICAgICAgIGxldCBkaXN0YW5jZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh4ID4gY3gpIHtcclxuICAgICAgICAgICAgICAgIGlmICh5ID4gY3kpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IHhSZXNvbHV0aW9uICogTWF0aC5hYnMoeSAtIGN5KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSAwIC0geFJlc29sdXRpb24gKiBNYXRoLmFicyh5IC0gY3kpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPiBjeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0geFJlc29sdXRpb24gKiBNYXRoLmFicyh5IC0gY3kpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IDAgLSB4UmVzb2x1dGlvbiAqIE1hdGguYWJzKHkgLSBjeSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJ4ICs9IE1hdGgucm91bmQoZGlzdGFuY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJ4O1xyXG4gICAgfVxyXG5cclxuICAgIHNrZXdZKHg6IG51bWJlciwgeTogbnVtYmVyLCBjeDogbnVtYmVyLCBjeTogbnVtYmVyLCB5RGVnOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIGxldCByeSA9IHk7XHJcblxyXG4gICAgICAgIGlmICh5RGVnICE9PSAwKSB7XHJcbiAgICAgICAgICAgIGxldCB5UmVzb2x1dGlvbiA9IE1hdGgudGFuKDEuMCAqIHlEZWcgKiBNYXRoLlBJIC8gMTgwKTtcclxuICAgICAgICAgICAgbGV0IGRpc3RhbmNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHkgPiBjeSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHggPiBjeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0geVJlc29sdXRpb24gKiBNYXRoLmFicyh4IC0gY3gpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9IDAgLSB5UmVzb2x1dGlvbiAqIE1hdGguYWJzKHggLSBjeCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA+IGN4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2UgPSB5UmVzb2x1dGlvbiAqIE1hdGguYWJzKHggLSBjeCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlID0gMCAtIHlSZXNvbHV0aW9uICogTWF0aC5hYnMoeCAtIGN4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcnkgKz0gTWF0aC5yb3VuZChkaXN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcnk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHRvUkdCQUNvbG9yKGNvbG9yLCBvcGFjaXR5ID0gMSk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGNvbG9yLmluZGV4T2YoXCIjXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGxldCBhcnJheTogbnVtYmVyW107XHJcbiAgICAgICAgICAgIGxldCByOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGxldCBnOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGxldCBiOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGxldCBhOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGlmIChjb2xvci5sZW5ndGggPT09IDQpIHtcclxuICAgICAgICAgICAgICAgIHIgPSArKFwiMHhcIiArIGNvbG9yLnN1YnN0cigxLCAxKSArIGNvbG9yLnN1YnN0cigxLCAxKSk7XHJcbiAgICAgICAgICAgICAgICBnID0gKyhcIjB4XCIgKyBjb2xvci5zdWJzdHIoMiwgMSkgKyBjb2xvci5zdWJzdHIoMiwgMSkpO1xyXG4gICAgICAgICAgICAgICAgYiA9ICsoXCIweFwiICsgY29sb3Iuc3Vic3RyKDMsIDEpICsgY29sb3Iuc3Vic3RyKDMsIDEpKTtcclxuICAgICAgICAgICAgICAgIGEgPSBvcGFjaXR5O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgciA9ICsoXCIweFwiICsgY29sb3Iuc3Vic3RyKDEsIDIpKTtcclxuICAgICAgICAgICAgICAgIGcgPSArKFwiMHhcIiArIGNvbG9yLnN1YnN0cigzLCAyKSk7XHJcbiAgICAgICAgICAgICAgICBiID0gKyhcIjB4XCIgKyBjb2xvci5zdWJzdHIoNSwgMikpO1xyXG4gICAgICAgICAgICAgICAgYSA9IG9wYWNpdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXJyYXkgPSBbciwgZywgYiwgYV07XHJcbiAgICAgICAgICAgIGlmICghaXNOYU4ocikgJiYgIWlzTmFOKGcpICYmICFpc05hTihiKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwicmdiYShcIiArIGFycmF5LmpvaW4oXCIsXCIpICsgXCIpXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJyZ2JhKDAsMCwwLDApXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbG9yLmluZGV4T2YoXCJyZ2IoXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbG9yID0gY29sb3IucmVwbGFjZShcInJnYihcIiwgXCJyZ2JhKFwiKTtcclxuICAgICAgICAgICAgY29sb3IgPSBjb2xvci5zdWJzdHJpbmcoMCwgY29sb3IubGVuZ3RoIC0gMSkgKyBcIixcIiArIG9wYWNpdHkgKyBcIilcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbG9yLmluZGV4T2YoXCJhcmdiKFwiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb2xvciA9IGNvbG9yLnJlcGxhY2UoXCJhcmdiKFwiLCBcIlwiKS5yZXBsYWNlKFwiKVwiLCBcIlwiKTtcclxuICAgICAgICAgICAgbGV0IGFycmF5ID0gY29sb3Iuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgICBsZXQgYSA9IGFycmF5LnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIGFycmF5LnB1c2goYSk7XHJcbiAgICAgICAgICAgIGNvbG9yID0gXCJyZ2JhKFwiICsgYXJyYXkuam9pbihcIixcIikgKyBcIilcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBjb2xvcjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdG9PTExpbmVhckdyYWRpZW50KGNvbG9yLCBvcGFjaXR5ID0gMSwgc2l6ZSkge1xyXG4gICAgICAgIGxldCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgICAgIGxldCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcclxuICAgICAgICBjb250ZXh0LnJlY3QoMCwgMCwgc2l6ZSwgc2l6ZSk7XHJcblxyXG4gICAgICAgIGxldCBncmQgPSBjb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIHNpemUsIHNpemUpO1xyXG4gICAgICAgIGxldCBjb2xvclN0b3BzID0gY29sb3Iuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgIGZvciAobGV0IGNvbG9yU3RvcCBvZiBjb2xvclN0b3BzKSB7XHJcbiAgICAgICAgICAgIGNvbG9yU3RvcCA9IGNvbG9yU3RvcC50cmltKCk7XHJcbiAgICAgICAgICAgIGxldCB0bXBDb2xvclN0b3AgPSBjb2xvclN0b3Auc3Vic3RyKDEsIGNvbG9yU3RvcC5sZW5ndGggLSAyKTtcclxuICAgICAgICAgICAgbGV0IGNzID0gdG1wQ29sb3JTdG9wLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICAgICAgZ3JkLmFkZENvbG9yU3RvcChOdW1iZXIoY3NbMF0udHJpbSgpKSwgdGhpcy50b1JHQkFDb2xvcihjc1sxXS50cmltKCksIG9wYWNpdHkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBncmQ7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHRvT0xSYWRpYWxHcmFkaWVudChjb2xvciwgb3BhY2l0eSA9IDEsIHNpemUpIHtcclxuICAgICAgICBsZXQgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcclxuICAgICAgICBsZXQgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgY29udGV4dC5yZWN0KDAsIDAsIHNpemUsIHNpemUpO1xyXG5cclxuICAgICAgICBsZXQgZ3JkID0gY29udGV4dC5jcmVhdGVSYWRpYWxHcmFkaWVudChzaXplIC8gMiwgc2l6ZSAvIDIsIDAsIHNpemUgLyAyLCBzaXplIC8gMiwgc2l6ZSAvIDIpO1xyXG4gICAgICAgIGxldCBjb2xvclN0b3BzID0gY29sb3Iuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgIGZvciAobGV0IGNvbG9yU3RvcCBvZiBjb2xvclN0b3BzKSB7XHJcbiAgICAgICAgICAgIGNvbG9yU3RvcCA9IGNvbG9yU3RvcC50cmltKCk7XHJcbiAgICAgICAgICAgIGxldCB0bXBDb2xvclN0b3AgPSBjb2xvclN0b3Auc3Vic3RyKDEsIGNvbG9yU3RvcC5sZW5ndGggLSAyKTtcclxuICAgICAgICAgICAgbGV0IGNzID0gdG1wQ29sb3JTdG9wLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICAgICAgZ3JkLmFkZENvbG9yU3RvcChOdW1iZXIoY3NbMF0udHJpbSgpKSwgdGhpcy50b1JHQkFDb2xvcihjc1sxXS50cmltKCksIG9wYWNpdHkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBncmQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgR2VvRmlsdGVySXRlbSB9IGZyb20gXCIuLi9maWx0ZXIvZ2VvRmlsdGVySXRlbVwiO1xyXG5pbXBvcnQgeyBHZW9ab29tRmlsdGVyIH0gZnJvbSBcIi4uL2ZpbHRlci9nZW9ab29tRmlsdGVyXCI7XHJcbmltcG9ydCB7IEdlb1N0cmluZ0F0dHJpYnV0ZUZpbHRlciB9IGZyb20gXCIuLi9maWx0ZXIvZ2VvU3RyaW5nQXR0cmlidXRlRmlsdGVyXCI7XHJcbmltcG9ydCB7IEdlb1JlZ2V4RmlsdGVyIH0gZnJvbSBcIi4uL2ZpbHRlci9nZW9SZWdleEZpbHRlclwiO1xyXG5pbXBvcnQgeyBHZW9OdW1iZXJBdHRyaWJ1dGVGaWx0ZXIgfSBmcm9tIFwiLi4vZmlsdGVyL2dlb051bWJlckF0dHJpYnV0ZUZpbHRlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdlb1N0eWxlUHJvcGVydHkge1xyXG4gICAgcHVibGljIHN0eWxlSnNvblZhbHVlOiBhbnk7XHJcbiAgICBwdWJsaWMgZGVmYXVsdFZhbHVlOiBhbnk7XHJcblxyXG4gICAgcHVibGljIHZhbHVlOiBhbnk7XHJcbiAgICBwdWJsaWMgY29uZGl0aW9uczogYW55O1xyXG4gICAgcHVibGljIHZhbHVlczogYW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0eWxlSnNvblZhbHVlLCBkZWZhdWx0VmFsdWU/KSB7XHJcbiAgICAgICAgdGhpcy5zdHlsZUpzb25WYWx1ZSA9IHN0eWxlSnNvblZhbHVlO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gZGVmYXVsdFZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnN0eWxlSnNvblZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnN0eWxlSnNvblZhbHVlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmRpdGlvbnMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIGluIHRoaXMuc3R5bGVKc29uVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVycyA9IHRoaXMuY3JlYXRlRmlsdGVyKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZGl0aW9ucy5wdXNoKGZpbHRlcnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzLnB1c2godGhpcy5pbml0aWFsaXplVmFsdWUodGhpcy5zdHlsZUpzb25WYWx1ZVtuYW1lXSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmluaXRpYWxpemVWYWx1ZSh0aGlzLmRlZmF1bHRWYWx1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluaXRpYWxpemVWYWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNDb25kaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZGl0aW9ucyAmJiB0aGlzLmNvbmRpdGlvbnMubGVuZ3RoID4gMDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0VmFsdWUoY29sdW1uVmFsdWU/KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29uZGl0aW9ucyAmJiB0aGlzLmNvbmRpdGlvbnMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBpZiAoY29sdW1uVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBpID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBtYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5jb25kaXRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlckdyb3VwID0gdGhpcy5jb25kaXRpb25zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZmlsdGVyR3JvdXAubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlcnMgPSBmaWx0ZXJHcm91cFtqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGdyb3VwTWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgZmlsdGVycy5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlciA9IGZpbHRlcnNba107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmF3RmVhdHVyZSA9IHsgcHJvcGVydGllczogY29sdW1uVmFsdWUgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVyLm1hdGNoT0xGZWF0dXJlKHJhd0ZlYXR1cmUsIDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBNYXRjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdyb3VwTWF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlc1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjcmVhdGVGaWx0ZXIoZmlsdGVyU3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGZpbHRlckdyb3VwID0gW107XHJcbiAgICAgICAgaWYgKGZpbHRlclN0cmluZykge1xyXG4gICAgICAgICAgICBsZXQgZmlsdGVyU3RyaW5ncyA9IGZpbHRlclN0cmluZy5zcGxpdChcInxcIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsdGVyU3RyaW5ncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbHRlclN0ciA9IGZpbHRlclN0cmluZ3NbaV07XHJcbiAgICAgICAgICAgICAgICBsZXQgZXhwcmVzc2lvbiA9IFwiKFxcXFx3Kz89ficuKz8nKXwoXFxcXHcrP1s8PiE9XSonW147XSs/Jyl8KFxcXFx3Kz9bPD4hPV0qW147XSspXCI7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVnZXggPSBuZXcgUmVnRXhwKGV4cHJlc3Npb24sIFwiZ1wiKTtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHRzID0gZmlsdGVyU3RyLm1hdGNoKHJlZ2V4KTtcclxuICAgICAgICAgICAgICAgIGxldCByYW5nZUZpbHRlcnMgPSB7fTtcclxuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJzID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGdlb1pvb21GaWx0ZXI6IEdlb1pvb21GaWx0ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZpbHRlckl0ZW0gPSBHZW9GaWx0ZXJJdGVtLmNyZWF0ZUZpbHRlckl0ZW0ocmVzdWx0c1tpXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVySXRlbS52YWx1ZS5pbmRleE9mKFwifidcIikgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMucHVzaChuZXcgR2VvUmVnZXhGaWx0ZXIoW2ZpbHRlckl0ZW1dKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsdGVySXRlbS5rZXkgPT09IFwiem9vbVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VvWm9vbUZpbHRlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvWm9vbUZpbHRlciA9IG5ldyBHZW9ab29tRmlsdGVyKFtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb1pvb21GaWx0ZXIuYWRkRmlsdGVySXRlbShmaWx0ZXJJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXJJdGVtLnZhbHVlLmluY2x1ZGVzKFwiJ1wiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKG5ldyBHZW9TdHJpbmdBdHRyaWJ1dGVGaWx0ZXIoW2ZpbHRlckl0ZW1dKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZUZpbHRlcnNbZmlsdGVySXRlbS5rZXldID0gcmFuZ2VGaWx0ZXJzW2ZpbHRlckl0ZW0ua2V5XSB8fCBuZXcgR2VvTnVtYmVyQXR0cmlidXRlRmlsdGVyKFtdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlRmlsdGVyc1tmaWx0ZXJJdGVtLmtleV0uYWRkRmlsdGVySXRlbShmaWx0ZXJJdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IG5hbWUgaW4gcmFuZ2VGaWx0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKHJhbmdlRmlsdGVyc1tuYW1lXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJHcm91cC5wdXNoKGZpbHRlcnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmaWx0ZXJHcm91cDtcclxuICAgIH1cclxufVxyXG4iLCJcclxuaW1wb3J0IHsgR2VvU3R5bGUgfSBmcm9tIFwiLi9nZW9TdHlsZVwiO1xyXG5pbXBvcnQgeyBHZW9TdHlsZVByb3BlcnR5IH0gZnJvbSBcIi4vZ2VvU3R5bGVQcm9wZXJ0eVwiO1xyXG5pbXBvcnQgeyBHZW9CcnVzaCB9IGZyb20gXCIuLi9zdHlsZS9nZW9CcnVzaFwiO1xyXG5pbXBvcnQgeyBUZXh0TGFiZWxpbmdTdHJhdGVneSB9IGZyb20gXCIuL3RleHRMYWJlbGluZ1N0cmF0ZWd5XCI7XHJcbmltcG9ydCB7IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5IH0gZnJvbSBcIi4vZGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3lcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW9UZXh0U3R5bGUgZXh0ZW5kcyBHZW9TdHlsZSB7XHJcbiAgICBzdGF0aWMgcGxhY2VtZW50c05hbWUgPSBcInRleHQtcGxhY2VtZW50c1wiO1xyXG5cclxuICAgIHRleHRBbGlnbnMgPSBbXCJsZWZ0XCIsIFwicmlnaHRcIiwgXCJjZW50ZXJcIiwgXCJlbmRcIiwgXCJzdGFydFwiXTtcclxuICAgIHRleHRCYXNlbGluZSA9IFtcImJvdHRvbVwiLCBcInRvcFwiLCBcIm1pZGRsZVwiLCBcImFscGhhYmV0aWNcIiwgXCJoYW5naW5nXCIsIFwiaWRlb2dyYXBoaWNcIl07XHJcbiAgICB0ZXh0VHJhbnNmb3JtcyA9IFtcImRlZmF1bHRcIiwgXCJ1cHBlcmNhc2VcIiwgXCJsb3dlcmNhc2VcIl07XHJcblxyXG4gICAgcHJvcGVydHlQbGFjZW1lbnRzOiBHZW9TdHlsZVByb3BlcnR5O1xyXG5cclxuICAgIGFsaWduOiBzdHJpbmc7XHJcbiAgICBiYXNlbGluZTogc3RyaW5nO1xyXG4gICAgYXZvaWRFZGdlOiBib29sZWFuO1xyXG4gICAgZGF0ZUZvcm1hdDogc3RyaW5nO1xyXG4gICAgZHg6IG51bWJlcjtcclxuICAgIGR5OiBudW1iZXI7XHJcbiAgICBmb250OiBzdHJpbmc7XHJcbiAgICBmaWxsOiBzdHJpbmc7XHJcbiAgICBmb3JjZUhvcml6b250YWxGb3JMaW5lOiBib29sZWFuO1xyXG4gICAgaGFsb0ZpbGw6IHN0cmluZztcclxuICAgIGhhbG9SYWRpdXM6IG51bWJlcjtcclxuICAgIG1hcmdpbjogbnVtYmVyO1xyXG4gICAgbWFza0NvbG9yOiBzdHJpbmc7XHJcbiAgICBtYXNrTWFyZ2luOiBzdHJpbmc7XHJcbiAgICBtYXNrT3V0bGluZUNvbG9yOiBzdHJpbmc7XHJcbiAgICBtYXNrT3V0bGluZVdpZHRoOiBudW1iZXI7XHJcbiAgICBtYXNrVHlwZTogc3RyaW5nO1xyXG4gICAgbWF4Q2hhckFuZ2xlOiBudW1iZXI7XHJcbiAgICBtaW5EaXN0YW5jZTogbnVtYmVyO1xyXG4gICAgbWluUGFkZGluZzogbnVtYmVyO1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgbnVtZXJpY0Zvcm1hdDogc3RyaW5nO1xyXG4gICAgb3BhY2l0eTogbnVtYmVyO1xyXG4gICAgcm90YXRlQW5nbGU6IG51bWJlcjtcclxuICAgIHBsYWNlbWVudHM6IHN0cmluZztcclxuICAgIHBsYWNlbWVudFR5cGU6IHN0cmluZztcclxuICAgIHBvbHlnb25MYWJlbGluZ0xvY2F0aW9uOiBzdHJpbmc7XHJcbiAgICBzcGFjaW5nOiBudW1iZXI7XHJcbiAgICBzcGxpbmVUeXBlOiBzdHJpbmc7XHJcbiAgICB0ZXh0Rm9ybWF0OiBzdHJpbmc7XHJcbiAgICB3cmFwQmVmb3JlOiBzdHJpbmc7XHJcbiAgICB3cmFwV2lkdGg6IG51bWJlcjtcclxuICAgIHRleHRUcmFuc2Zvcm06IHN0cmluZztcclxuICAgIGxldHRlclNwYWNpbmc6IG51bWJlcjtcclxuXHJcbiAgICBsYWJlbEluZm9zOiBhbnk7XHJcbiAgICBkcmF3bk1hc2s6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICBjaGFyV2lkdGhzOiBhbnk7XHJcblxyXG4gICAgZmlsbENvbG9yOiBhbnk7XHJcbiAgICBoYWxvRmlsbENvbG9yOiBhbnk7XHJcblxyXG4gICAgc3R5bGU6IG9sLnN0eWxlLlN0eWxlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0eWxlSnNvbj86IGFueSkge1xyXG4gICAgICAgIHN1cGVyKHN0eWxlSnNvbik7XHJcbiAgICAgICAgdGhpcy5sYWJlbEluZm9zID0gbmV3ICg8YW55Pm9sKS5zdHJ1Y3RzLkxSVUNhY2hlKDUxMik7XHJcbiAgICAgICAgdGhpcy5jaGFyV2lkdGhzID0ge307XHJcblxyXG4gICAgICAgIGlmIChzdHlsZUpzb24pIHtcclxuICAgICAgICAgICAgdGhpcy5hbGlnbiA9IHN0eWxlSnNvbltcInRleHQtYWxpZ25cIl07XHJcbiAgICAgICAgICAgIHRoaXMuYmFzZWxpbmUgPSBzdHlsZUpzb25bXCJ0ZXh0LWJhc2UtbGluZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5keCA9IHN0eWxlSnNvbltcInRleHQtZHhcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZHkgPSBzdHlsZUpzb25bXCJ0ZXh0LWR5XCJdO1xyXG4gICAgICAgICAgICB0aGlzLmZvbnQgPSBzdHlsZUpzb25bXCJ0ZXh0LWZvbnRcIl07XHJcbiAgICAgICAgICAgIHRoaXMuZmlsbCA9IHN0eWxlSnNvbltcInRleHQtZmlsbFwiXTtcclxuICAgICAgICAgICAgdGhpcy5mb3JjZUhvcml6b250YWxGb3JMaW5lID0gc3R5bGVKc29uW1widGV4dC1mb3JjZS1ob3Jpem9udGFsLWZvci1saW5lXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmhhbG9GaWxsID0gc3R5bGVKc29uW1widGV4dC1oYWxvLWZpbGxcIl07XHJcbiAgICAgICAgICAgIHRoaXMuaGFsb1JhZGl1cyA9IHN0eWxlSnNvbltcInRleHQtaGFsby1yYWRpdXNcIl07XHJcbiAgICAgICAgICAgIHRoaXMubWFyZ2luID0gc3R5bGVKc29uW1widGV4dC1tYXJnaW5cIl07XHJcbiAgICAgICAgICAgIHRoaXMubWFza0NvbG9yID0gc3R5bGVKc29uW1widGV4dC1tYXNrLWNvbG9yXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm1hc2tNYXJnaW4gPSBzdHlsZUpzb25bXCJ0ZXh0LW1hc2stbWFyZ2luXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm1hc2tPdXRsaW5lQ29sb3IgPSBzdHlsZUpzb25bXCJ0ZXh0LW1hc2stb3V0bGluZS1jb2xvclwiXTtcclxuICAgICAgICAgICAgdGhpcy5tYXNrT3V0bGluZVdpZHRoID0gc3R5bGVKc29uW1widGV4dC1tYXNrLW91dGxpbmUtd2lkdGhcIl07XHJcbiAgICAgICAgICAgIHRoaXMubWFza1R5cGUgPSBzdHlsZUpzb25bXCJ0ZXh0LW1hc2stdHlwZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5tYXhDaGFyQW5nbGUgPSBzdHlsZUpzb25bXCJ0ZXh0LW1heC1jaGFyLWFuZ2xlXCJdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5taW5EaXN0YW5jZSA9IHN0eWxlSnNvbltcInRleHQtbWluLWRpc3RhbmNlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm1pblBhZGRpbmcgPSBzdHlsZUpzb25bXCJ0ZXh0LW1pbi1wYWRkaW5nXCJdO1xyXG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBzdHlsZUpzb25bXCJ0ZXh0LW5hbWVcIl07XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9wYWNpdHkgPSBzdHlsZUpzb25bXCJ0ZXh0LW9wYWNpdHlcIl07XHJcbiAgICAgICAgICAgIHRoaXMucm90YXRlQW5nbGUgPSBzdHlsZUpzb25bXCJ0ZXh0LXJvdGF0ZS1hbmdsZVwiXTtcclxuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eVBsYWNlbWVudHMgPSBuZXcgR2VvU3R5bGVQcm9wZXJ0eShzdHlsZUpzb25bR2VvVGV4dFN0eWxlLnBsYWNlbWVudHNOYW1lXSwgXCJVLEIsTCxSXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYWNlbWVudFR5cGUgPSBzdHlsZUpzb25bXCJ0ZXh0LXBsYWNlbWVudC10eXBlXCJdID8gc3R5bGVKc29uW1widGV4dC1wbGFjZW1lbnQtdHlwZVwiXSA6IFwiZGVmYXVsdFwiO1xyXG4gICAgICAgICAgICB0aGlzLnNwYWNpbmcgPSBzdHlsZUpzb25bXCJ0ZXh0LXNwYWNpbmdcIl0gIT09IHVuZGVmaW5lZCA/IHN0eWxlSnNvbltcInRleHQtc3BhY2luZ1wiXSA6IDEwO1xyXG4gICAgICAgICAgICB0aGlzLndyYXBCZWZvcmUgPSBzdHlsZUpzb25bXCJ0ZXh0LXdyYXAtYmVmb3JlXCJdID8gdHJ1ZSA6IHN0eWxlSnNvbltcInRleHQtd3JhcC1iZWZvcmVcIl07XHJcbiAgICAgICAgICAgIHRoaXMud3JhcFdpZHRoID0gc3R5bGVKc29uW1widGV4dC13cmFwLXdpZHRoXCJdO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRGb3JtYXQgPSBzdHlsZUpzb25bXCJ0ZXh0LXRleHQtZm9ybWF0XCJdO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGVGb3JtYXQgPSBzdHlsZUpzb25bXCJ0ZXh0LWRhdGUtZm9ybWF0XCJdO1xyXG4gICAgICAgICAgICB0aGlzLm51bWVyaWNGb3JtYXQgPSBzdHlsZUpzb25bXCJ0ZXh0LW51bWVyaWMtZm9ybWF0XCJdO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRUcmFuc2Zvcm0gPSBzdHlsZUpzb25bXCJ0ZXh0LWxldHRlci1jYXNlXCJdO1xyXG4gICAgICAgICAgICB0aGlzLmxldHRlclNwYWNpbmcgPSBzdHlsZUpzb25bXCJ0ZXh0LWxldHRlci1zcGFjaW5nXCJdO1xyXG5cclxuICAgICAgICAgICAgLy8gVE9ET1xyXG4gICAgICAgICAgICB0aGlzLmF2b2lkRWRnZSA9IHN0eWxlSnNvbltcInRleHQtYXZvaWQtZWRnZVwiXTtcclxuICAgICAgICAgICAgLy8gVE9ET1xyXG4gICAgICAgICAgICB0aGlzLnNwbGluZVR5cGUgPSBzdHlsZUpzb25bXCJ0ZXh0LXNwbGluZS10eXBlXCJdO1xyXG4gICAgICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgICAgIHRoaXMucG9seWdvbkxhYmVsaW5nTG9jYXRpb24gPSBzdHlsZUpzb25bXCJ0ZXh0LXBvbHlnb24tbGFiZWxpbmctbG9jYXRpb25cIl07XHJcblxyXG5cclxuICAgICAgICAgICAgbGV0IGNoYXJzID0gXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCI7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcldpZHRoc1tjaGFyc1tpXV0gPSAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5tZWFzdXJlVGV4dFdpZHRoKHRoaXMuZm9udCwgY2hhcnNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY2hhcldpZHRoc1tcIiBcIl0gPSAoPGFueT5vbC5yZW5kZXIuY2FudmFzKS5tZWFzdXJlVGV4dFdpZHRoKHRoaXMuZm9udCwgXCIgXCIpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSA5OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2hhcldpZHRoc1tpXSA9ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLm1lYXN1cmVUZXh0V2lkdGgodGhpcy5mb250LCBpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0aWFsaXplQ29yZSgpIHtcclxuICAgICAgICB0aGlzLnByb3BlcnR5UGxhY2VtZW50cy5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgdGhpcy5wbGFjZW1lbnRzID0gdGhpcy5wcm9wZXJ0eVBsYWNlbWVudHMuZ2V0VmFsdWUoKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZmlsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbGxDb2xvciA9IEdlb1N0eWxlLnRvUkdCQUNvbG9yKHRoaXMuZmlsbCwgdGhpcy5vcGFjaXR5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGFsb0ZpbGwpIHtcclxuICAgICAgICAgICAgdGhpcy5oYWxvRmlsbENvbG9yID0gR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5oYWxvRmlsbCwgdGhpcy5vcGFjaXR5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZpbGwgPSBuZXcgb2wuc3R5bGUuRmlsbCgpO1xyXG4gICAgICAgIGxldCBzdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKCk7XHJcbiAgICAgICAgbGV0IHRleHRTdHlsZSA9IG5ldyBvbC5zdHlsZS5UZXh0KHtcclxuICAgICAgICAgICAgZmlsbDogZmlsbCxcclxuICAgICAgICAgICAgc3Ryb2tlOiBzdHJva2VcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5zdHlsZSA9IG5ldyBvbC5zdHlsZS5TdHlsZSh7XHJcbiAgICAgICAgICAgIHRleHQ6IHRleHRTdHlsZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50ZXh0QWxpZ25zLmluZGV4T2YodGhpcy5hbGlnbikgPj0gMCkge1xyXG4gICAgICAgICAgICB0ZXh0U3R5bGUuc2V0VGV4dEFsaWduKHRoaXMuYWxpZ24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy50ZXh0QmFzZWxpbmUuaW5kZXhPZih0aGlzLmJhc2VsaW5lKSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRleHRTdHlsZS5zZXRUZXh0QmFzZWxpbmUodGhpcy5iYXNlbGluZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmR4KSB7XHJcbiAgICAgICAgICAgIHRleHRTdHlsZS5zZXRPZmZzZXRYKHRoaXMuZHgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5keSkge1xyXG4gICAgICAgICAgICB0ZXh0U3R5bGUuc2V0T2Zmc2V0WSh0aGlzLmR5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZm9udCkge1xyXG4gICAgICAgICAgICB0ZXh0U3R5bGUuc2V0Rm9udCh0aGlzLmZvbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5maWxsQ29sb3IpIHtcclxuICAgICAgICAgICAgZmlsbC5zZXRDb2xvcih0aGlzLmZpbGxDb2xvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhhbG9GaWxsQ29sb3IpIHtcclxuICAgICAgICAgICAgc3Ryb2tlLnNldENvbG9yKHRoaXMuaGFsb0ZpbGxDb2xvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhhbG9SYWRpdXMpIHtcclxuICAgICAgICAgICAgc3Ryb2tlLnNldFdpZHRoKHRoaXMuaGFsb1JhZGl1cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmhhbG9GaWxsQ29sb3IgPT09IHVuZGVmaW5lZCAmJiB0aGlzLmhhbG9SYWRpdXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0ZXh0U3R5bGUuc2V0U3Ryb2tlKHVuZGVmaW5lZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5yb3RhdGVBbmdsZSkge1xyXG4gICAgICAgICAgICB0ZXh0U3R5bGUuc2V0Um90YXRpb24odGhpcy5yb3RhdGVBbmdsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm1heENoYXJBbmdsZSA+PSAwKSB7XHJcbiAgICAgICAgICAgICg8YW55PnRleHRTdHlsZSkuc2V0TWF4QW5nbGUodGhpcy5tYXhDaGFyQW5nbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy50ZXh0VHJhbnNmb3Jtcy5pbmNsdWRlcyh0aGlzLnRleHRUcmFuc2Zvcm0pKSB7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVE9ETzogaW52YWxpZCBpbnB1dHMuXHJcbiAgICAgICAgICAgIHRoaXMudGV4dFRyYW5zZm9ybSA9IHRoaXMudGV4dFRyYW5zZm9ybXNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldENvbnZlcnRlZFN0eWxlQ29yZShmZWF0dXJlOiBhbnksIHJlc29sdXRpb246IG51bWJlciwgb3B0aW9uczogYW55KTogb2wuc3R5bGUuU3R5bGVbXSB7XHJcbiAgICAgICAgbGV0IHRleHRTdHlsZXMgPSBbXTtcclxuICAgICAgICBsZXQgZmVhdHVyZVRleHQgPSBcIlwiO1xyXG4gICAgICAgIGxldCBmZWF0dXJlUHJvcGVydGllcyA9IGZlYXR1cmUuZ2V0UHJvcGVydGllcygpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5uYW1lKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gZmVhdHVyZS5nZXQodGhpcy5uYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEEgd29ya2Fyb3VuZCBmb3IgdGhlIGxhbmd1YWdlLCByZW1vdmUgdGhlIGRhdGEgdXBkYXRlXHJcbiAgICAgICAgaWYgKChmZWF0dXJlVGV4dCA9PT0gdW5kZWZpbmVkIHx8IGZlYXR1cmVUZXh0ID09PSBcIlwiKSAmJiB0aGlzLm5hbWUuaW5kZXhPZihcIm5hbWVfXCIpID09PSAwKSB7XHJcbiAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gZmVhdHVyZS5nZXQoXCJuYW1lXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubnVtZXJpY0Zvcm1hdCkge1xyXG4gICAgICAgICAgICBmZWF0dXJlVGV4dCA9IHRoaXMuZ2V0VGV4dFdpdGhOdW1lcmljRm9ybWF0KGZlYXR1cmVUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0ZUZvcm1hdCkge1xyXG4gICAgICAgICAgICBmZWF0dXJlVGV4dCA9IHRoaXMuZ2V0VGV4dFdpdGhEYXRlRm9ybWF0KGZlYXR1cmVUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMudGV4dEZvcm1hdCkge1xyXG4gICAgICAgICAgICBmZWF0dXJlVGV4dCA9IHRoaXMuZ2V0VGV4dFdpdGhGb3JtYXQoZmVhdHVyZVRleHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZlYXR1cmVUZXh0ID09PSB1bmRlZmluZWQgfHwgZmVhdHVyZVRleHQgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRleHRTdHlsZXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmZWF0dXJlVGV4dCA9IHRoaXMuZ2V0VGV4dFRyYW5zZm9ybShmZWF0dXJlVGV4dCk7XHJcblxyXG4gICAgICAgIHRoaXMucGxhY2VtZW50cyA9IHRoaXMucHJvcGVydHlQbGFjZW1lbnRzLmdldFZhbHVlKGZlYXR1cmVQcm9wZXJ0aWVzKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdHlsZS5nZXRUZXh0KCkuc2V0VGV4dChmZWF0dXJlVGV4dCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0TGFiZWxQb3NpdGlvbihmZWF0dXJlVGV4dCwgZmVhdHVyZSwgcmVzb2x1dGlvbiwgdGhpcy5zdHlsZS5nZXRUZXh0KCksIG9wdGlvbnMuc3RyYXRlZ3lUcmVlLCBvcHRpb25zLmZyYW1lU3RhdGUpKSB7XHJcbiAgICAgICAgICAgIGxldCBmZWF0dXJlWmluZGV4ID0gZmVhdHVyZVtcInRlbXBUcmVlWmluZGV4XCJdO1xyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZVppbmRleCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlWmluZGV4ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN0eWxlLnNldFpJbmRleChmZWF0dXJlWmluZGV4KTtcclxuXHJcbiAgICAgICAgICAgIHRleHRTdHlsZXMucHVzaCh0aGlzLnN0eWxlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0ZXh0U3R5bGVzO1xyXG4gICAgfVxyXG5cclxuICAgIHNldExhYmVsUG9zaXRpb24odGV4dDogc3RyaW5nLCBnZW9tZXRyeTogYW55LCByZXNvbHV0aW9uOiBhbnksIHRleHRTdGF0ZTogb2wuc3R5bGUuVGV4dCwgc3RyYXRlZ3lUcmVlOiBhbnksIGZyYW1lU3RhdGU6IG9seC5GcmFtZVN0YXRlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgbGV0IGZsYXRDb29yZGluYXRlcztcclxuXHJcbiAgICAgICAgbGV0IGdlb21ldHJ5VHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcclxuICAgICAgICBpZiAoKGdlb21ldHJ5VHlwZSA9PT0gKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLkxJTkVfU1RSSU5HIHx8IGdlb21ldHJ5VHlwZSA9PT0gKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HKSAmJiAhdGhpcy5mb3JjZUhvcml6b250YWxGb3JMaW5lKSB7XHJcbiAgICAgICAgICAgIGxldCBnZW9tZXRyeVR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XHJcbiAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldEZsYXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IGxhYmVsSW5mbyA9IHRoaXMuZ2V0TGFiZWxJbmZvKHRleHQsIHRleHRTdGF0ZSk7XHJcbiAgICAgICAgICAgIGxldCBsYWJlbFdpZHRoID0gbGFiZWxJbmZvLmxhYmVsV2lkdGg7XHJcbiAgICAgICAgICAgIGxldCBsYWJlbEhlaWdodCA9IGxhYmVsSW5mby5sYWJlbEhlaWdodDtcclxuICAgICAgICAgICAgbGV0IHNjYWxlID0gbGFiZWxJbmZvLnNjYWxlO1xyXG4gICAgICAgICAgICBsZXQgZm9udCA9IGxhYmVsSW5mby5mb250O1xyXG4gICAgICAgICAgICBsZXQgc3Ryb2tlV2lkdGggPSBsYWJlbEluZm8uc3Ryb2tlV2lkdGg7XHJcbiAgICAgICAgICAgIGxldCBudW1MaW5lcyA9IGxhYmVsSW5mby5udW1MaW5lcztcclxuICAgICAgICAgICAgbGV0IGxpbmVzID0gbGFiZWxJbmZvLmxpbmVzO1xyXG4gICAgICAgICAgICBsZXQgbGluZUhlaWdodCA9IGxhYmVsSW5mby5saW5lSGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgcmVuZGVyV2lkdGggPSBsYWJlbEluZm8ucmVuZGVyV2lkdGg7XHJcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSBsYWJlbEluZm8uaGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgd2lkdGhzID0gbGFiZWxJbmZvLndpZHRocztcclxuXHJcbiAgICAgICAgICAgIGxldCBDb25zdHJ1Y3RvcjogYW55O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wbGFjZW1lbnRUeXBlID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICAgICAgICAgICAgQ29uc3RydWN0b3IgPSB0aGlzLkJBVENIX0NPTlNUUlVDVE9SU19ERUZBVUxUW2dlb21ldHJ5VHlwZV07XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wbGFjZW1lbnRUeXBlID09PSBcImRldGVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICBDb25zdHJ1Y3RvciA9IHRoaXMuQkFUQ0hfQ09OU1RSVUNUT1JTX0RFVEVDVFtnZW9tZXRyeVR5cGVdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCB0ZXh0TGFiZWxpbmdTdHJhdGVneSA9IG5ldyBDb25zdHJ1Y3RvcigpO1xyXG4gICAgICAgICAgICBsZXQgdG1wTGFiZWxXaWR0aCA9IGxhYmVsV2lkdGggLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICAgICAgbGV0IHRtcExhYmVsSGVpZ2h0ID0gbGFiZWxIZWlnaHQgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZ2VvbWV0cnlUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5QT0lOVDpcclxuICAgICAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSBnZW9tZXRyeS5nZXRGbGF0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLk1VTFRJX1BPSU5UOlxyXG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IGdlb21ldHJ5LmdldENlbnRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTElORV9TVFJJTkc6XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtvbC5nZW9tLkxpbmVTdHJpbmd9ICovIChnZW9tZXRyeSkuZ2V0RmxhdE1pZHBvaW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICg8YW55Pm9sLmdlb20pLkdlb21ldHJ5VHlwZS5DSVJDTEU6XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhdENvb3JkaW5hdGVzID0gLyoqIEB0eXBlIHtvbC5nZW9tLkNpcmNsZX0gKi8gKGdlb21ldHJ5KS5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgKDxhbnk+b2wuZ2VvbSkuR2VvbWV0cnlUeXBlLk1VTFRJX0xJTkVfU1RSSU5HOlxyXG4gICAgICAgICAgICAgICAgICAgIGZsYXRDb29yZGluYXRlcyA9IC8qKiBAdHlwZSB7b2wuZ2VvbS5NdWx0aUxpbmVTdHJpbmd9ICovIChnZW9tZXRyeSkuZ2V0RmxhdE1pZHBvaW50cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuUE9MWUdPTjpcclxuICAgICAgICAgICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSAvKiogQHR5cGUge29sLmdlb20uUG9seWdvbn0gKi8gKGdlb21ldHJ5KS5nZXRGbGF0SW50ZXJpb3JQb2ludCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAoPGFueT5vbC5nZW9tKS5HZW9tZXRyeVR5cGUuTVVMVElfUE9MWUdPTjpcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW50ZXJpb3JQb2ludHMgPSAvKiogQHR5cGUge29sLmdlb20uTXVsdGlQb2x5Z29ufSAqLyAoZ2VvbWV0cnkpLmdldEZsYXRNaWRwb2ludCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmbGF0Q29vcmRpbmF0ZXMgPSB0ZXh0TGFiZWxpbmdTdHJhdGVneS5tYXJrTG9jYXRpb24oZmxhdENvb3JkaW5hdGVzLCB0bXBMYWJlbFdpZHRoLCB0bXBMYWJlbEhlaWdodCwgcmVzb2x1dGlvbiwgZ2VvbWV0cnlUeXBlLCB0aGlzLCBzdHJhdGVneVRyZWUsIGZyYW1lU3RhdGUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZsYXRDb29yZGluYXRlcyA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiBmYWxzZTsgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGxhYmVsSW1hZ2UgPSB0aGlzLmdldEltYWdlKHRleHRTdGF0ZSwgbGFiZWxXaWR0aCwgbGFiZWxIZWlnaHQsIHNjYWxlLCBmb250LCBzdHJva2VXaWR0aCwgbnVtTGluZXMsIGxpbmVzLCBsaW5lSGVpZ2h0LCByZW5kZXJXaWR0aCwgaGVpZ2h0LCB3aWR0aHMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxhYmVsSW1hZ2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAoPGFueT50ZXh0U3RhdGUpLmxhYmVsID0gbGFiZWxJbWFnZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgKDxhbnk+dGV4dFN0YXRlKS5sYWJlbFBvc2l0aW9uID0gZmxhdENvb3JkaW5hdGVzO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRMYWJlbEluZm8odGV4dDogc3RyaW5nLCB0ZXh0U3RhdGU6IG9sLnN0eWxlLlRleHQpIHtcclxuICAgICAgICB2YXIga2V5ID0gdGV4dCArIHRoaXMudWlkO1xyXG4gICAgICAgIGlmICghdGhpcy5sYWJlbEluZm9zLmNvbnRhaW5zS2V5KGtleSkpIHtcclxuICAgICAgICAgICAgbGV0IGZvbnQgPSB0ZXh0U3RhdGUuZ2V0Rm9udCgpO1xyXG4gICAgICAgICAgICB0ZXh0ID0gdGhpcy53cmFwVGV4dCh0ZXh0LCBmb250KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzdHJva2VTdGF0ZSA9IHRleHRTdGF0ZS5nZXRTdHJva2UoKTtcclxuICAgICAgICAgICAgbGV0IHN0cm9rZVdpZHRoID0gc3Ryb2tlU3RhdGUgJiYgc3Ryb2tlU3RhdGUuZ2V0V2lkdGgoKSA/IHN0cm9rZVN0YXRlLmdldFdpZHRoKCkgOiAwO1xyXG4gICAgICAgICAgICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xyXG4gICAgICAgICAgICBsZXQgbnVtTGluZXMgPSBsaW5lcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGxldCB0ZXh0U2NhbGUgPSB0ZXh0U3RhdGUuZ2V0U2NhbGUoKTtcclxuICAgICAgICAgICAgdGV4dFNjYWxlID0gdGV4dFNjYWxlID09PSB1bmRlZmluZWQgPyAxIDogdGV4dFNjYWxlO1xyXG4gICAgICAgICAgICBsZXQgc2NhbGUgPSB0ZXh0U2NhbGUgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICAgICAgbGV0IHdpZHRocyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgd2lkdGggPSB0aGlzLmdldEVzdGltYXRlZFdpZHRoKGZvbnQsIGxpbmVzLCB3aWR0aHMsIHRoaXMubGV0dGVyU3BhY2luZyk7XHJcbiAgICAgICAgICAgIGxldCBsaW5lSGVpZ2h0ID0gKDxhbnk+b2wucmVuZGVyLmNhbnZhcykubWVhc3VyZVRleHRIZWlnaHQoZm9udCk7XHJcbiAgICAgICAgICAgIGxldCB0bXBNYXNrTWFyZ2luID0gKHRoaXMubWFza01hcmdpbiA/IHRoaXMubWFza01hcmdpbiA6IFwiMFwiKS5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICBsZXQgdG1wTWFza0hlaWdodE1hcmdpbiA9IDA7XHJcbiAgICAgICAgICAgIGxldCB0bXBNYXNrV2lkdGhNYXJnaW4gPSAwO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHRtcE1hc2tNYXJnaW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wTWFza0hlaWdodE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICogMjtcclxuICAgICAgICAgICAgICAgICAgICB0bXBNYXNrV2lkdGhNYXJnaW4gPSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSAqIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wTWFza0hlaWdodE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICogMjtcclxuICAgICAgICAgICAgICAgICAgICB0bXBNYXNrV2lkdGhNYXJnaW4gPSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzFdKSAqIDI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wTWFza0hlaWdodE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pICsgcGFyc2VJbnQodG1wTWFza01hcmdpblsyXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG1wTWFza1dpZHRoTWFyZ2luID0gcGFyc2VJbnQodG1wTWFza01hcmdpblsxXSkgKiAyO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRtcE1hc2tIZWlnaHRNYXJnaW4gPSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSArIHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMl0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcE1hc2tXaWR0aE1hcmdpbiA9IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMV0pICsgcGFyc2VJbnQodG1wTWFza01hcmdpblszXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXNrVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFza1R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaXJjbGVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRtcE1hc2tIZWlnaHRNYXJnaW4gPSB0bXBNYXNrSGVpZ2h0TWFyZ2luID4gdG1wTWFza1dpZHRoTWFyZ2luID8gdG1wTWFza0hlaWdodE1hcmdpbiA6IHRtcE1hc2tXaWR0aE1hcmdpbjtcclxuICAgICAgICAgICAgICAgICAgICB0bXBNYXNrV2lkdGhNYXJnaW4gPSB0bXBNYXNrSGVpZ2h0TWFyZ2luO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSBsaW5lSGVpZ2h0ICogbnVtTGluZXMgKyBzdHJva2VXaWR0aCArIHRtcE1hc2tIZWlnaHRNYXJnaW47XHJcbiAgICAgICAgICAgIGxldCByZW5kZXJXaWR0aCA9IHdpZHRoICsgc3Ryb2tlV2lkdGggKyB0bXBNYXNrV2lkdGhNYXJnaW47XHJcbiAgICAgICAgICAgIGxldCB0bXBNYXNrT3V0bGluZVdpZHRoID0gKHRoaXMubWFza091dGxpbmVXaWR0aCA/IHRoaXMubWFza091dGxpbmVXaWR0aCA6IDApO1xyXG4gICAgICAgICAgICBsZXQgbGFiZWxXaWR0aCA9IE1hdGguY2VpbCgocmVuZGVyV2lkdGggKyB0bXBNYXNrT3V0bGluZVdpZHRoICogMykgKiAxLjEgKiBzY2FsZSk7XHJcbiAgICAgICAgICAgIGxldCBsYWJlbEhlaWdodCA9IE1hdGguY2VpbCgoaGVpZ2h0ICsgdG1wTWFza091dGxpbmVXaWR0aCAqIDMpICogMS4xICogc2NhbGUpO1xyXG5cclxuICAgICAgICAgICAgbGV0IGxhYmVsSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIGxhYmVsV2lkdGg6IGxhYmVsV2lkdGgsXHJcbiAgICAgICAgICAgICAgICBsYWJlbEhlaWdodDogbGFiZWxIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBzY2FsZTogc2NhbGUsXHJcbiAgICAgICAgICAgICAgICBmb250OiBmb250LFxyXG4gICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IHN0cm9rZVdpZHRoLFxyXG4gICAgICAgICAgICAgICAgbnVtTGluZXM6IG51bUxpbmVzLFxyXG4gICAgICAgICAgICAgICAgbGluZXM6IGxpbmVzLFxyXG4gICAgICAgICAgICAgICAgbGluZUhlaWdodDogbGluZUhlaWdodCxcclxuICAgICAgICAgICAgICAgIHJlbmRlcldpZHRoOiByZW5kZXJXaWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgd2lkdGhzOiB3aWR0aHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5sYWJlbEluZm9zLnNldChrZXksIGxhYmVsSW5mbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5sYWJlbEluZm9zLmdldChrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEVzdGltYXRlZFdpZHRoKGZvbnQsIGxpbmVzLCB3aWR0aHMsIGxldHRlclNwYWNpbmcpIHtcclxuICAgICAgICBsZXQgbnVtTGluZXMgPSBsaW5lcy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gMDtcclxuICAgICAgICBsZXQgY3VycmVudFdpZHRoLCBpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRXaWR0aCA9IDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGluZXNbaV0ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGFyV2lkdGggPSB0aGlzLmNoYXJXaWR0aHNbbGluZXNbaV1bal1dO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXJXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaWR0aCArPSBjaGFyV2lkdGg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2lkdGggKz0gdGhpcy5jaGFyV2lkdGhzW1wiV1wiXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGV0dGVyU3BhY2luZykge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFdpZHRoID0gY3VycmVudFdpZHRoICsgKGxpbmVzW2ldLmxlbmd0aCAtIDEpICogbGV0dGVyU3BhY2luZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aWR0aCA9IE1hdGgubWF4KHdpZHRoLCBjdXJyZW50V2lkdGgpO1xyXG4gICAgICAgICAgICB3aWR0aHMucHVzaChjdXJyZW50V2lkdGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gd2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW1hZ2UodGV4dFN0YXRlOiBvbC5zdHlsZS5UZXh0LCBsYWJlbFdpZHRoOiBudW1iZXIsIGxhYmVsSGVpZ2h0OiBudW1iZXIsIHNjYWxlOiBudW1iZXIsIGZvbnQ6IHN0cmluZywgc3Ryb2tlV2lkdGg6IG51bWJlciwgbnVtTGluZXM6IGFueSwgbGluZXM6IGFueSwgbGluZUhlaWdodDogbnVtYmVyLCByZW5kZXJXaWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgd2lkdGhzOiBhbnkpIHtcclxuICAgICAgICB2YXIgbGFiZWxDYWNoZSA9ICg8YW55Pm9sKS5yZW5kZXIuY2FudmFzLmxhYmVsQ2FjaGU7XHJcbiAgICAgICAgdmFyIGtleSA9IHRoaXMudWlkICE9PSB1bmRlZmluZWQgPyB0aGlzLnVpZCA6ICg8YW55Pm9sKS5nZXRVaWQodGhpcyk7XHJcbiAgICAgICAga2V5ICs9IGxpbmVzLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKCFsYWJlbENhY2hlLmNvbnRhaW5zS2V5KGtleSkpIHtcclxuICAgICAgICAgICAgbGV0IGZpbGxTdGF0ZSA9IHRleHRTdGF0ZS5nZXRGaWxsKCk7XHJcbiAgICAgICAgICAgIGxldCBzdHJva2VTdGF0ZSA9IHRleHRTdGF0ZS5nZXRTdHJva2UoKTtcclxuICAgICAgICAgICAgbGV0IGxhYmVsO1xyXG5cclxuICAgICAgICAgICAgbGV0IGFsaWduID0gKDxhbnk+b2wucmVuZGVyKS5yZXBsYXkuVEVYVF9BTElHTlt0ZXh0U3RhdGUuZ2V0VGV4dEFsaWduKCkgfHwgKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuZGVmYXVsdFRleHRBbGlnbl07XHJcblxyXG4gICAgICAgICAgICBsZXQgY29udGV4dCA9ICg8YW55Pm9sKS5kb20uY3JlYXRlQ2FudmFzQ29udGV4dDJEKGxhYmVsV2lkdGgsIGxhYmVsSGVpZ2h0KTtcclxuICAgICAgICAgICAgbGFiZWwgPSBjb250ZXh0LmNhbnZhcztcclxuICAgICAgICAgICAgbGFiZWxDYWNoZS5zZXQoa2V5LCBsYWJlbCk7XHJcbiAgICAgICAgICAgIGxhYmVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgLy8gRm9yIGxldHRlclNwYWNpbmcgd2UgbmVlZCBhcHBcclxuICAgICAgICAgICAgbGV0IGJvZHk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxldHRlclNwYWNpbmcpIHtcclxuICAgICAgICAgICAgICAgIGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF07XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgICAgICAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKGxhYmVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxhYmVsLnN0eWxlLmxldHRlclNwYWNpbmcgPSB0aGlzLmxldHRlclNwYWNpbmcgKyBcInB4XCI7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gbGFiZWwuZ2V0Q29udGV4dChcIjJkXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc2NhbGUgIT09IDEpIHsgY29udGV4dC5zY2FsZShzY2FsZSwgc2NhbGUpOyB9XHJcbiAgICAgICAgICAgIGNvbnRleHQuZm9udCA9IGZvbnQ7XHJcbiAgICAgICAgICAgIGlmIChzdHJva2VTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0YXRlLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZVdpZHRoICogKCg8YW55Pm9sLmhhcykuU0FGQVJJID8gc2NhbGUgOiAxKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZUNhcCA9IHN0cm9rZVN0YXRlLmdldExpbmVDYXAoKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQubGluZUpvaW4gPSBzdHJva2VTdGF0ZS5nZXRMaW5lSm9pbigpO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5taXRlckxpbWl0ID0gc3Ryb2tlU3RhdGUuZ2V0TWl0ZXJMaW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmVEYXNoID0gc3Ryb2tlU3RhdGUuZ2V0TGluZURhc2goKTtcclxuICAgICAgICAgICAgICAgIGxpbmVEYXNoID0gbGluZURhc2ggPyBsaW5lRGFzaC5zbGljZSgpIDogKDxhbnk+b2wucmVuZGVyLmNhbnZhcykuZGVmYXVsdExpbmVEYXNoO1xyXG4gICAgICAgICAgICAgICAgaWYgKCg8YW55Pm9sLmhhcykuQ0FOVkFTX0xJTkVfREFTSCAmJiBsaW5lRGFzaC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnNldExpbmVEYXNoKHN0cm9rZVN0YXRlLmdldExpbmVEYXNoKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQubGluZURhc2hPZmZzZXQgPSAoPGFueT5zdHJva2VTdGF0ZSkuZ2V0TGluZURhc2hPZmZzZXQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kcmF3TWFzayhjb250ZXh0LCAwLCAwLCByZW5kZXJXaWR0aCwgaGVpZ2h0KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1hc2tUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXNrVHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNpcmNsZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjYWxlICE9PSAxKSB7IGNvbnRleHQuc2NhbGUoc2NhbGUsIHNjYWxlKTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZm9udCA9IGZvbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cm9rZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2VTdGF0ZS5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZVdpZHRoICogKCg8YW55Pm9sLmhhcykuU0FGQVJJID8gc2NhbGUgOiAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lQ2FwID0gc3Ryb2tlU3RhdGUuZ2V0TGluZUNhcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVKb2luID0gc3Ryb2tlU3RhdGUuZ2V0TGluZUpvaW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5taXRlckxpbWl0ID0gc3Ryb2tlU3RhdGUuZ2V0TWl0ZXJMaW1pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbGluZURhc2ggPSBzdHJva2VTdGF0ZS5nZXRMaW5lRGFzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lRGFzaCA9IGxpbmVEYXNoID8gbGluZURhc2guc2xpY2UoKSA6ICg8YW55Pm9sLnJlbmRlci5jYW52YXMpLmRlZmF1bHRMaW5lRGFzaDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCg8YW55Pm9sLmhhcykuQ0FOVkFTX0xJTkVfREFTSCAmJiBsaW5lRGFzaC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc2V0TGluZURhc2goc3Ryb2tlU3RhdGUuZ2V0TGluZURhc2goKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmxpbmVEYXNoT2Zmc2V0ID0gKDxhbnk+c3Ryb2tlU3RhdGUpLmdldExpbmVEYXNoT2Zmc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnRleHQudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIjtcclxuICAgICAgICAgICAgY29udGV4dC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG4gICAgICAgICAgICBsZXQgbGVmdFJpZ2h0ID0gMC41IC0gYWxpZ247XHJcbiAgICAgICAgICAgIGxldCB4ID0gYWxpZ24gKiBsYWJlbC53aWR0aCAvIHNjYWxlICsgbGVmdFJpZ2h0ICogc3Ryb2tlV2lkdGg7XHJcbiAgICAgICAgICAgIGxldCBpO1xyXG4gICAgICAgICAgICBsZXQgdG1wTWFza01hcmdpbiA9ICh0aGlzLm1hc2tNYXJnaW4gPyB0aGlzLm1hc2tNYXJnaW4gOiBcIjBcIikuc3BsaXQoJywnKTtcclxuICAgICAgICAgICAgbGV0IHRtcE1hc2tPdXRsaW5lV2lkdGggPSB0aGlzLm1hc2tPdXRsaW5lV2lkdGggPyB0aGlzLm1hc2tPdXRsaW5lV2lkdGggOiAwO1xyXG4gICAgICAgICAgICBpZiAoc3Ryb2tlU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdHJva2VTdGF0ZS5nZXRDb2xvcigpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VTdHlsZSA9IHN0cm9rZVN0YXRlLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSB0aGlzLmhhbG9SYWRpdXMgPyB0aGlzLmhhbG9SYWRpdXMgOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1MaW5lczsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyYXduTWFzaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5zdHJva2VUZXh0KGxpbmVzW2ldLCB4ICsgbGVmdFJpZ2h0ICogd2lkdGhzW2ldICogMS4yIC0gc3Ryb2tlV2lkdGggKiAxLjIgKyB0bXBNYXNrT3V0bGluZVdpZHRoICogMC41IC8gMS4yIC0gKHRtcE1hc2tNYXJnaW5bM10gPyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzFdKSAtIHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bM10pIDogMCkgKiAwLjUsIHRoaXMubWFza1R5cGUudG9Mb3dlckNhc2UoKSA9PT0gXCJjaXJjbGVcIiA/IGNvbnRleHQuY2FudmFzLmhlaWdodCAvIHNjYWxlICogMC41IC0gKHRtcE1hc2tNYXJnaW5bMl0gPyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzJdKSAtIHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMF0pIDogMCkgOiBzdHJva2VXaWR0aCArIChpICsgMSkgKiBsaW5lSGVpZ2h0ICogMC41ICsgcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgKyB0bXBNYXNrT3V0bGluZVdpZHRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlVGV4dChsaW5lc1tpXSwgeCArIGxlZnRSaWdodCAqIHdpZHRoc1tpXSAqIDEuMiAtICh0bXBNYXNrTWFyZ2luWzNdID8gcGFyc2VJbnQodG1wTWFza01hcmdpblsxXSkgLSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzNdKSA6IDApICogMC41LCAwLjUgKiAoc3Ryb2tlV2lkdGggKyBsaW5lSGVpZ2h0KSArIGkgKiBsaW5lSGVpZ2h0ICogMS4yIC0gKyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSArICh0aGlzLm1hc2tPdXRsaW5lV2lkdGggPyB0aGlzLm1hc2tPdXRsaW5lV2lkdGggOiAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZpbGxTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGxTdGF0ZS5nZXRDb2xvcigpICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsU3RhdGUuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbnVtTGluZXM7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kcmF3bk1hc2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZmlsbFRleHQobGluZXNbaV0sIHggKyBsZWZ0UmlnaHQgKiB3aWR0aHNbaV0gKiAxLjIgLSBzdHJva2VXaWR0aCAqIDEuMiArIHRtcE1hc2tPdXRsaW5lV2lkdGggKiAwLjUgLyAxLjIgLSAodG1wTWFza01hcmdpblszXSA/IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMV0pIC0gcGFyc2VJbnQodG1wTWFza01hcmdpblszXSkgOiAwKSAqIDAuNSwgdGhpcy5tYXNrVHlwZS50b0xvd2VyQ2FzZSgpID09PSBcImNpcmNsZVwiID8gY29udGV4dC5jYW52YXMuaGVpZ2h0IC8gc2NhbGUgKiAwLjUgLSAodG1wTWFza01hcmdpblsyXSA/IHBhcnNlSW50KHRtcE1hc2tNYXJnaW5bMl0pIC0gcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgOiAwKSA6IHN0cm9rZVdpZHRoICsgKGkgKyAxKSAqIGxpbmVIZWlnaHQgKiAwLjUgKyBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzBdKSArIHRtcE1hc2tPdXRsaW5lV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5maWxsVGV4dChsaW5lc1tpXSwgeCArIGxlZnRSaWdodCAqIHdpZHRoc1tpXSAqIDEuMiAtICh0bXBNYXNrTWFyZ2luWzNdID8gcGFyc2VJbnQodG1wTWFza01hcmdpblsxXSkgLSBwYXJzZUludCh0bXBNYXNrTWFyZ2luWzNdKSA6IDApICogMC41LCAwLjUgKiAoc3Ryb2tlV2lkdGggKyBsaW5lSGVpZ2h0KSArIGkgKiBsaW5lSGVpZ2h0ICogMS4yICsgcGFyc2VJbnQodG1wTWFza01hcmdpblswXSkgKyAodGhpcy5tYXNrT3V0bGluZVdpZHRoID8gdGhpcy5tYXNrT3V0bGluZVdpZHRoIDogMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxldHRlclNwYWNpbmcgJiYgYm9keSkge1xyXG4gICAgICAgICAgICAgICAgYm9keS5yZW1vdmVDaGlsZChsYWJlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsYWJlbENhY2hlLmdldChrZXkpO1xyXG4gICAgfVxyXG5cclxuICAgIHdyYXBUZXh0KHRleHQ6IHN0cmluZywgZm9udDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgcmVzdWx0VGV4dDogc3RyaW5nO1xyXG5cclxuICAgICAgICBpZiAodGV4dCAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBsZXQgbGluZXMgPSBbdGV4dF07XHJcbiAgICAgICAgICAgIGxldCB3aWR0aHMgPSBbXTtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gdGhpcy5nZXRFc3RpbWF0ZWRXaWR0aChmb250LCBsaW5lcywgd2lkdGhzLCB0aGlzLmxldHRlclNwYWNpbmcpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHdyYXBXaWR0aCA9IHRoaXMud3JhcFdpZHRoO1xyXG4gICAgICAgICAgICBsZXQgd3JhcENoYXJhY3RlciA9IFwiIFwiO1xyXG4gICAgICAgICAgICBsZXQgaXNXcmFwQmVmb3JlID0gdGhpcy53cmFwQmVmb3JlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdyYXBXaWR0aCA+IDAgJiYgd2lkdGggPiB3cmFwV2lkdGggJiYgdGV4dC5pbmNsdWRlcyh3cmFwQ2hhcmFjdGVyKSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGluZXMgPSB0ZXh0LnNwbGl0KHdyYXBDaGFyYWN0ZXIpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHdyYXBXaWR0aFN1bSA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgdG1wV3JhcFdpZHRoOiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGlzV3JhcEJlZm9yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRtcExpbmUgPSBbbGluZV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRtcFdyYXBXaWR0aCA9IHRoaXMuZ2V0RXN0aW1hdGVkV2lkdGgoZm9udCwgdG1wTGluZSwgd2lkdGhzLCB0aGlzLmxldHRlclNwYWNpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFdpZHRoU3VtICs9IHRtcFdyYXBXaWR0aDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRtcFdyYXBXaWR0aCA+IHdyYXBXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGluZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBXaWR0aFN1bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdyYXBMaW5lcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod3JhcFdpZHRoU3VtID4gd3JhcFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcExpbmVzLnB1c2goXCJcXG5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dExpbmVzLnB1c2god3JhcExpbmVzLmpvaW4oXCJcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBXaWR0aFN1bSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBMaW5lcy5wdXNoKFwiIFwiICsgbGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod3JhcExpbmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dExpbmVzLnB1c2god3JhcExpbmVzLmpvaW4oXCJcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3cmFwTGluZXMucHVzaChcIiBcIiArIGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wTGluZSA9IFtsaW5lXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wV3JhcFdpZHRoID0gdGhpcy5nZXRFc3RpbWF0ZWRXaWR0aChmb250LCB0bXBMaW5lLCB3aWR0aHMsIHRoaXMubGV0dGVyU3BhY2luZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBXaWR0aFN1bSArPSB0bXBXcmFwV2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod3JhcFdpZHRoU3VtID4gd3JhcFdpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cmFwTGluZXMucHVzaChcIlxcblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRMaW5lcy5wdXNoKHdyYXBMaW5lcy5qb2luKFwiXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyYXBMaW5lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JhcFdpZHRoU3VtID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdyYXBMaW5lcy5sZW5ndGggPiAwKSB7IHRleHRMaW5lcy5wdXNoKHdyYXBMaW5lcy5qb2luKFwiXCIpKTsgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJlc3VsdFRleHQgPSB0ZXh0TGluZXMuam9pbihcIlwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRUZXh0Lmxhc3RJbmRleE9mKFwiXFxuXCIpID09PSByZXN1bHRUZXh0Lmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRUZXh0ID0gcmVzdWx0VGV4dC5zdWJzdHIoMCwgcmVzdWx0VGV4dC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFRleHQgPSB0ZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmVzdWx0VGV4dDtcclxuICAgIH1cclxuXHJcbiAgICBkcmF3TWFzayhjb250ZXh0OiBhbnksIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICAgIGxldCBmaWxsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGxldCBzdHJva2UgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLm1hc2tDb2xvcikge1xyXG4gICAgICAgICAgICBmaWxsID0gbmV3IG9sLnN0eWxlLkZpbGwoKTtcclxuICAgICAgICAgICAgZmlsbC5zZXRDb2xvcihHZW9TdHlsZS50b1JHQkFDb2xvcih0aGlzLm1hc2tDb2xvciwgdGhpcy5vcGFjaXR5ID8gdGhpcy5vcGFjaXR5IDogMSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMubWFza091dGxpbmVDb2xvciAmJiB0aGlzLm1hc2tPdXRsaW5lV2lkdGgpIHtcclxuICAgICAgICAgICAgc3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXNrT3V0bGluZUNvbG9yKSB7XHJcbiAgICAgICAgICAgICAgICBzdHJva2Uuc2V0Q29sb3IoR2VvU3R5bGUudG9SR0JBQ29sb3IodGhpcy5tYXNrT3V0bGluZUNvbG9yLCB0aGlzLm9wYWNpdHkgPyB0aGlzLm9wYWNpdHkgOiAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMubWFza091dGxpbmVXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgc3Ryb2tlLnNldFdpZHRoKHRoaXMubWFza091dGxpbmVXaWR0aCA/IHRoaXMubWFza091dGxpbmVXaWR0aCA6IDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5tYXNrVHlwZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRyYXduTWFzayA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5kcmF3bk1hc2sgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5tYXNrVHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZGVmYXVsdFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwiRGVmYXVsdFwiOlxyXG4gICAgICAgICAgICBjYXNlIFwicmVjdGFuZ2xlXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJSZWN0YW5nbGVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JlY3RhbmdsZShjb250ZXh0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyb3VuZGVkQ29ybmVyc1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwiUm91bmRlZENvcm5lcnNcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd1JvdW5kUmVjdGFuZ2xlKGNvbnRleHQsIHgsIHksIHdpZHRoLCBoZWlnaHQsIGZpbGwsIHN0cm9rZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcInJvdW5kZWRFbmRzXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJSb3VuZGVkRW5kc1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3Um91bmRlZEVuZHMoY29udGV4dCwgeCwgeSwgd2lkdGgsIGhlaWdodCwgZmlsbCwgc3Ryb2tlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiY2lyY2xlXCI6XHJcbiAgICAgICAgICAgIGNhc2UgXCJDaXJjbGVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0NpcmNsZShjb250ZXh0LCB4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdSZWN0YW5nbGUoY29udGV4dDogYW55LCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGZpbGw6IG9sLnN0eWxlLkZpbGwsIHN0cm9rZTogb2wuc3R5bGUuU3Ryb2tlKSB7XHJcbiAgICAgICAgaWYgKGZpbGwpIHtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QoeCArIHN0cm9rZS5nZXRXaWR0aCgpLCB5ICsgc3Ryb2tlLmdldFdpZHRoKCksIHdpZHRoICsgc3Ryb2tlLmdldFdpZHRoKCkgKiAyLCBoZWlnaHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHN0cm9rZSkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmxpbmVXaWR0aCA9IHN0cm9rZS5nZXRXaWR0aCgpO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlUmVjdCh4ICsgc3Ryb2tlLmdldFdpZHRoKCksIHkgKyBzdHJva2UuZ2V0V2lkdGgoKSwgd2lkdGggKyBzdHJva2UuZ2V0V2lkdGgoKSAqIDIsIGhlaWdodCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGRyYXdSb3VuZFJlY3RhbmdsZShjb250ZXh0OiBhbnksIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgZmlsbDogb2wuc3R5bGUuRmlsbCwgc3Ryb2tlOiBvbC5zdHlsZS5TdHJva2UpIHtcclxuICAgICAgICBsZXQgcmFkaXVzID0gKHdpZHRoIDwgaGVpZ2h0ID8gd2lkdGggOiBoZWlnaHQpICogMC4zO1xyXG4gICAgICAgIC8vIHdpZHRoICo9IDAuOTtcclxuICAgICAgICAvLyBoZWlnaHQgKj0gMC44O1xyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgeCA9IHggKyAoc3Ryb2tlLmdldFdpZHRoKCkgPyBzdHJva2UuZ2V0V2lkdGgoKSA6IDApO1xyXG4gICAgICAgICAgICB5ID0geSArIChzdHJva2UuZ2V0V2lkdGgoKSA/IHN0cm9rZS5nZXRXaWR0aCgpIDogMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKHggKyByYWRpdXMgKyBzdHJva2UuZ2V0V2lkdGgoKSAqIDIsIHkpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKHggKyB3aWR0aCAtIHJhZGl1cyArIHN0cm9rZS5nZXRXaWR0aCgpICogMiwgeSk7XHJcbiAgICAgICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCArIHN0cm9rZS5nZXRXaWR0aCgpICogMiwgeSwgeCArIHdpZHRoICsgc3Ryb2tlLmdldFdpZHRoKCkgKiAyLCB5ICsgcmFkaXVzKTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyh4ICsgd2lkdGggKyBzdHJva2UuZ2V0V2lkdGgoKSAqIDIsIHkgKyBoZWlnaHQgLSByYWRpdXMpO1xyXG4gICAgICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh4ICsgd2lkdGggKyBzdHJva2UuZ2V0V2lkdGgoKSAqIDIsIHkgKyBoZWlnaHQsIHggKyB3aWR0aCAtIHJhZGl1cyArIHN0cm9rZS5nZXRXaWR0aCgpICogMiwgeSArIGhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5saW5lVG8oeCArIHJhZGl1cywgeSArIGhlaWdodCk7XHJcbiAgICAgICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHgsIHkgKyBoZWlnaHQsIHgsIHkgKyBoZWlnaHQgLSByYWRpdXMpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKHgsIHkgKyByYWRpdXMpO1xyXG4gICAgICAgIGNvbnRleHQucXVhZHJhdGljQ3VydmVUbyh4LCB5LCB4ICsgcmFkaXVzLCB5KTtcclxuICAgICAgICBjb250ZXh0LmNsb3NlUGF0aCgpO1xyXG5cclxuICAgICAgICBpZiAoZmlsbCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IGZpbGwuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlLmdldFdpZHRoKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2UuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd1JvdW5kZWRFbmRzKGNvbnRleHQ6IGFueSwgeDogbnVtYmVyLCB5OiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBmaWxsOiBvbC5zdHlsZS5GaWxsLCBzdHJva2U6IG9sLnN0eWxlLlN0cm9rZSkge1xyXG4gICAgICAgIGxldCByYWRpdXMgPSAod2lkdGggPCBoZWlnaHQgPyB3aWR0aCA6IGhlaWdodCkgKiAwLjI7XHJcbiAgICAgICAgLy8gd2lkdGggKj0gMC45O1xyXG4gICAgICAgIC8vIGhlaWdodCAqPSAwLjg7XHJcbiAgICAgICAgbGV0IHN0cm9rZVdpZHRoID0gKHN0cm9rZS5nZXRXaWR0aCgpID8gc3Ryb2tlLmdldFdpZHRoKCkgOiAwKTtcclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIHggPSB4ICsgc3Ryb2tlV2lkdGg7XHJcbiAgICAgICAgICAgIHkgPSB5ICsgc3Ryb2tlV2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIGNvbnRleHQubW92ZVRvKHggKyByYWRpdXMsIHkpO1xyXG4gICAgICAgIGNvbnRleHQubGluZVRvKHggKyB3aWR0aCAtIHJhZGl1cyArIHN0cm9rZVdpZHRoICogMiwgeSk7XHJcbiAgICAgICAgY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCArIHN0cm9rZVdpZHRoICogMiwgeSArIGhlaWdodCAqIDAuNSwgeCArIHdpZHRoIC0gcmFkaXVzICsgc3Ryb2tlV2lkdGggKiAyLCB5ICsgaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LmxpbmVUbyh4ICsgcmFkaXVzLCB5ICsgaGVpZ2h0KTtcclxuICAgICAgICBjb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSArIGhlaWdodCAqIDAuNSwgeCArIHJhZGl1cywgeSk7XHJcbiAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuXHJcbiAgICAgICAgaWYgKGZpbGwpIHtcclxuICAgICAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSBmaWxsLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3Ryb2tlKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gc3Ryb2tlLmdldFdpZHRoKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBzdHJva2UuZ2V0Q29sb3IoKTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZHJhd0NpcmNsZShjb250ZXh0OiBhbnksIHg6IG51bWJlciwgeTogbnVtYmVyLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgZmlsbDogb2wuc3R5bGUuRmlsbCwgc3Ryb2tlOiBvbC5zdHlsZS5TdHJva2UpIHtcclxuICAgICAgICBjb250ZXh0LmNhbnZhcy53aWR0aCA9IGNvbnRleHQuY2FudmFzLndpZHRoID4gY29udGV4dC5jYW52YXMuaGVpZ2h0ID8gY29udGV4dC5jYW52YXMud2lkdGggOiBjb250ZXh0LmNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgY29udGV4dC5jYW52YXMuaGVpZ2h0ID0gY29udGV4dC5jYW52YXMud2lkdGg7XHJcbiAgICAgICAgbGV0IHJhZGl1cyA9IDA7XHJcbiAgICAgICAgaWYgKHN0cm9rZSkge1xyXG4gICAgICAgICAgICByYWRpdXMgLT0gc3Ryb2tlLmdldFdpZHRoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJhZGl1cyArPSBjb250ZXh0LmNhbnZhcy53aWR0aCAqIDAuNTtcclxuXHJcbiAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjb250ZXh0LmFyYyh4ICsgY29udGV4dC5jYW52YXMud2lkdGggKiAwLjUsIHkgKyBjb250ZXh0LmNhbnZhcy53aWR0aCAqIDAuNSwgcmFkaXVzLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpO1xyXG4gICAgICAgIGNvbnRleHQuY2xvc2VQYXRoKCk7XHJcblxyXG4gICAgICAgIGlmIChmaWxsKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFN0eWxlID0gZmlsbC5nZXRDb2xvcigpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChzdHJva2UpIHtcclxuICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSBzdHJva2UuZ2V0V2lkdGgoKSAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xyXG4gICAgICAgICAgICBjb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlLmdldENvbG9yKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRUZXh0V2l0aE51bWVyaWNGb3JtYXQoZmVhdHVyZVRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHRtcEFyZ3VtZW50cyA9IHRoaXMubnVtZXJpY0Zvcm1hdC5zcGxpdChcIixcIik7XHJcbiAgICAgICAgbGV0IG51bWVyaWNGb3JtYXRPcHRpb25zID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgdG1wQXJndW1lbnQgb2YgdG1wQXJndW1lbnRzKSB7XHJcbiAgICAgICAgICAgIGxldCBrZXlWYWx1ZVBhaXIgPSB0bXBBcmd1bWVudC5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoa2V5VmFsdWVQYWlyWzBdLnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImxvY2FsZU1hdGNoZXJcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykubG9jYWxlTWF0Y2hlciA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic3R5bGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykuc3R5bGUgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImN1cnJlbmN5XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+bnVtZXJpY0Zvcm1hdE9wdGlvbnMpLmN1cnJlbmN5ID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJjdXJyZW5jeURpc3BsYXlcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykuY3VycmVuY3lEaXNwbGF5ID0ga2V5VmFsdWVQYWlyWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ1c2VHcm91cGluZ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS51c2VHcm91cGluZyA9IGtleVZhbHVlUGFpclsxXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWluaW11bUludGVnZXJEaWdpdHNcIjpcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5udW1lcmljRm9ybWF0T3B0aW9ucykubWluaW11bUludGVnZXJEaWdpdHMgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1pbmltdW1GcmFjdGlvbkRpZ2l0c1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5taW5pbXVtRnJhY3Rpb25EaWdpdHMgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1heGltdW1GcmFjdGlvbkRpZ2l0c1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5tYXhpbXVtRnJhY3Rpb25EaWdpdHMgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1pbmltdW1TaWduaWZpY2FudERpZ2l0c1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5taW5pbXVtU2lnbmlmaWNhbnREaWdpdHMgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1heGltdW1TaWduaWZpY2FudERpZ2l0c1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICg8YW55Pm51bWVyaWNGb3JtYXRPcHRpb25zKS5tYXhpbXVtU2lnbmlmaWNhbnREaWdpdHMgPSBrZXlWYWx1ZVBhaXJbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBudW1lcmljID0gbmV3IEludGwuTnVtYmVyRm9ybWF0KHRtcEFyZ3VtZW50c1swXSwgbnVtZXJpY0Zvcm1hdE9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4gbnVtZXJpYy5mb3JtYXQoTnVtYmVyKGZlYXR1cmVUZXh0KSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0VGV4dFdpdGhEYXRlRm9ybWF0KGZlYXR1cmVUZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAoPGFueT4obmV3IERhdGUoZmVhdHVyZVRleHQpKSkuZm9ybWF0KHRoaXMuZGF0ZUZvcm1hdCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0VGV4dFdpdGhGb3JtYXQoZmVhdHVyZVRleHQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICg8YW55PlN0cmluZykuZm9ybWF0KHRoaXMudGV4dEZvcm1hdCwgZmVhdHVyZVRleHQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldFRleHRUcmFuc2Zvcm0oZmVhdHVyZVRleHQ6IHN0cmluZykge1xyXG4gICAgICAgIGlmIChmZWF0dXJlVGV4dCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy50ZXh0VHJhbnNmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidXBwZXJjYXNlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVRleHQgPSBmZWF0dXJlVGV4dC50b0xvY2FsZVVwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImxvd2VyY2FzZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVUZXh0ID0gZmVhdHVyZVRleHQudG9Mb2NhbGVMb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIEJBVENIX0NPTlNUUlVDVE9SU19ERUZBVUxUID0ge1xyXG4gICAgICAgIFBvaW50OiBUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBNdWx0aVBvaW50OiBUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBMaW5lU3RyaW5nOiBUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBDaXJjbGU6IFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIE11bHRpTGluZVN0cmluZzogVGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgUG9seWdvbjogVGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTXVsdGlQb2x5Z29uOiBUZXh0TGFiZWxpbmdTdHJhdGVneVxyXG4gICAgfTtcclxuXHJcbiAgICBCQVRDSF9DT05TVFJVQ1RPUlNfREVURUNUID0ge1xyXG4gICAgICAgIFBvaW50OiBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBNdWx0aVBvaW50OiBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBMaW5lU3RyaW5nOiBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneSxcclxuICAgICAgICBDaXJjbGU6IERldGVjdFRleHRMYWJlbGluZ1N0cmF0ZWd5LFxyXG4gICAgICAgIE11bHRpTGluZVN0cmluZzogRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgUG9seWdvbjogRGV0ZWN0VGV4dExhYmVsaW5nU3RyYXRlZ3ksXHJcbiAgICAgICAgTXVsdGlQb2x5Z29uOiBEZXRlY3RUZXh0TGFiZWxpbmdTdHJhdGVneVxyXG4gICAgfTtcclxufVxyXG5cclxuKDxhbnk+U3RyaW5nKS5mb3JtYXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgcyA9IGFyZ3VtZW50c1swXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkrKykge1xyXG4gICAgICAgIGxldCByZWcgPSBuZXcgUmVnRXhwKFwiXFxcXHtcIiArIGkgKyBcIlxcXFx9XCIsIFwiZ21cIik7XHJcbiAgICAgICAgcyA9IHMucmVwbGFjZShyZWcsIGFyZ3VtZW50c1tpICsgMV0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHM7XHJcbn07XHJcblxyXG4oPGFueT5EYXRlLnByb3RvdHlwZSkuZm9ybWF0ID0gZnVuY3Rpb24gKGZtdCkge1xyXG4gICAgbGV0IG8gPSB7XHJcbiAgICAgICAgXCJNK1wiOiB0aGlzLmdldE1vbnRoKCkgKyAxLFxyXG4gICAgICAgIFwiZCtcIjogdGhpcy5nZXREYXRlKCksXHJcbiAgICAgICAgXCJoK1wiOiB0aGlzLmdldEhvdXJzKCksXHJcbiAgICAgICAgXCJtK1wiOiB0aGlzLmdldE1pbnV0ZXMoKSxcclxuICAgICAgICBcInMrXCI6IHRoaXMuZ2V0U2Vjb25kcygpLFxyXG4gICAgICAgIFwicStcIjogTWF0aC5mbG9vcigodGhpcy5nZXRNb250aCgpICsgMykgLyAzKSxcclxuICAgICAgICBcIlNcIjogdGhpcy5nZXRNaWxsaXNlY29uZHMoKVxyXG4gICAgfTtcclxuICAgIGlmICgvKHkrKS8udGVzdChmbXQpKVxyXG4gICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKHRoaXMuZ2V0RnVsbFllYXIoKSArIFwiXCIpLnN1YnN0cig0IC0gUmVnRXhwLiQxLmxlbmd0aCkpO1xyXG4gICAgZm9yIChsZXQgayBpbiBvKVxyXG4gICAgICAgIGlmIChuZXcgUmVnRXhwKFwiKFwiICsgayArIFwiKVwiKS50ZXN0KGZtdCkpXHJcbiAgICAgICAgICAgIGZtdCA9IGZtdC5yZXBsYWNlKFJlZ0V4cC4kMSwgKFJlZ0V4cC4kMS5sZW5ndGggPT09IDEpID8gKG9ba10pIDogKChcIjAwXCIgKyBvW2tdKS5zdWJzdHIoKFwiXCIgKyBvW2tdKS5sZW5ndGgpKSk7XHJcbiAgICByZXR1cm4gZm10O1xyXG59OyIsImltcG9ydCB7IEdlb1RleHRTdHlsZSB9IGZyb20gXCIuL2dlb1RleHRTdHlsZVwiO1xyXG5pbXBvcnQgeyBjb29yZGluYXRlIH0gZnJvbSBcIm9wZW5sYXllcnNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXh0TGFiZWxpbmdTdHJhdGVneSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG5cclxuICAgIHB1YmxpYyBtYXJrTG9jYXRpb24oZmxhdENvb3JkaW5hdGVzOiBhbnksIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCByZXNvbHV0aW9uOiBhbnksIGdlb21ldHJ5VHlwZTogYW55LCB0ZXh0U3R5bGU6IEdlb1RleHRTdHlsZSwgc3RyYXRlZ3lUcmVlOiBhbnksIGZyYW1lU3RhdGU6IG9seC5GcmFtZVN0YXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWFya0xvY2F0aW9uQ29yZShmbGF0Q29vcmRpbmF0ZXMsIHdpZHRoLCBoZWlnaHQsIHJlc29sdXRpb24sIGdlb21ldHJ5VHlwZSwgdGV4dFN0eWxlLCBzdHJhdGVneVRyZWUsIGZyYW1lU3RhdGUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBtYXJrTG9jYXRpb25Db3JlKGZsYXRDb29yZGluYXRlczogYW55LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgcmVzb2x1dGlvbjogYW55LCBnZW9tZXRyeVR5cGU6IGFueSwgdGV4dFN0eWxlOiBHZW9UZXh0U3R5bGUsIHN0cmF0ZWd5VHJlZTogYW55LCBmcmFtZVN0YXRlOiBvbHguRnJhbWVTdGF0ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzT3ZlcmxhcHBpbmcoZmxhdENvb3JkaW5hdGVzLCB3aWR0aCwgaGVpZ2h0LCB0ZXh0U3R5bGUubWFyZ2luLCB0ZXh0U3R5bGUubWluRGlzdGFuY2UsIHRleHRTdHlsZS5taW5QYWRkaW5nLCB0ZXh0U3R5bGUuc3BhY2luZywgc3RyYXRlZ3lUcmVlLCBmcmFtZVN0YXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmbGF0Q29vcmRpbmF0ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc092ZXJsYXBwaW5nKGZsYXRDb29yZGluYXRlczogYW55LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgbWFyZ2luOiBudW1iZXIsIG1pbkRpc3RhbmNlOiBudW1iZXIsIG1pblBhZGRpbmc6IG51bWJlciwgc3BhY2luZzogbnVtYmVyLCBzdHJhdGVneVRyZWU6IGFueSwgZnJhbWVTdGF0ZTogb2x4LkZyYW1lU3RhdGUpIHtcclxuICAgICAgICBpZiAoZmxhdENvb3JkaW5hdGVzID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHRydWU7IH1cclxuXHJcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gKG1hcmdpbiA/IG1hcmdpbiA6IDApICsgKG1pbkRpc3RhbmNlID8gbWluRGlzdGFuY2UgOiAwKSArIChtaW5QYWRkaW5nID8gbWluUGFkZGluZyA6IDApICsgKHNwYWNpbmcgPyBzcGFjaW5nIDogMCk7XHJcblxyXG4gICAgICAgIGxldCBjb29yZGluYXRlID0gW2ZsYXRDb29yZGluYXRlc1swXSwgZmxhdENvb3JkaW5hdGVzWzFdXTtcclxuICAgICAgICBsZXQgc2NyZWVuQ29vcmRpbmF0ZXMgPSB0aGlzLmNvbnZlcnRQaXhlbEZyb21Db29yZGluYXRlKGNvb3JkaW5hdGUsIGZyYW1lU3RhdGUpO1xyXG4gICAgICAgIGxldCBtaW5YID0gc2NyZWVuQ29vcmRpbmF0ZXNbMF0gLSB3aWR0aCAvIDIgLSBkaXN0YW5jZSAqIDAuNTtcclxuICAgICAgICBsZXQgbWluWSA9IHNjcmVlbkNvb3JkaW5hdGVzWzFdIC0gaGVpZ2h0IC8gMiAtIGRpc3RhbmNlICogMC41O1xyXG4gICAgICAgIGxldCBtYXhYID0gbWluWCArIHdpZHRoICsgZGlzdGFuY2U7XHJcbiAgICAgICAgbGV0IG1heFkgPSBtaW5ZICsgaGVpZ2h0ICsgZGlzdGFuY2U7XHJcbiAgICAgICAgbGV0IGJveCA9IHtcclxuICAgICAgICAgICAgbWluWDogbWluWCxcclxuICAgICAgICAgICAgbWluWTogbWluWSxcclxuICAgICAgICAgICAgbWF4WDogbWF4WCxcclxuICAgICAgICAgICAgbWF4WTogbWF4WVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzdHJhdGVneVRyZWUuY29sbGlkZXMoYm94KSkge1xyXG4gICAgICAgICAgICBzdHJhdGVneVRyZWUuaW5zZXJ0KGJveCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb252ZXJ0UGl4ZWxGcm9tQ29vcmRpbmF0ZShjb29yZGluYXRlOiBhbnksIGZyYW1lU3RhdGU6IG9seC5GcmFtZVN0YXRlKSB7XHJcbiAgICAgICAgaWYgKCFmcmFtZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuICg8YW55Pm9sKS50cmFuc2Zvcm0uYXBwbHkoKDxhbnk+ZnJhbWVTdGF0ZSkuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sIGNvb3JkaW5hdGUuc2xpY2UoMCwgMikpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFRyZWVOb2RlPFQ+IHtcclxuICAgIGRhdGE6IFQ7XHJcbiAgICBjaGlsZHJlbjogQXJyYXk8VHJlZU5vZGU8VD4+O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGE6IFQpIHtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFN0eWxlSnNvbkNhY2hlSXRlbSB9IGZyb20gXCIuL3N0eWxlSnNvbkNhY2hlSXRlbVwiO1xyXG5pbXBvcnQgeyBUcmVlIH0gZnJvbSBcIi4vdHJlZVwiO1xyXG5pbXBvcnQgeyBUcmVlTm9kZSB9IGZyb20gXCIuL3RyZWVOb2RlXCI7XHJcbmltcG9ydCB7IEdlb1RleHRTdHlsZSB9IGZyb20gXCIuLi9zdHlsZS9nZW9UZXh0U3R5bGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdHlsZUpzb25DYWNoZSB7XHJcbiAgICBwcml2YXRlIGdlb1N0eWxlR3JvdXBCeVpvb206IGFueVtdO1xyXG5cclxuICAgIHN0eWxlSnNvbjogYW55O1xyXG4gICAgZ2VvU3R5bGVzOiBhbnk7XHJcbiAgICBnZW9UZXh0U3R5bGVJbmZvOmFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmdlb1N0eWxlR3JvdXBCeVpvb20gPSBbXTtcclxuICAgICAgICB0aGlzLnN0eWxlSnNvbiA9IHt9O1xyXG4gICAgICAgIHRoaXMuZ2VvU3R5bGVzID0ge307XHJcbiAgICAgICAgdGhpcy5nZW9UZXh0U3R5bGVJbmZvID0ge307XHJcbiAgICB9XHJcblxyXG4gICAgYWRkKHpvb206IG51bWJlciwgZGF0YUxheWVyTmFtZTogc3RyaW5nLCB0cmVlOiBUcmVlPFN0eWxlSnNvbkNhY2hlSXRlbT4pIHtcclxuICAgICAgICBpZiAodGhpcy5nZW9TdHlsZUdyb3VwQnlab29tW3pvb21dID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5nZW9TdHlsZUdyb3VwQnlab29tW3pvb21dID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmdlb1N0eWxlR3JvdXBCeVpvb21bem9vbV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmdlb1N0eWxlR3JvdXBCeVpvb21bem9vbV0gPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZ2VvU3R5bGVHcm91cEJ5Wm9vbVt6b29tXVtkYXRhTGF5ZXJOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2VvU3R5bGVHcm91cEJ5Wm9vbVt6b29tXVtkYXRhTGF5ZXJOYW1lXSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdlb1N0eWxlR3JvdXBCeVpvb21bem9vbV1bZGF0YUxheWVyTmFtZV0ucHVzaCh0cmVlKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWFkR2VvU3R5bGVGcm9tVHJlZSh0cmVlKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkR2VvU3R5bGVGcm9tVHJlZSh0cmVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZEdlb1N0eWxlRnJvbVRyZWVOb2RlKHRyZWUucm9vdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVhZEdlb1N0eWxlRnJvbVRyZWVOb2RlKG5vZGUpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gW107XHJcbiAgICAgICAgaWYgKG5vZGUuZGF0YS5nZW9TdHlsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmdlb1N0eWxlc1tub2RlLmRhdGEuZ2VvU3R5bGUuaWRdID0gbm9kZS5kYXRhLmdlb1N0eWxlO1xyXG4gICAgICAgICAgICAvLyBnZXQgdGhlIHdpZHRocyBvZiBHZW9UZXh0U3R5bGVcclxuICAgICAgICAgICAgaWYobm9kZS5kYXRhLmdlb1N0eWxlIGluc3RhbmNlb2YgR2VvVGV4dFN0eWxlKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdlb1RleHRTdHlsZUluZm9bbm9kZS5kYXRhLmdlb1N0eWxlLmlkXT0gbm9kZS5kYXRhLmdlb1N0eWxlLmNoYXJXaWR0aHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5vZGUuZGF0YS5jaGlsZHJlbkdlb1N0eWxlcyAmJiBub2RlLmRhdGEuY2hpbGRyZW5HZW9TdHlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuZGF0YS5jaGlsZHJlbkdlb1N0eWxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZW9TdHlsZXNbbm9kZS5kYXRhLmNoaWxkcmVuR2VvU3R5bGVzW2ldLmlkXSA9IG5vZGUuZGF0YS5jaGlsZHJlbkdlb1N0eWxlc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmKG5vZGUuZGF0YS5jaGlsZHJlbkdlb1N0eWxlc1tpXSBpbnN0YW5jZW9mIEdlb1RleHRTdHlsZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmdlb1RleHRTdHlsZUluZm9bbm9kZS5kYXRhLmNoaWxkcmVuR2VvU3R5bGVzW2ldLmlkXT0gbm9kZS5kYXRhLmNoaWxkcmVuR2VvU3R5bGVzW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmIG5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVhZEdlb1N0eWxlRnJvbVRyZWVOb2RlKG5vZGUuY2hpbGRyZW5baV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5nZW9TdHlsZUdyb3VwQnlab29tLmxlbmd0aCA9IDA7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgR2VvRmlsdGVyIH0gZnJvbSBcIi4uL2ZpbHRlci9nZW9GaWx0ZXJcIjtcclxuaW1wb3J0IHsgR2VvRmlsdGVySXRlbSB9IGZyb20gXCIuLi9maWx0ZXIvZ2VvRmlsdGVySXRlbVwiO1xyXG5pbXBvcnQgeyBHZW9ab29tRmlsdGVyIH0gZnJvbSBcIi4uL2ZpbHRlci9nZW9ab29tRmlsdGVyXCI7XHJcbmltcG9ydCB7IEdlb1N0cmluZ0F0dHJpYnV0ZUZpbHRlciB9IGZyb20gXCIuLi9maWx0ZXIvZ2VvU3RyaW5nQXR0cmlidXRlRmlsdGVyXCI7XHJcbmltcG9ydCB7IEdlb1JlZ2V4RmlsdGVyIH0gZnJvbSBcIi4uL2ZpbHRlci9nZW9SZWdleEZpbHRlclwiO1xyXG5pbXBvcnQgeyBHZW9OdW1iZXJBdHRyaWJ1dGVGaWx0ZXIgfSBmcm9tIFwiLi4vZmlsdGVyL2dlb051bWJlckF0dHJpYnV0ZUZpbHRlclwiO1xyXG5pbXBvcnQgeyBHZW9TdHlsZSB9IGZyb20gXCIuLi9zdHlsZS9nZW9TdHlsZVwiO1xyXG5pbXBvcnQgeyBHZW9BcmVhU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGUvZ2VvQXJlYVN0eWxlXCI7XHJcbmltcG9ydCB7IEdlb0xpbmVTdHlsZSB9IGZyb20gXCIuLi9zdHlsZS9nZW9MaW5lU3R5bGVcIjtcclxuaW1wb3J0IHsgR2VvUG9pbnRTdHlsZSB9IGZyb20gXCIuLi9zdHlsZS9nZW9Qb2ludFN0eWxlXCI7XHJcbmltcG9ydCB7IEdlb1RleHRTdHlsZSB9IGZyb20gXCIuLi9zdHlsZS9nZW9UZXh0U3R5bGVcIjtcclxuaW1wb3J0IHsgR2VvU2hpZWxkU3R5bGUgfSBmcm9tIFwiLi4vc3R5bGUvZ2VvU2hpZWxkU3R5bGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdHlsZUpzb25DYWNoZUl0ZW0ge1xyXG4gICAgcHVibGljIGRhdGFMYXllck5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyBtaW5ab29tOiBudW1iZXI7XHJcbiAgICBwdWJsaWMgbWF4Wm9vbTogbnVtYmVyO1xyXG4gICAgcHVibGljIHpJbmRleDogYW55OyAvLyBzdHJpbmd8fG51bWJlclxyXG4gICAgcHVibGljIHN0eWxlRmlyc3Q6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgZmlsdGVyR3JvdXA6IGFueTsgLy8gQXJyYXkgb2YgZmlsdGVycyxcclxuXHJcbiAgICBwdWJsaWMgZ2VvU3R5bGU6IEdlb1N0eWxlO1xyXG4gICAgcHVibGljIGNoaWxkcmVuR2VvU3R5bGVzOiBHZW9TdHlsZVtdO1xyXG4gICAgcHVibGljIHN1YlN0eWxlQ2FjaGVJdGVtczogU3R5bGVKc29uQ2FjaGVJdGVtW107XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3R5bGVKc29uOiBhbnksIG1pblpvb20sIG1heFpvb20sIGRhdGFMYXllckNvbHVtbk5hbWUpIHtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuR2VvU3R5bGVzID0gW107XHJcbiAgICAgICAgdGhpcy5zdWJTdHlsZUNhY2hlSXRlbXMgPSBbXTtcclxuICAgICAgICB0aGlzLm1pblpvb20gPSBtaW5ab29tO1xyXG4gICAgICAgIHRoaXMubWF4Wm9vbSA9IG1heFpvb207XHJcbiAgICAgICAgdGhpcy56SW5kZXggPSBzdHlsZUpzb25bXCJ6LWluZGV4XCJdO1xyXG4gICAgICAgIHRoaXMuc3R5bGVGaXJzdCA9IHN0eWxlSnNvbltcInN0eWxlLWZpcnN0XCJdO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyR3JvdXAgPSB0aGlzLmNyZWF0ZUZpbHRlcnMoc3R5bGVKc29uLmZpbHRlciwgZGF0YUxheWVyQ29sdW1uTmFtZSkgfHwgW107XHJcbiAgICAgICAgdGhpcy5jcmVhdGVTdWJJdGVtcyhzdHlsZUpzb24sIGRhdGFMYXllckNvbHVtbk5hbWUpO1xyXG4gICAgICAgIHRoaXMuZ2VvU3R5bGUgPSB0aGlzLmNyZWF0ZUdlb1N0eWxlKHN0eWxlSnNvbik7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVDaGlsZHJlbkdlb1N0eWxlKHN0eWxlSnNvbik7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRmlsdGVycyhmaWx0ZXJTdHJpbmcsIGRhdGFMYXllckNvbHVtbk5hbWUpIHtcclxuICAgICAgICBsZXQgZmlsdGVyR3JvdXAgPSBbXTtcclxuICAgICAgICBsZXQgdGVtcE1pblpvb20gPSB0aGlzLm1heFpvb207XHJcbiAgICAgICAgbGV0IHRlbXBNYXhab29tID0gdGhpcy5taW5ab29tO1xyXG4gICAgICAgIGlmIChmaWx0ZXJTdHJpbmcpIHtcclxuICAgICAgICAgICAgbGV0IGZpbHRlclN0cmluZ3MgPSBmaWx0ZXJTdHJpbmcuc3BsaXQoXCJ8XCIpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbHRlclN0cmluZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJTdHIgPSBmaWx0ZXJTdHJpbmdzW2ldO1xyXG4gICAgICAgICAgICAgICAgbGV0IGV4cHJlc3Npb24gPSBcIihcXFxcdys/PX4nLis/Jyl8KFxcXFx3Kz9bPD4hPV0qJ1teO10rPycpfChcXFxcdys/Wzw+IT1dKlteO10rKVwiO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChleHByZXNzaW9uLCBcImdcIik7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0cyA9IGZpbHRlclN0ci5tYXRjaChyZWdleCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmFuZ2VGaWx0ZXJzID0ge307XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVycyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBnZW9ab29tRmlsdGVyOiBHZW9ab29tRmlsdGVyO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGFMYXllck5hbWVGaWx0ZXI6IEdlb1N0cmluZ0F0dHJpYnV0ZUZpbHRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0c1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmlsdGVySXRlbSA9IEdlb0ZpbHRlckl0ZW0uY3JlYXRlRmlsdGVySXRlbShyZXN1bHRzW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXJJdGVtLnZhbHVlLmluZGV4T2YoXCJ+J1wiKSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKG5ldyBHZW9SZWdleEZpbHRlcihbZmlsdGVySXRlbV0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXJJdGVtLmtleSA9PT0gXCJ6b29tXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW9ab29tRmlsdGVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9ab29tRmlsdGVyID0gbmV3IEdlb1pvb21GaWx0ZXIoW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvWm9vbUZpbHRlci5hZGRGaWx0ZXJJdGVtKGZpbHRlckl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZpbHRlckl0ZW0udmFsdWUuaW5jbHVkZXMoXCInXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlckl0ZW0ua2V5ID09PSBkYXRhTGF5ZXJDb2x1bW5OYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFMYXllck5hbWVGaWx0ZXIgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhTGF5ZXJOYW1lRmlsdGVyID0gbmV3IEdlb1N0cmluZ0F0dHJpYnV0ZUZpbHRlcihbZmlsdGVySXRlbV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMucHVzaChuZXcgR2VvU3RyaW5nQXR0cmlidXRlRmlsdGVyKFtmaWx0ZXJJdGVtXSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2VGaWx0ZXJzW2ZpbHRlckl0ZW0ua2V5XSA9IHJhbmdlRmlsdGVyc1tmaWx0ZXJJdGVtLmtleV0gfHwgbmV3IEdlb051bWJlckF0dHJpYnV0ZUZpbHRlcihbXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZUZpbHRlcnNbZmlsdGVySXRlbS5rZXldLmFkZEZpbHRlckl0ZW0oZmlsdGVySXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBtaW5ab29tIGFuZCBtYXhab29tIGJ5IFpvb21GaWx0ZXJcclxuICAgICAgICAgICAgICAgIGlmIChnZW9ab29tRmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKGdlb1pvb21GaWx0ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdlb1pvb21GaWx0ZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZW9ab29tRmlsdGVyLnJhbmdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtaW5aID0gK2dlb1pvb21GaWx0ZXIucmFuZ2VzWzBdWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF4WiA9ICtnZW9ab29tRmlsdGVyLnJhbmdlc1swXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pblogPD0gdGVtcE1pblpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBNaW5ab29tID0gbWluWjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4WiA+PSB0ZW1wTWF4Wm9vbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcE1heFpvb20gPSBtYXhaO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgeiA9ICtnZW9ab29tRmlsdGVyLmFsbG93ZWRWYWx1ZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh6IDw9IHRlbXBNaW5ab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wTWluWm9vbSA9IHo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHogPj0gdGVtcE1heFpvb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBNYXhab29tID0gejtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgZGF0YUxheWVyTmFtZVxyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGFMYXllck5hbWVGaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhTGF5ZXJOYW1lRmlsdGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFMYXllck5hbWUgPSBkYXRhTGF5ZXJOYW1lRmlsdGVyLmV4cGVjdGVkVmFsdWVzWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiByYW5nZUZpbHRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2gocmFuZ2VGaWx0ZXJzW25hbWVdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZpbHRlckdyb3VwLnB1c2goZmlsdGVycyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRlbXBNYXhab29tICE9PSB0aGlzLm1pblpvb20gfHwgdGVtcE1pblpvb20gIT09IHRoaXMubWF4Wm9vbSkge1xyXG4gICAgICAgICAgICB0aGlzLm1heFpvb20gPSB0ZW1wTWF4Wm9vbTtcclxuICAgICAgICAgICAgdGhpcy5taW5ab29tID0gdGVtcE1pblpvb207XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmaWx0ZXJHcm91cDtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVTdWJJdGVtcyhzdHlsZUpzb24sIGRhdGFMYXllckNvbHVtbk5hbWUpIHtcclxuICAgICAgICBpZiAoc3R5bGVKc29uLnN0eWxlKSB7XHJcbiAgICAgICAgICAgIC8vIGFwcGx5IHRoZSBwcm9wZXJ0eSB0byBzdWIgc3R5bGUuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBzdHlsZUpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXkgIT09IFwic3R5bGVcIiAmJiBrZXkgIT09IFwiZmlsdGVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlSnNvbi5zdHlsZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB0aGUgcHJvcGVydHkgdG8gc3ViIHN0eWxlIGlmIHRoZSBzdWIgc3R5bGUgZG9lcyBub3QgaW5jbHVkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZUpzb24uc3R5bGVbaV1ba2V5XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSBcImlkXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZUpzb24uc3R5bGVbaV1ba2V5XSA9IHN0eWxlSnNvbltrZXldICsgXCIjXCIgKyBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZUpzb24uc3R5bGVbaV1ba2V5XSA9IHN0eWxlSnNvbltrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxldCBzdWJJdGVtTWluWm9vbTtcclxuICAgICAgICAgICAgbGV0IHN1Ykl0ZW1NYXhab29tO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBzdWJTdHlsZSBvZiBzdHlsZUpzb24uc3R5bGUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdHlsZUpzb25DYWNoZVN1Ykl0ZW0gPSBuZXcgU3R5bGVKc29uQ2FjaGVJdGVtKHN1YlN0eWxlLCB0aGlzLm1pblpvb20sIHRoaXMubWF4Wm9vbSwgZGF0YUxheWVyQ29sdW1uTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN1Ykl0ZW1NYXhab29tID09PSB1bmRlZmluZWQgfHwgc3R5bGVKc29uQ2FjaGVTdWJJdGVtLm1heFpvb20gPiBzdWJJdGVtTWF4Wm9vbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Ykl0ZW1NYXhab29tID0gc3R5bGVKc29uQ2FjaGVTdWJJdGVtLm1heFpvb207XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViSXRlbU1pblpvb20gPT09IHVuZGVmaW5lZCB8fCBzdHlsZUpzb25DYWNoZVN1Ykl0ZW0ubWluWm9vbSA8IHN1Ykl0ZW1NaW5ab29tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViSXRlbU1pblpvb20gPSBzdHlsZUpzb25DYWNoZVN1Ykl0ZW0ubWluWm9vbTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1YlN0eWxlQ2FjaGVJdGVtcy5wdXNoKHN0eWxlSnNvbkNhY2hlU3ViSXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN1Ykl0ZW1NaW5ab29tICYmIHN1Ykl0ZW1NaW5ab29tID4gdGhpcy5taW5ab29tKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1pblpvb20gPSBzdWJJdGVtTWluWm9vbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3ViSXRlbU1heFpvb20gJiYgc3ViSXRlbU1heFpvb20gPCB0aGlzLm1heFpvb20pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWF4Wm9vbSA9IHN1Ykl0ZW1NYXhab29tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUdlb1N0eWxlKHN0eWxlSnNvbikge1xyXG4gICAgICAgIGxldCBnZW9TdHlsZTtcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gc3R5bGVKc29uKSB7XHJcbiAgICAgICAgICAgIGlmIChrZXkgIT09IFwic3R5bGVcIiAmJiBrZXkgIT09IFwiZmlsdGVyXCIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBrZXlzID0ga2V5LnNwbGl0KFwiLVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleXNbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBvbHlnb25cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb1N0eWxlID0gbmV3IEdlb0FyZWFTdHlsZShzdHlsZUpzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJsaW5lXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9TdHlsZSA9IG5ldyBHZW9MaW5lU3R5bGUoc3R5bGVKc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGV4dFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvU3R5bGUgPSBuZXcgR2VvVGV4dFN0eWxlKHN0eWxlSnNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInBvaW50XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9TdHlsZSA9IG5ldyBHZW9Qb2ludFN0eWxlKHN0eWxlSnNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNoaWVsZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvU3R5bGUgPSBuZXcgR2VvU2hpZWxkU3R5bGUoc3R5bGVKc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnZW9TdHlsZTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDaGlsZHJlbkdlb1N0eWxlKHN0eWxlSnNvbikge1xyXG4gICAgICAgIGlmIChzdHlsZUpzb25bXCJjaGlsZHJlblwiXSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlSnNvbltcImNoaWxkcmVuXCJdLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGRyZW5HZW9TdHlsZUpzb24gPSBzdHlsZUpzb25bXCJjaGlsZHJlblwiXVtpXTtcclxuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbkdlb1N0eWxlSnNvbltcImlkXCJdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbkdlb1N0eWxlSnNvbltcImlkXCJdID0gc3R5bGVKc29uW1wiaWRcIl0gKyBcIiNjXCIgKyBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGlsZHJlbkdlb1N0eWxlcy5wdXNoKHRoaXMuY3JlYXRlR2VvU3R5bGUoY2hpbGRyZW5HZW9TdHlsZUpzb24pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgeyBUcmVlTm9kZSB9IGZyb20gXCIuL3RyZWVOb2RlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgVHJlZTxUPiB7XHJcbiAgICBub2RlOiBUcmVlTm9kZTxUPjtcclxuICAgIHJvb3Q6IFRyZWVOb2RlPFQ+O1xyXG4gICAgdHJlZUluZGV4OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iobm9kZTogVHJlZU5vZGU8VD4sIHRyZWVJbmRleCkge1xyXG4gICAgICAgIHRoaXMubm9kZSA9IG5vZGU7XHJcbiAgICAgICAgdGhpcy5yb290ID0gbm9kZTtcclxuICAgICAgICB0aGlzLnRyZWVJbmRleCA9IHRyZWVJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICB0cmF2ZXJzZU5vZGUoY2FsbGJhY2ssIHNlbGVjdCkge1xyXG4gICAgICAgIChmdW5jdGlvbiByZWN1cnNlKGN1cnJlbnROb2RlKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FsbGJhY2soY3VycmVudE5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudE5vZGUuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5ndGggPSBjdXJyZW50Tm9kZS5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVjdXJzZShjdXJyZW50Tm9kZS5jaGlsZHJlbltpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY3VycmVudCBub2RlIGlzIG1hdGNoZWQsIGFuZCB3aXRob3V0IGNoaWxkcmVuXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0KGN1cnJlbnROb2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyB0cnVlOiB0aGUgY3VycmVudE5vZGUgaXMgbWF0Y2hlZC5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGZhbHNlOiB0aGUgY3VycmVudE5vZGUgaXMgbm90IG1hdGNoZWQuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KSh0aGlzLnJvb3QpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGVudW0gVmVjdG9yVGlsZUxheWVyVGhyZWFkTW9kZXtcclxuICAgIERlZmF1bHQ9MSxcclxuICAgIFNpbmdsZVRocmVhZCxcclxuICAgIFNpbmdsZUJhY2tncm91bmRXb3JrZXIsXHJcbiAgICBNdWx0aUJhY2tncm91bmRXb3JrZXJcclxufSIsImltcG9ydCB7IFZlY3RvclRpbGVMYXllclRocmVhZE1vZGUgfSBmcm9tIFwiLi92ZWN0b3JUaWxlTGF5ZXJUaHJlYWRNb2RlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgV29ya2VyTWFuYWdlciB7XHJcbiAgICB3b3JrZXJDb3VudDogbnVtYmVyO1xyXG4gICAgd29ya2VyczogV29ya2VyW107XHJcbiAgICBjdXJyZW50V29ya2VySW5kZXg7XHJcblxyXG4gICAgaW5pdGVkOiBib29sZWFuO1xyXG4gICAgd29ya2VyQ2FsbGJhY2s6IGFueTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0aHJlYWRNb2RlLCB3b3JrZXJDb3VudDogbnVtYmVyKSB7XHJcbiAgICAgICAgaWYgKHRocmVhZE1vZGUgPT09IFZlY3RvclRpbGVMYXllclRocmVhZE1vZGUuU2luZ2xlQmFja2dyb3VuZFdvcmtlcikge1xyXG4gICAgICAgICAgICB0aGlzLndvcmtlckNvdW50ID0gMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChpc05hTih3b3JrZXJDb3VudCkgfHwgd29ya2VyQ291bnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXJDb3VudCA9IE1hdGgubWF4KE1hdGguZmxvb3Iod2luZG93Lm5hdmlnYXRvci5oYXJkd2FyZUNvbmN1cnJlbmN5IC8gMiksIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gcGFzc2VkIGJ5IHBhcm1cclxuICAgICAgICAgICAgICAgIHRoaXMud29ya2VyQ291bnQgPSB3b3JrZXJDb3VudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRXb3JrZXJJbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy53b3JrZXJzID0gW107XHJcbiAgICAgICAgdGhpcy53b3JrZXJDYWxsYmFjayA9IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRXb3JrZXJzKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBjYWxsYmFja3MgPSB0aGlzLndvcmtlckNhbGxiYWNrO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud29ya2VyQ291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNvdXJjZSA9ICcoJyArIHdpbmRvd1tcIm9sSW5pdFwiXSArICcpKCknO1xyXG4gICAgICAgICAgICAgICAgbGV0IGJsb2IgPSBuZXcgQmxvYihbc291cmNlXSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgd29ya2VyID0gbmV3IFdvcmtlcih3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKSk7XHJcbiAgICAgICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbWV0aG9kSW5mbyA9IGUuZGF0YVtcIm1ldGhvZEluZm9cIl07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VEYXRhID0gZS5kYXRhW1wibWVzc2FnZURhdGFcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHVpZCA9IG1ldGhvZEluZm8udWlkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjYWxsYmFjayA9IGNhbGxiYWNrc1t1aWRdOyAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG1lc3NhZ2VEYXRhLCBtZXRob2RJbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGNhbGxiYWNrc1t1aWRdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy53b3JrZXJzLnB1c2god29ya2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmluaXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwb3N0TWVzc2FnZSh1aWQ6IHN0cmluZywgbWV0aG9kTmFtZTogc3RyaW5nLCBtZXNzYWdlRGF0YSwgY2FsbGJhY2tJbmZvLCB3b3JrZXJJbmRleCkge1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIHdvcmtlckluZGV4ICE9PSBcIm51bWJlclwiIHx8IGlzTmFOKHdvcmtlckluZGV4KSB8fCB3b3JrZXJJbmRleCA+PSB0aGlzLndvcmtlcnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHdvcmtlckluZGV4ID0gdGhpcy5jdXJyZW50V29ya2VySW5kZXggPSAodGhpcy5jdXJyZW50V29ya2VySW5kZXggKyAxKSAlIHRoaXMud29ya2Vycy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbWV0aG9kSW5mbyA9IHtcclxuICAgICAgICAgICAgdWlkOiB1aWQsXHJcbiAgICAgICAgICAgIG1ldGhvZE5hbWU6IG1ldGhvZE5hbWUsXHJcbiAgICAgICAgICAgIHdvcmtlcklkOiB3b3JrZXJJbmRleFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChjYWxsYmFja0luZm8pIHtcclxuICAgICAgICAgICAgdGhpcy53b3JrZXJDYWxsYmFja1t1aWRdID0gY2FsbGJhY2tJbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBvc3RNZXNzYWdlID0ge1xyXG4gICAgICAgICAgICBtZXRob2RJbmZvOiBtZXRob2RJbmZvLFxyXG4gICAgICAgICAgICBtZXNzYWdlRGF0YTogbWVzc2FnZURhdGFcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMud29ya2Vyc1t3b3JrZXJJbmRleF0ucG9zdE1lc3NhZ2UocG9zdE1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybiB3b3JrZXJJbmRleDtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLndvcmtlckNhbGxiYWNrID0ge307XHJcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMud29ya2Vycy5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgdGhpcy53b3JrZXJzW2luZGV4XS50ZXJtaW5hdGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9